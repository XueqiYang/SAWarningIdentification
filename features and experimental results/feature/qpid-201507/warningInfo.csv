BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/framing/MethodRegistry.java,,40-561,[    {,         _protocolVersion = pv;,     }, ,     public void setProtocolVersion(final ProtocolVersion protocolVersion),     {,         _protocolVersion = protocolVersion;,     }, ,     public final AccessRequestBody createAccessRequestBody(final AMQShortString realm,,                                                            final boolean exclusive,,                                                            final boolean passive,,                                                            final boolean active,,                                                            final boolean write,,                                                            final boolean read),     {,         return new AccessRequestBody(realm,,                                      exclusive,,                                      passive,,                                      active,,                                      write,,                                      read);,     }, ,     public final AccessRequestOkBody createAccessRequestOkBody(final int ticket),     {,         return new AccessRequestOkBody(ticket);,     }, , ,     public final BasicQosBody createBasicQosBody(final long prefetchSize,,                                                  final int prefetchCount,,                                                  final boolean global),     {,         return new BasicQosBody(prefetchSize,,                                 prefetchCount,,                                 global);,     }, ,     public final BasicQosOkBody createBasicQosOkBody(),     {,         return new BasicQosOkBody();,     }, ,     public final BasicConsumeBody createBasicConsumeBody(final int ticket,,                                                          final String queue,,                                                          final String consumerTag,,                                                          final boolean noLocal,,                                                          final boolean noAck,,                                                          final boolean exclusive,,                                                          final boolean nowait,,                                                          final Map<String,Object> arguments),     {, ,         return new BasicConsumeBody(ticket,,                                     AMQShortString.valueOf(queue),,                                     AMQShortString.valueOf(consumerTag),,                                     noLocal,,                                     noAck,,                                     exclusive,,                                     nowait,,                                     FieldTable.convertToFieldTable(arguments));,     }, ,     public final BasicConsumeOkBody createBasicConsumeOkBody(final AMQShortString consumerTag),     {,         return new BasicConsumeOkBody(consumerTag);,     }, ,     public final BasicCancelBody createBasicCancelBody(final AMQShortString consumerTag,,                                                        final boolean nowait),     {,         return new BasicCancelBody(consumerTag,,                                    nowait);,     }, ,     public final BasicCancelOkBody createBasicCancelOkBody(final AMQShortString consumerTag),     {,         return new BasicCancelOkBody(consumerTag);,     }, ,     public final BasicPublishBody createBasicPublishBody(final int ticket,,                                                          final String exchange,,                                                          final String routingKey,,                                                          final boolean mandatory,,                                                          final boolean immediate),     {,         return new BasicPublishBody(ticket,,                                     AMQShortString.valueOf(exchange),,                                     AMQShortString.valueOf(routingKey),,                                     mandatory,,                                     immediate);,     }, ,     public final BasicReturnBody createBasicReturnBody(final int replyCode,,                                                        final AMQShortString replyText,,                                                        final AMQShortString exchange,,                                                        final AMQShortString routingKey),     {,         return new BasicReturnBody(replyCode,,                                    replyText,,                                    exchange,,                                    routingKey);,     }, ,     public final BasicDeliverBody createBasicDeliverBody(final AMQShortString consumerTag,,                                                          final long deliveryTag,,                                                          final boolean redelivered,,                                                          final AMQShortString exchange,,                                                          final AMQShortString routingKey),     {,         return new BasicDeliverBody(consumerTag,,                                     deliveryTag,,                                     redelivered,,                                     exchange,,                                     routingKey);,     }, ,     public final BasicGetBody createBasicGetBody(final int ticket,,                                                  final AMQShortString queue,,                                                  final boolean noAck),     {,         return new BasicGetBody(ticket,,                                 queue,,                                 noAck);,     }, ,     public final BasicGetOkBody createBasicGetOkBody(final long deliveryTag,,                                                      final boolean redelivered,,                                                      final AMQShortString exchange,,                                                      final AMQShortString routingKey,,                                                      final long messageCount),     {,         return new BasicGetOkBody(deliveryTag,,                                   redelivered,,                                   exchange,,                                   routingKey,,                                   messageCount);,     }, ,     public final BasicGetEmptyBody createBasicGetEmptyBody(final AMQShortString clusterId),     {,         return new BasicGetEmptyBody(clusterId);,     }, ,     public final BasicAckBody createBasicAckBody(final long deliveryTag,,                                                  final boolean multiple),     {,         return new BasicAckBody(deliveryTag,,                                 multiple);,     }, ,     public final BasicRejectBody createBasicRejectBody(final long deliveryTag,,                                                        final boolean requeue),     {,         return new BasicRejectBody(deliveryTag,,                                    requeue);,     }, ,     public final BasicRecoverBody createBasicRecoverBody(final boolean requeue),     {,         return new BasicRecoverBody(requeue);,     }, , ,     public final BasicRecoverSyncOkBody createBasicRecoverSyncOkBody(),     {,         return new BasicRecoverSyncOkBody(_protocolVersion);,     }, , ,     public final BasicRecoverSyncBody createBasicRecoverSyncBody(final boolean requeue),     {,         return new BasicRecoverSyncBody(_protocolVersion, requeue);,     }, ,     public final ChannelAlertBody createChannelAlertBody(final int replyCode,,                                                          final AMQShortString replyText,,                                                          final FieldTable details),     {,         return new ChannelAlertBody(replyCode,,                                     replyText,,                                     details);,     }, ,     public final ChannelOpenBody createChannelOpenBody(final AMQShortString outOfBand),     {,         return new ChannelOpenBody();,     }, ,     public final ChannelOpenOkBody createChannelOpenOkBody(byte[] channelId),     {,         return createChannelOpenOkBody();,     }, ,     public final ChannelOpenOkBody createChannelOpenOkBody(),     {,         return _protocolVersion.equals(ProtocolVersion.v0_8),                 ? ChannelOpenOkBody.INSTANCE_0_8,                 : ChannelOpenOkBody.INSTANCE_0_9;,     }, ,     public final ChannelFlowBody createChannelFlowBody(final boolean active),     {,         return new ChannelFlowBody(active);,     }, ,     public final ChannelFlowOkBody createChannelFlowOkBody(final boolean active),     {,         return new ChannelFlowOkBody(active);,     }, ,     public final ChannelCloseBody createChannelCloseBody(final int replyCode, final AMQShortString replyText,,                                                          final int classId,,                                                          final int methodId,                                                         ),     {,         return new ChannelCloseBody(replyCode,,                                     replyText,,                                     classId,,                                     methodId);,     }, ,     public final ChannelCloseOkBody createChannelCloseOkBody(),     {,         return ChannelCloseOkBody.INSTANCE;,     }, , , , ,     public final ConnectionStartBody createConnectionStartBody(final short versionMajor,,                                                                final short versionMinor,,                                                                final FieldTable serverProperties,,                                                                final byte[] mechanisms,,                                                                final byte[] locales),     {,         return new ConnectionStartBody(versionMajor,,                                        versionMinor,,                                        serverProperties,,                                        mechanisms,,                                        locales);,     }, ,     public final ConnectionStartOkBody createConnectionStartOkBody(final FieldTable clientProperties,,                                                                    final AMQShortString mechanism,,                                                                    final byte[] response,,                                                                    final AMQShortString locale),     {,         return new ConnectionStartOkBody(clientProperties,,                                          mechanism,,                                          response,,                                          locale);,     }, ,     public final ConnectionSecureBody createConnectionSecureBody(final byte[] challenge),     {,         return new ConnectionSecureBody(challenge);,     }, ,     public final ConnectionSecureOkBody createConnectionSecureOkBody(final byte[] response),     {,         return new ConnectionSecureOkBody(response);,     }, ,     public final ConnectionTuneBody createConnectionTuneBody(final int channelMax,,                                                              final long frameMax,,                                                              final int heartbeat),     {,         return new ConnectionTuneBody(channelMax,,                                       frameMax,,                                       heartbeat);,     }, ,     public final ConnectionTuneOkBody createConnectionTuneOkBody(final int channelMax,,                                                                  final long frameMax,,                                                                  final int heartbeat),     {,         return new ConnectionTuneOkBody(channelMax,,                                         frameMax,,                                         heartbeat);,     }, ,     public final ConnectionOpenBody createConnectionOpenBody(final AMQShortString virtualHost,,                                                              final AMQShortString capabilities,,                                                              final boolean insist),     {,         return new ConnectionOpenBody(virtualHost,,                                       capabilities,,                                       insist);,     }, ,     public final ConnectionOpenOkBody createConnectionOpenOkBody(final AMQShortString knownHosts),     {,         return new ConnectionOpenOkBody(knownHosts);,     }, ,     public final ConnectionRedirectBody createConnectionRedirectBody(final AMQShortString host,,                                                                          final AMQShortString knownHosts),     {,         return new ConnectionRedirectBody(_protocolVersion,,                                               host,,                                               knownHosts);,     }, ,     public final ConnectionCloseBody createConnectionCloseBody(final int replyCode,,                                                                    final AMQShortString replyText,,                                                                    final int classId,,                                                                    final int methodId),     {,         return new ConnectionCloseBody(_protocolVersion,,                                            replyCode,,                                            replyText,,                                            classId,,                                            methodId);,     }, ,     public final ConnectionCloseOkBody createConnectionCloseOkBody(),     {,         return ProtocolVersion.v0_8.equals(_protocolVersion),                 ? ConnectionCloseOkBody.CONNECTION_CLOSE_OK_0_8,                 : ConnectionCloseOkBody.CONNECTION_CLOSE_OK_0_9;,     }, , ,     public final ExchangeDeclareBody createExchangeDeclareBody(final int ticket,,                                                          final String exchange,,                                                          final String type,,                                                          final boolean passive,,                                                          final boolean durable,,                                                          final boolean autoDelete,,                                                          final boolean internal,,                                                          final boolean nowait,,                                                          final Map<String,Object> arguments),     {, ,         return new ExchangeDeclareBody(ticket,,                                        AMQShortString.valueOf(exchange),,                                        AMQShortString.valueOf(type),,                                        passive,,                                        durable,,                                        autoDelete,,                                        internal,,                                        nowait,,                                        FieldTable.convertToFieldTable(arguments));,     }, ,     public final ExchangeDeclareOkBody createExchangeDeclareOkBody(),     {,         return new ExchangeDeclareOkBody();,     }, ,     public final ExchangeDeleteBody createExchangeDeleteBody(final int ticket,,                                                              final String exchange,,                                                              final boolean ifUnused,,                                                              final boolean nowait),     {,         return new ExchangeDeleteBody(ticket,,                                       AMQShortString.valueOf(exchange),,                                       ifUnused,,                                       nowait,         );,     }, ,     public final ExchangeDeleteOkBody createExchangeDeleteOkBody(),     {,         return new ExchangeDeleteOkBody();,     }, ,     public final ExchangeBoundBody createExchangeBoundBody(final String exchange,,                                                            final String routingKey,,                                                            final String queue),     {,         return new ExchangeBoundBody(AMQShortString.valueOf(exchange),,                                      AMQShortString.valueOf(routingKey),,                                      AMQShortString.valueOf(queue));,     }, ,     public final ExchangeBoundOkBody createExchangeBoundOkBody(final int replyCode,,                                                          final AMQShortString replyText),     {,         return new ExchangeBoundOkBody(replyCode,,                                        replyText);,     }, , ,     public final QueueDeclareBody createQueueDeclareBody(final int ticket,,                                                          final String queue,,                                                          final boolean passive,,                                                          final boolean durable,,                                                          final boolean exclusive,,                                                          final boolean autoDelete,,                                                          final boolean nowait,,                                                          final Map<String,Object> arguments),     {, ,         return new QueueDeclareBody(ticket,,                                     AMQShortString.valueOf(queue),,                                     passive,,                                     durable,,                                     exclusive,,                                     autoDelete,,                                     nowait,,                                     FieldTable.convertToFieldTable(arguments));,     }, ,     public final QueueDeclareOkBody createQueueDeclareOkBody(final AMQShortString queue,,                                                        final long messageCount,,                                                        final long consumerCount),     {,         return new QueueDeclareOkBody(queue,,                                       messageCount,,                                       consumerCount);,     }, ,     public final QueueBindBody createQueueBindBody(final int ticket,,                                              final String queue,,                                              final String exchange,,                                              final String routingKey,,                                              final boolean nowait,,                                              final Map<String,Object> arguments),     {, ,         return new QueueBindBody(ticket,,                                  AMQShortString.valueOf(queue),,                                  AMQShortString.valueOf(exchange),,                                  AMQShortString.valueOf(routingKey),,                                  nowait,,                                  FieldTable.convertToFieldTable(arguments));, ,     }, , ,     public final QueueBindOkBody createQueueBindOkBody(),     {,         return new QueueBindOkBody();,     }, ,     public final QueuePurgeBody createQueuePurgeBody(final int ticket,,                                                final AMQShortString queue,,                                                final boolean nowait),     {,         return new QueuePurgeBody(ticket,,                                   queue,,                                   nowait);,     }, ,     public final QueuePurgeOkBody createQueuePurgeOkBody(final long messageCount),     {,         return new QueuePurgeOkBody(messageCount);,     }, ,     public final QueueDeleteBody createQueueDeleteBody(final int ticket,,                                                  final String queue,,                                                  final boolean ifUnused,,                                                  final boolean ifEmpty,,                                                  final boolean nowait),     {,         return new QueueDeleteBody(ticket,,                                    AMQShortString.valueOf(queue),,                                    ifUnused,,                                    ifEmpty,,                                    nowait);,     }, ,     public final QueueDeleteOkBody createQueueDeleteOkBody(final long messageCount),     {,         return new QueueDeleteOkBody(messageCount);,     }, ,     public final QueueUnbindBody createQueueUnbindBody(final int ticket,,                                                            final AMQShortString queue,,                                                            final AMQShortString exchange,,                                                            final AMQShortString routingKey,,                                                            final FieldTable arguments),     {,         return new QueueUnbindBody(ticket,,                                        queue,,                                        exchange,,                                        routingKey,,                                        arguments);,     }, ,     public final QueueUnbindOkBody createQueueUnbindOkBody(),     {,         return new QueueUnbindOkBody();,     }, , ,     public final TxSelectBody createTxSelectBody(),     {,         return TxSelectBody.INSTANCE;,     }, ,     public final TxSelectOkBody createTxSelectOkBody(),     {,         return TxSelectOkBody.INSTANCE;,     }, ,     public final TxCommitBody createTxCommitBody(),     {,         return TxCommitBody.INSTANCE;,     }, ,     public final TxCommitOkBody createTxCommitOkBody(),     {,         return TxCommitOkBody.INSTANCE;,     }, ,     public final TxRollbackBody createTxRollbackBody(),     {,         return TxRollbackBody.INSTANCE;,     }, ,     public final TxRollbackOkBody createTxRollbackOkBody(),     {,         return TxRollbackOkBody.INSTANCE;,     }, ,     public ProtocolVersion getProtocolVersion(),     {,         return _protocolVersion;],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/framing/MethodRegistry.java,,40-561,[    {,         _protocolVersion = pv;,     }, ,     public void setProtocolVersion(final ProtocolVersion protocolVersion),     {,         _protocolVersion = protocolVersion;,     }, ,     public final AccessRequestBody createAccessRequestBody(final AMQShortString realm,,                                                            final boolean exclusive,,                                                            final boolean passive,,                                                            final boolean active,,                                                            final boolean write,,                                                            final boolean read),     {,         return new AccessRequestBody(realm,,                                      exclusive,,                                      passive,,                                      active,,                                      write,,                                      read);,     }, ,     public final AccessRequestOkBody createAccessRequestOkBody(final int ticket),     {,         return new AccessRequestOkBody(ticket);,     }, , ,     public final BasicQosBody createBasicQosBody(final long prefetchSize,,                                                  final int prefetchCount,,                                                  final boolean global),     {,         return new BasicQosBody(prefetchSize,,                                 prefetchCount,,                                 global);,     }, ,     public final BasicQosOkBody createBasicQosOkBody(),     {,         return new BasicQosOkBody();,     }, ,     public final BasicConsumeBody createBasicConsumeBody(final int ticket,,                                                          final String queue,,                                                          final String consumerTag,,                                                          final boolean noLocal,,                                                          final boolean noAck,,                                                          final boolean exclusive,,                                                          final boolean nowait,,                                                          final Map<String,Object> arguments),     {, ,         return new BasicConsumeBody(ticket,,                                     AMQShortString.valueOf(queue),,                                     AMQShortString.valueOf(consumerTag),,                                     noLocal,,                                     noAck,,                                     exclusive,,                                     nowait,,                                     FieldTable.convertToFieldTable(arguments));,     }, ,     public final BasicConsumeOkBody createBasicConsumeOkBody(final AMQShortString consumerTag),     {,         return new BasicConsumeOkBody(consumerTag);,     }, ,     public final BasicCancelBody createBasicCancelBody(final AMQShortString consumerTag,,                                                        final boolean nowait),     {,         return new BasicCancelBody(consumerTag,,                                    nowait);,     }, ,     public final BasicCancelOkBody createBasicCancelOkBody(final AMQShortString consumerTag),     {,         return new BasicCancelOkBody(consumerTag);,     }, ,     public final BasicPublishBody createBasicPublishBody(final int ticket,,                                                          final String exchange,,                                                          final String routingKey,,                                                          final boolean mandatory,,                                                          final boolean immediate),     {,         return new BasicPublishBody(ticket,,                                     AMQShortString.valueOf(exchange),,                                     AMQShortString.valueOf(routingKey),,                                     mandatory,,                                     immediate);,     }, ,     public final BasicReturnBody createBasicReturnBody(final int replyCode,,                                                        final AMQShortString replyText,,                                                        final AMQShortString exchange,,                                                        final AMQShortString routingKey),     {,         return new BasicReturnBody(replyCode,,                                    replyText,,                                    exchange,,                                    routingKey);,     }, ,     public final BasicDeliverBody createBasicDeliverBody(final AMQShortString consumerTag,,                                                          final long deliveryTag,,                                                          final boolean redelivered,,                                                          final AMQShortString exchange,,                                                          final AMQShortString routingKey),     {,         return new BasicDeliverBody(consumerTag,,                                     deliveryTag,,                                     redelivered,,                                     exchange,,                                     routingKey);,     }, ,     public final BasicGetBody createBasicGetBody(final int ticket,,                                                  final AMQShortString queue,,                                                  final boolean noAck),     {,         return new BasicGetBody(ticket,,                                 queue,,                                 noAck);,     }, ,     public final BasicGetOkBody createBasicGetOkBody(final long deliveryTag,,                                                      final boolean redelivered,,                                                      final AMQShortString exchange,,                                                      final AMQShortString routingKey,,                                                      final long messageCount),     {,         return new BasicGetOkBody(deliveryTag,,                                   redelivered,,                                   exchange,,                                   routingKey,,                                   messageCount);,     }, ,     public final BasicGetEmptyBody createBasicGetEmptyBody(final AMQShortString clusterId),     {,         return new BasicGetEmptyBody(clusterId);,     }, ,     public final BasicAckBody createBasicAckBody(final long deliveryTag,,                                                  final boolean multiple),     {,         return new BasicAckBody(deliveryTag,,                                 multiple);,     }, ,     public final BasicRejectBody createBasicRejectBody(final long deliveryTag,,                                                        final boolean requeue),     {,         return new BasicRejectBody(deliveryTag,,                                    requeue);,     }, ,     public final BasicRecoverBody createBasicRecoverBody(final boolean requeue),     {,         return new BasicRecoverBody(requeue);,     }, , ,     public final BasicRecoverSyncOkBody createBasicRecoverSyncOkBody(),     {,         return new BasicRecoverSyncOkBody(_protocolVersion);,     }, , ,     public final BasicRecoverSyncBody createBasicRecoverSyncBody(final boolean requeue),     {,         return new BasicRecoverSyncBody(_protocolVersion, requeue);,     }, ,     public final ChannelAlertBody createChannelAlertBody(final int replyCode,,                                                          final AMQShortString replyText,,                                                          final FieldTable details),     {,         return new ChannelAlertBody(replyCode,,                                     replyText,,                                     details);,     }, ,     public final ChannelOpenBody createChannelOpenBody(final AMQShortString outOfBand),     {,         return new ChannelOpenBody();,     }, ,     public final ChannelOpenOkBody createChannelOpenOkBody(byte[] channelId),     {,         return createChannelOpenOkBody();,     }, ,     public final ChannelOpenOkBody createChannelOpenOkBody(),     {,         return _protocolVersion.equals(ProtocolVersion.v0_8),                 ? ChannelOpenOkBody.INSTANCE_0_8,                 : ChannelOpenOkBody.INSTANCE_0_9;,     }, ,     public final ChannelFlowBody createChannelFlowBody(final boolean active),     {,         return new ChannelFlowBody(active);,     }, ,     public final ChannelFlowOkBody createChannelFlowOkBody(final boolean active),     {,         return new ChannelFlowOkBody(active);,     }, ,     public final ChannelCloseBody createChannelCloseBody(final int replyCode, final AMQShortString replyText,,                                                          final int classId,,                                                          final int methodId,                                                         ),     {,         return new ChannelCloseBody(replyCode,,                                     replyText,,                                     classId,,                                     methodId);,     }, ,     public final ChannelCloseOkBody createChannelCloseOkBody(),     {,         return ChannelCloseOkBody.INSTANCE;,     }, , , , ,     public final ConnectionStartBody createConnectionStartBody(final short versionMajor,,                                                                final short versionMinor,,                                                                final FieldTable serverProperties,,                                                                final byte[] mechanisms,,                                                                final byte[] locales),     {,         return new ConnectionStartBody(versionMajor,,                                        versionMinor,,                                        serverProperties,,                                        mechanisms,,                                        locales);,     }, ,     public final ConnectionStartOkBody createConnectionStartOkBody(final FieldTable clientProperties,,                                                                    final AMQShortString mechanism,,                                                                    final byte[] response,,                                                                    final AMQShortString locale),     {,         return new ConnectionStartOkBody(clientProperties,,                                          mechanism,,                                          response,,                                          locale);,     }, ,     public final ConnectionSecureBody createConnectionSecureBody(final byte[] challenge),     {,         return new ConnectionSecureBody(challenge);,     }, ,     public final ConnectionSecureOkBody createConnectionSecureOkBody(final byte[] response),     {,         return new ConnectionSecureOkBody(response);,     }, ,     public final ConnectionTuneBody createConnectionTuneBody(final int channelMax,,                                                              final long frameMax,,                                                              final int heartbeat),     {,         return new ConnectionTuneBody(channelMax,,                                       frameMax,,                                       heartbeat);,     }, ,     public final ConnectionTuneOkBody createConnectionTuneOkBody(final int channelMax,,                                                                  final long frameMax,,                                                                  final int heartbeat),     {,         return new ConnectionTuneOkBody(channelMax,,                                         frameMax,,                                         heartbeat);,     }, ,     public final ConnectionOpenBody createConnectionOpenBody(final AMQShortString virtualHost,,                                                              final AMQShortString capabilities,,                                                              final boolean insist),     {,         return new ConnectionOpenBody(virtualHost,,                                       capabilities,,                                       insist);,     }, ,     public final ConnectionOpenOkBody createConnectionOpenOkBody(final AMQShortString knownHosts),     {,         return new ConnectionOpenOkBody(knownHosts);,     }, ,     public final ConnectionRedirectBody createConnectionRedirectBody(final AMQShortString host,,                                                                          final AMQShortString knownHosts),     {,         return new ConnectionRedirectBody(_protocolVersion,,                                               host,,                                               knownHosts);,     }, ,     public final ConnectionCloseBody createConnectionCloseBody(final int replyCode,,                                                                    final AMQShortString replyText,,                                                                    final int classId,,                                                                    final int methodId),     {,         return new ConnectionCloseBody(_protocolVersion,,                                            replyCode,,                                            replyText,,                                            classId,,                                            methodId);,     }, ,     public final ConnectionCloseOkBody createConnectionCloseOkBody(),     {,         return ProtocolVersion.v0_8.equals(_protocolVersion),                 ? ConnectionCloseOkBody.CONNECTION_CLOSE_OK_0_8,                 : ConnectionCloseOkBody.CONNECTION_CLOSE_OK_0_9;,     }, , ,     public final ExchangeDeclareBody createExchangeDeclareBody(final int ticket,,                                                          final String exchange,,                                                          final String type,,                                                          final boolean passive,,                                                          final boolean durable,,                                                          final boolean autoDelete,,                                                          final boolean internal,,                                                          final boolean nowait,,                                                          final Map<String,Object> arguments),     {, ,         return new ExchangeDeclareBody(ticket,,                                        AMQShortString.valueOf(exchange),,                                        AMQShortString.valueOf(type),,                                        passive,,                                        durable,,                                        autoDelete,,                                        internal,,                                        nowait,,                                        FieldTable.convertToFieldTable(arguments));,     }, ,     public final ExchangeDeclareOkBody createExchangeDeclareOkBody(),     {,         return new ExchangeDeclareOkBody();,     }, ,     public final ExchangeDeleteBody createExchangeDeleteBody(final int ticket,,                                                              final String exchange,,                                                              final boolean ifUnused,,                                                              final boolean nowait),     {,         return new ExchangeDeleteBody(ticket,,                                       AMQShortString.valueOf(exchange),,                                       ifUnused,,                                       nowait,         );,     }, ,     public final ExchangeDeleteOkBody createExchangeDeleteOkBody(),     {,         return new ExchangeDeleteOkBody();,     }, ,     public final ExchangeBoundBody createExchangeBoundBody(final String exchange,,                                                            final String routingKey,,                                                            final String queue),     {,         return new ExchangeBoundBody(AMQShortString.valueOf(exchange),,                                      AMQShortString.valueOf(routingKey),,                                      AMQShortString.valueOf(queue));,     }, ,     public final ExchangeBoundOkBody createExchangeBoundOkBody(final int replyCode,,                                                          final AMQShortString replyText),     {,         return new ExchangeBoundOkBody(replyCode,,                                        replyText);,     }, , ,     public final QueueDeclareBody createQueueDeclareBody(final int ticket,,                                                          final String queue,,                                                          final boolean passive,,                                                          final boolean durable,,                                                          final boolean exclusive,,                                                          final boolean autoDelete,,                                                          final boolean nowait,,                                                          final Map<String,Object> arguments),     {, ,         return new QueueDeclareBody(ticket,,                                     AMQShortString.valueOf(queue),,                                     passive,,                                     durable,,                                     exclusive,,                                     autoDelete,,                                     nowait,,                                     FieldTable.convertToFieldTable(arguments));,     }, ,     public final QueueDeclareOkBody createQueueDeclareOkBody(final AMQShortString queue,,                                                        final long messageCount,,                                                        final long consumerCount),     {,         return new QueueDeclareOkBody(queue,,                                       messageCount,,                                       consumerCount);,     }, ,     public final QueueBindBody createQueueBindBody(final int ticket,,                                              final String queue,,                                              final String exchange,,                                              final String routingKey,,                                              final boolean nowait,,                                              final Map<String,Object> arguments),     {, ,         return new QueueBindBody(ticket,,                                  AMQShortString.valueOf(queue),,                                  AMQShortString.valueOf(exchange),,                                  AMQShortString.valueOf(routingKey),,                                  nowait,,                                  FieldTable.convertToFieldTable(arguments));, ,     }, , ,     public final QueueBindOkBody createQueueBindOkBody(),     {,         return new QueueBindOkBody();,     }, ,     public final QueuePurgeBody createQueuePurgeBody(final int ticket,,                                                final AMQShortString queue,,                                                final boolean nowait),     {,         return new QueuePurgeBody(ticket,,                                   queue,,                                   nowait);,     }, ,     public final QueuePurgeOkBody createQueuePurgeOkBody(final long messageCount),     {,         return new QueuePurgeOkBody(messageCount);,     }, ,     public final QueueDeleteBody createQueueDeleteBody(final int ticket,,                                                  final String queue,,                                                  final boolean ifUnused,,                                                  final boolean ifEmpty,,                                                  final boolean nowait),     {,         return new QueueDeleteBody(ticket,,                                    AMQShortString.valueOf(queue),,                                    ifUnused,,                                    ifEmpty,,                                    nowait);,     }, ,     public final QueueDeleteOkBody createQueueDeleteOkBody(final long messageCount),     {,         return new QueueDeleteOkBody(messageCount);,     }, ,     public final QueueUnbindBody createQueueUnbindBody(final int ticket,,                                                            final AMQShortString queue,,                                                            final AMQShortString exchange,,                                                            final AMQShortString routingKey,,                                                            final FieldTable arguments),     {,         return new QueueUnbindBody(ticket,,                                        queue,,                                        exchange,,                                        routingKey,,                                        arguments);,     }, ,     public final QueueUnbindOkBody createQueueUnbindOkBody(),     {,         return new QueueUnbindOkBody();,     }, , ,     public final TxSelectBody createTxSelectBody(),     {,         return TxSelectBody.INSTANCE;,     }, ,     public final TxSelectOkBody createTxSelectOkBody(),     {,         return TxSelectOkBody.INSTANCE;,     }, ,     public final TxCommitBody createTxCommitBody(),     {,         return TxCommitBody.INSTANCE;,     }, ,     public final TxCommitOkBody createTxCommitOkBody(),     {,         return TxCommitOkBody.INSTANCE;,     }, ,     public final TxRollbackBody createTxRollbackBody(),     {,         return TxRollbackBody.INSTANCE;,     }, ,     public final TxRollbackOkBody createTxRollbackOkBody(),     {,         return TxRollbackOkBody.INSTANCE;,     }, ,     public ProtocolVersion getProtocolVersion(),     {,         return _protocolVersion;],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/AMQException.java,cloneForCurrentThread,126-126,[        catch (Exception creationException)],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/protocol/AMQConstant.java,,43-225,[    private static Map<Integer, AMQConstant> _codeMap = new HashMap<Integer, AMQConstant>();, ,     /** Indicates that the method completed successfully. */,     public static final AMQConstant REPLY_SUCCESS = new AMQConstant(200, "reply success", true);, ,     public static final AMQConstant FRAME_END = new AMQConstant(206, "frame end", true);, ,     /**,      * The client asked for a specific message that is no longer available. The message was delivered to another,      * client, or was purged from the queue for some other reason.,      */,     public static final AMQConstant NOT_DELIVERED = new AMQConstant(310, "not delivered", true);, ,     /**,      * The client attempted to transfer content larger than the server could accept at the present time.  The client,      * may retry at a later time.,      */,     public static final AMQConstant MESSAGE_TOO_LARGE = new AMQConstant(311, "message too large", true);, ,     /**,      * When the exchange cannot route the result of a .Publish, most likely due to an invalid routing key. Only when,      * the mandatory flag is set.,      */,     public static final AMQConstant NO_ROUTE = new AMQConstant(312, "no route", true);, ,     /**,      * When the exchange cannot deliver to a consumer when the immediate flag is set. As a result of pending data on,      * the queue or the absence of any consumers of the queue.,      */,     public static final AMQConstant NO_CONSUMERS = new AMQConstant(313, "no consumers", true);, ,     /**,      * An operator intervened to close the connection for some reason. The client may retry at some later date.,      */,     public static final AMQConstant CONNECTION_FORCED = new AMQConstant(320, "connection forced", true);, ,     /** The client tried to work with an unknown virtual host or cluster. */,     public static final AMQConstant INVALID_PATH = new AMQConstant(402, "invalid path", true);, ,     /** The client attempted to work with a server entity to which it has no access due to security settings. */,     public static final AMQConstant ACCESS_REFUSED = new AMQConstant(403, "access refused", true);, ,     /** The client attempted to work with a server entity that does not exist. */,     public static final AMQConstant NOT_FOUND = new AMQConstant(404, "not found", true);, ,     /**,      * The client attempted to work with a server entity to which it has no access because another client is,      * working with it.,      */,     public static final AMQConstant ALREADY_EXISTS = new AMQConstant(405, "Already exists", true);, ,     /** The client requested a method that was not allowed because some precondition failed. */,     public static final AMQConstant IN_USE = new AMQConstant(406, "In use", true);, ,     public static final AMQConstant INVALID_ROUTING_KEY = new AMQConstant(407, "routing key invalid", true);, ,     public static final AMQConstant REQUEST_TIMEOUT = new AMQConstant(408, "Request Timeout", true);, ,     public static final AMQConstant ARGUMENT_INVALID = new AMQConstant(409, "argument invalid", true);, ,     /**,      * The client sent a malformed frame that the server could not decode. This strongly implies a programming error,      * in the client.,      */,     public static final AMQConstant FRAME_ERROR = new AMQConstant(501, "frame error", true);, ,     /**,      * The client sent a frame that contained illegal values for one or more fields. This strongly implies a,      * programming error in the client.,      */,     public static final AMQConstant SYNTAX_ERROR = new AMQConstant(502, "syntax error", true);, ,     /**,      * The client sent an invalid sequence of frames, attempting to perform an operation that was considered invalid,      * by the server. This usually implies a programming error in the client.,      */,     public static final AMQConstant COMMAND_INVALID = new AMQConstant(503, "command invalid", true);, ,     /**,      * The client attempted to work with a channel that had not been correctly opened. This most likely indicates a,      * fault in the client layer.,      */,     public static final AMQConstant CHANNEL_ERROR = new AMQConstant(504, "channel error", true);, ,     /**,      * The server could not complete the method because it lacked sufficient resources. This may be due to the client,      * creating too many of some type of entity.,      */,     public static final AMQConstant RESOURCE_ERROR = new AMQConstant(506, "resource error", true);, ,     /**,      * The client tried to work with some entity in a manner that is prohibited by the server, due to security settings,      * or by some other criteria.,      */,     public static final AMQConstant NOT_ALLOWED = new AMQConstant(530, "not allowed", true);, ,     /** The client tried to use functionality that is not implemented in the server. */,     public static final AMQConstant NOT_IMPLEMENTED = new AMQConstant(540, "not implemented", true);, ,     /**,      * The server could not complete the method because of an internal error. The server may require intervention by,      * an operator in order to resume normal operations.,      */,     public static final AMQConstant INTERNAL_ERROR = new AMQConstant(541, "internal error", true);, ,     public static final AMQConstant FRAME_MIN_SIZE = new AMQConstant(4096, "frame min size", true);, ,     public static final AMQConstant INVALID_ARGUMENT = new AMQConstant(542, "invalid argument", true);,     /**,      * The client imp does not support the protocol version,      */,     public static final AMQConstant UNSUPPORTED_CLIENT_PROTOCOL_ERROR = new AMQConstant(543, "client unsupported protocol", true);, ,     /** The AMQP status code. */,     private int _code;, ,     /** A short description of the status code. */,     private AMQShortString _name;, ,     /**,      * Creates a new AMQP status code.,      *,      * @param code The code.,      * @param name A short description of the code.,      * @param map  <tt>true</tt> to register the code as a known code, <tt>false</tt> otherwise.,      */,     private AMQConstant(int code, String name, boolean map),     {,         _code = code;,         _name = new AMQShortString(name);,         if (map),         {,             _codeMap.put(Integer.valueOf(code), this);,         },     }, ,     /**,      * Creates a constant for a status code by looking up the code in the map of known codes. If the code is not known,      * a constant is still created for it, but it is marked as unknown.,      *,      * @param code The AMQP status code.,      *,      * @return The AMQP status code encapsulated as a constant.,      */,     public static AMQConstant getConstant(int code),     {,         AMQConstant c = _codeMap.get(Integer.valueOf(code));,         if (c == null),         {,             c = new AMQConstant(code, "unknown code", false);,         }, ,         return c;,     }, ,     /**,      * Gets the underlying AMQP status code.,      *,      * @return The AMQP status code.,      */,     public int getCode(),     {,         return _code;,     }, ,     /**,      * Gets a short description of the status code.,      *,      * @return A short description of the status code.,      */,     public AMQShortString getName(),     {,         return _name;,     }, ,     /**,      * Renders the constant as a string, mainly for debugging purposes.,      *,      * @return The status code and its description.,      */,     public String toString(),     {,         return _code + ": " + _name;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/AMQExceptionTest.java,,114-116,[        {,             super(null, msg, null);,         }],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/AbstractDescribedTypeWriter.java,writeToBuffer,68-76,[                        _delegate = createDescriptorWriter();,                     },                     else,                     {,                         break;,                     }, ,                 case DESCRIPTOR:,                     if(buffer.hasRemaining())],,writeToBuffer,82-90,[                            _delegate = createDescribedWriter();,                         },                         else,                         {,                             break;,                         },                     },                 case DESCRIBED:,                     if(buffer.hasRemaining())],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/AbstractDescribedTypeWriter.java,writeToBuffer,61-96,[            switch(state),             {,                 case FORMAT_CODE:,                     if(buffer.hasRemaining()),                     {,                         buffer.put(DESCRIBED_TYPE);,                         state = State.DESCRIPTOR;,                         _delegate = createDescriptorWriter();,                     },                     else,                     {,                         break;,                     }, ,                 case DESCRIPTOR:,                     if(buffer.hasRemaining()),                     {,                         _delegate.writeToBuffer(buffer);,                         if(_delegate.isComplete()),                         {,                             state = State.DESCRIBED;,                             _delegate = createDescribedWriter();,                         },                         else,                         {,                             break;,                         },                     },                 case DESCRIBED:,                     if(buffer.hasRemaining()),                     {,                         _delegate.writeToBuffer(buffer);,                         if(_delegate.isComplete()),                         {,                             state = State.DONE;,                             _delegate = null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/amqp_1_0/codec/ArrayTypeConstructor.java,construct,61-61,[            return null;],,
PERFORMANCE,URF_UNREAD_FIELD,org/apache/qpid/amqp_1_0/codec/ArrayWriter.java,,49-49,[    private static Factory<Object[]> FACTORY = new Factory<Object[]>()],,
STYLE,NS_NON_SHORT_CIRCUIT,org/apache/qpid/amqp_1_0/codec/BooleanWriter.java,writeToBuffer,33-33,[        if(!_complete & buffer.hasRemaining())],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/ByteWriter.java,writeToBuffer,39-46,[                    buffer.put((byte)0x51);,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(buffer.hasRemaining())],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/ByteWriter.java,writeToBuffer,34-53,[        switch(_written),         {,             case 0:,                 if(buffer.hasRemaining()),                 {,                     buffer.put((byte)0x51);,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(_value);,                     _written = 2;,                 },                 else,                 {,                     _written = 1;],,
CORRECTNESS,NP_NULL_ON_SOME_PATH,org/apache/qpid/amqp_1_0/codec/CompoundWriter.java,writeFirstPass,311-311,[            length += writer.writeToBuffer(buffer);],,writeFirstPass,306-306,[            if(writer == null)],,writeFirstPass,309-309,[                System.out.println("no writer for " + val);],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/CompoundWriter.java,writeToBuffer,87-95,[                        state = State.SIZE_0;,                     },                     else,                     {,                         break;,                     }, ,                 case SIZE_0:,                     if(size == 4)],,writeToBuffer,108-118,[                            state = State.COUNT_0;,                         },                         else,                         {,                             break;,                         }, ,                     },                 case SIZE_1:,                 case SIZE_2:,                     if(state != State.COUNT_0 && buffer.remaining() >= 2)],,writeToBuffer,121-128,[                        state = (state == State.SIZE_0),                                  ? State.SIZE_2,                                  : (state == State.SIZE_1),                                     ? State.SIZE_3,                                     : State.COUNT_0;,                     },                 case SIZE_3:,                     if(state != State.COUNT_0 && buffer.hasRemaining())],,writeToBuffer,131-140,[                        state = (state == State.SIZE_0),                                  ? State.SIZE_1,                                  : (state == State.SIZE_1),                                     ? State.SIZE_2,                                     : (state == State.SIZE_2),                                       ? State.SIZE_3,                                       : State.COUNT_0;,                     },                 case COUNT_0:,                     if(size == 4)],,writeToBuffer,153-164,[                            state = State.DELEGATING;,                         },                         else,                         {,                             break;,                         }, ,                     }, ,                 case COUNT_1:,                 case COUNT_2:,                     if(state != State.DELEGATING && buffer.remaining() >= 2)],,writeToBuffer,167-174,[                        state = state == State.COUNT_0,                                  ? State.COUNT_2,                                  : state == State.COUNT_1,                                     ? State.COUNT_3,                                     : State.DELEGATING;,                     },                 case COUNT_3:,                     if(state != State.DELEGATING && buffer.hasRemaining())],,writeToBuffer,177-186,[                        state = state == State.COUNT_0,                                  ? State.COUNT_1,                                  : state == State.COUNT_1,                                     ? State.COUNT_2,                                     : state == State.COUNT_2,                                        ? State.COUNT_3,                                        : State.DELEGATING;,                     },                 case DELEGATING:,                     while(state == State.DELEGATING && buffer.hasRemaining())],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/amqp_1_0/codec/DefaultDescribedTypeConstructor.java,main,48-48,[        LineNumberReader reader = new LineNumberReader(new InputStreamReader(System.in));],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/FixedEightWriter.java,writeToBuffer,42-49,[                    written = 1;,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(remaining>=8)],,writeToBuffer,63-67,[                    written+=4;,                 },             case 6:,             case 7:,                 if(remaining >= 2 && written <= 7)],,writeToBuffer,71-74,[                    written += 2;,                 },             case 8:,                 if(remaining >=1 && written != 9)],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/FixedEightWriter.java,writeToBuffer,35-77,[        switch(written),         {,             case 0:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(getFormatCode());,                     remaining--;,                     written = 1;,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(remaining>=8),                 {,                     buffer.putLong(_value);,                     written = 9;,                     break;,                 },             case 2:,             case 3:,             case 4:,             case 5:,                 if(remaining >= 4),                 {,                     buffer.putInt((int)((_value >> ((5-written)<<3)) & 0xFFFFFFFF ));,                     remaining-=4;,                     written+=4;,                 },             case 6:,             case 7:,                 if(remaining >= 2 && written <= 7),                 {,                     buffer.putShort((short)((_value >> ((7-written)<<3)) & 0xFFFF ));,                     remaining -= 2;,                     written += 2;,                 },             case 8:,                 if(remaining >=1 && written != 9),                 {,                     buffer.put((byte)((_value >> ((8-written)<<3)) & 0xFF ));,                     written++;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/FixedFourWriter.java,writeToBuffer,41-48,[                    written = 1;,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(remaining>=4)],,writeToBuffer,57-64,[                    written = 2;,                 },                 else,                 {,                     break;,                 },             case 2:,                 if(remaining-- != 0)],,writeToBuffer,67-74,[                    written = 3;,                 },                 else,                 {,                     break;,                 },             case 3:,                 if(remaining-- != 0)],,writeToBuffer,77-84,[                    written = 4;,                 },                 else,                 {,                     break;,                 },             case 4:,                 if(remaining-- != 0)],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/FixedFourWriter.java,writeToBuffer,35-87,[        switch(written),         {,             case 0:,                 if(remaining-- != 0),                 {,                     buffer.put(getFormatCode());,                     written = 1;,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(remaining>=4),                 {,                     buffer.putInt(_value);,                     written = 5;,                     break;,                 },                 else if(remaining-- != 0),                 {,                     buffer.put((byte)((_value >> 24)&0xFF));,                     written = 2;,                 },                 else,                 {,                     break;,                 },             case 2:,                 if(remaining-- != 0),                 {,                     buffer.put((byte)((_value >> 16)&0xFF));,                     written = 3;,                 },                 else,                 {,                     break;,                 },             case 3:,                 if(remaining-- != 0),                 {,                     buffer.put((byte)((_value >> 8)&0xFF));,                     written = 4;,                 },                 else,                 {,                     break;,                 },             case 4:,                 if(remaining-- != 0),                 {,                     buffer.put((byte)(_value&0xFF));,                     written = 5;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/FixedOneWriter.java,writeToBuffer,38-45,[                    buffer.put(getFormatCode());,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(buffer.hasRemaining())],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/FixedOneWriter.java,writeToBuffer,33-52,[        switch(_written),         {,             case 0:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(getFormatCode());,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(_value);,                     _written = 2;,                 },                 else,                 {,                     _written = 1;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/FixedSixteenWriter.java,writeToBuffer,43-50,[                    written = 1;,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(remaining>=8)],,writeToBuffer,64-68,[                    written+=4;,                 },             case 6:,             case 7:,                 if(remaining >= 2 && written <= 7)],,writeToBuffer,72-75,[                    written += 2;,                 },             case 8:,                 if(remaining >=1 && written != 9)],,writeToBuffer,102-106,[                        written+=4;,                     },                 case 14:,                 case 15:,                     if(remaining >= 2 && written <= 15)],,writeToBuffer,110-113,[                        written += 2;,                     },                 case 16:,                     if(remaining >=1 && written != 17)],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/FixedSixteenWriter.java,writeToBuffer,36-78,[        switch(written),         {,             case 0:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(getFormatCode());,                     remaining--;,                     written = 1;,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(remaining>=8),                 {,                     buffer.putLong(_msb);,                     written = 9;,                     break;,                 },             case 2:,             case 3:,             case 4:,             case 5:,                 if(remaining >= 4),                 {,                     buffer.putInt((int)((_msb >> ((5-written)<<3)) & 0xFFFFFFFF ));,                     remaining-=4;,                     written+=4;,                 },             case 6:,             case 7:,                 if(remaining >= 2 && written <= 7),                 {,                     buffer.putShort((short)((_msb >> ((7-written)<<3)) & 0xFFFF ));,                     remaining -= 2;,                     written += 2;,                 },             case 8:,                 if(remaining >=1 && written != 9),                 {,                     buffer.put((byte)((_msb >> ((8-written)<<3)) & 0xFF ));,                     written++;],,writeToBuffer,85-116,[            switch(written),             {,                 case 9:,                     if(remaining>=8),                     {,                         buffer.putLong(_lsb);,                         written = 17;,                         break;,                     },                 case 10:,                 case 11:,                 case 12:,                 case 13:,                     if(remaining >= 4),                     {,                         buffer.putInt((int)((_lsb >> ((13-written)<<3)) & 0xFFFFFFFF ));,                         remaining-=4;,                         written+=4;,                     },                 case 14:,                 case 15:,                     if(remaining >= 2 && written <= 15),                     {,                         buffer.putShort((short)((_lsb >> ((15-written)<<3)) & 0xFFFF ));,                         remaining -= 2;,                         written += 2;,                     },                 case 16:,                     if(remaining >=1 && written != 17),                     {,                         buffer.put((byte)((_msb >> ((16-written)<<3)) & 0xFF ));,                         written++;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/FixedTwoWriter.java,writeToBuffer,39-47,[                    buffer.put(getFormatCode());,                 },                 else,                 {,                     break;,                 },             case 1:, ,                 if(buffer.remaining()>1)],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/FixedTwoWriter.java,writeToBuffer,34-65,[        switch(_written),         {,             case 0:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(getFormatCode());,                 },                 else,                 {,                     break;,                 },             case 1:, ,                 if(buffer.remaining()>1),                 {,                     buffer.putShort(_value);,                     _written = 3;,                 },                 else if(buffer.hasRemaining()),                 {,                     buffer.put((byte) (0xFF & (_value >> 8)));,                     _written = 2;,                 },                 else,                 {,                     _written = 1;,                 },                 break;,             case 2:,                 if(buffer.hasRemaining()),                 {,                     buffer.put((byte)(0xFF & _value));],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/FrameWriter.java,writeToBuffer,207-214,[                        _typeWriter = null;,                     },                     else,                     {,                         break;,                     },                 case PAYLOAD:,                     if(_payload == null || _payload.remaining() == 0)],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/FrameWriter.java,writeToBuffer,76-230,[            switch(_state),             {,                 case SIZE_0:, ,                     int payloadLength = _payload == null ? 0 : _payload.remaining();, ,                     if(_typeWriter!=null),                     {,                         _typeWriter.setValue(_frame.getFrameBody());, , ,                         _size = _typeWriter.writeToBuffer(remaining > 8,                                                           ? (ByteBuffer)buffer.duplicate().position(buffer.position()+8),                                                           : ByteBuffer.wrap(EMPTY_BYTE_ARRAY)) + 8 + payloadLength;,                     },                     else,                     {,                         _size = 8 + payloadLength;,                     },                     if(remaining >= 4),                     {,                         buffer.putInt(_size);, ,                         if(remaining >= 8),                         {,                             buffer.put((byte)2); // DOFF,                             buffer.put(_frame.getFrameType()); // AMQP Frame Type,                             buffer.putShort(_frame.getChannel());, ,                             if(_size - payloadLength > remaining),                             {,                                 buffer.position(buffer.limit());,                                 _state = State.DELEGATE;,                             },                             else if(_size > remaining ),                             {,                                 buffer.position(buffer.position()+_size-8-payloadLength);,                                 if(payloadLength > 0),                                 {, ,                                     ByteBuffer dup = _payload.slice();,                                     int payloadUsed = buffer.remaining();,                                     dup.limit(payloadUsed);,                                     buffer.put(dup);,                                     _payload.position(_payload.position()+payloadUsed);,                                 },                                 _state = State.PAYLOAD;,                             },                             else,                             {, ,                                 buffer.position(buffer.position()+_size-8-payloadLength);,                                 if(payloadLength > 0),                                 {,                                     buffer.put(_payload);,                                 },                                 _state = State.DONE;,                             }, ,                         },                         else,                         {,                             _state = State.DOFF;,                         },                         break;,                     },                     else,                     {,                         buffer.put((byte)((_size >> 24) & 0xFF));,                         if(!buffer.hasRemaining()),                         {,                             _state = State.SIZE_1;,                             break;,                         },                     }, ,                 case SIZE_1:,                     buffer.put((byte)((_size >> 16) & 0xFF));,                     if(!buffer.hasRemaining()),                     {,                         _state = State.SIZE_2;,                         break;,                     },                 case SIZE_2:,                     buffer.put((byte)((_size >> 8) & 0xFF));,                     if(!buffer.hasRemaining()),                     {,                         _state = State.SIZE_3;,                         break;,                     },                 case SIZE_3:,                     buffer.put((byte)(_size & 0xFF));,                     if(!buffer.hasRemaining()),                     {,                         _state = State.DOFF;,                         break;,                     },                 case DOFF:,                     buffer.put((byte)2); // Always 2 (8 bytes),                     if(!buffer.hasRemaining()),                     {,                         _state = State.TYPE;,                         break;,                     },                 case TYPE:,                     buffer.put((byte)0);,                     if(!buffer.hasRemaining()),                     {,                         _state = State.CHANNEL_0;,                         break;,                     },                 case CHANNEL_0:,                     buffer.put((byte)((_frame.getChannel() >> 8) & 0xFF));,                     if(!buffer.hasRemaining()),                     {,                         _state = State.CHANNEL_1;,                         break;,                     },                 case CHANNEL_1:,                     buffer.put((byte)(_frame.getChannel() & 0xFF));,                     if(!buffer.hasRemaining()),                     {,                         _state = State.DELEGATE;,                         break;,                     },                 case DELEGATE:,                     _typeWriter.writeToBuffer(buffer);,                     if(_typeWriter.isComplete()),                     {,                         _state = State.PAYLOAD;,                         _frame = null;,                         _typeWriter = null;,                     },                     else,                     {,                         break;,                     },                 case PAYLOAD:,                     if(_payload == null || _payload.remaining() == 0),                     {,                         _state = State.DONE;,                         _frame = null;,                         _typeWriter = null;,                         _payload = null;, ,                     },                     else if(buffer.hasRemaining()),                     {,                         buffer.put(_payload);,                         if(_payload.remaining() == 0),                         {,                             _state = State.DONE;,                             _frame = null;,                             _typeWriter = null;,                             _payload = null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/IntegerWriter.java,,34-45,[    {, ,         @Override,         byte getFormatCode(),         {,             return EIGHT_BYTE_FORMAT_CODE;,         }, ,         @Override,         int convertValueToInt(Integer value),         {,             return value.intValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/IntegerWriter.java,,50-59,[    {, ,         @Override protected byte getFormatCode(),         {,             return ONE_BYTE_FORMAT_CODE;,         }, ,         @Override protected byte convertToByte(final Integer value),         {,             return value.byteValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/LongWriter.java,,36-47,[    {, ,         @Override,         byte getFormatCode(),         {,             return EIGHT_BYTE_FORMAT_CODE;,         }, ,         @Override,         long convertValueToLong(Long value),         {,             return value;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/LongWriter.java,,53-62,[    {, ,         @Override protected byte getFormatCode(),         {,             return ONE_BYTE_FORMAT_CODE;,         }, ,         @Override protected byte convertToByte(final Long value),         {,             return value.byteValue();],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/amqp_1_0/codec/StringWriter.java,,56-68,[        {,             _cacheSize = cacheSize;,         }, ,         @Override,         protected boolean removeEldestEntry(Map.Entry<K, V> eldest),         {,             return size() > _cacheSize;,         }, ,         public boolean isFull(),         {,             return size() == _cacheSize;],,
MT_CORRECTNESS,RV_RETURN_VALUE_OF_PUTIFABSENT_IGNORED,org/apache/qpid/amqp_1_0/codec/SymbolTypeConstructor.java,construct,82-82,[            SYMBOL_MAP.putIfAbsent(binaryStr, symbolVal);],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/UnsignedByteWriter.java,writeToBuffer,41-48,[                    buffer.put((byte)0x50);,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(buffer.hasRemaining())],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/UnsignedByteWriter.java,writeToBuffer,36-55,[        switch(_written),         {,             case 0:,                 if(buffer.hasRemaining()),                 {,                     buffer.put((byte)0x50);,                 },                 else,                 {,                     break;,                 },             case 1:,                 if(buffer.hasRemaining()),                 {,                     buffer.put(_value);,                     _written = 2;,                 },                 else,                 {,                     _written = 1;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/UnsignedIntegerWriter.java,,37-48,[    {, ,         @Override,         byte getFormatCode(),         {,             return EIGHT_BYTE_FORMAT_CODE;,         }, ,         @Override,         int convertValueToInt(UnsignedInteger value),         {,             return value.intValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/UnsignedIntegerWriter.java,,53-62,[    {, ,         @Override protected byte getFormatCode(),         {,             return ONE_BYTE_FORMAT_CODE;,         }, ,         @Override protected byte convertToByte(final UnsignedInteger value),         {,             return value.byteValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/UnsignedIntegerWriter.java,,67-95,[        {,             private boolean _complete;, , ,             public int writeToBuffer(ByteBuffer buffer),             {, ,                 if(!_complete && buffer.hasRemaining()),                 {,                     buffer.put(ZERO_BYTE_FORMAT_CODE);,                     _complete = true;,                 }, ,                 return 1;,             }, ,             public void setValue(UnsignedInteger uint),             {,                 _complete = false;,             }, ,             public boolean isCacheable(),             {,                 return true;,             }, ,             public boolean isComplete(),             {,                 return _complete;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/UnsignedLongWriter.java,,39-50,[    {, ,         @Override,         byte getFormatCode(),         {,             return EIGHT_BYTE_FORMAT_CODE;,         }, ,         @Override,         long convertValueToLong(UnsignedLong value),         {,             return value.longValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/UnsignedLongWriter.java,,56-65,[    {, ,         @Override protected byte getFormatCode(),         {,             return ONE_BYTE_FORMAT_CODE;,         }, ,         @Override protected byte convertToByte(final UnsignedLong value),         {,             return value.byteValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/codec/UnsignedLongWriter.java,,70-98,[    {,         private boolean _complete;, , ,         public int writeToBuffer(ByteBuffer buffer),         {, ,             if(!_complete && buffer.hasRemaining()),             {,                 buffer.put(ZERO_BYTE_FORMAT_CODE);,                 _complete = true;,             }, ,             return 1;,         }, ,         public void setValue(UnsignedLong ulong),         {,             _complete = false;,         }, ,         public boolean isCacheable(),         {,             return true;,         }, ,         public boolean isComplete(),         {,             return _complete;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/codec/VariableWidthWriter.java,writeToBuffer,44-51,[                        buffer.put(getSingleOctetEncodingCode());,                     },                     else,                     {,                         break;,                     },                 case 1:,                     if(buffer.hasRemaining())],,writeToBuffer,93-100,[                        written = 1;,                     },                     else,                     {,                         break;,                     },                 case 1:,                     if(remaining >= 4)],,writeToBuffer,104-108,[                        written+=4;,                     },                 case 2:,                 case 3:,                     if(remaining >= 2 && written <= 3)],,writeToBuffer,112-115,[                        written += 2;,                     },                 case 4:,                     if(remaining >=1 && written <=4)],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/codec/VariableWidthWriter.java,writeToBuffer,85-118,[            switch(written),             {, ,                 case 0:,                     if(buffer.hasRemaining()),                     {,                         buffer.put(getFourOctetEncodingCode());,                         remaining--;,                         written = 1;,                     },                     else,                     {,                         break;,                     },                 case 1:,                     if(remaining >= 4),                     {,                         buffer.putInt(length);,                         remaining-=4;,                         written+=4;,                     },                 case 2:,                 case 3:,                     if(remaining >= 2 && written <= 3),                     {,                         buffer.putShort((short)((length >> ((3-written)<<3)) & 0xFFFF ));,                         remaining -= 2;,                         written += 2;,                     },                 case 4:,                     if(remaining >=1 && written <=4),                     {,                         buffer.put((byte)((length>> ((4-written)<<3)) & 0xFF ));,                         written++;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/framing/FrameHandler.java,parse,118-122,[                    state = State.PRE_PARSE;, ,                 case PRE_PARSE:, ,                     if(size < 8)],,parse,162-168,[                            state = State.PARSING;,                         },                     }, ,                 case PARSING:, ,                     int dataOffset = (in.get() << 2) & 0x3FF;],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/amqp_1_0/framing/FrameHandler.java,toHex,293-293,[                formatter.format("\n");],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/framing/SASLFrameHandler.java,parse,116-120,[                    state = State.PRE_PARSE;, ,                 case PRE_PARSE:, ,                     if(size < 8)],,parse,160-166,[                            state = State.PARSING;,                         },                     }, ,                 case PARSING:, ,                     int dataOffset = (in.get() << 2) & 0x3FF;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/framing/SASLFrameHandler.java,parse,82-254,[            switch(state),             {,                 case SIZE_0:,                     if(remaining >= 4),                     {,                         size = in.getInt();,                         state = State.PRE_PARSE;,                         break;,                     },                     else,                     {,                         size = (in.get() << 24) & 0xFF000000;,                         if(!in.hasRemaining()),                         {,                             state = State.SIZE_1;,                             break;,                         },                     },                 case SIZE_1:,                     size |= (in.get() << 16) & 0xFF0000;,                     if(!in.hasRemaining()),                     {,                         state = State.SIZE_2;,                         break;,                     },                 case SIZE_2:,                     size |= (in.get() << 8) & 0xFF00;,                     if(!in.hasRemaining()),                     {,                         state = State.SIZE_3;,                         break;,                     },                 case SIZE_3:,                     size |= in.get() & 0xFF;,                     state = State.PRE_PARSE;, ,                 case PRE_PARSE:, ,                     if(size < 8),                     {,                         frameParsingError = createFramingError("specified frame size %d smaller than minimum frame header size %d", _size, 8);,                         state = State.ERROR;,                         break;,                     }, ,                     else if(size > _connection.getMaxFrameSize()),                     {,                         frameParsingError = createFramingError("specified frame size %d larger than maximum frame header size %d", size, _connection.getMaxFrameSize());,                         state = State.ERROR;,                         break;,                     }, ,                     if(in.remaining() < size-4),                     {,                         _buffer = ByteBuffer.allocate(size-4);,                         _buffer.put(in);,                         state = State.BUFFERING;,                         break;,                     },                 case BUFFERING:,                     if(_buffer != null),                     {,                         if(in.remaining() < _buffer.remaining()),                         {,                             _buffer.put(in);,                             break;,                         },                         else,                         {,                             ByteBuffer dup = in.duplicate();,                             dup.limit(dup.position()+_buffer.remaining());,                             int i = _buffer.remaining();,                             int d = dup.remaining();,                             in.position(in.position()+_buffer.remaining());,                             _buffer.put(dup);,                             oldIn = in;,                             _buffer.flip();,                             in = _buffer;,                             state = State.PARSING;,                         },                     }, ,                 case PARSING:, ,                     int dataOffset = (in.get() << 2) & 0x3FF;, ,                     if(dataOffset < 8),                     {,                         frameParsingError = createFramingError("specified frame data offset %d smaller than minimum frame header size %d", dataOffset, 8);,                         state = State.ERROR;,                         break;,                     },                     else if(dataOffset > size),                     {,                         frameParsingError = createFramingError("specified frame data offset %d larger than the frame size %d", dataOffset, _size);,                         state = State.ERROR;,                         break;,                     }, ,                     // type, ,                     int type = in.get() & 0xFF;,                     int channel = in.getShort() & 0xFF;, ,                     if(type != 0 && type != 1),                     {,                         frameParsingError = createFramingError("unknown frame type: %d", type);,                         state = State.ERROR;,                         break;,                     }, ,                     if(type != 1),                     {,                         System.err.println("Wrong frame type for SASL Frame");,                     }, ,                     // channel, ,                     /*if(channel > _connection.getChannelMax()),                     {,                         frameParsingError = createError(AmqpError.DECODE_ERROR,,                                                         "frame received on invalid channel %d above channel-max %d",,                                                         channel, _connection.getChannelMax());, ,                         state = State.ERROR;,                     }, */,                     // ext header,                     if(dataOffset!=8),                     {,                         in.position(in.position()+dataOffset-8);,                     }, ,                     // oldIn null iff not working on duplicated buffer,                     if(oldIn == null),                     {,                         oldIn = in;,                         in = in.duplicate();,                         final int endPos = in.position() + size - dataOffset;,                         in.limit(endPos);,                         oldIn.position(endPos);, ,                     }, , ,                     // PARSE HERE,                     try,                     {,                         Object val = _typeHandler.parse(in);, ,                         if(in.hasRemaining()),                         {,                             state = State.ERROR;,                             frameParsingError = createFramingError("Frame length %d larger than contained frame body %s.", size, val);, ,                         },                         else,                         {,                             _connection.receive((short)channel,val);,                             reset();,                             in = oldIn;,                             oldIn = null;,                             _buffer = null;,                             state = State.SIZE_0;,                             break;,                         }, , ,                     },                     catch (AmqpErrorException ex),                     {,                         state = State.ERROR;,                         frameParsingError = ex.getError();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,1204-1204,[        _channelMax = channelMax;],,,267-267,[        return _channelMax;],,,326-326,[        for (int i = 0; i <= _channelMax; i++)],,,213-213,[            sendOpen(_channelMax, DEFAULT_MAX_FRAME);],,,528-528,[                                     + begin.getRemoteChannel() + " which is outside the valid range of 0 to "],,,354-354,[        _channelMax = open.getChannelMax() == null ? _channelMax],,,356-356,[                        ? open.getChannelMax().intValue()],,,361-361,[            _receivingSessions = new SessionEndpoint[_channelMax + 1];],,,355-355,[                : open.getChannelMax().intValue() < _channelMax],,,362-362,[            _sendingSessions = new SessionEndpoint[_channelMax + 1];],,,384-384,[                sendOpen(_channelMax, _maxFrameSize);],,,289-289,[        if (channelMax < _channelMax)],,,291-291,[            _channelMax = channelMax;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,883-883,[        return _connectionEventListener;],,,878-878,[        _connectionEventListener = connectionEventListener;],,,489-489,[            if(_connectionEventListener != null)],,,491-491,[                _connectionEventListener.closeReceived();],,,594-594,[                _connectionEventListener.remoteSessionCreation(endpoint);],,,379-379,[        _connectionEventListener.openReceived();],,,407-407,[        _connectionEventListener.closeReceived();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,220-220,[        _frameOutputHandler = frameOutputHandler;],,,722-722,[            _frameOutputHandler.send(AMQFrame.createAMQFrame(channel, body, payloadDup));],,,320-320,[        _frameOutputHandler.close();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,799-799,[        _logger = logger;],,,807-807,[            if (_logger.isEnabled())],,,809-809,[                _logger.received(_remoteAddress, channel, frame);],,,461-461,[            _logger.received(_remoteAddress,(short)-1,"Underlying connection closed");],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,1193-1193,[        return _state == ConnectionState.CLOSED],,,1188-1188,[        return _state == ConnectionState.OPEN;],,,211-211,[        if (_state == ConnectionState.UNOPENED)],,,214-214,[            _state = ConnectionState.AWAITING_OPEN;],,,462-462,[            switch (_state)],,,467-467,[                    _state = ConnectionState.CLOSED;],,,471-471,[                    _state = ConnectionState.CLOSE_RECEIVED;],,,381-381,[        switch (_state)],,,386-386,[                _state = ConnectionState.OPEN;],,,408-408,[        switch (_state)],,,418-418,[                _state = ConnectionState.CLOSE_RECEIVED;],,,423-423,[                _state = ConnectionState.CLOSED;],,,420-420,[                _state = ConnectionState.CLOSED;],,,743-743,[        if (_requiresSASLServer && _state != ConnectionState.UNOPENED)],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,1140-1140,[        return _authenticated;],,,1015-1015,[            _authenticated = false;],,,206-206,[            if (!_authenticated)],,,1089-1089,[                _authenticated = false;],,,1062-1062,[                    _authenticated = true;],,,1108-1108,[                _authenticated = true;],,,952-952,[                _authenticated = false;],,,924-924,[                    _authenticated = true;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,1182-1182,[        return _localHostname;],,,372-372,[        _localHostname = open.getHostname();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,898-898,[        return _majorVersion;],,,748-748,[        _majorVersion = major;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,272-272,[        return _maxFrameSize;],,,369-369,[                : _desiredMaxFrameSize).intValue();],,,384-384,[                sendOpen(_channelMax, _maxFrameSize);],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,888-888,[        return _minorVersion;],,,749-749,[        _minorVersion = minorVersion;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,277-277,[        return _remoteContainerId;],,,371-371,[        _remoteContainerId = open.getContainerId();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,1199-1199,[        return _remoteError;],,,427-427,[        _remoteError = close.getError();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,401-401,[        return _remoteProperties;],,,378-378,[        _remoteProperties = open.getProperties();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,893-893,[        return _revision;],,,750-750,[        _revision = revision;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,close,446-450,[                _state = ConnectionState.CLOSE_SENT;,             case CLOSE_SENT:,             case CLOSED:,                 // already sent our close - too late to do anything more,                 break;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,inputClosed,471-474,[                    _state = ConnectionState.CLOSE_RECEIVED;,                 case CLOSED:,                     // already sent our close - too late to do anything more,                     break;],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,receiveOpen,384-386,[                sendOpen(_channelMax, _maxFrameSize);,             case AWAITING_OPEN:,                 _state = ConnectionState.OPEN;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,receiveClose,408-423,[        switch (_state),         {,             case UNOPENED:,             case AWAITING_OPEN:,                 Error error = new Error();,                 error.setCondition(ConnectionError.CONNECTION_FORCED);,                 error.setDescription("Connection close sent before connection was opened");,                 close(error);,                 break;,             case OPEN:,                 _state = ConnectionState.CLOSE_RECEIVED;,                 sendClose(new Close());,                 _state = ConnectionState.CLOSED;,                 break;,             case CLOSE_SENT:,                 _state = ConnectionState.CLOSED;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,receiveOpen,381-386,[        switch (_state),         {,             case UNOPENED:,                 sendOpen(_channelMax, _maxFrameSize);,             case AWAITING_OPEN:,                 _state = ConnectionState.OPEN;],,
STYLE,UCF_USELESS_CONTROL_FLOW,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,protocolHeaderReceived,743-743,[        if (_requiresSASLServer && _state != ConnectionState.UNOPENED)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,780-793,[            {,                 Logger _underlying = Logger.getLogger("FRM");, ,                 @Override,                 public boolean isEnabled(),                 {,                     return _underlying.isLoggable(Level.FINE);,                 }, ,                 @Override,                 public void received(final SocketAddress remoteAddress, final short channel, final Object frame),                 {,                     _underlying.fine("RECV[" + remoteAddress + "|" + channel + "] : " + frame);,                 }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,calculateClientProof,1538-1538,[                return finalMessageWithProof.getBytes();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/amqp_1_0/transport/ConnectionEndpoint.java,,1256-1280,[    private class AnonymousSaslClient implements AmqpSaslClient,     {, ,         @Override,         public boolean canSupportMechanism(),         {,             return true;,         }, ,         @Override,         public Symbol getMechanismName(),         {,             return Symbol.valueOf("ANONYMOUS");,         }, ,         @Override,         public boolean hasInitialResponse(),         {,             return false;,         }, ,         @Override,         public byte[] getResponse(final byte[] challenge),         {,             return new byte[0];],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/transport/LinkEndpoint.java,receiveAttach,276-300,[            switch(_state),             {,                 case ATTACH_SENT:,                 {, ,                     _state = State.ATTACHED;,                     getLock().notifyAll();, ,                     _initialUnsettledMap = attach.getUnsettled();,                     /*  TODO - don't yet handle:, ,                         attach.getUnsettled();,                         attach.getProperties();,                         attach.getDurable();,                         attach.getExpiryPolicy();,                         attach.getTimeout();,                      */, ,                     break;,                 }, ,                 case DETACHED:,                 {,                     _state = State.ATTACHED;,                     getLock().notifyAll();],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/amqp_1_0/transport/LinkEndpoint.java,remoteDetached,183-190,[            switch(_state),             {,                 case DETACH_SENT:,                     _state = State.DETACHED;,                     break;,                 case ATTACHED:,                     _state = State.DETACH_RECVD;,                     getSession().getConnection().addPostLockAction(new Runnable()],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/amqp_1_0/transport/ReceivingLinkEndpoint.java,sendFlow,335-336,[        sendFlow();,     }],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/amqp_1_0/transport/ReceivingLinkEndpoint.java,updateDispositions,391-391,[                        deliveryId = _unsettledIds.get(tag).getDeliveryId();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/SASLEndpointImpl.java,,150-150,[        _closedForInput = true;],,,155-155,[        return _closedForInput;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/SASLEndpointImpl.java,,225-225,[        _mechanism = saslInit.getMechanism();],,,228-228,[            _saslServer = Sasl.createSaslServer(_mechanism.toString(), "AMQP", "localhost", null,  createServerCallbackHandler(_mechanism));],,,255-255,[            _saslClient = Sasl.createSaslClient(new String[] { _mechanism.toString() }, null, "AMQP", "localhost", null,],,,248-248,[                _mechanism = mechanism;],,,258-258,[            init.setMechanism(_mechanism);],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/SASLEndpointImpl.java,,104-104,[        if(_state == State.BEGIN_SERVER)],,,116-116,[        _state = State.SENT_MECHANISMS;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/SASLEndpointImpl.java,,208-208,[        return _majorVersion;],,,160-160,[        _majorVersion = major;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/SASLEndpointImpl.java,,214-214,[        return _minorVersion;],,,161-161,[        _minorVersion = minorVersion;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/amqp_1_0/transport/SASLEndpointImpl.java,,219-219,[        return _revision;],,,162-162,[        _revision = revision;],,
STYLE,DB_DUPLICATE_BRANCHES,org/apache/qpid/amqp_1_0/transport/SendingLinkEndpoint.java,transfer,88-88,[        transferCount = _lastDeliveryTag == null ? 1 : 1;],,
BAD_PRACTICE,CN_IDIOM_NO_SUPER_CALL,org/apache/qpid/amqp_1_0/transport/SequenceNumber.java,clone,97-97,[        return new SequenceNumber(_seqNo);],,
STYLE,UCF_USELESS_CONTROL_FLOW,org/apache/qpid/amqp_1_0/transport/SessionEndpoint.java,receiveTransfer,403-403,[                if(delivery.isSettled() || Boolean.TRUE.equals(transfer.getAborted()))],,receiveTransfer,426-426,[                    else if(Boolean.TRUE.equals(transfer.getAborted()))],,
STYLE,UCF_USELESS_CONTROL_FLOW,org/apache/qpid/amqp_1_0/transport/SessionEndpoint.java,settle,768-768,[            if(d != null)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/amqp_1_0/transport/SessionEndpoint.java,,477-486,[                {,                     @Override,                     public void run(),                     {, ,                         for(LinkEndpoint le : allLinkEndpoints),                         {,                             le.flowStateChanged();,                         },                     }],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/amqp_1_0/type/transport/Error.java,,43-116,[    {,     }, ,     public Error(final ErrorCondition condition, final String description),     {,         _condition = condition;,         _description = description;,     }, ,     public ErrorCondition getCondition(),     {,         return _condition;,     }, ,     public void setCondition(ErrorCondition condition),     {,         _condition = condition;,     }, ,     public String getDescription(),     {,         return _description;,     }, ,     public void setDescription(String description),     {,         _description = description;,     }, ,     public Map getInfo(),     {,         return _info;,     }, ,     public void setInfo(Map info),     {,         _info = info;,     }, ,     @Override,     public String toString(),     {,         StringBuilder builder = new StringBuilder("Error{");,         final int origLength = builder.length();, ,         if(_condition != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("condition=").append(_condition);,         }, ,         if(_description != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("description=").append(_description);,         }, ,         if(_info != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("info=").append(_info);,         }, ,         builder.append('}');,         return builder.toString();],,
CORRECTNESS,INT_BAD_COMPARISON_WITH_SIGNED_BYTE,org/apache/qpid/amqp_1_0/type/Binary.java,toString,118-118,[            if (c > 31 && c < 127 && c != '\\')],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/amqp_1_0/type/Symbol.java,compareTo,44-44,[        return _underlying.compareTo(o._underlying);],,
BAD_PRACTICE,HE_HASHCODE_USE_OBJECT_EQUALS,org/apache/qpid/amqp_1_0/type/Symbol.java,hashCode,66-66,[        return _underlying.hashCode();],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/amqp_1_0/type/UnsignedByte.java,,24-131,[public final class UnsignedByte extends Number implements Comparable<UnsignedByte>, {,     private final byte _underlying;,     private static final UnsignedByte[] cachedValues = new UnsignedByte[256];, ,     static,     {,         for(int i = 0; i<256; i++),         {,             cachedValues[i] = new UnsignedByte((byte)i);,         },     }, ,     public UnsignedByte(byte underlying),     {,         _underlying = underlying;,     }, ,     @Override,     public byte byteValue(),     {,         return _underlying;,     }, ,     @Override,     public short shortValue(),     {,         return (short) intValue();,     }, ,     @Override,     public int intValue(),     {,         return ((int)_underlying) & 0xFF;,     }, ,     @Override,     public long longValue(),     {,         return ((long) _underlying) & 0xFFl;,     }, ,     @Override,     public float floatValue(),     {,         return (float) longValue();,     }, ,     @Override,     public double doubleValue(),     {,         return (double) longValue();,     }, ,     @Override,     public boolean equals(Object o),     {,         if (this == o),         {,             return true;,         },         if (o == null || getClass() != o.getClass()),         {,             return false;,         }, ,         UnsignedByte that = (UnsignedByte) o;, ,         if (_underlying != that._underlying),         {,             return false;,         }, ,         return true;,     }, ,     public int compareTo(UnsignedByte o),     {,         return Integer.signum(intValue() - o.intValue());,     }, ,     @Override,     public int hashCode(),     {,         return _underlying;,     }, ,     @Override,     public String toString(),     {,         return String.valueOf(intValue());,     }, ,     public static UnsignedByte valueOf(byte underlying),     {,         final int index = ((int) underlying) & 0xFF;,         return cachedValues[index];,     }, ,     public static UnsignedByte valueOf(final String value),             throws NumberFormatException,     {,         int intVal = Integer.parseInt(value);,         if(intVal < 0 || intVal >= (1<<8)),         {,             throw new NumberFormatException("Value \""+value+"\" lies outside the range [" + 0 + "-" + (1<<8) +").");,         },         return valueOf((byte)intVal);],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/amqp_1_0/type/UnsignedInteger.java,,24-146,[public final class UnsignedInteger extends Number implements Comparable<UnsignedInteger>, {,     private final int _underlying;,     private static final UnsignedInteger[] cachedValues = new UnsignedInteger[256];, ,     static,     {,         for(int i = 0; i < 256; i++),         {,             cachedValues[i] = new UnsignedInteger(i);,         },     }, ,     public static final UnsignedInteger ZERO = cachedValues[0];,     public static final UnsignedInteger ONE = cachedValues[1];,     public static final UnsignedInteger MAX_VALUE = new UnsignedInteger(0xffffffff);, , ,     public UnsignedInteger(int underlying),     {,         _underlying = underlying;,     }, ,     @Override,     public int intValue(),     {,         return _underlying;,     }, ,     @Override,     public long longValue(),     {,         return ((long) _underlying) & 0xFFFFFFFFl;,     }, ,     @Override,     public float floatValue(),     {,         return (float) longValue();,     }, ,     @Override,     public double doubleValue(),     {,         return (double) longValue();,     }, ,     @Override,     public boolean equals(Object o),     {,         if (this == o),         {,             return true;,         },         if (o == null || getClass() != o.getClass()),         {,             return false;,         }, ,         UnsignedInteger that = (UnsignedInteger) o;, ,         if (_underlying != that._underlying),         {,             return false;,         }, ,         return true;,     }, ,     public int compareTo(UnsignedInteger o),     {,         return Long.signum(longValue() - o.longValue());,     }, ,     @Override,     public int hashCode(),     {,         return _underlying;,     }, ,     @Override,     public String toString(),     {,         return String.valueOf(longValue());,     }, ,     public static UnsignedInteger valueOf(int underlying),     {,         if((underlying & 0xFFFFFF00) == 0),         {,             return cachedValues[underlying];,         },         else,         {,             return new UnsignedInteger(underlying);,         },     }, ,     public UnsignedInteger add(final UnsignedInteger i),     {,         int val = _underlying + i._underlying;,         return UnsignedInteger.valueOf(val);,     }, ,     public UnsignedInteger subtract(final UnsignedInteger i),     {,         int val = _underlying - i._underlying;,         return UnsignedInteger.valueOf(val);,     }, ,     public static UnsignedInteger valueOf(final String value),     {,         long longVal = Long.parseLong(value);,         return valueOf(longVal);,     }, ,     public static UnsignedInteger valueOf(final long longVal),     {,         if(longVal < 0L || longVal >= (1L<<32)),         {,             throw new NumberFormatException("Value \""+longVal+"\" lies outside the range [" + 0L + "-" + (1L<<32) +").");,         },         return valueOf((int)longVal);],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/amqp_1_0/type/UnsignedLong.java,,26-160,[public final class UnsignedLong extends Number implements Comparable<UnsignedLong>, {,     private static final BigInteger TWO_TO_THE_SIXTY_FOUR = new BigInteger( new byte[] { (byte) 1, (byte) 0, (byte) 0, (byte) 0, (byte) 0, (byte) 0, (byte) 0, (byte) 0, (byte) 0 });,     private static final BigInteger LONG_MAX_VALUE = BigInteger.valueOf(Long.MAX_VALUE);, ,     private static final UnsignedLong[] cachedValues = new UnsignedLong[256];, ,     static,     {,         for(int i = 0; i<256; i++),         {,             cachedValues[i] = new UnsignedLong(i);,         },     }, ,     public static final UnsignedLong ZERO = cachedValues[0];,     public static final UnsignedLong ONE = cachedValues[1];, ,     private final long _underlying;, , , ,     public UnsignedLong(long underlying),     {,         _underlying = underlying;,     }, ,     @Override,     public int intValue(),     {,         return (int) _underlying;,     }, ,     @Override,     public long longValue(),     {,         return _underlying;,     }, ,     public BigInteger bigIntegerValue(),     {,         if(_underlying >= 0L),         {,             return BigInteger.valueOf(_underlying);,         },         else,         {,             return TWO_TO_THE_SIXTY_FOUR.add(BigInteger.valueOf(_underlying));,         },     }, ,     @Override,     public float floatValue(),     {,         return (float) longValue();,     }, ,     @Override,     public double doubleValue(),     {,         return (double) longValue();,     }, ,     @Override,     public boolean equals(Object o),     {,         if (this == o),         {,             return true;,         },         if (o == null || getClass() != o.getClass()),         {,             return false;,         }, ,         UnsignedLong that = (UnsignedLong) o;, ,         if (_underlying != that._underlying),         {,             return false;,         }, ,         return true;,     }, ,     public int compareTo(UnsignedLong o),     {,         return bigIntegerValue().compareTo(o.bigIntegerValue());,     }, ,     @Override,     public int hashCode(),     {,         return (int)(_underlying ^ (_underlying >>> 32));,     }, ,     @Override,     public String toString(),     {,         return String.valueOf(bigIntegerValue());,     }, ,     public static UnsignedLong valueOf(long underlying),     {,         if((underlying & 0xFFL) == underlying),         {,             return cachedValues[(int)underlying];,         },         else,         {,             return new UnsignedLong(underlying);,         },     }, ,     public static UnsignedLong valueOf(final String value),     {,         BigInteger bigInt = new BigInteger(value);,         if(bigInt.signum() == -1 || bigInt.bitCount()>64),         {,             throw new NumberFormatException("Value \""+value+"\" lies outside the range [" + 0L + "- 2^64).");,         },         else if(bigInt.compareTo(LONG_MAX_VALUE)>=0),         {,             return UnsignedLong.valueOf(bigInt.longValue());,         },         else,         {,             return UnsignedLong.valueOf(TWO_TO_THE_SIXTY_FOUR.subtract(bigInt).negate().longValue());,         }, ,     }, ,     public UnsignedLong add(UnsignedLong unsignedLong),     {,         return UnsignedLong.valueOf(_underlying + unsignedLong._underlying);],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/amqp_1_0/type/UnsignedShort.java,,24-129,[public final class UnsignedShort extends Number implements Comparable<UnsignedShort>, {,     private final short _underlying;,     private static final UnsignedShort[] cachedValues = new UnsignedShort[256];, ,     static,     {,         for(short i = 0; i < 256; i++),         {,             cachedValues[i] = new UnsignedShort(i);,         },     }, ,     public UnsignedShort(short underlying),     {,         _underlying = underlying;,     }, ,     public short shortValue(),     {,         return _underlying;,     }, ,     @Override,     public int intValue(),     {,         return _underlying & 0xFFFF;,     }, ,     @Override,     public long longValue(),     {,         return ((long) _underlying) & 0xFFFFl;,     }, ,     @Override,     public float floatValue(),     {,         return (float) intValue();,     }, ,     @Override,     public double doubleValue(),     {,         return (double) intValue();,     }, ,     @Override,     public boolean equals(Object o),     {,         if (this == o),         {,             return true;,         },         if (o == null || getClass() != o.getClass()),         {,             return false;,         }, ,         UnsignedShort that = (UnsignedShort) o;, ,         if (_underlying != that._underlying),         {,             return false;,         }, ,         return true;,     }, ,     public int compareTo(UnsignedShort o),     {,         return Integer.signum(intValue() - o.intValue());,     }, ,     @Override,     public int hashCode(),     {,         return _underlying;,     }, ,     @Override,     public String toString(),     {,         return String.valueOf(longValue());,     }, ,     public static UnsignedShort valueOf(short underlying),     {,         if((underlying & 0xFF00) == 0),         {,             return cachedValues[underlying];,         },         else,         {,             return new UnsignedShort(underlying);,         },     }, ,     public static UnsignedShort valueOf(final String value),     {,         int intVal = Integer.parseInt(value);,         if(intVal < 0 || intVal >= (1<<16)),         {,             throw new NumberFormatException("Value \""+value+"\" lies outside the range [" + 0 + "-" + (1<<16) +").");,         },         return valueOf((short)intVal);],,
BAD_PRACTICE,NM_SAME_SIMPLE_NAME_AS_INTERFACE,org/apache/qpid/amqp_1_0/type/messaging/Source.java,,34-277,[public class Source,   implements org.apache.qpid.amqp_1_0.type.Source,   {, , ,     private String _address;, ,     private TerminusDurability _durable;, ,     private TerminusExpiryPolicy _expiryPolicy;, ,     private UnsignedInteger _timeout;, ,     private Boolean _dynamic;, ,     private Map _dynamicNodeProperties;, ,     private DistributionMode _distributionMode;, ,     private Map _filter;, ,     private Outcome _defaultOutcome;, ,     private Symbol[] _outcomes;, ,     private Symbol[] _capabilities;, ,     public String getAddress(),     {,         return _address;,     }, ,     public void setAddress(String address),     {,         _address = address;,     }, ,     public TerminusDurability getDurable(),     {,         return _durable;,     }, ,     public void setDurable(TerminusDurability durable),     {,         _durable = durable;,     }, ,     public TerminusExpiryPolicy getExpiryPolicy(),     {,         return _expiryPolicy;,     }, ,     public void setExpiryPolicy(TerminusExpiryPolicy expiryPolicy),     {,         _expiryPolicy = expiryPolicy;,     }, ,     public UnsignedInteger getTimeout(),     {,         return _timeout;,     }, ,     public void setTimeout(UnsignedInteger timeout),     {,         _timeout = timeout;,     }, ,     public Boolean getDynamic(),     {,         return _dynamic;,     }, ,     public void setDynamic(Boolean dynamic),     {,         _dynamic = dynamic;,     }, ,     public Map getDynamicNodeProperties(),     {,         return _dynamicNodeProperties;,     }, ,     public void setDynamicNodeProperties(Map dynamicNodeProperties),     {,         _dynamicNodeProperties = dynamicNodeProperties;,     }, ,     public DistributionMode getDistributionMode(),     {,         return _distributionMode;,     }, ,     public void setDistributionMode(DistributionMode distributionMode),     {,         _distributionMode = distributionMode;,     }, ,     public Map getFilter(),     {,         return _filter;,     }, ,     public void setFilter(Map filter),     {,         _filter = filter;,     }, ,     public Outcome getDefaultOutcome(),     {,         return _defaultOutcome;,     }, ,     public void setDefaultOutcome(Outcome defaultOutcome),     {,         _defaultOutcome = defaultOutcome;,     }, ,     public Symbol[] getOutcomes(),     {,         return _outcomes;,     }, ,     public void setOutcomes(Symbol... outcomes),     {,         _outcomes = outcomes;,     }, ,     public Symbol[] getCapabilities(),     {,         return _capabilities;,     }, ,     public void setCapabilities(Symbol[] capabilities),     {,         _capabilities = capabilities;,     }, ,     @Override,     public String toString(),     {,         StringBuilder builder = new StringBuilder("Source{");,         final int origLength = builder.length();, ,         if(_address != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("address=").append(_address);,         }, ,         if(_durable != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("durable=").append(_durable);,         }, ,         if(_expiryPolicy != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("expiryPolicy=").append(_expiryPolicy);,         }, ,         if(_timeout != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("timeout=").append(_timeout);,         }, ,         if(_dynamic != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("dynamic=").append(_dynamic);,         }, ,         if(_dynamicNodeProperties != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("dynamicNodeProperties=").append(_dynamicNodeProperties);,         }, ,         if(_distributionMode != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("distributionMode=").append(_distributionMode);,         }, ,         if(_filter != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("filter=").append(_filter);,         }, ,         if(_defaultOutcome != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("defaultOutcome=").append(_defaultOutcome);,         }, ,         if(_outcomes != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("outcomes=").append(Arrays.toString(_outcomes));,         }, ,         if(_capabilities != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("capabilities=").append(Arrays.toString(_capabilities));,         }, ,         builder.append('}');,         return builder.toString();],,
BAD_PRACTICE,NM_SAME_SIMPLE_NAME_AS_INTERFACE,org/apache/qpid/amqp_1_0/type/messaging/Target.java,,34-193,[public class Target,   implements org.apache.qpid.amqp_1_0.type.Target,   {, , ,     private String _address;, ,     private TerminusDurability _durable;, ,     private TerminusExpiryPolicy _expiryPolicy;, ,     private UnsignedInteger _timeout;, ,     private Boolean _dynamic;, ,     private Map _dynamicNodeProperties;, ,     private Symbol[] _capabilities;, ,     public String getAddress(),     {,         return _address;,     }, ,     public void setAddress(String address),     {,         _address = address;,     }, ,     public TerminusDurability getDurable(),     {,         return _durable;,     }, ,     public void setDurable(TerminusDurability durable),     {,         _durable = durable;,     }, ,     public TerminusExpiryPolicy getExpiryPolicy(),     {,         return _expiryPolicy;,     }, ,     public void setExpiryPolicy(TerminusExpiryPolicy expiryPolicy),     {,         _expiryPolicy = expiryPolicy;,     }, ,     public UnsignedInteger getTimeout(),     {,         return _timeout;,     }, ,     public void setTimeout(UnsignedInteger timeout),     {,         _timeout = timeout;,     }, ,     public Boolean getDynamic(),     {,         return _dynamic;,     }, ,     public void setDynamic(Boolean dynamic),     {,         _dynamic = dynamic;,     }, ,     public Map getDynamicNodeProperties(),     {,         return _dynamicNodeProperties;,     }, ,     public void setDynamicNodeProperties(Map dynamicNodeProperties),     {,         _dynamicNodeProperties = dynamicNodeProperties;,     }, ,     public Symbol[] getCapabilities(),     {,         return _capabilities;,     }, ,     public void setCapabilities(Symbol[] capabilities),     {,         _capabilities = capabilities;,     }, ,     @Override,     public String toString(),     {,         StringBuilder builder = new StringBuilder("Target{");,         final int origLength = builder.length();, ,         if(_address != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("address=").append(_address);,         }, ,         if(_durable != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("durable=").append(_durable);,         }, ,         if(_expiryPolicy != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("expiryPolicy=").append(_expiryPolicy);,         }, ,         if(_timeout != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("timeout=").append(_timeout);,         }, ,         if(_dynamic != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("dynamic=").append(_dynamic);,         }, ,         if(_dynamicNodeProperties != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("dynamicNodeProperties=").append(_dynamicNodeProperties);,         }, ,         if(_capabilities != null),         {,             if(builder.length() != origLength),             {,                 builder.append(',');,             },             builder.append("capabilities=").append(Arrays.toString(_capabilities));,         }, ,         builder.append('}');,         return builder.toString();],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/amqp_1_0/type/security/SaslInit.java,getHostname,65-65,[        return _hostname;],,getHostName,1859-1859,[            return _host;],,
BAD_PRACTICE,NM_SAME_SIMPLE_NAME_AS_INTERFACE,org/apache/qpid/amqp_1_0/type/transaction/TxnCapability.java,,30-126,[public class TxnCapability,   implements org.apache.qpid.amqp_1_0.type.TxnCapability, RestrictedType<Symbol>,   ,   {, , , ,     private final Symbol _val;, ,     ,     public static final TxnCapability LOCAL_TXN = new TxnCapability(Symbol.valueOf("amqp:local-transactions"));,     ,     public static final TxnCapability DISTRIBUTED_TXN = new TxnCapability(Symbol.valueOf("amqp:distributed-transactions"));,     ,     public static final TxnCapability PROMOTABLE_TXN = new TxnCapability(Symbol.valueOf("amqp:promotable-transactions"));,     ,     public static final TxnCapability MULTI_TXNS_PER_SSN = new TxnCapability(Symbol.valueOf("amqp:multi-txns-per-ssn"));,     ,     public static final TxnCapability MULTI_SSNS_PER_TXN = new TxnCapability(Symbol.valueOf("amqp:multi-ssns-per-txn"));,     , , ,     private TxnCapability(Symbol val),     {,         _val = val;,     }, ,     public Symbol getValue(),     {,         return _val;,     }, ,     public String toString(),     {,         ,         if(this == LOCAL_TXN),         {,             return "local-txn";,         },         ,         if(this == DISTRIBUTED_TXN),         {,             return "distributed-txn";,         },         ,         if(this == PROMOTABLE_TXN),         {,             return "promotable-txn";,         },         ,         if(this == MULTI_TXNS_PER_SSN),         {,             return "multi-txns-per-ssn";,         },         ,         if(this == MULTI_SSNS_PER_TXN),         {,             return "multi-ssns-per-txn";,         },         ,         else,         {,             return String.valueOf(_val);,         },     }, ,     public static TxnCapability valueOf(Object obj),     {,         Symbol val = (Symbol) obj;, ,         if(LOCAL_TXN._val.equals(val)),         {,             return LOCAL_TXN;,         },     ,         if(DISTRIBUTED_TXN._val.equals(val)),         {,             return DISTRIBUTED_TXN;,         },     ,         if(PROMOTABLE_TXN._val.equals(val)),         {,             return PROMOTABLE_TXN;,         },     ,         if(MULTI_TXNS_PER_SSN._val.equals(val)),         {,             return MULTI_TXNS_PER_SSN;,         },     ,         if(MULTI_SSNS_PER_TXN._val.equals(val)),         {,             return MULTI_SSNS_PER_TXN;,         },     ,         // TODO ERROR,         return null;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/AMQConnection.java,<init>,390-390,[            _messageCompressionThresholdSize = Integer.valueOf(connectionURL.getOption(ConnectionURL.OPTIONS_MESSAGES_COMPRESSION_THRESHOLD_SIZE));],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/client/AMQConnection.java,getBrokerSuppliedTrustStore,829-829,[        synchronized(_brokerTrustStores)],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQConnection.java,getClientID,946-948,[        checkNotClosed();, ,         return _clientName;],,getClientId,55-59,[      if (_log.isTraceEnabled()),       {,          _log.trace("getClientID()");,       },       return _clientId;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQConnection.java,getNextChannelID,1744-1744,[        return _sessions.getNextChannelId();],,getNextChannelId,73-88,[        int id = _minChannelID;, ,         boolean done = false;,         while (!done),         {,             id = _idFactory.getAndIncrement();,             if (id == _maxChannelID),             {,                 //go back to the start,                 _idFactory.set(_minChannelID);,             }, ,             done = (!_sessionMap.keySet().contains(id));,         }, ,         return id;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQConnection.java,getUsername,1263-1263,[        return _username;],,getUserName,118-122,[      if (_log.isTraceEnabled()),       {,          _log.trace("getDefaultUsername()");,       },       return _userName;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQConnection.java,setClientID,953-975,[        checkNotClosed();,         synchronized(_sessionCreationLock),         {,             if(_connectionAttempted),             {,                 // in AMQP it is not possible to change the client ID. If one is not specified,                 // upon connection construction, an id is generated automatically. Therefore,                 // we can always throw an exception.,                 if (!Boolean.getBoolean(ClientProperties.IGNORE_SET_CLIENTID_PROP_NAME)),                 {,                     throw new IllegalStateException("Client name cannot be changed after being set");,                 },                 else,                 {,                     _logger.info("Operation setClientID is ignored using ID: " + getClientID());,                 },             },             else,             {,                 _clientName = clientID;,             },         },     }],,setClientId,64-70,[      if (_log.isTraceEnabled()),       {,          _log.trace("setClientID(" + clientID + ")");,       },       _hasBeenUpdated = true;,       this._clientId = clientID;,    }],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQConnection.java,setUsername,1268-1269,[        _username = id;,     }],,setUserName,127-133,[      if (_log.isTraceEnabled()),       {,          _log.trace("setDefaultUsername(" + defaultUsername + ")");,       },       _hasBeenUpdated = true;,       this._userName = defaultUsername;,    }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQConnection.java,attemptReconnection,667-667,[        catch (Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/AMQConnection.java,,1515-1528,[                                  {,                                       @Override,                                       public void run(),                                       {,                                           // deliver the exception if there is a listener,                                           try,                                           {,                                               exceptionListener.onException(je);,                                           },                                           catch (RuntimeException e),                                           {,                                               _logger.error("Exception occurred in ExceptionListener", e);,                                           },                                       }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQConnectionDelegate_0_10.java,run,344-344,[                    catch (Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/AMQConnectionDelegate_0_10.java,,376-387,[            {,                 @Override,                 public void run(),                 {,                     String code = null;,                     if (close != null),                     {,                         code = close.getReplyCode().toString();,                     },                     listener.onException(JMSExceptionHelper.chainJMSException(new JMSException(exc.getMessage(), code),,                                                                               exc));,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AMQConnectionDelegate_0_10.java,,621-634,[        {,             super("Connection redirected to " + host + " alternates " + knownHosts);,             _host = host;,             _knownHosts = knownHosts;,         }, ,         public String getHost(),         {,             return _host;,         }, ,         public List<Object> getKnownHosts(),         {,             return _knownHosts;],,
I18N,DM_CONVERT_CASE,org/apache/qpid/client/AMQConnectionDelegate_8_0.java,supportsIsBound,481-481,[                String product = String.valueOf(serverProperties.getString(ConnectionStartProperties.PRODUCT)).toLowerCase();],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQConnectionFactory.java,createConnection,158-158,[            catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQConnectionFactory.java,createXAConnection,334-334,[            catch (Exception e)],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/client/AMQConnectionFactory.java,,56-444,[public class AMQConnectionFactory implements ConnectionFactory, QueueConnectionFactory, TopicConnectionFactory,,                                              ObjectFactory, Referenceable, XATopicConnectionFactory,,                                              XAQueueConnectionFactory, XAConnectionFactory, Serializable, {,     protected static final String NO_URL_CONFIGURED = "The connection factory wasn't created with a proper URL, the connection details are empty";, , ,     private ConnectionURL _connectionDetails;, ,     // The default constructor is necessary to allow AMQConnectionFactory to be deserialised from JNDI,     public AMQConnectionFactory(),     {,     }, ,     public AMQConnectionFactory(final String url) throws URLSyntaxException,     {,         if (url == null),         {,             throw new IllegalArgumentException("url cannot be null");,         }, ,         _connectionDetails = new AMQConnectionURL(url);,     }, ,     public AMQConnectionFactory(ConnectionURL url),     {,         if (url == null),         {,             throw new IllegalArgumentException("url cannot be null");,         }, ,         _connectionDetails = url;,     }, ,     /**,      * @return the virtualPath of the connection details.,      */,     public final String getVirtualPath(),     {,         return _connectionDetails.getVirtualHost();,     }, ,     public static String getUniqueClientID(),     {,         try,         {,             InetAddress addr = InetAddress.getLocalHost();,             return addr.getHostName() + System.currentTimeMillis();,         },         catch (UnknownHostException e),         {,             return "UnknownHost" + UUID.randomUUID();,         },     }, ,     public AMQConnection createConnection() throws JMSException,     {,         if(_connectionDetails == null),         {,             throw new JMSException(NO_URL_CONFIGURED);,         }, ,         try,         {,             if (_connectionDetails.getClientName() == null || _connectionDetails.getClientName().equals("")),             {,                 _connectionDetails.setClientName(getUniqueClientID());,             },             return new AMQConnection(_connectionDetails);,         },         catch (Exception e),         {,             throw JMSExceptionHelper.chainJMSException(new JMSException("Error creating connection: " + e.getMessage()),,                                                        e);,         },     }, ,     public AMQConnection createConnection(String userName, String password) throws JMSException,     {,         return createConnection(userName, password, null);,     },     ,     public AMQConnection createConnection(String userName, String password, String id) throws JMSException,     {,         if (_connectionDetails != null),         {,             try,             {,                 ConnectionURL connectionDetails = new AMQConnectionURL(_connectionDetails.getURL());,                 connectionDetails.setUsername(userName);,                 connectionDetails.setPassword(password);,                 ,                 if (id != null && !id.equals("")),                 {,                     connectionDetails.setClientName(id);,                 } ,                 else if (connectionDetails.getClientName() == null || connectionDetails.getClientName().equals("")),                 {,                     connectionDetails.setClientName(getUniqueClientID());,                 },                 return new AMQConnection(connectionDetails);,             },             catch (Exception e),             {,                 throw JMSExceptionHelper.chainJMSException(new JMSException("Error creating connection: ",                                                                             + e.getMessage()), e);,             },         },         else,         {,             throw new JMSException(NO_URL_CONFIGURED);,         },     }, ,     public QueueConnection createQueueConnection() throws JMSException,     {,         return createConnection();,     }, ,     public QueueConnection createQueueConnection(String username, String password) throws JMSException,     {,         return createConnection(username, password);,     }, ,     public TopicConnection createTopicConnection() throws JMSException,     {,         return createConnection();,     }, ,     public TopicConnection createTopicConnection(String username, String password) throws JMSException,     {,         return createConnection(username, password);,     }, , ,     public ConnectionURL getConnectionURL(),     {,         return _connectionDetails;,     }, ,     public String getConnectionURLString(),     {,         return _connectionDetails.toString();,     }, ,     //setter necessary to use instances created with the default constructor (which we can't remove),     public final void setConnectionURLString(String url) throws URLSyntaxException,     {,         _connectionDetails = new AMQConnectionURL(url);,     }, ,     /**,      * JNDI interface to create objects from References.,      *,      * @param obj  The Reference from JNDI,      * @param name,      * @param ctx,      * @param env,      *,      * @return AMQConnection,AMQTopic,AMQQueue, or AMQConnectionFactory.,      *,      * @throws Exception,      */,     public Object getObjectInstance(Object obj, Name name, Context ctx, Hashtable env) throws Exception,     {,         if (obj instanceof Reference),         {,             Reference ref = (Reference) obj;, ,             if (ref.getClassName().equals(AMQConnection.class.getName())),             {,                 RefAddr addr = ref.get(AMQConnection.class.getName());, ,                 if (addr != null),                 {,                     return new AMQConnection((String) addr.getContent());,                 },             }, ,             if (ref.getClassName().equals(AMQQueue.class.getName())),             {,                 RefAddr addr = ref.get(AMQQueue.class.getName());, ,                 if (addr != null),                 {,                     return new AMQQueue(new AMQBindingURL((String) addr.getContent()));,                 },             }, ,             if (ref.getClassName().equals(AMQTopic.class.getName())),             {,                 RefAddr addr = ref.get(AMQTopic.class.getName());, ,                 if (addr != null),                 {,                     return new AMQTopic(new AMQBindingURL((String) addr.getContent()));,                 },             }, ,             if (ref.getClassName().equals(AMQConnectionFactory.class.getName())),             {,                 RefAddr addr = ref.get(AMQConnectionFactory.class.getName());, ,                 if (addr != null),                 {,                     return new AMQConnectionFactory((String) addr.getContent());,                 },             }, ,         },         return null;,     }, , ,     public Reference getReference() throws NamingException,     {,         return new Reference(,                 AMQConnectionFactory.class.getName(),,                 new StringRefAddr(AMQConnectionFactory.class.getName(), _connectionDetails.getURL()),,                              AMQConnectionFactory.class.getName(), null);          // factory location,     }, ,     // ---------------------------------------------------------------------------------------------------,     // the following methods are provided for XA compatibility,     // Those methods are only supported by 0_10 and above ,     // ---------------------------------------------------------------------------------------------------, ,     /**,      * Creates a XAConnection with the default user identity.,      * <p> The XAConnection is created in stopped mode. No messages,      * will be delivered until the <code>Connection.start</code> method,      * is explicitly called.,      *,      * @return A newly created XAConnection,      * @throws JMSException         If creating the XAConnection fails due to some internal error.,      * @throws javax.jms.JMSSecurityException If client authentication fails due to an invalid user name or password.,      */,     public XAConnection createXAConnection() throws JMSException,     {,         try,         {,             return new XAConnectionImpl(_connectionDetails);,         },         catch (Exception e),         {,             throw JMSExceptionHelper.chainJMSException(new JMSException("Error creating connection: " + e.getMessage()),,                                                        e);,         },     }, ,     /**,      * Creates a XAConnection with the specified user identity.,      * <p> The XAConnection is created in stopped mode. No messages,      * will be delivered until the <code>Connection.start</code> method,      * is explicitly called.,      *,      * @param username the caller's user name,      * @param password the caller's password,      * @return A newly created XAConnection.,      * @throws JMSException         If creating the XAConnection fails due to some internal error.,      * @throws javax.jms.JMSSecurityException If client authentication fails due to an invalid user name or password.,      */,     public XAConnection createXAConnection(String username, String password) throws JMSException,     {,         if (_connectionDetails != null),         {,             try,             {,                 ConnectionURL connectionDetails = new AMQConnectionURL(_connectionDetails.toString());,                 connectionDetails.setUsername(username);,                 connectionDetails.setPassword(password);,     ,                 if (connectionDetails.getClientName() == null || connectionDetails.getClientName().equals("")),                 {,                     connectionDetails.setClientName(getUniqueClientID());,                 },                 return new XAConnectionImpl(connectionDetails);,             },             catch (Exception e),             {,                 throw JMSExceptionHelper.chainJMSException(new JMSException("Error creating XA Connection: ",                                                                             + e.getMessage()), e);,             },         },         else,         {,             throw new JMSException(NO_URL_CONFIGURED);,         }        ,     }, , ,     /**,      * Creates a XATopicConnection with the default user identity.,      * <p> The XATopicConnection is created in stopped mode. No messages,      * will be delivered until the <code>Connection.start</code> method,      * is explicitly called.,      *,      * @return A newly created XATopicConnection,      * @throws JMSException         If creating the XATopicConnection fails due to some internal error.,      * @throws javax.jms.JMSSecurityException If client authentication fails due to an invalid user name or password.,      */,     public XATopicConnection createXATopicConnection() throws JMSException,     {,         return (XATopicConnection) createXAConnection();,     }, ,     /**,      * Creates a XATopicConnection with the specified user identity.,      * <p> The XATopicConnection is created in stopped mode. No messages,      * will be delivered until the <code>Connection.start</code> method,      * is explicitly called.,      *,      * @param username the caller's user name,      * @param password the caller's password,      * @return A newly created XATopicConnection.,      * @throws JMSException         If creating the XATopicConnection fails due to some internal error.,      * @throws javax.jms.JMSSecurityException If client authentication fails due to an invalid user name or password.,      */,     public XATopicConnection createXATopicConnection(String username, String password) throws JMSException,     {,          return (XATopicConnection) createXAConnection(username, password);,     }, ,     /**,      * Creates a XAQueueConnection with the default user identity.,      * <p> The XAQueueConnection is created in stopped mode. No messages,      * will be delivered until the <code>Connection.start</code> method,      * is explicitly called.,      *,      * @return A newly created XAQueueConnection,      * @throws JMSException         If creating the XAQueueConnection fails due to some internal error.,      * @throws javax.jms.JMSSecurityException If client authentication fails due to an invalid user name or password.,      */,     public XAQueueConnection createXAQueueConnection() throws JMSException,     {,        return (XAQueueConnection) createXAConnection();,     }, ,     /**,      * Creates a XAQueueConnection with the specified user identity.,      * <p> The XAQueueConnection is created in stopped mode. No messages,      * will be delivered until the <code>Connection.start</code> method,      * is explicitly called.,      *,      * @param username the caller's user name,      * @param password the caller's password,      * @return A newly created XAQueueConnection.,      * @throws JMSException         If creating the XAQueueConnection fails due to some internal error.,      * @throws javax.jms.JMSSecurityException If client authentication fails due to an invalid user name or password.,      */,     public XAQueueConnection createXAQueueConnection(String username, String password) throws JMSException,     {,         return (XAQueueConnection) createXAConnection(username, password);,     }, ,     @Override,     public boolean equals(final Object o),     {,         if (this == o),         {,             return true;,         },         if (o == null || getClass() != o.getClass()),         {,             return false;,         }, ,         final AMQConnectionFactory that = (AMQConnectionFactory) o;, ,         if (_connectionDetails != null,                 ? !_connectionDetails.equals(that._connectionDetails),                 : that._connectionDetails != null),         {,             return false;,         }, ,         return true;,     }, ,     @Override,     public int hashCode(),     {,         return _connectionDetails != null ? _connectionDetails.hashCode() : 0;,     }, ,     @Override,     public String toString(),     {,         return "AMQConnectionFactory{" +],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQConnectionURL.java,getURL,67-67,[        return _url;],,getUrl,154-154,[		return url;],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQConnectionUnitTest.java,testExceptionReceived,88-88,[        catch (Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/AMQConnectionUnitTest.java,,78-84,[            {, ,                 @Override,                 public void onException(JMSException jmsException),                 {,                     receivedException.set(jmsException);,                 }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/client/AMQDestination.java,getInfoFromBindingURL,306-306,[        _rejectBehaviour = rejectBehaviourValue == null ? null : RejectBehaviour.valueOf(rejectBehaviourValue.toUpperCase());],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQDestination.java,getQueueName,468-468,[        return _queueName;],,getQueuename,1023-1023,[        return _queuename;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQDestination.java,setQueueName,479-483,[        _queueName = queueName;,         // calculated URL now out of date,         _url = null;,         _urlAsShortString = null;,     }],,setQueuename,1028-1029,[        this._queuename = queuename;,     }],,
BAD_PRACTICE,SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION,org/apache/qpid/client/AMQHeadersExchange.java,,36-49,[        super(binding);,     }, ,     public AMQHeadersExchange(String queueName),     {,         super(queueName, ExchangeDefaults.HEADERS_EXCHANGE_CLASS, queueName, true, true, null);,     }, ,     public boolean isNameRequired(),     {,         //Not sure what the best approach is here, probably to treat this like a topic,         //and allow server to generate names. As it is AMQ specific it doesn't need to,         //fit the JMS API expectations so this is not as yet critical.,         return getAMQQueueName() == null;],,
BAD_PRACTICE,HE_EQUALS_NO_HASHCODE,org/apache/qpid/client/AMQQueue.java,equals,155-155,[        return super.equals(o) && o instanceof Queue;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AMQQueueBrowser.java,,164-222,[        {,             if (consumer != null),             {,                 _consumer = consumer;,                 prefetchMessage();,             },             _logger.debug("QB:created with first element:" + _nextMessage);,         }, ,         public boolean hasMoreElements(),         {,             _logger.debug("QB:hasMoreElements:" + (_nextMessage != null));,             return (_nextMessage != null);,         }, ,         public Object nextElement(),         {,             Message msg = _nextMessage;,             if (msg == null),             {,                 throw new NoSuchElementException("No messages") ;,             },             try,             {,                 _logger.debug("QB:nextElement about to receive");,                 prefetchMessage();,                 _logger.debug("QB:nextElement received:" + _nextMessage);,             },             catch (JMSException e),             {,                 _logger.warn("Exception caught while queue browsing", e);,                 _nextMessage = null;,                 try,                 {,                     closeConsumer() ;,                 },                 catch (final JMSException jmse) {} // ignore,             },             return msg;,         }, ,         private void prefetchMessage() throws JMSException,         {,             _nextMessage = _consumer.receiveBrowse();,             if (_nextMessage == null),             {,                 closeConsumer() ;,             },         }, ,         private void closeConsumer() throws JMSException,         {,             if (_consumer != null),             {,                 BasicMessageConsumer consumer = _consumer ;,                 _consumer = null ;,                 consumer.close() ;,             },         }],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQQueueDeferredOrderingTest.java,setUp,86-101,[        super.setUp();, ,         _numMessages = isBrokerStorePersistent() ? 300 : 1000;, ,         _logger.info("Create Connection");,         con = getConnection();,         _logger.info("Create Session");,         session = con.createSession(false, Session.AUTO_ACKNOWLEDGE);,         _logger.info("Create Q");,         queue = new AMQQueue("amq.direct", "Q", "Q",,                 false, true);,         _logger.info("Create Consumer of Q");,         consumer = session.createConsumer(queue);,         _logger.info("Start Connection");,         con.start();,     }],,setup,631-632,[      _defaultAMQConnectionFactory = createAMQConnectionFactory(_raProperties);,    }],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/AMQQueueDeferredOrderingTest.java,tearDown,132-138,[        _logger.info("Interrupting producer thread");,         producerThread.interrupt();,         _logger.info("Closing connection");,         con.close();, ,         super.tearDown();,     }],,teardown,159-169,[      _log.debug("Tearing down " + _spec);,       ,       super.teardown();, ,       for (QpidMessageHandler handler : _handlers),       {,          handler.stop();,       }, ,       _log.debug("Tearing down complete " + this);,    }],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/client/AMQSession.java,drainDispatchQueue,2272-2272,[                if (disp == null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/client/AMQSession.java,syncDispatchQueue,2220-2220,[                if (disp == null)],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/client/AMQSession.java,setConnectionStopped,3426-3426,[                    _lock.notify();],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/client/AMQSession.java,run,3387-3387,[                while (((_queue.blockingPeek()) != null) && !_closed.get())],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/client/AMQSession_0_10.java,matchProps,1178-1178,[                    (target.get(key).equals(source.get(key))],,
PERFORMANCE,SBSC_USE_STRINGBUFFER_CONCATENATION,org/apache/qpid/client/AMQSession_0_10.java,execute,955-955,[                               binddingKey = binddingKey + "_" + key;],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQSession_0_10Test.java,testExceptionOnMessageConsumerReceive,334-334,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQSession_0_10Test.java,testExceptionOnMessageConsumerReceiveNoWait,370-370,[        catch (Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AMQSession_0_10Test.java,,572-576,[    private final class MockMessageListener implements MessageListener,     {,         public void onMessage(Message arg0),         {,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AMQSession_0_10Test.java,,667-690,[    class MockSender implements ProtocolEventSender,     {,         private List<ProtocolEvent> _sendEvents = new ArrayList<ProtocolEvent>();, ,         private void setIdleTimeout(int i),         {,         }, ,         public void send(ProtocolEvent msg),         {,             _sendEvents.add(msg);,         }, ,         public void flush(),         {,         }, ,         public void close(),         {,         }, ,         public List<ProtocolEvent> getSendEvents(),         {,             return _sendEvents;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/client/AMQSession_0_10Test.java,setIdleTimeout,673-673,[        }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AMQSession_0_10Test.java,,587-655,[        {,             super(connection, delegate, name, expiry);,             _throwException = throwException;,             setState(State.OPEN);,             _connection = connection;,             _delegate = delegate;,         }, ,         public void invoke(Method m, Runnable postIdSettingAction),         {,             if (_throwException),             {,                 if (m instanceof SessionAttach || m instanceof SessionRequestTimeout || m instanceof TxSelect),                 {,                     // do not throw exception for SessionAttach,,                     // SessionRequestTimeout and TxSelect,                     // session needs to be instantiated,                     return;,                 },                 ExecutionException e = new ExecutionException();,                 e.setErrorCode(ExecutionErrorCode.INTERNAL_ERROR);,                 throw new SessionException(e);,             },             else,             {,                 super.invoke(m, postIdSettingAction);,                 if (m instanceof SessionDetach),                 {,                     setState(State.CLOSED);,                 },             },         }, ,         public void sync(),         {,             // to avoid recursive calls,             setAutoSync(false);,             // simply send sync command,             super.executionSync(Option.SYNC);,         }, ,         protected <T> Future<T> invoke(Method m, Class<T> klass),         {,             int commandId = getCommandsOut();,             Future<T> future = super.invoke(m, klass);,             ExecutionResult result = new ExecutionResult();,             result.setCommandId(commandId);,             if (m instanceof ExchangeBound),             {,                 ExchangeBoundResult struc = new ExchangeBoundResult();,                 result.setValue(struc);,             },             else if (m instanceof ExchangeQuery),             {,                 ExchangeQueryResult struc = new ExchangeQueryResult();,                 result.setValue(struc);,             },             else if (m instanceof QueueQuery),             {,                 QueueQueryResult struc = new QueueQueryResult();,                 result.setValue(struc);,             },             _delegate.executionResult(this, result);,             return future;,         }, ,         public MockSender getSender(),         {,             return (MockSender) _connection.getSender();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AMQSession_0_10Test.java,,659-664,[    class MockTransportConnection extends Connection,     {,         public void setState(State state),         {,             super.setState(state);,         }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/AMQSession_0_8.java,returnBouncedMessage,788-788,[        catch (Exception e)],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/client/AMQSession_0_8.java,isQueueExist,1215-1215,[                        }, getAMQConnection());],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/client/AMQSession_0_8.java,setFlowControl,1532-1532,[            notify();],,
MT_CORRECTNESS,UG_SYNC_SET_UNSYNC_GET,org/apache/qpid/client/AMQSession_0_8.java,getFlowControl,1537-1537,[            return _flowControl;],,setFlowControl,1531-1533,[            _flowControl = flowControl;,             notify();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_NEEDS_THIS,org/apache/qpid/client/AMQSession_0_8.java,,921-944,[        {,             super(getChannelId(), QueueDeclareOkBody.class);,         }, ,         public boolean processMethod(int channelId, AMQMethodBody frame) //throws AMQException,         {,             boolean matches = super.processMethod(channelId, frame);,             if (matches),             {,                 QueueDeclareOkBody declareOk = (QueueDeclareOkBody) frame;,                 _messageCount = declareOk.getMessageCount();,                 _consumerCount = declareOk.getConsumerCount();,             },             return matches;,         }, ,         public long getMessageCount(),         {,             return _messageCount;,         }, ,         public long getConsumerCount(),         {,             return _consumerCount;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/client/AMQSession_0_8Test.java,setUp,37-37,[        _connection = new MockAMQConnection("amqp://guest:guest@/test?brokerlist='tcp://localhost:5672'");],,
STYLE,EQ_DOESNT_OVERRIDE_EQUALS,org/apache/qpid/client/AMQQueue.java,equals,155-155,[        return super.equals(o) && o instanceof Queue;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/client/AMQTemporaryQueue.java,,65-65,[        return _deleted;],,,54-54,[            _deleted = true;],,
BAD_PRACTICE,SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION,org/apache/qpid/client/AMQTemporaryQueue.java,,36-65,[        super(session.getTemporaryQueueExchangeName(), session.createTemporaryQueueName(), true);,         _session = session;,     }, ,     /** @see javax.jms.TemporaryQueue#delete() */,     public synchronized void delete() throws JMSException,     {,         if (_session.hasConsumer(this)),         {,             throw new JMSException("Temporary Queue has consumers so cannot be deleted");,         }, ,         try,         {,             _session.deleteTemporaryDestination(this);,         },         finally,         {,             _deleted = true;,         },     }, ,     public AMQSession getSession(),     {,         return _session;,     }, ,     public boolean isDeleted(),     {,         return _deleted;],,
STYLE,EQ_DOESNT_OVERRIDE_EQUALS,org/apache/qpid/client/AMQTopic.java,equals,207-215,[        if (getDestSyntax() == DestSyntax.ADDR),         {,             return super.equals(o);,         },         else,         {,             return (o instanceof AMQTopic),                && ((AMQTopic)o).getExchangeName().equals(getExchangeName()),                && ((AMQTopic)o).getRoutingKey().equals(getRoutingKey());],,
BAD_PRACTICE,SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION,org/apache/qpid/client/AMQTemporaryTopic.java,,41-72,[        super(session.getTemporaryTopicExchangeName(),"tmp_" + UUID.randomUUID());,         _session = session;,     }, ,     /**,      * @see javax.jms.TemporaryTopic#delete(),      */,     public void delete() throws JMSException,     {,         if(_session.hasConsumer(this)),         {,             throw new JMSException("Temporary Topic has consumers so cannot be deleted");,         }, ,         try,         {,             _session.deleteTemporaryDestination(this);,         },         finally,         {,             _deleted = true;,         },     }, ,     public AMQSession getSession(),     {,         return _session;,     }, ,     public boolean isDeleted(),     {,         return _deleted;],,
BAD_PRACTICE,SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION,org/apache/qpid/client/AMQUndefinedDestination.java,,32-43,[        super(exchange, UNKNOWN_EXCHANGE_CLASS, routingKey, queueName);,     }, ,     public boolean isNameRequired(),     {,         return getAMQQueueName() == null;,     }, ,     @Override,     public boolean neverDeclare(),     {,         return true;],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/client/AsynchMessageListenerTest.java,testMessageListenerThrowsError,265-265,[        awaitMessages.await(AWAIT_MESSAGE_TIMEOUT, TimeUnit.MILLISECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/AsynchMessageListenerTest.java,,249-260,[        {,             @Override,             public void onMessage(Message message),             {,                 try,                 {,                     throw new Error(javaLangErrorMessageText);,                 },                 finally,                 {,                     receivedCount.incrementAndGet();,                     awaitMessages.countDown();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AsynchMessageListenerTest.java,,293-305,[    private final class CountingExceptionListener implements ExceptionListener,     {,         private final AtomicInteger _errorCount = new AtomicInteger();, ,         @Override,         public void onException(JMSException arg0),         {,             _errorCount.incrementAndGet();,         }, ,         public int getErrorCount(),         {,             return _errorCount.intValue();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/AsynchMessageListenerTest.java,,317-360,[            this(totalExpectedMessageCount, totalExpectedMessageCount);,         }, , ,         public CountingMessageListener(int totalExpectedMessageCount, int numberOfMessagesToAwait),         {,             _receivedCount = new AtomicInteger(0);,             _outstandingMessageCount = new AtomicInteger(totalExpectedMessageCount);,             _awaitMessages = new CountDownLatch(numberOfMessagesToAwait);,         }, ,         public int getOutstandingCount(),         {,             return _outstandingMessageCount.get();,         }, ,         public int getReceivedCount(),         {,             return _receivedCount.get();,         }, ,         public void resetLatch(),         {,             _awaitMessages = new CountDownLatch(_outstandingMessageCount.get());,         }, ,         @Override,         public void onMessage(Message message),         {,             _receivedCount.incrementAndGet();,             _outstandingMessageCount.decrementAndGet();,             _awaitMessages.countDown();,         }, ,         public boolean awaitMessages(long timeout),         {,             try,             {,                 return _awaitMessages.await(timeout, TimeUnit.MILLISECONDS);,             },             catch (InterruptedException e),             {,                 Thread.currentThread().interrupt();,                 return false;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/client/BasicMessageConsumer.java,postDeliver,837-844,[        switch (_acknowledgeMode),         {,             case Session.DUPS_OK_ACKNOWLEDGE:,             case Session.AUTO_ACKNOWLEDGE:,                 // we do not auto ack a message if the application code called recover(),                 if (!_session.isInRecovery()),                 {,                     _session.acknowledgeMessage(msg.getDeliveryTag(), false);],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/client/BasicMessageConsumer_0_10.java,postDeliver,430-444,[        switch (getAcknowledgeMode()),         {,             case Session.SESSION_TRANSACTED:,                 _0_10session.sendTxCompletionsIfNecessary();,                 break;,             case Session.NO_ACKNOWLEDGE:,                 if (!getSession().isInRecovery()),                 {,                   getSession().acknowledgeMessage(msg.getDeliveryTag(), false);,                 },                 break;,             case Session.AUTO_ACKNOWLEDGE:,                 if (!getSession().isInRecovery() && getSession().getAMQConnection().getSyncAck()),                 {,                     ((AMQSession_0_10) getSession()).getQpidSession().sync();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/client/BasicMessageConsumer_0_8.java,<init>,101-101,[                _rejectBehaviour = RejectBehaviour.valueOf(rejectBehaviour.toUpperCase());],,<init>,107-107,[                _rejectBehaviour = RejectBehaviour.valueOf( rejectBehaviour.toUpperCase());],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/BasicMessageProducer.java,getUserID,709-709,[        return _userID;],,getUserId,67-67,[            return null;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/BasicMessageProducer.java,setUserID,714-715,[        _userID = userID;,     }],,setUserId,847-848,[        setUserId((userId == null) ? null : AMQShortString.valueOf(userId));,     }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/client/BrokerDetails.java,equals,395-395,[        return _host.toLowerCase().equals(bd.getHost() == null ? null : bd.getHost().toLowerCase()) &&],,equals,397-397,[               _transport.toLowerCase().equals(bd.getTransport() == null ? null : bd.getTransport().toLowerCase());],,
I18N,DM_CONVERT_CASE,org/apache/qpid/client/BrokerDetails.java,hashCode,404-404,[        int result = _host != null ? _host.toLowerCase().hashCode() : 0;],,hashCode,406-406,[        result = 31 * result + (_transport != null ? _transport.toLowerCase().hashCode() : 0);],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/client/BrokerDetails.java,printOptionsURL,431-431,[                    optionsURL.append(_options.get(key));],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/client/ChannelToSessionMap.java,,93-93,[        _maxChannelID = maxChannelID;],,,79-79,[            if (id == _maxChannelID)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/HeartbeatTest.java,,197-226,[        private final AtomicInteger _heartbeatsReceived = new AtomicInteger(0);,         private final AtomicInteger _heartbeatsSent = new AtomicInteger(0);, ,         public TestListener(String name),         {,             _name = name;,         }, ,         @Override,         public void heartbeatReceived(),         {,             LOGGER.debug(_name + " heartbeat received");,             _heartbeatsReceived.incrementAndGet();,         }, ,         public int getHeartbeatsReceived(),         {,             return _heartbeatsReceived.get();,         }, ,         @Override,         public void heartbeatSent(),         {,             LOGGER.debug(_name + " heartbeat sent");,             _heartbeatsSent.incrementAndGet();,         }, ,         public int getHeartbeatsSent(),         {,             return _heartbeatsSent.get();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/PooledConnectionFactory.java,,669-678,[    private class ConnectionHolder,     {,         private final CommonConnection _connection;,         private final long _lastUse;, ,         public ConnectionHolder(final CommonConnection connection, final long lastUse),         {,             _connection = connection;,             _lastUse = lastUse;,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/PooledConnectionFactory.java,,561-585,[        {,             _underlying = underlying;,             _connectionHandler = connectionHandler;,         }, ,         @Override,         public Object invoke(final Object proxy, final Method method, final Object[] args) throws Throwable,         {,             Method underlyingMethod = _underlying.getClass().getMethod(method.getName(), method.getParameterTypes());,             try,             {,                 Object returnVal = underlyingMethod.invoke(_underlying, args);, ,                 if(method.getName().equals("close") && method.getParameterTypes().length == 0),                 {,                     _connectionHandler.removeSession((Session)proxy);,                 }, ,                 return returnVal;,             },             catch (InvocationTargetException e),             {,                 _connectionHandler._exceptionThrown = true;,                 Throwable thrown = e.getCause();,                 throw thrown == null ? e : thrown;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/client/SynchReceiveTest.java,testTwoConsumersInterleaved,83-83,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/client/SynchReceiveTest.java,testTwoConsumersInterleaved,83-83,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/client/TemporaryQueuePrefixTest.java,setUp,35-35,[    }],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/client/failover/FailoverBehaviourTest.java,browserCloseWhileFailoverImpl,1509-1509,[        _failoverStarted.await(5, TimeUnit.SECONDS);],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/client/failover/FailoverBehaviourTest.java,sessionCloseWhileFailoverImpl,1453-1453,[        _failoverStarted.await(5, TimeUnit.SECONDS);],,
PERFORMANCE,SBSC_USE_STRINGBUFFER_CONCATENATION,org/apache/qpid/client/failover/FailoverBehaviourTest.java,createConnectionWithFailover,1062-1062,[                newUrl+= "&" + option.getKey() + "='" + option.getValue() + "'";],,
MT_CORRECTNESS,SWL_SLEEP_WITH_LOCK_HELD,org/apache/qpid/client/failover/FailoverBehaviourTest.java,publishWithFailoverMutex,864-864,[                Thread.sleep(25l);],,
MT_CORRECTNESS,SWL_SLEEP_WITH_LOCK_HELD,org/apache/qpid/client/failover/FailoverBehaviourTest.java,testFailoverHandlerTimeoutExpires,901-901,[                Thread.sleep(11000l);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/failover/FailoverBehaviourTest.java,run,988-988,[                    catch(Exception e)],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/client/failover/FailoverBehaviourTest.java,attainedConnection,1375-1375,[                _suspendLatch.await(_delay, TimeUnit.SECONDS);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/failover/FailoverHandler.java,run,226-226,[                catch (Exception e)],,
PERFORMANCE,URF_UNREAD_FIELD,org/apache/qpid/client/failover/FailoverNoopSupport.java,,54-54,[        this.connection = con;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/client/filter/JMSSelectorFilter.java,getTimestamp,175-179,[                    return message.getJMSTimestamp();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);],,getTimeStamp,320-320,[            return _timestamp;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/filter/JMSSelectorFilter.java,,93-203,[        {,             public boolean isPersistent(),             {,                 try,                 {,                     return message.getJMSDeliveryMode() == DeliveryMode.PERSISTENT;,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public boolean isRedelivered(),             {,                 try,                 {,                     return message.getJMSRedelivered();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public Object getHeader(String name),             {,                 try,                 {,                     return message.getObjectProperty(name);,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public String getReplyTo(),             {,                 return message.getReplyToString();,             }, ,             public String getType(),             {,                 try,                 {,                     return message.getJMSType();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public byte getPriority(),             {,                 try,                 {,                     return (byte) message.getJMSPriority();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public String getMessageId(),             {,                 try,                 {,                     return message.getJMSMessageID();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public long getTimestamp(),             {,                 try,                 {,                     return message.getJMSTimestamp();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public String getCorrelationId(),             {,                 try,                 {,                     return message.getJMSCorrelationID();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);,                 },             }, ,             public long getExpiration(),             {,                 try,                 {,                     return message.getJMSExpiration();,                 },                 catch (JMSException e),                 {,                     throw new SelectorParsingException(e);],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/client/handler/ClientMethodDispatcherImpl_0_9.java,,37-64,[        super(session);,     }, ,     public boolean dispatchBasicRecoverSyncOk(BasicRecoverSyncOkBody body, int channelId) throws AMQException,     {,         return false;,     }, ,     @Override,     public boolean dispatchChannelAlert(final ChannelAlertBody body, final int channelId),             throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     public boolean dispatchBasicRecoverSync(BasicRecoverSyncBody body, int channelId) throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     public boolean dispatchQueueUnbind(QueueUnbindBody body, int channelId) throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     public boolean dispatchQueueUnbindOk(QueueUnbindOkBody body, int channelId) throws AMQException,     {,         return false;],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/client/handler/ClientMethodDispatcherImpl_0_91.java,,37-64,[        super(session);,     }, ,     public boolean dispatchBasicRecoverSyncOk(BasicRecoverSyncOkBody body, int channelId) throws AMQException,     {,         return false;,     }, ,     @Override,     public boolean dispatchChannelAlert(final ChannelAlertBody body, final int channelId),             throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     public boolean dispatchBasicRecoverSync(BasicRecoverSyncBody body, int channelId) throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     public boolean dispatchQueueUnbind(QueueUnbindBody body, int channelId) throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     public boolean dispatchQueueUnbindOk(QueueUnbindOkBody body, int channelId) throws AMQException,     {,         return false;],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/client/handler/ClientMethodDispatcherImpl_8_0.java,,37-68,[        super(session);,     }, ,     public boolean dispatchChannelAlert(ChannelAlertBody body, int channelId) throws AMQException,     {,         return false;,     }, ,     @Override,     public boolean dispatchQueueUnbindOk(final QueueUnbindOkBody queueUnbindOkBody, final int channelId),     {,         return false;,     }, ,     @Override,     public boolean dispatchBasicRecoverSyncOk(final BasicRecoverSyncOkBody basicRecoverSyncOkBody,,                                               final int channelId),     {,         return false;,     }, ,     @Override,     public boolean dispatchQueueUnbind(final QueueUnbindBody body, final int channelId) throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);,     }, ,     @Override,     public boolean dispatchBasicRecoverSync(final BasicRecoverSyncBody body, final int channelId),             throws AMQException,     {,         throw new AMQMethodNotImplementedException(body);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/handler/ConnectionStartMethodHandler.java,methodReceived,113-113,[                    throw new AMQException(null, "No supported security mechanism found, passed: " + new String(body.getMechanisms()), null);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,86-97,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();,                 assertEquals("user", url.getUsername());,                 assertEquals("pass", url.getPassword());, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,150-161,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();,                 usernames.add(url.getUsername());,                 passwords.add(url.getPassword());, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,193-202,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,238-247,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,285-295,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 when(connection.createSession(anyBoolean(),anyInt())).thenReturn(session);,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,313-323,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 when(connection.createSession(anyBoolean(),anyInt())).thenThrow(new JMSException("foo"));,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,351-371,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 createdConnections.add(connection);,                 final ArgumentCaptor<ExceptionListener> listenerCaptor =,                         ArgumentCaptor.forClass(ExceptionListener.class);, ,                 doAnswer(new Answer(),                 {,                     @Override,                     public Object answer(final InvocationOnMock invocation) throws Throwable,                     {,                         when(connection.getExceptionListener()).thenReturn(listenerCaptor.getValue());,                         return null;,                     },                 }).when(connection).setExceptionListener(listenerCaptor.capture());, ,                 return connection;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/handler/PooledConnectionFactoryTest.java,,399-409,[        {,             @Override,             public CommonConnection answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConnectionURL url = connectionCaptor.getValue();, ,                 final CommonConnection connection = mock(CommonConnection.class);,                 when(connection.isClosed()).thenReturn(false);,                 when(connection.createSession(anyBoolean(),anyInt())).thenReturn(session);,                 createdConnections.add(connection);,                 return connection;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,getIntProperty,583-583,[            return Integer.valueOf((String) o);],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,getLongProperty,613-613,[            return Long.valueOf((String) o);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,getJMSCorrelationID,257-257,[        return correlationIDAsBytes == null ? null : new String(correlationIDAsBytes);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,getStringProperty,690-690,[            return userIdBytes == null ? null : new String(userIdBytes);],,getStringProperty,695-695,[            return new String(_messageProps.getAppId());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,setJMSCorrelationID,250-250,[        setJMSCorrelationIDAsBytes(correlationId == null ? null : correlationId.getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,setStringProperty,814-814,[            _messageProps.setAppId(value.getBytes());],,
CORRECTNESS,NP_NULL_PARAM_DEREF_NONVIRTUAL,org/apache/qpid/client/message/AMQMessageDelegate_0_10.java,getByteProperty,534-534,[            return Byte.valueOf(null);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQMessageDelegate_0_8.java,getJMSCorrelationIDAsBytes,246-246,[        return getContentHeaderProperties().getCorrelationIdAsString().getBytes();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQMessageDelegate_0_8.java,setJMSCorrelationIDAsBytes,251-251,[        getContentHeaderProperties().setCorrelationId(new String(bytes));],,
BAD_PRACTICE,SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION,org/apache/qpid/client/message/AMQMessageDelegate_0_8.java,,652-667,[            super("",,                   "direct",,                   replyToEncoding,,                   replyToEncoding);,         }, ,         @Override,         public boolean isNameRequired(),         {,             return false;,         }, ,         @Override,         public boolean neverDeclare(),         {,             return true;],,
BAD_PRACTICE,SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION,org/apache/qpid/client/message/AMQMessageDelegate_0_8.java,,677-692,[            super(exchange,,                   null,,                   routingKey,,                   routingKey);,         }, ,         @Override,         public boolean isNameRequired(),         {,             return false;,         }, ,         @Override,         public boolean neverDeclare(),         {,             return true;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/message/AMQPEncodedListMessage.java,getIntImpl,728-728,[                return Integer.valueOf((String) value).intValue();],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/message/AMQPEncodedListMessage.java,getLongImpl,764-764,[                return Long.valueOf((String) value).longValue();],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/AMQPEncodedListMessage.java,getByteImpl,667-667,[                return Byte.valueOf((String) value).byteValue();],,getByteImpl,663-663,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/AMQPEncodedListMessage.java,getDoubleImpl,835-835,[                return Double.valueOf((String) value).doubleValue();],,getDoubleImpl,831-831,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/AMQPEncodedListMessage.java,getFloatImpl,807-807,[                return Float.valueOf((String) value).floatValue();],,getFloatImpl,803-803,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/AMQPEncodedListMessage.java,getShortImpl,694-694,[                return Short.valueOf((String) value).shortValue();],,getShortImpl,690-690,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE,org/apache/qpid/client/message/AMQPEncodedListMessage.java,<init>,64-64,[        super(delegate, data);],,<init>,65-65,[        if (data != null)],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/message/AMQPEncodedListMessageUnitTest.java,testAddObject,67-67,[        m.add("Msg".getBytes());],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/message/AbstractAMQMessageDelegate.java,convertToAddressBasedDestination,297-297,[        catch(Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/client/message/AbstractJMSMessageFactory.java,,198-243,[        {,             _bodiesIter = bodies.iterator();,             _currentBuffer = _bodiesIter.next().getPayload();,             _currentPos = 0;,         }, ,         @Override,         public int read() throws IOException,         {,             byte[] buf = new byte[1];,             int size = read(buf);,             if(size == -1),             {,                 throw new EOFException();,             },             else,             {,                 return ((int)buf[0])&0xff;,             },         }, ,         @Override,         public int read(final byte[] dst, final int off, final int len),         {,             while(_currentPos == _currentBuffer.length),             {,                 if(!_bodiesIter.hasNext()),                 {,                     return -1;,                 },                 else,                 {,                     _currentBuffer = _bodiesIter.next().getPayload();,                     _currentPos = 0;,                 },             },             int size = Math.min(len, _currentBuffer.length - _currentPos);,             System.arraycopy(_currentBuffer,_currentPos, dst,off,size);,             _currentPos+=size;,             return size;,         }, ,         @Override,         public void close(),         {,         }],,
CORRECTNESS,NP_NULL_PARAM_DEREF_NONVIRTUAL,org/apache/qpid/client/message/JMSHeaderAdapter.java,getByte,148-148,[                b = Byte.valueOf(null);],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/message/JMSMapMessage.java,getInt,178-178,[            return Integer.valueOf((String) value).intValue();],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/client/message/JMSMapMessage.java,getLong,212-212,[            return Long.valueOf((String) value).longValue();],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/JMSMapMessage.java,getByte,127-127,[            return Byte.valueOf((String) value).byteValue();],,getByte,125-125,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/JMSMapMessage.java,getDouble,280-280,[            return Double.valueOf((String) value).doubleValue();],,getDouble,278-278,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/JMSMapMessage.java,getFloat,257-257,[            return Float.valueOf((String) value).floatValue();],,getFloat,255-255,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/JMSMapMessage.java,getInt,178-178,[            return Integer.valueOf((String) value).intValue();],,getInt,176-176,[        else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/client/message/JMSMapMessage.java,getShort,150-150,[            return Short.valueOf((String) value).shortValue();],,getShort,148-148,[        else if ((value instanceof String) || (value == null))],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/message/MessageEncryptionHelper.java,,76-80,[                                        {,                                             @Override,                                             protected boolean removeEldestEntry(final Map.Entry<String, X509Certificate> eldest),                                             {,                                                 return size() > 128;],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/client/messaging/address/QpidExchangeOptions.java,,25-44,[public class QpidExchangeOptions extends HashMap<String,Object> , {	,     public static final String QPID_MSG_SEQUENCE = "qpid.msg_sequence";,     public static final String QPID_INITIAL_VALUE_EXCHANGE = "qpid.ive";,     public static final String QPID_EXCLUSIVE_BINDING = "qpid.exclusive-binding";,    ,     public void setMessageSequencing(),     {,         this.put(QPID_MSG_SEQUENCE, 1);,     },     ,     public void setInitialValueExchange(),     {,         this.put(QPID_INITIAL_VALUE_EXCHANGE, 1);,     },     ,     public void setExclusiveBinding(),     {,         this.put(QPID_EXCLUSIVE_BINDING, 1);,     }],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/client/messaging/address/QpidQueueOptions.java,,25-83,[public class QpidQueueOptions extends HashMap<String,Object> , {	, 	public static final String QPID_MAX_COUNT = "qpid.max_count";,     public static final String QPID_MAX_SIZE = "qpid.max_size";,     public static final String QPID_POLICY_TYPE = "qpid.policy_type";    ,     public static final String QPID_LVQ_KEY = "qpid.LVQ_key";,     public static final String QPID_LAST_VALUE_QUEUE = "qpid.last_value_queue";,     public static final String QPID_LAST_VALUE_QUEUE_NO_BROWSE = "qpid.last_value_queue_no_browse";, ,     public void validatePolicyType(String type),     {,         if (type == null || ,            !("reject".equals(type) || "flow_to_disk".equals(type) || ,             "ring".equals(type) || "ring_strict".equals(type))),         {,             throw new IllegalArgumentException("Invalid Queue Policy Type" +,                     " should be one of {reject|flow_to_disk|ring|ring_strict}");,         },     },     , 	public void setPolicyType(String s), 	{, 	    validatePolicyType(s);, 	    this.put(QPID_POLICY_TYPE, s);, 	}, ,     public void setMaxCount(Integer i),     {,         this.put(QPID_MAX_COUNT, i);,     },     ,     public void setMaxSize(Integer i),     {,         this.put(QPID_MAX_SIZE, i);,     },     , ,     public void setOrderingPolicy(String s),     {,         if (QpidQueueOptions.QPID_LAST_VALUE_QUEUE.equals(s)),         {,             this.put(QPID_LAST_VALUE_QUEUE, 1);,         },         else if (QpidQueueOptions.QPID_LAST_VALUE_QUEUE_NO_BROWSE.equals(s)),         {,             this.put(QPID_LAST_VALUE_QUEUE_NO_BROWSE,1);,         },         else,         {,             throw new IllegalArgumentException("Invalid Ordering Policy" +,             " should be one of {" + QpidQueueOptions.QPID_LAST_VALUE_QUEUE + "|" + ,             QPID_LAST_VALUE_QUEUE_NO_BROWSE + "}");,         },     },     ,     public void setLvqKey(String key),     {,         this.put(QPID_LVQ_KEY, key);,     }],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,testMessagesAreDistributedBetweenConsumersWithLowPrefetch,148-148,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(2).toString());],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,testPrefetchOneWithAsynchronousTransactedConsumer,71-71,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,testPrefetchWindowExpandsOnReceiveTransaction,243-243,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,testMessagesAreDistributedBetweenConsumersWithLowPrefetch,148-148,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(2).toString());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,testPrefetchOneWithAsynchronousTransactedConsumer,71-71,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,testPrefetchWindowExpandsOnReceiveTransaction,243-243,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/prefetch/PrefetchBehaviourTest.java,onMessage,98-98,[                catch(Exception e)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/client/protocol/AMQProtocolHandler.java,exception,352-352,[            catch (Exception e)],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/client/protocol/AMQProtocolHandler.java,,363-363,[                _initialConnectionException = cause;],,,264-264,[                        initialConnectionException = _initialConnectionException;],,,267-267,[                    _initialConnectionException = null;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/client/protocol/AMQProtocolHandler.java,,916-916,[        return _sender;],,,899-899,[        _sender = sender;],,,240-240,[                        _sender.close();],,,585-585,[        _sender.send(buf);],,,588-588,[            _sender.flush();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/client/protocol/AMQProtocolHandler.java,,911-911,[        return _lastWriteTime;],,,583-583,[        _lastWriteTime = System.currentTimeMillis();],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/client/protocol/AMQProtocolHandler.java,,795-795,[        return _writtenBytes;],,,584-584,[        _writtenBytes += buf.remaining();],,,605-605,[        _connection.bytesSent(_writtenBytes);],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/client/protocol/AMQProtocolHandler.java,methodBodyReceived,541-541,[            synchronized (_frameListeners)],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/client/protocol/AMQProtocolHandler.java,notifyFailoverStarting,445-445,[        synchronized (_frameListeners)],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/client/protocol/AMQProtocolHandler.java,propagateExceptionToFrameListeners,426-426,[        synchronized (_frameListeners)],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/client/protocol/AMQProtocolHandler.java,writeCommandFrameAndWaitForReply,683-683,[            synchronized (_frameListeners)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/protocol/AMQProtocolHandler.java,received,511-511,[        catch (Exception e)],,
STYLE,UCF_USELESS_CONTROL_FLOW,org/apache/qpid/client/protocol/AMQProtocolHandler.java,blockUntilNotFailingOver,804-804,[                if(!_failoverLatch.await(MAXIMUM_STATE_WAIT_TIME, TimeUnit.MILLISECONDS))],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/client/protocol/AMQProtocolHandlerTest.java,setUp,77-77,[        _handler = new AMQProtocolHandler(new MockAMQConnection("amqp://guest:guest@client/test?brokerlist='tcp://localhost:1'"));],,
CORRECTNESS,IJU_ASSERT_METHOD_INVOKED_FROM_RUN_METHOD,org/apache/qpid/client/protocol/AMQProtocolHandlerTest.java,run,184-184,[                    fail(e.getMessage());],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/protocol/AMQProtocolHandlerTest.java,run,181-181,[                catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/protocol/AMQProtocolHandlerTest.java,run,273-273,[                    catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/client/security/DynamicSaslRegistrar.java,parseProperties,202-202,[            catch (Exception ex)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/client/security/DynamicSaslRegistrarTest.java,,94-94,[                                             JCAProvider.QPID_CLIENT_SASL_PROVIDER_INFO){};],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/client/security/JCAProvider.java,,47-72,[    private static final Logger log = LoggerFactory.getLogger(JCAProvider.class);, ,     /**,      * Creates the security provider with a map from SASL mechanisms to implementing factories.,      *,      * @param providerMap The map from SASL mechanims to implementing factory classes.,      */,     public JCAProvider(Map<String, Class<? extends SaslClientFactory>> providerMap),     {,         super(QPID_CLIENT_SASL_PROVIDER_NAME, QPID_CLIENT_SASL_PROVIDER_VERSION, QPID_CLIENT_SASL_PROVIDER_INFO);,         register(providerMap);,     }, ,     /**,      * Registers client factory classes for a map of mechanism names to client factory classes.,      *,      * @param providerMap The map from SASL mechanims to implementing factory classes.,      */,     private void register(Map<String, Class<? extends SaslClientFactory>> providerMap),     {,         for (Map.Entry<String, Class<? extends SaslClientFactory>> me : providerMap.entrySet()),         {,             put( "SaslClientFactory."+me.getKey(), me.getValue().getName());,             log.debug("Recording SASL Client factory for " + me.getKey() + " as " + me.getValue().getName());,         },     }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/security/scram/AbstractScramSaslClient.java,calculateClientProof,207-207,[            return finalMessageWithProof.getBytes();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/ssl/SSLTest.java,extractCertFileFromTestTrustStore,656-656,[                cos.write("-----BEGIN CERTIFICATE-----\n".getBytes());],,extractCertFileFromTestTrustStore,660-660,[                    cos.write(base64encoded.substring(0, 76).getBytes());],,extractCertFileFromTestTrustStore,661-661,[                    cos.write("\n".getBytes());],,extractCertFileFromTestTrustStore,664-664,[                cos.write(base64encoded.getBytes());],,extractCertFileFromTestTrustStore,666-666,[                cos.write("\n-----END CERTIFICATE-----\n".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/ssl/SSLTest.java,extractResourcesFromTestKeyStore,599-599,[            kos.write("-----BEGIN PRIVATE KEY-----\n".getBytes());],,extractResourcesFromTestKeyStore,603-603,[                kos.write(base64encoded.substring(0,76).getBytes());],,extractResourcesFromTestKeyStore,604-604,[                kos.write("\n".getBytes());],,extractResourcesFromTestKeyStore,608-608,[            kos.write(base64encoded.getBytes());],,extractResourcesFromTestKeyStore,609-609,[            kos.write("\n-----END PRIVATE KEY-----".getBytes());],,extractResourcesFromTestKeyStore,620-620,[                cos.write("-----BEGIN CERTIFICATE-----\n".getBytes());],,extractResourcesFromTestKeyStore,624-624,[                    cos.write(base64encoded.substring(0, 76).getBytes());],,extractResourcesFromTestKeyStore,625-625,[                    cos.write("\n".getBytes());],,extractResourcesFromTestKeyStore,628-628,[                cos.write(base64encoded.getBytes());],,extractResourcesFromTestKeyStore,630-630,[                cos.write("\n-----END CERTIFICATE-----\n".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/ssl/SSLTest.java,verifyExceptionCausesContains,326-326,[        String strace = bout.toString();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/client/ssl/SSLTest.java,verifyExceptionCausesContains,325-325,[        e.printStackTrace(new PrintStream(bout));],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/client/ssl/SSLTest.java,setUp,71-71,[        setSystemProperty("javax.net.debug", "ssl");],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/client/util/ClassLoadingAwareObjectInputStreamTest.java,setUp,40-40,[        ByteArrayOutputStream baos = new ByteArrayOutputStream();],,
BAD_PRACTICE,RR_NOT_CHECKED,org/apache/qpid/codec/AMQDecoder.java,decodeBuffer,289-289,[                        msg.read(remaining);],,
BAD_PRACTICE,SR_NOT_CHECKED,org/apache/qpid/codec/AMQDecoder.java,decodable,335-335,[        in.skip(1 + 2);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/codec/AMQDecoderTest.java,setUp,53-53,[        _methodProcessor = new FrameCreatingMethodProcessor(ProtocolVersion.v0_91);],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/codec/ClientDecoder.java,processMethod,216-218,[                    if(!channelMethodProcessor.ignoreAllButCloseOk()),                     {,                         channelMethodProcessor.receiveBasicRecoverSyncOk();],,processMethod,222-224,[                    if(!channelMethodProcessor.ignoreAllButCloseOk()),                     {,                         channelMethodProcessor.receiveBasicRecoverSyncOk();],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/codec/ServerDecoder.java,processMethod,195-196,[                    BasicRecoverSyncBody.process(in, methodProcessor.getChannelMethodProcessor(channelId));,                     break;],,processMethod,198-199,[                    BasicRecoverSyncBody.process(in, methodProcessor.getChannelMethodProcessor(channelId));,                     break;],,
BAD_PRACTICE,NP_BOOLEAN_RETURN_NULL,org/apache/qpid/configuration/Accessor.java,getBoolean,90-90,[                return null;],,
CORRECTNESS,DLS_DEAD_STORE_OF_CLASS_LITERAL,org/apache/qpid/configuration/ClientProperties.java,<clinit>,311-311,[        Class<CommonProperties> commonPropertiesClass = CommonProperties.class;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/configuration/QpidPropertyTest.java,testIntegerValueReadFromSystemProperty,113-113,[        setTestSystemProperty(_systemPropertyName, Integer.valueOf(expectedValue).toString());],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/configuration/QpidPropertyTest.java,testValueIsNullWhenNoDefaultAndNoSystemPropertiesAreSet,89-89,[        String propertyValue = QpidProperty.stringProperty(nullString, _systemPropertyName).get();],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/disttest/AbstractRunner.java,getContext,51-51,[        catch (Exception e)],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/Benchmark.java,buildTestConfigFrom,254-254,[                testConfig = configReader.readConfig(new InputStreamReader(configStream), testConfigFile.endsWith(".js"));],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/disttest/Benchmark.java,loadProperties,157-157,[            if (inStream != null)],,
STYLE,UC_USELESS_OBJECT,org/apache/qpid/disttest/Benchmark.java,runTests,204-204,[            List<ResultsForAllTests> results = new ArrayList<ResultsForAllTests>();],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/disttest/Benchmark.java,loadProperties,141-141,[        InputStream inStream = getClass().getResourceAsStream(jndiConfig);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/Benchmark.java,,74-78,[    {{,         put(JNDI_CONFIG_PROP, JNDI_CONFIG_DEFAULT);,         put(TEST_CONFIG_PROP, "/Benchmark.js");,         put(REPORT_MESSAGE_TOTALS, "false");,     }};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/ClientRunner.java,,81-89,[            {,                 @Override,                 public void run(),                 {,                     LOGGER.info("Starting client " + client.getClientName());,                     client.start();,                     client.waitUntilStopped();,                     LOGGER.info("Stopped client " + client.getClientName());,                 }],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/disttest/ConfigFileHelper.java,getTestConfigFiles,51-51,[            for (String configFile : configFiles)],,getTestConfigFiles,41-41,[            final String[] configFiles = configFileOrDirectory.list(new FilenameFilter()],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/ConfigFileHelper.java,,42-47,[            {,                 @Override,                 public boolean accept(File dir, String name),                 {,                     boolean suffixOk = name.endsWith(".json") || name.endsWith(".js");,                     return new File(dir, name).isFile() && suffixOk;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/disttest/ConfigFileHelperTest.java,setUp,39-39,[        _testDir = TestFileUtils.createTestDirectory();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/disttest/ConfigFileHelperTest.java,createDir,62-62,[        dir.mkdir();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/disttest/ConfigFileHelperTest.java,createFile,68-68,[        file.createNewFile();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/ConfigFileTestHelper.java,getConfigFileReader,38-38,[        Reader reader = new InputStreamReader(inputStream);],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/disttest/message/Command.java,,38-85,[    {,         this.type = type;,     }, ,     public CommandType getType(),     {,         return type;,     }, ,     public void accept(Visitor visitor),     {,         visitor.visit(this);,     }, ,     @Override,     public String toString(),     {,         StringBuilder builder = new StringBuilder(getClass().getSimpleName());,         builder.append('[');,         if(Command.class.isAssignableFrom(getClass().getSuperclass())),         {,             builder.append(super.toString());,         },         final Field[] fields = getClass().getDeclaredFields();,         AccessibleObject.setAccessible(fields, true);,         boolean first = true;,         for(Field field : fields),         {,             if(first),             {,                 first = false;,             },             else,             {,                 builder.append(',');,             },             builder.append(field.getName().replaceFirst("^_",""));,             builder.append('=');,             try,             {,                 builder.append(field.get(this));,             },             catch (IllegalAccessException e),             {,                 builder.append("<<exception>>");,             },         },         return builder.toString();],,
PERFORMANCE,DM_STRING_VOID_CTOR,org/apache/qpid/disttest/VisitorTest.java,testStringVisited,31-31,[        Object argument = new String();],,
BAD_PRACTICE,ES_COMPARING_STRINGS_WITH_EQ,org/apache/qpid/disttest/VisitorTest.java,testStringVisited,36-36,[        assertSame(argument, visitor._string);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/disttest/VisitorTest.java,,87-89,[        {,             super(null);,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/disttest/VisitorTest.java,,67-80,[    class TestVisitor extends Visitor,     {,         String _string = null;,         TestCommand _testCommand = null;, ,         public void visit(String string),         {,             _string = string;,         }, ,         public void visit(TestCommand command),         {,             _testCommand = command;,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/charting/chartbuilder/CategoryDataSetBasedChartBuilder.java,,44-76,[        {,             final private DefaultCategoryDataset _dataset = new DefaultCategoryDataset();, ,             @Override,             public void addDataPointToSeries(SeriesDefinition seriesDefinition, SeriesRow row),             {,                 String x = row.dimensionAsString(0);,                 double y = row.dimensionAsDouble(1);,                 _dataset.addValue(y, seriesDefinition.getSeriesLegend(), x);,             }, ,             @Override,             public void beginSeries(SeriesDefinition seriesDefinition),             {,                 // unused,             }, ,             @Override,             public void endSeries(SeriesDefinition seriesDefinition),             {,                 // unused,             }, ,             @Override,             public int getNumberOfDimensions(),             {,                 return 2;,             }, ,             @Override,             public Dataset getPopulatedDataset(),             {,                 return _dataset;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/disttest/charting/chartbuilder/ChartProductionTest.java,,205-236,[        private SeriesRow[] _sampleSeriesRows = SIMPLE_SERIES_ROWS;, ,         public SampleSeriesBuilder(),         {,         }, ,         public SampleSeriesBuilder(SeriesRow[] sampleSeriesRows),         {,             _sampleSeriesRows = sampleSeriesRows;,         }, ,         @Override,         public Dataset build(List<SeriesDefinition> seriesDefinitions),         {,             for (Iterator<SeriesDefinition> iterator = seriesDefinitions.iterator(); iterator.hasNext();),             {,                 SeriesDefinition seriesDefinition = iterator.next();,                 _datasetHolder.beginSeries(seriesDefinition);,                 for(SeriesRow seriesRow : _sampleSeriesRows),                 {,                     _datasetHolder.addDataPointToSeries(seriesDefinition, seriesRow);,                 },                 _datasetHolder.endSeries(seriesDefinition);,             },             return _datasetHolder.getPopulatedDataset();,         }, ,         @Override,         public void setDatasetHolder(DatasetHolder dataPointCallback),         {,             _datasetHolder = dataPointCallback;,         }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/disttest/charting/chartbuilder/ColorFactory.java,getColourFromStaticField,58-58,[            return (Color) Color.class.getField(colourName.toLowerCase()).get(null);],,
I18N,DM_CONVERT_CASE,org/apache/qpid/disttest/charting/chartbuilder/ColorFactory.java,toColour,37-37,[        if (colourName.toLowerCase().startsWith("dark_"))],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/charting/chartbuilder/StatisticalBarChartBuilder.java,,53-86,[        {,             private final DefaultStatisticalCategoryDataset _dataset = new DefaultStatisticalCategoryDataset();, ,             @Override,             public void addDataPointToSeries(SeriesDefinition seriesDefinition, SeriesRow row),             {,                 String x = row.dimensionAsString(0);,                 double mean = row.dimensionAsDouble(1);,                 double stdDev = row.dimensionAsDouble(2);,                 _dataset.add(mean, stdDev, seriesDefinition.getSeriesLegend(), x);,             }, ,             @Override,             public void beginSeries(SeriesDefinition seriesDefinition),             {,                 // unused,             }, ,             @Override,             public void endSeries(SeriesDefinition seriesDefinition),             {,                 // unused,             }, ,             @Override,             public int getNumberOfDimensions(),             {,                 return 3;,             }, ,             @Override,             public Dataset getPopulatedDataset(),             {,                 return _dataset;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/charting/chartbuilder/XYDataSetBasedChartBuilder.java,,48-96,[        {,             private final DefaultXYDataset _dataset = new DefaultXYDataset();,             private List<Double[]> _xyPairs = null;, ,             @Override,             public void beginSeries(SeriesDefinition seriesDefinition),             {,                 _xyPairs = new ArrayList<Double[]>();,             }, ,             @Override,             public void addDataPointToSeries(SeriesDefinition seriesDefinition, SeriesRow row),             {,                 double x = row.dimensionAsDouble(0);,                 double y = row.dimensionAsDouble(1);,                 _xyPairs.add(new Double[] {x, y});,             }, ,             @Override,             public void endSeries(SeriesDefinition seriesDefinition),             {,                 double[][] seriesData = listToSeriesDataArray();,                 _dataset.addSeries(seriesDefinition.getSeriesLegend(), seriesData);,             }, ,             @Override,             public int getNumberOfDimensions(),             {,                 return 2;,             }, ,             private double[][] listToSeriesDataArray(),             {,                 double[][] seriesData = new double[2][_xyPairs.size()];,                 int i = 0;,                 for (Iterator<Double[]> iterator = _xyPairs.iterator(); iterator.hasNext();),                 {,                     Double[] xyPair = iterator.next();,                     seriesData[0][i] = xyPair[0];,                     seriesData[1][i] = xyPair[1];,                     i++;,                 },                 return seriesData;,             }, ,             @Override,             public Dataset getPopulatedDataset(),             {,                 return _dataset;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/charting/chartbuilder/XYDataSetBasedChartBuilder.java,,105-116,[        {,             @Override,             public void setSeriesStroke(int seriesIndex, Stroke stroke, JFreeChart targetChart),             {,                 targetChart.getXYPlot().getRenderer().setSeriesStroke(seriesIndex, stroke);,             }, ,             @Override,             public void setSeriesPaint(int seriesIndex, Color colour, JFreeChart targetChart),             {,                 targetChart.getXYPlot().getRenderer().setSeriesPaint(seriesIndex, colour);,             }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/charting/definition/ChartingDefinitionCreator.java,createChartDefinition,78-78,[            reader = new BufferedReader(new FileReader(file));],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/disttest/charting/definition/ChartingDefinitionCreator.java,createFromFileOrDirectory,58-58,[            for (File file : matchingFiles)],,createFromFileOrDirectory,56-56,[            File[] matchingFiles = fileOrDirectory.listFiles(new CHARTDEF_FILE_FILTER());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/disttest/charting/definition/ChartingDefinitionCreator.java,,134-139,[    private final class CHARTDEF_FILE_FILTER implements FileFilter,     {,         @Override,         public boolean accept(File pathname),         {,             return pathname.isFile() && pathname.getName().endsWith(CHARTDEF_FILE_EXTENSION);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/charting/definition/ChartingDefinitionCreatorTest.java,createTestDefinitionWithin,139-139,[        final FileWriter writer = new FileWriter(chartDef);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/disttest/charting/definition/ChartingDefinitionCreatorTest.java,createTestDefinitionWithin,127-127,[        chartDef.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/disttest/charting/definition/ChartingDefinitionCreatorTest.java,createTestTemporaryDirectory,155-155,[        tmpDir.mkdirs();],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/disttest/charting/seriesbuilder/JdbcSeriesBuilder.java,buildDataSetForSingleSeries,88-88,[            ResultSet results = stmt.executeQuery(seriesStatement);],,buildDataSetForSingleSeries,89-89,[            int columnCount = results.getMetaData().getColumnCount();],,buildDataSetForSingleSeries,90-90,[            _datasetHolder.beginSeries(seriesDefinition);],,buildDataSetForSingleSeries,91-91,[            while (results.next())],,buildDataSetForSingleSeries,102-102,[            _datasetHolder.endSeries(seriesDefinition);],,buildDataSetForSingleSeries,110-110,[            if (stmt != null)],,buildDataSetForSingleSeries,121-121,[            if (conn != null)],,buildDataSetForSingleSeries,133-133,[    }],,
BAD_PRACTICE,ODR_OPEN_DATABASE_RESOURCE_EXCEPTION_PATH,org/apache/qpid/disttest/charting/seriesbuilder/JdbcSeriesBuilder.java,buildDataSetForSingleSeries,83-83,[            conn = DriverManager.getConnection(jdbcUrl);],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/disttest/charting/seriesbuilder/JdbcSeriesBuilder.java,buildDataSetForSingleSeries,88-88,[            ResultSet results = stmt.executeQuery(seriesStatement);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/charting/seriesbuilder/JdbcSeriesBuilderTest.java,createTestCsvIn,76-76,[        PrintWriter csvWriter = new PrintWriter(new BufferedWriter(new FileWriter(csv)));],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/disttest/charting/seriesbuilder/JdbcSeriesBuilderTest.java,createTestTemporaryDirectory,98-98,[        tmpDir.mkdirs();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/charting/writer/ChartWriter.java,writeHtmlSummaryToFileSystem,108-108,[            writer = new BufferedWriter(new FileWriter(summaryFile));],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/disttest/charting/writer/ChartWriter.java,writeHtmlSummaryToFileSystem,133-133,[        catch (Exception e)],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/disttest/charting/writer/ChartWriter.java,writeHtmlSummaryToFileSystem,90-90,[        String htmlHeader = String.format(],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/disttest/charting/writer/ChartWriter.java,writeHtmlSummaryToFileSystem,120-120,[                ChartingDefinition def = _chartFilesToChartDef.get(chartFile);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/charting/writer/ChartWriterTest.java,testWriteHtmlSummaryToFileSystemOverwritingExistingFile,95-95,[        String expectedSummaryContent = new Scanner(expectedSummaryFileInputStream).useDelimiter("\\A").next();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/charting/writer/ChartWriterTest.java,writeDummyContentToSummaryFileToEnsureItGetsOverwritten,122-122,[            writer = new FileWriter(summaryFile);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/disttest/charting/writer/ChartWriterTest.java,setUp,50-50,[        DefaultPieDataset dataset = new DefaultPieDataset();],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/disttest/charting/writer/ChartWriterTest.java,testWriteHtmlSummaryToFileSystemOverwritingExistingFile,94-94,[        InputStream expectedSummaryFileInputStream = getClass().getResourceAsStream("expected-chart-summary.html");],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/disttest/client/Client.java,waitUntilStopped,110-110,[                _latch.await(timeout, TimeUnit.MILLISECONDS);],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/disttest/client/ConsumerParticipantTest.java,testReceiveMessagesBatchedSynch,138-138,[        long totalPayloadSize = PAYLOAD_SIZE_PER_MESSAGE * numberOfMessages;],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/disttest/client/ConsumerParticipantTest.java,testLatency,185-185,[        long totalPayloadSize = PAYLOAD_SIZE_PER_MESSAGE * numberOfMessages;],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/disttest/client/ConsumerParticipantTest.java,testReceiveOneMessageSynch,106-106,[        long totalPayloadSize = PAYLOAD_SIZE_PER_MESSAGE * numberOfMessages;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/disttest/client/MessageProvider.java,,50-50,[    public static final String[] STANDARD_JMS_PROPERTIES = { "correlationID", DELIVERY_MODE,],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/client/MessageProvider.java,,187-194,[        {,             @Override,             public String call() throws Exception,             {,                 final int messageSize = command.getMessageSize();,                 char[] chars = new char[messageSize];,                 Arrays.fill(chars, 'a');,                 return new String(chars);],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/disttest/client/MessageProviderTest.java,testNextMessageWithProperties,91-91,[        listItems.add(new SimplePropertyValue(new Double(2.0)));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/disttest/client/MessageProviderTest.java,testNextMessageWithProperties,88-88,[        properties.put("test2", new SimplePropertyValue(new Integer(1)));],,testNextMessageWithProperties,89-89,[        properties.put("priority", new SimplePropertyValue(new Integer(2)));],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/client/MessageProviderTest.java,,60-64,[        {,             @Override,             public String getMessagePayload(CreateProducerCommand command),             {,                 return super.getMessagePayload(command);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/disttest/client/ParticipantExecutorTest.java,,179-185,[    private final class SynchronousExecutor implements Executor,     {,         @Override,         public void execute(Runnable command),         {,             command.run();,         }],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/disttest/client/ProducerParticipantTest.java,testSendMessageWithPublishInterval,188-188,[        long totalPayloadSize = PAYLOAD_SIZE_PER_MESSAGE * numberOfMessages;],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/disttest/client/ProducerParticipantTest.java,testOneMessageToSend,116-116,[        long totalPayloadSize = PAYLOAD_SIZE_PER_MESSAGE * numberOfMessages;],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/disttest/client/ProducerParticipantTest.java,testStartDelay,83-83,[        long totalPayloadSize = PAYLOAD_SIZE_PER_MESSAGE * numberOfMessages;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/disttest/client/property/ListPropertyValue.java,,93-93,[        result = prime * result + _currentIndex;],,,66-66,[        if (_currentIndex >= _items.size())],,,77-77,[        Object nextValue = _items.get(_currentIndex);],,,70-70,[                _currentIndex = 0;],,,78-78,[        _currentIndex++;],,,74-74,[                _currentIndex = _items.size() -1;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/disttest/client/property/ListPropertyValue.java,,111-111,[        if (_cyclic != other._cyclic)],,,94-94,[        result = prime * result + (_cyclic ? 1231 : 1237);],,,55-55,[        _cyclic = cyclic;],,,68-68,[            if (_cyclic)],,,60-60,[        return _cyclic;],,
CORRECTNESS,NP_NULL_ON_SOME_PATH,org/apache/qpid/disttest/client/property/ListPropertyValue.java,equals,119-119,[        return _items.equals(other._items);],,equals,115-115,[        if (_items == null && other._items != null)],,
PERFORMANCE,DM_BOOLEAN_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,setUp,39-39,[        _items.add(new SimplePropertyValue(new Boolean(true)));],,
PERFORMANCE,DM_BOOLEAN_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,testGetValue,61-61,[            assertEquals("Unexpected third item", new Boolean(true), _generator.getValue());],,
PERFORMANCE,DM_BOOLEAN_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,testNonCyclicGetValue,79-79,[        assertEquals("Unexpected third item", new Boolean(true), _generator.getValue());],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,setUp,38-38,[        _items.add(new SimplePropertyValue(new Double(2.1)));],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,testGetValue,60-60,[            assertEquals("Unexpected second item", new Double(2.1), _generator.getValue());],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,testNonCyclicGetValue,78-78,[        assertEquals("Unexpected second item", new Double(2.1), _generator.getValue());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,setUp,37-37,[        _items.add(new SimplePropertyValue(new Integer(1)));],,setUp,43-43,[        innerListItems.add(new SimplePropertyValue(new Integer(2)));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,testGetValue,59-59,[            assertEquals("Unexpected first item", new Integer(1), _generator.getValue());],,testGetValue,68-68,[                assertEquals("Unexpected forth item", new Integer(2), _generator.getValue());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/disttest/client/property/ListPropertyValueTest.java,testNonCyclicGetValue,77-77,[        assertEquals("Unexpected first item", new Integer(1), _generator.getValue());],,testNonCyclicGetValue,81-81,[        assertEquals("Unexpected fifth item", new Integer(2), _generator.getValue());],,testNonCyclicGetValue,83-83,[        assertEquals("Unexpected sevens item", new Integer(2), _generator.getValue());],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/disttest/client/property/NumericGeneratedPropertySupport.java,,28-28,[    public static final Class<?>[] SUPPORTED_TYPES = { double.class, float.class, int.class, long.class, short.class,],,
CORRECTNESS,NP_NULL_ON_SOME_PATH,org/apache/qpid/disttest/client/property/NumericGeneratedPropertySupport.java,equals,172-172,[        else if (!_type.equals(other._type))],,equals,168-168,[        if (_type == null && other._type != null)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/disttest/client/property/PropertyValueFactoryTest.java,testCreateNonExistingPropertyValue,69-69,[        catch (Exception e)],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/disttest/client/property/RandomPropertyValueTest.java,testGetters,39-39,[        assertEquals("Unexpected upper boundary", new Double(20.0), _generator.getUpper());],,testGetters,40-40,[        assertEquals("Unexpected lower boundary", new Double(10.0), _generator.getLower());],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/disttest/client/property/RangePropertyValue.java,,121-121,[        if (Double.doubleToLongBits(_currentValue) != Double.doubleToLongBits(other._currentValue)],,,97-97,[        temp = Double.doubleToLongBits(_currentValue);],,,65-65,[        if (_currentValue < lower)],,,69-69,[        else if (_currentValue > upper)],,,67-67,[            _currentValue = lower;],,,80-80,[        result = _currentValue;],,,81-81,[        _currentValue += _step;],,,77-77,[                _currentValue = upper;],,,73-73,[                _currentValue = lower;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/disttest/client/property/RangePropertyValue.java,,122-122,[                || Double.doubleToLongBits(_step) != Double.doubleToLongBits(other._step) || _cyclic != other._cyclic)],,,99-99,[        result = prime * result + (_cyclic ? 1231 : 1237);],,,51-51,[        _cyclic = cyclic;],,,71-71,[            if (_cyclic)],,,46-46,[        return _cyclic;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/disttest/client/property/RangePropertyValue.java,,121-121,[        if (Double.doubleToLongBits(_currentValue) != Double.doubleToLongBits(other._currentValue)],,,122-122,[                || Double.doubleToLongBits(_step) != Double.doubleToLongBits(other._step) || _cyclic != other._cyclic)],,,100-100,[        temp = Double.doubleToLongBits(_step);],,,41-41,[        return _step;],,,56-56,[        _step = step;],,,81-81,[        _currentValue += _step;],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/disttest/client/property/RangePropertyValueTest.java,testGetters,40-40,[        assertEquals("Unexpected upper boundary", new Double(10.0), _generator.getUpper());],,testGetters,41-41,[        assertEquals("Unexpected lower boundary", new Double(0.0), _generator.getLower());],,testGetters,42-42,[        assertEquals("Unexpected step", new Double(2.0), _generator.getStep());],,
CORRECTNESS,NP_NULL_ON_SOME_PATH,org/apache/qpid/disttest/client/property/SimplePropertyValue.java,equals,76-76,[        return _value.equals(other._value);],,equals,72-72,[        if (_value == null && other._value != null)],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/disttest/client/property/SimplePropertyValueTest.java,testGetValue,27-27,[        SimplePropertyValue value = new SimplePropertyValue(new Integer(1));],,testGetValue,28-28,[        assertEquals("Unexpected value", new Integer(1), value.getValue());],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/disttest/client/utils/ExecutorWithNoLimitsTest.java,testCallableThrowsException,55-55,[        catch (Exception e)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/disttest/client/utils/ExecutorWithTimeLimitTest.java,testCallableThrowsException,81-81,[        catch (Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/client/utils/ExecutorWithTimeLimitTest.java,,112-117,[        {,             @Override,             public Void call() throws Exception,             {,                 Thread.sleep(TIMEOUT * 2);,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/controller/TestRunnerTest.java,,237-242,[        {,             @Override,             public void run(),             {,                 runner.processParticipantResult(result);,             }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/controller/config/ConfigReader.java,getConfigReader,75-75,[            reader = new FileReader(fileName);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/disttest/controller/config/ConfigReaderTest.java,setUp,38-38,[        ConfigReader configReader = new ConfigReader();],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/disttest/controller/config/IterationValue.java,getIterationPropertyValuesWithoutUnderscores,68-68,[            String propertyValue = _iterationPropertyValuesWithUnderscores.get(propertyNameWithUnderscore);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/controller/config/JavaScriptConfigEvaluator.java,evaluateJavaScript,70-70,[            engine.eval(new InputStreamReader(getClass().getClassLoader().getResourceAsStream("json2.js")));],,evaluateJavaScript,71-71,[            engine.eval(new InputStreamReader(getClass().getClassLoader().getResourceAsStream("test-utils.js")));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/controller/config/JavaScriptConfigEvaluator.java,evaluateJavaScript,50-50,[            fileReader = new FileReader(fileName);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/controller/config/JavaScriptConfigEvaluatorTest.java,testEvaluateJavaScriptWithReader,75-75,[        FileReader fileReader = new FileReader(jsFilePath);],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/disttest/controller/config/JavaScriptConfigEvaluatorTest.java,testEvaluateJavaScriptWithReader,75-75,[        FileReader fileReader = new FileReader(jsFilePath);],,testEvaluateJavaScriptWithReader,76-76,[        String rawConfig = new JavaScriptConfigEvaluator().evaluateJavaScript(fileReader);],,testEvaluateJavaScriptWithReader,78-78,[        Map configAsObject = getObject(rawConfig);],,testEvaluateJavaScriptWithReader,79-79,[        performTest(configAsObject);],,testEvaluateJavaScriptWithReader,80-80,[    }],,
PERFORMANCE,BX_UNBOXING_IMMEDIATELY_REBOXED,org/apache/qpid/disttest/controller/config/ParticipantConfig.java,setParticipantProperties,76-76,[        Long maximumDuration = overridenDuration == null ? _maximumDuration : overridenDuration;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/disttest/controller/config/ParticipantConfig.java,getOverriddenDuration,87-87,[                long overriddenDuration = Long.valueOf(overriddenDurationString);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/controller/config/ParticipantConfigTest.java,,36-36,[        {],,
PERFORMANCE,BX_UNBOXING_IMMEDIATELY_REBOXED,org/apache/qpid/disttest/controller/config/ProducerConfig.java,createCommand,89-89,[        Integer messageSize = overriddenMessageSize == null ? _messageSize : overriddenMessageSize ;],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/disttest/controller/config/ProducerConfig.java,getOverriddenMessageSize,108-108,[                int overriddenMessageSize = Integer.valueOf(overriddenMessageSizeString);],,
SECURITY,SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING,org/apache/qpid/disttest/db/ResultsDbWriter.java,writeParticipantResult,369-369,[            statement = connection.prepareStatement(sqlTemplate);],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/disttest/db/ResultsDbWriterTest.java,assertResultsAreInDb,139-139,[        ResultSet rs = statement.executeQuery(],,assertResultsAreInDb,145-145,[            rs.next();],,assertResultsAreInDb,146-146,[            assertEquals(participantResult.getTestName(), rs.getString(TEST_NAME.getDisplayName()));],,assertResultsAreInDb,147-147,[            assertEquals(participantResult.getIterationNumber(), rs.getInt(ITERATION_NUMBER.getDisplayName()));],,assertResultsAreInDb,148-148,[            assertEquals(participantResult.getParticipantName(), rs.getString(PARTICIPANT_NAME.getDisplayName()));],,assertResultsAreInDb,149-149,[            assertEquals(participantResult.getThroughput(), rs.getDouble(THROUGHPUT.getDisplayName()));],,assertResultsAreInDb,150-150,[            assertEquals(expectedRunId, rs.getString(ResultsDbWriter.RUN_ID));],,assertResultsAreInDb,151-151,[            assertEquals(new Timestamp(_dummyTimestamp), rs.getTimestamp(ResultsDbWriter.INSERTED_TIMESTAMP));],,assertResultsAreInDb,155-155,[            connection.close();],,assertResultsAreInDb,156-156,[        }],,assertResultsAreInDb,157-157,[    }],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/disttest/db/ResultsDbWriterTest.java,assertResultsAreInDb,138-138,[        Statement statement = connection.createStatement();],,assertResultsAreInDb,139-139,[        ResultSet rs = statement.executeQuery(],,assertResultsAreInDb,140-140,[                "SELECT * FROM results WHERE testName='" + participantResult.getTestName() +],,assertResultsAreInDb,145-145,[            rs.next();],,assertResultsAreInDb,146-146,[            assertEquals(participantResult.getTestName(), rs.getString(TEST_NAME.getDisplayName()));],,assertResultsAreInDb,147-147,[            assertEquals(participantResult.getIterationNumber(), rs.getInt(ITERATION_NUMBER.getDisplayName()));],,assertResultsAreInDb,148-148,[            assertEquals(participantResult.getParticipantName(), rs.getString(PARTICIPANT_NAME.getDisplayName()));],,assertResultsAreInDb,149-149,[            assertEquals(participantResult.getThroughput(), rs.getDouble(THROUGHPUT.getDisplayName()));],,assertResultsAreInDb,150-150,[            assertEquals(expectedRunId, rs.getString(ResultsDbWriter.RUN_ID));],,assertResultsAreInDb,151-151,[            assertEquals(new Timestamp(_dummyTimestamp), rs.getTimestamp(ResultsDbWriter.INSERTED_TIMESTAMP));],,assertResultsAreInDb,155-155,[            connection.close();],,assertResultsAreInDb,156-156,[        }],,assertResultsAreInDb,157-157,[    }],,
BAD_PRACTICE,ODR_OPEN_DATABASE_RESOURCE,org/apache/qpid/disttest/db/ResultsDbWriterTest.java,assertResultsAreInDb,138-138,[        Statement statement = connection.createStatement();],,
BAD_PRACTICE,ODR_OPEN_DATABASE_RESOURCE_EXCEPTION_PATH,org/apache/qpid/disttest/db/ResultsDbWriterTest.java,assertResultsAreInDb,137-137,[        Connection connection = DriverManager.getConnection(url);],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/disttest/db/ResultsDbWriterTest.java,assertResultsAreInDb,139-139,[        ResultSet rs = statement.executeQuery(],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/jms/ClientJmsDelegate.java,calculatePayloadSizeFrom,666-666,[                return ((TextMessage) message).getText().getBytes().length;],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/disttest/jms/ClientJmsDelegate.java,tearDownTest,577-577,[            Session session = _testSubscriptions.get(subscription);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/disttest/jms/ClientJmsDelegate.java,,122-127,[            {,                 @Override,                 public void onMessage(final Message message),                 {,                     client.processInstruction(JmsMessageAdaptor.messageToCommand(message));,                 }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/disttest/jms/QpidQueueCreator.java,createQueue,154-154,[        catch (Exception e)],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/disttest/message/JsonHandlerTest.java,testGeneratorDesrialization,76-76,[            assertEquals("Unexpected generator value", new Integer(i), generator.getValue());],,
BAD_PRACTICE,HE_EQUALS_USE_HASHCODE,org/apache/qpid/disttest/message/JsonHandlerTest.java,equals,212-221,[            if (obj == null || !(obj instanceof TestCommand)),             {,                 return false;,             },             TestCommand other = (TestCommand)obj;,             if (_messageProperties == null && other._messageProperties != null ),             {,                 return false;,             },             return _messageProperties.equals(other._messageProperties);],,
CORRECTNESS,NP_NULL_ON_SOME_PATH,org/apache/qpid/disttest/message/JsonHandlerTest.java,equals,221-221,[            return _messageProperties.equals(other._messageProperties);],,equals,217-217,[            if (_messageProperties == null && other._messageProperties != null )],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/results/ResultsCsvWriter.java,writeResultsToOutputFile,81-81,[            writer = new FileWriter(outputFile);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/disttest/results/ResultsFileWriterTest.java,setUp,47-47,[        _resultsFileWriter.setCsvFormater(_csvFormater);],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/disttest/results/aggregation/SeriesStatisticsTest.java,,30-30,[    public static Collection<Long> SERIES = Arrays.asList(new Long[] { 2l, 4l, 4l, 4l, 5l, 5l, 7l, 9l, 5l });],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/disttest/results/aggregation/TestResultAggregatorTest.java,testAggregateResultsForConsumerWithLatencyResults,153-153,[        aggregatedTestResult.getAllConsumerParticipantResult().getTotalPayloadProcessed();],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/disttest/results/aggregation/TestResultAggregatorTest.java,testAggregateResultsForTwoConsumerAndOneProducer,104-104,[        aggregatedTestResult.getAllConsumerParticipantResult().getTotalPayloadProcessed();],,
PERFORMANCE,UM_UNNECESSARY_MATH,org/apache/qpid/disttest/results/aggregation/TestResultAggregatorTest.java,testAggregateResultsForConsumerWithLatencyResults,173-173,[        int expectedThroughtput = (int)Math.round(NUMBER_OF_MESSAGES_PRODUCED * 1000.0d /(CONSUMER2_ENDDATE - PRODUCER_STARTDATE));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/disttest/results/formatting/CSVFormatterTest.java,readCsvOutputFileAsString,52-52,[        BufferedReader br = new BufferedReader(new InputStreamReader(is));],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION_EXCEPTION_EDGE,org/apache/qpid/disttest/results/formatting/CSVFormatterTest.java,readCsvOutputFileAsString,47-47,[        InputStream is = getClass().getResourceAsStream(filename);],,readCsvOutputFileAsString,48-48,[        assertNotNull(is);],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/disttest/results/formatting/CSVFormatterTest.java,readCsvOutputFileAsString,52-52,[        BufferedReader br = new BufferedReader(new InputStreamReader(is));],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/disttest/results/formatting/CSVFormatterTest.java,readCsvOutputFileAsString,47-47,[        InputStream is = getClass().getResourceAsStream(filename);],,
BAD_PRACTICE,SE_COMPARATOR_SHOULD_BE_SERIALIZABLE,org/apache/qpid/disttest/results/formatting/CSVOrderParticipantResultComparator.java,,32-54,[public class CSVOrderParticipantResultComparator implements Comparator<ParticipantResult>, {,     // TODO yuk,     private static final Map<Class<? extends ParticipantResult>, Integer> TYPE_CODES = new HashMap<Class<? extends ParticipantResult>, Integer>();,     static {,         TYPE_CODES.put(ProducerParticipantResult.class, 0);,         TYPE_CODES.put(ConsumerParticipantResult.class, 1);,         TYPE_CODES.put(ParticipantResult.class, 2);,     }, ,     @Override,     public int compare(ParticipantResult left, ParticipantResult right),     {,         return ComparisonChain.start(),             .compare(getTypeCode(left), getTypeCode(right), Ordering.natural().nullsFirst()),             .compare(left.getParticipantName(), right.getParticipantName(), Ordering.natural().nullsFirst()),             .result();,     }, , ,     private int getTypeCode(ParticipantResult participantResult),     {,         return TYPE_CODES.get(participantResult.getClass());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/dtx/XidImpl.java,<init>,123-123,[            DataInputStream input = new DataInputStream(new ByteArrayInputStream(xid.getBytes()));],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/example/Drain.java,<init>,75-75,[        if (containsOp(TIMEOUT)) { timeout = Integer.parseInt(getOp(TIMEOUT))*1000; }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/example/Hello.java,runTest,78-78,[        catch (Exception exp) ],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/example/Hello.java,runTest,53-53,[        try (InputStream resourceAsStream = this.getClass().getResourceAsStream("hello.properties"))],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/example/OptionParser.java,parseOpts,163-163,[                    System.exit(0);],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/example/OptionParser.java,printHelp,132-132,[        System.exit(0);],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/example/OptionParser.java,printHelp,111-111,[        System.out.println(String.format("%s\n",usage));],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/example/OptionParser.java,printHelp,112-112,[        System.out.println(String.format("%s\n",desc));],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/example/OptionParser.java,printHelp,113-113,[        System.out.println(String.format("%s\n","Options:"));],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/example/jmxexample/QueueInformation.java,processCommandLine,219-219,[                System.exit(1);],,processCommandLine,240-240,[                System.exit(1);],,processCommandLine,246-246,[            System.exit(1);],,
MT_CORRECTNESS,LI_LAZY_INIT_STATIC,org/apache/qpid/example/jmxexample/QueueInformation.java,getAttributeList,174-190,[        if (_attribInfo == null),         {,             MBeanAttributeInfo[] allAttribs = ((MBeanInfo) _mbsc.getMBeanInfo((ObjectName) name)).getAttributes();, ,             if (_attribNames != null && _attribNames.size() != 0),             {,                 LinkedList<MBeanAttributeInfo> tmpList = new LinkedList<MBeanAttributeInfo>();, ,                 for (MBeanAttributeInfo attribute : allAttribs),                 {,                     if (_attribNames.contains(attribute.getName())),                     {,                         tmpList.add(attribute);,                     },                 }, ,                 _attribInfo = tmpList.toArray(new MBeanAttributeInfo[tmpList.size()]);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/example/jmxexample/QueueInformation.java,getDetails,317-317,[            catch (Exception e)],,
MT_CORRECTNESS,STCAL_INVOKE_ON_STATIC_DATE_FORMAT_INSTANCE,org/apache/qpid/example/jmxexample/QueueInformation.java,getDetails,266-266,[                System.out.print(_formatter.format(todaysDate));],,
BAD_PRACTICE,RC_REF_COMPARISON_BAD_PRACTICE_BOOLEAN,org/apache/qpid/filter/ComparisonExpression.java,matches,545-545,[        return (object != null) && (object == Boolean.TRUE);],,
BAD_PRACTICE,RC_REF_COMPARISON_BAD_PRACTICE_BOOLEAN,org/apache/qpid/filter/ComparisonExpression.java,matches,157-157,[            return (object != null) && (object == Boolean.TRUE);],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/filter/ConstantExpression.java,createFloat,110-110,[        Number value = new Double(text);],,
BAD_PRACTICE,RC_REF_COMPARISON_BAD_PRACTICE_BOOLEAN,org/apache/qpid/filter/ConstantExpression.java,matches,45-45,[            return (object != null) && (object == Boolean.TRUE);],,
BAD_PRACTICE,RC_REF_COMPARISON_BAD_PRACTICE_BOOLEAN,org/apache/qpid/filter/LogicExpression.java,matches,50-50,[        return (object != null) && (object == Boolean.TRUE);],,
BAD_PRACTICE,RC_REF_COMPARISON_BAD_PRACTICE_BOOLEAN,org/apache/qpid/filter/UnaryExpression.java,matches,79-79,[            return (object != null) && (object == Boolean.TRUE);],,
PERFORMANCE,SBSC_USE_STRINGBUFFER_CONCATENATION,org/apache/qpid/filter/selector/ParseException.java,initialise,138-138,[      retval += " \"";],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParser.java,JmsSelector,74-76,[    Expression left=null;,     left = orExpression();,         {if (true) return asBooleanExpression(left);}],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParser.java,ReInit,1112-1113,[     ReInit(stream, null);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParser.java,ReInit,1116-1120,[    try { jj_input_stream.ReInit(stream, encoding, 1, 1); } catch(java.io.UnsupportedEncodingException e) { throw new RuntimeException(e); },     token_source.ReInit(jj_input_stream);,     token = new Token();,     jj_ntk = -1;,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParser.java,ReInit,1132-1136,[    jj_input_stream.ReInit(stream, 1, 1);,     token_source.ReInit(jj_input_stream);,     token = new Token();,     jj_ntk = -1;,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParser.java,ReInit,1147-1150,[    token_source = tm;,     token = new Token();,     jj_ntk = -1;,   }],,
MALICIOUS_CODE,MS_OOI_PKGPROTECT,org/apache/qpid/filter/selector/SelectorParserConstants.java,,81-81,[  String[] tokenImage = {],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,jjMoveStringLiteralDfa4_0,360-365,[         if ((active0 & 0x20000L) != 0L),          {,             jjmatchedKind = 17;,             jjmatchedPos = 4;,          },          return jjMoveStringLiteralDfa5_0(active0, 0x800L);],,jjMoveStringLiteralDfa4_0,369-374,[         if ((active0 & 0x20000L) != 0L),          {,             jjmatchedKind = 17;,             jjmatchedPos = 4;,          },          return jjMoveStringLiteralDfa5_0(active0, 0x800L);],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,jjMoveStringLiteralDfa4_0,367-367,[         return jjMoveStringLiteralDfa5_0(active0, 0x2000L);],,jjMoveStringLiteralDfa4_0,376-376,[         return jjMoveStringLiteralDfa5_0(active0, 0x2000L);],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,jjMoveStringLiteralDfa5_0,393-398,[         if ((active0 & 0x2000L) != 0L),          {,             jjmatchedKind = 13;,             jjmatchedPos = 5;,          },          return jjMoveStringLiteralDfa6_0(active0, 0x800L);],,jjMoveStringLiteralDfa5_0,400-405,[         if ((active0 & 0x2000L) != 0L),          {,             jjmatchedKind = 13;,             jjmatchedPos = 5;,          },          return jjMoveStringLiteralDfa6_0(active0, 0x800L);],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,jjMoveStringLiteralDfa6_0,422-425,[         if ((active0 & 0x800L) != 0L),          {,             jjmatchedKind = 11;,             jjmatchedPos = 6;],,jjMoveStringLiteralDfa6_0,429-432,[         if ((active0 & 0x800L) != 0L),          {,             jjmatchedKind = 11;,             jjmatchedPos = 6;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,,856-856,[public static final String[] jjstrLiteralImages = {],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,,863-863,[public static final String[] lexStateNames = {],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,ReInit,895-899,[   jjmatchedPos = jjnewStateCnt = 0;,    curLexState = defaultLexState;,    input_stream = stream;,    ReInitRounds();, }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,ReInit,911-913,[   ReInit(stream);,    SwitchTo(lexState);, }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,SwitchTo,918-922,[   if (lexState >= 1 || lexState < 0),       throw new TokenMgrError("Error: Ignoring invalid lexical state : " + lexState + ". State unchanged.", TokenMgrError.INVALID_LEXICAL_STATE);,    else,       curLexState = lexState;, }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,ReInitRounds,903-906,[   jjround = 0x80000001;,    for (i = 48; i-- > 0;),       jjrounds[i] = 0x80000000;, }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,jjStopAtPos,35-37,[   jjmatchedKind = kind;,    jjmatchedPos = pos;,    return pos + 1;],,
STYLE,URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,org/apache/qpid/filter/selector/SelectorParserTokenManager.java,,32-32,[  public  void setDebugStream(java.io.PrintStream ds) { debugStream = ds; }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/filter/selector/SimpleCharStream.java,<init>,343-343,[    this(new java.io.InputStreamReader(dstream), startline, startcolumn, buffersize);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/filter/selector/SimpleCharStream.java,<init>,336-336,[    this(encoding == null ? new java.io.InputStreamReader(dstream) : new java.io.InputStreamReader(dstream, encoding), startline, startcolumn, buffersize);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,383-383,[    ReInit(new java.io.InputStreamReader(dstream), startline, startcolumn, buffersize);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,376-376,[    ReInit(encoding == null ? new java.io.InputStreamReader(dstream) : new java.io.InputStreamReader(dstream, encoding), startline, startcolumn, buffersize);],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,BeginToken,156-160,[    tokenBegin = -1;,     char c = readChar();,     tokenBegin = bufpos;, ,     return c;],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,Done,439-442,[    buffer = null;,     bufline = null;,     bufcolumn = null;,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ExpandBuff,62-107,[    char[] newbuffer = new char[bufsize + 2048];,     int newbufline[] = new int[bufsize + 2048];,     int newbufcolumn[] = new int[bufsize + 2048];, ,     try,     {,       if (wrapAround),       {,         System.arraycopy(buffer, tokenBegin, newbuffer, 0, bufsize - tokenBegin);,         System.arraycopy(buffer, 0, newbuffer, bufsize - tokenBegin, bufpos);,         buffer = newbuffer;, ,         System.arraycopy(bufline, tokenBegin, newbufline, 0, bufsize - tokenBegin);,         System.arraycopy(bufline, 0, newbufline, bufsize - tokenBegin, bufpos);,         bufline = newbufline;, ,         System.arraycopy(bufcolumn, tokenBegin, newbufcolumn, 0, bufsize - tokenBegin);,         System.arraycopy(bufcolumn, 0, newbufcolumn, bufsize - tokenBegin, bufpos);,         bufcolumn = newbufcolumn;, ,         maxNextCharInd = (bufpos += (bufsize - tokenBegin));,       },       else,       {,         System.arraycopy(buffer, tokenBegin, newbuffer, 0, bufsize - tokenBegin);,         buffer = newbuffer;, ,         System.arraycopy(bufline, tokenBegin, newbufline, 0, bufsize - tokenBegin);,         bufline = newbufline;, ,         System.arraycopy(bufcolumn, tokenBegin, newbufcolumn, 0, bufsize - tokenBegin);,         bufcolumn = newbufcolumn;, ,         maxNextCharInd = (bufpos -= tokenBegin);,       },     },     catch (Throwable t),     {,       throw new Error(t.getMessage());,     }, , ,     bufsize += 2048;,     available = bufsize;,     tokenBegin = 0;,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,FillBuff,111-149,[    if (maxNextCharInd == available),     {,       if (available == bufsize),       {,         if (tokenBegin > 2048),         {,           bufpos = maxNextCharInd = 0;,           available = tokenBegin;,         },         else if (tokenBegin < 0),           bufpos = maxNextCharInd = 0;,         else,           ExpandBuff(false);,       },       else if (available > tokenBegin),         available = bufsize;,       else if ((tokenBegin - available) < 2048),         ExpandBuff(true);,       else,         available = tokenBegin;,     }, ,     int i;,     try {,       if ((i = inputStream.read(buffer, maxNextCharInd, available - maxNextCharInd)) == -1),       {,         inputStream.close();,         throw new java.io.IOException();,       },       else,         maxNextCharInd += i;,       return;,     },     catch(java.io.IOException e) {,       --bufpos;,       backup(0);,       if (tokenBegin == -1),         tokenBegin = bufpos;,       throw e;],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,GetImage,412-415,[    if (bufpos >= tokenBegin),       return new String(buffer, tokenBegin, bufpos - tokenBegin + 1);,     else,       return new String(buffer, tokenBegin, bufsize - tokenBegin) +],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,GetSuffix,422-433,[    char[] ret = new char[len];, ,     if ((bufpos + 1) >= len),       System.arraycopy(buffer, bufpos - len + 1, ret, 0, len);,     else,     {,       System.arraycopy(buffer, bufsize - (len - bufpos - 1), ret, 0,,                                                         len - bufpos - 1);,       System.arraycopy(buffer, 0, ret, len - bufpos - 1, bufpos + 1);,     }, ,     return ret;],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,395-396,[    ReInit(dstream, 1, 1, 4096);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,407-408,[    ReInit(dstream, startline, startcolumn, 4096);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,383-384,[    ReInit(new java.io.InputStreamReader(dstream), startline, startcolumn, buffersize);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,389-390,[    ReInit(dstream, encoding, 1, 1, 4096);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,401-402,[    ReInit(dstream, encoding, startline, startcolumn, 4096);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,376-377,[    ReInit(encoding == null ? new java.io.InputStreamReader(dstream) : new java.io.InputStreamReader(dstream, encoding), startline, startcolumn, buffersize);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,330-331,[    ReInit(dstream, 1, 1, 4096);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,324-325,[    ReInit(dstream, startline, startcolumn, 4096);,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,ReInit,304-318,[    inputStream = dstream;,     line = startline;,     column = startcolumn - 1;, ,     if (buffer == null || buffersize != buffer.length),     {,       available = bufsize = buffersize;,       buffer = new char[buffersize];,       bufline = new int[buffersize];,       bufcolumn = new int[buffersize];,     },     prevCharIsLF = prevCharIsCR = false;,     tokenBegin = inBuf = maxNextCharInd = 0;,     bufpos = -1;,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/SimpleCharStream.java,UpdateLineColumn,165-201,[    column++;, ,     if (prevCharIsLF),     {,       prevCharIsLF = false;,       line += (column = 1);,     },     else if (prevCharIsCR),     {,       prevCharIsCR = false;,       if (c == '\n'),       {,         prevCharIsLF = true;,       },       else,         line += (column = 1);,     }, ,     switch (c),     {,       case '\r' :,         prevCharIsCR = true;,         break;,       case '\n' :,         prevCharIsLF = true;,         break;,       case '\t' :,         column--;,         column += (tabSize - (column % tabSize));,         break;,       default :,         break;,     }, ,     bufline[bufpos] = line;,     bufcolumn[bufpos] = column;,   }],,
BAD_PRACTICE,NM_METHOD_NAMING_CONVENTION,org/apache/qpid/filter/selector/TokenMgrError.java,LexicalError,129-133,[    return("Lexical error at line " +,           errorLine + ", column " +,           errorColumn + ".  Encountered: " +,           (EOFSeen ? "<EOF> " : ("\"" + addEscapes(String.valueOf(curChar)) + "\"") + " (" + (int)curChar + "), ") +,           "after : \"" + addEscapes(errorAfter) + "\"");],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/AMQFrame.java,,39-141,[    {,         _channel = channel;,         _bodyFrame = bodyFrame;,     }, ,     public long getSize(),     {,         return 1 + 2 + 4 + _bodyFrame.getSize() + 1;,     }, ,     public static final int getFrameOverhead(),     {,         return 1 + 2 + 4 + 1;,     }, , ,     public void writePayload(DataOutput buffer) throws IOException,     {,         buffer.writeByte(_bodyFrame.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, _channel);,         EncodingUtils.writeUnsignedInteger(buffer, _bodyFrame.getSize());,         _bodyFrame.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);,     }, ,     private static final byte[] FRAME_END_BYTE_ARRAY = new byte[] { FRAME_END_BYTE };, ,     @Override,     public long writePayload(final ByteBufferSender sender) throws IOException,     {,         byte[] frameHeader = new byte[7];,         BytesDataOutput buffer = new BytesDataOutput(frameHeader);, ,         buffer.writeByte(_bodyFrame.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, _channel);,         EncodingUtils.writeUnsignedInteger(buffer, _bodyFrame.getSize());,         sender.send(ByteBuffer.wrap(frameHeader));, ,         long size = 8 + _bodyFrame.writePayload(sender);, ,         sender.send(ByteBuffer.wrap(FRAME_END_BYTE_ARRAY));,         return size;,     }, ,     public final int getChannel(),     {,         return _channel;,     }, ,     public final AMQBody getBodyFrame(),     {,         return _bodyFrame;,     }, ,     public String toString(),     {,         return "Frame channelId: " + _channel + ", bodyFrame: " + String.valueOf(_bodyFrame);,     }, ,     public static void writeFrame(DataOutput buffer, final int channel, AMQBody body) throws IOException,     {,         buffer.writeByte(body.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, channel);,         EncodingUtils.writeUnsignedInteger(buffer, body.getSize());,         body.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);, ,     }, ,     public static void writeFrames(DataOutput buffer, final int channel, AMQBody body1, AMQBody body2) throws IOException,     {,         buffer.writeByte(body1.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, channel);,         EncodingUtils.writeUnsignedInteger(buffer, body1.getSize());,         body1.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);,         buffer.writeByte(body2.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, channel);,         EncodingUtils.writeUnsignedInteger(buffer, body2.getSize());,         body2.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);, ,     }, ,     public static void writeFrames(DataOutput buffer, final int channel, AMQBody body1, AMQBody body2, AMQBody body3) throws IOException,     {,         buffer.writeByte(body1.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, channel);,         EncodingUtils.writeUnsignedInteger(buffer, body1.getSize());,         body1.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);,         buffer.writeByte(body2.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, channel);,         EncodingUtils.writeUnsignedInteger(buffer, body2.getSize());,         body2.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);,         buffer.writeByte(body3.getFrameType());,         EncodingUtils.writeUnsignedShort(buffer, channel);,         EncodingUtils.writeUnsignedInteger(buffer, body3.getSize());,         body3.writePayload(buffer);,         buffer.writeByte(FRAME_END_BYTE);, ,     }],,
BAD_PRACTICE,RV_NEGATING_RESULT_OF_COMPARETO,org/apache/qpid/framing/AMQShortString.java,compareTo,315-315,[                return -name.compareTo(this);],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/framing/AMQType.java,toNativeValue,538-538,[                return Byte.valueOf((String) value);],,toNativeValue,536-536,[            else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/framing/AMQType.java,toNativeValue,577-577,[                return Short.valueOf((String) value);],,toNativeValue,575-575,[            else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/framing/AMQType.java,toNativeValue,620-620,[                return Integer.valueOf((String) value);],,toNativeValue,618-618,[            else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/framing/AMQType.java,toNativeValue,701-701,[                return Float.valueOf((String) value);],,toNativeValue,699-699,[            else if ((value instanceof String) || (value == null))],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/framing/AMQType.java,toNativeValue,740-740,[                return Double.valueOf((String) value);],,toNativeValue,738-738,[            else if ((value instanceof String) || (value == null))],,
PERFORMANCE,BX_BOXING_IMMEDIATELY_UNBOXED_TO_PERFORM_COERCION,org/apache/qpid/framing/AMQType.java,writeValueImpl,136-136,[            byte places = new Integer(bd.scale()).byteValue();],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/framing/AMQType.java,writeValueImpl,136-136,[            byte places = new Integer(bd.scale()).byteValue();],,
MALICIOUS_CODE,MS_MUTABLE_COLLECTION_PKGPROTECT,org/apache/qpid/framing/AMQTypeMap.java,,28-28,[    public static final Map<Byte, AMQType> _reverseTypeMap = new HashMap<Byte, AMQType>();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/AccessRequestBody.java,,48-182,[    {,         _realm = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public AccessRequestBody(,             AMQShortString realm,,             boolean exclusive,,             boolean passive,,             boolean active,,             boolean write,,             boolean read,                             ),     {,         _realm = realm;,         byte bitfield0 = (byte)0;,         if( exclusive ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( passive ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         }, ,         if( active ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 2));,         }, ,         if( write ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 3));,         }, ,         if( read ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 4));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getRealm(),     {,         return _realm;,     },     public final boolean getExclusive(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getPassive(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     },     public final boolean getActive(),     {,         return (((int)(_bitfield0)) & ( 1 << 2)) != 0;,     },     public final boolean getWrite(),     {,         return (((int)(_bitfield0)) & ( 1 << 3)) != 0;,     },     public final boolean getRead(),     {,         return (((int)(_bitfield0)) & ( 1 << 4)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 1;,         size += getSizeOf( _realm );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _realm );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchAccessRequest(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[AccessRequestBodyImpl: ");,         buf.append( "realm=" );,         buf.append(  getRealm() );,         buf.append( ", " );,         buf.append( "exclusive=" );,         buf.append(  getExclusive() );,         buf.append( ", " );,         buf.append( "passive=" );,         buf.append(  getPassive() );,         buf.append( ", " );,         buf.append( "active=" );,         buf.append(  getActive() );,         buf.append( ", " );,         buf.append( "write=" );,         buf.append(  getWrite() );,         buf.append( ", " );,         buf.append( "read=" );,         buf.append(  getRead() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {,         AMQShortString realm = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();,         boolean exclusive = (bitfield & 0x01) == 0x1 ;,         boolean passive = (bitfield & 0x02) == 0x2 ;,         boolean active = (bitfield & 0x04) == 0x4 ;,         boolean write = (bitfield & 0x08) == 0x8 ;,         boolean read = (bitfield & 0x10) == 0x10 ;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveAccessRequest(realm, exclusive, passive, active, write, read);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/AccessRequestOkBody.java,,47-107,[    {,         _ticket = buffer.readUnsignedShort();,     }, ,     public AccessRequestOkBody(,             int ticket,                               ),     {,         _ticket = ticket;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     }, ,     protected int getBodySize(),     {,         int size = 2;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchAccessRequestOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[AccessRequestOkBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher),             throws IOException,     {,         int ticket = buffer.readUnsignedShort();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveAccessRequestOk(ticket);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicAckBody.java,,48-125,[    {,         _deliveryTag = buffer.readLong();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicAckBody(,             long deliveryTag,,             boolean multiple,                        ),     {,         _deliveryTag = deliveryTag;,         byte bitfield0 = (byte)0;,         if( multiple ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getDeliveryTag(),     {,         return _deliveryTag;,     },     public final boolean getMultiple(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 9;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeLong( buffer, _deliveryTag );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicAck(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicAckBodyImpl: ");,         buf.append( "deliveryTag=" );,         buf.append(  getDeliveryTag() );,         buf.append( ", " );,         buf.append( "multiple=" );,         buf.append(  getMultiple() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ChannelMethodProcessor dispatcher) throws IOException,     {, ,         long deliveryTag = buffer.readLong();,         boolean multiple = (buffer.readByte() & 0x01) != 0;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicAck(deliveryTag, multiple);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicCancelBody.java,,48-126,[    {,         _consumerTag = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicCancelBody(,             AMQShortString consumerTag,,             boolean nowait,                           ),     {,         _consumerTag = consumerTag;,         byte bitfield0 = (byte)0;,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getConsumerTag(),     {,         return _consumerTag;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 1;,         size += getSizeOf( _consumerTag );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _consumerTag );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicCancel(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicCancelBodyImpl: ");,         buf.append( "consumerTag=" );,         buf.append(  getConsumerTag() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {, ,         AMQShortString consumerTag = buffer.readAMQShortString();,         boolean noWait = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicCancel(consumerTag, noWait);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicCancelOkBody.java,,47-108,[    {,         _consumerTag = buffer.readAMQShortString();,     }, ,     public BasicCancelOkBody(,             AMQShortString consumerTag,                             ),     {,         _consumerTag = consumerTag;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getConsumerTag(),     {,         return _consumerTag;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _consumerTag );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _consumerTag );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicCancelOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicCancelOkBodyImpl: ");,         buf.append( "consumerTag=" );,         buf.append(  getConsumerTag() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in,,                                final ClientChannelMethodProcessor dispatcher),             throws IOException,     {,         AMQShortString consumerTag = in.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicCancelOk(consumerTag);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicConsumeBody.java,,51-213,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _consumerTag = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,         _arguments = EncodingUtils.readFieldTable(buffer);,     }, ,     public BasicConsumeBody(,             int ticket,,             AMQShortString queue,,             AMQShortString consumerTag,,             boolean noLocal,,             boolean noAck,,             boolean exclusive,,             boolean nowait,,             FieldTable arguments,                            ),     {,         _ticket = ticket;,         _queue = queue;,         _consumerTag = consumerTag;,         byte bitfield0 = (byte)0;,         if( noLocal ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( noAck ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         }, ,         if( exclusive ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 2));,         }, ,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 3));,         }, ,         _bitfield0 = bitfield0;,         _arguments = arguments;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final AMQShortString getConsumerTag(),     {,         return _consumerTag;,     },     public final boolean getNoLocal(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getNoAck(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     },     public final boolean getExclusive(),     {,         return (((int)(_bitfield0)) & ( 1 << 2)) != 0;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 3)) != 0;,     },     public final FieldTable getArguments(),     {,         return _arguments;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _queue );,         size += getSizeOf( _consumerTag );,         size += getSizeOf( _arguments );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeAMQShortString( buffer, _consumerTag );,         writeBitfield( buffer, _bitfield0 );,         writeFieldTable( buffer, _arguments );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicConsume(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicConsumeBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "consumerTag=" );,         buf.append(  getConsumerTag() );,         buf.append( ", " );,         buf.append( "noLocal=" );,         buf.append(  getNoLocal() );,         buf.append( ", " );,         buf.append( "noAck=" );,         buf.append(  getNoAck() );,         buf.append( ", " );,         buf.append( "exclusive=" );,         buf.append(  getExclusive() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append( ", " );,         buf.append( "arguments=" );,         buf.append(  getArguments() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher),             throws IOException, AMQFrameDecodingException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         AMQShortString consumerTag = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();, ,         boolean noLocal = (bitfield & 0x01) == 0x01;,         boolean noAck = (bitfield & 0x02) == 0x02;,         boolean exclusive = (bitfield & 0x04) == 0x04;,         boolean nowait = (bitfield & 0x08) == 0x08;,         FieldTable arguments = EncodingUtils.readFieldTable(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicConsume(queue, consumerTag, noLocal, noAck, exclusive, nowait, arguments);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicConsumeOkBody.java,,47-108,[    {,         _consumerTag = buffer.readAMQShortString();,     }, ,     public BasicConsumeOkBody(,             AMQShortString consumerTag,                              ),     {,         _consumerTag = consumerTag;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getConsumerTag(),     {,         return _consumerTag;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _consumerTag );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _consumerTag );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicConsumeOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicConsumeOkBodyImpl: ");,         buf.append( "consumerTag=" );,         buf.append(  getConsumerTag() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher),             throws IOException,     {,         AMQShortString consumerTag = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicConsumeOk(consumerTag);,         },     }],,
BAD_PRACTICE,SR_NOT_CHECKED,org/apache/qpid/framing/BasicContentHeaderProperties.java,decode,518-518,[            buffer.skipBytes((int)length);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/framing/BasicContentHeaderPropertiesTest.java,setUp,50-50,[        _testTable = new FieldTable();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicDeliverBody.java,,51-168,[    {,         _consumerTag = buffer.readAMQShortString();,         _deliveryTag = buffer.readLong();,         _bitfield0 = buffer.readByte();,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,     }, ,     public BasicDeliverBody(,             AMQShortString consumerTag,,             long deliveryTag,,             boolean redelivered,,             AMQShortString exchange,,             AMQShortString routingKey,                            ),     {,         _consumerTag = consumerTag;,         _deliveryTag = deliveryTag;,         byte bitfield0 = (byte)0;,         if( redelivered ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         _bitfield0 = bitfield0;,         _exchange = exchange;,         _routingKey = routingKey;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getConsumerTag(),     {,         return _consumerTag;,     },     public final long getDeliveryTag(),     {,         return _deliveryTag;,     },     public final boolean getRedelivered(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     }, ,     protected int getBodySize(),     {,         int size = 9;,         size += getSizeOf( _consumerTag );,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _consumerTag );,         writeLong( buffer, _deliveryTag );,         writeBitfield( buffer, _bitfield0 );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicDeliver(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicDeliverBodyImpl: ");,         buf.append( "consumerTag=" );,         buf.append(  getConsumerTag() );,         buf.append( ", " );,         buf.append( "deliveryTag=" );,         buf.append(  getDeliveryTag() );,         buf.append( ", " );,         buf.append( "redelivered=" );,         buf.append(  getRedelivered() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {, ,         AMQShortString consumerTag = buffer.readAMQShortString();,         long deliveryTag = buffer.readLong();,         boolean redelivered = (buffer.readByte() & 0x01) != 0;,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString routingKey = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicDeliver(consumerTag, deliveryTag, redelivered, exchange, routingKey);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicGetBody.java,,49-140,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicGetBody(,             int ticket,,             AMQShortString queue,,             boolean noAck,                        ),     {,         _ticket = ticket;,         _queue = queue;,         byte bitfield0 = (byte)0;,         if( noAck ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final boolean getNoAck(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _queue );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicGet(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicGetBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "noAck=" );,         buf.append(  getNoAck() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher),             throws IOException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         boolean noAck = (buffer.readByte() & 0x01) != 0;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicGet(queue, noAck);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicGetEmptyBody.java,,47-107,[    {,         _clusterId = buffer.readAMQShortString();,     }, ,     public BasicGetEmptyBody(,             AMQShortString clusterId,                             ),     {,         _clusterId = clusterId;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getClusterId(),     {,         return _clusterId;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _clusterId );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _clusterId );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicGetEmpty(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicGetEmptyBody: ");,         buf.append( "clusterId=" );,         buf.append(  getClusterId() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {,         AMQShortString clusterId = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicGetEmpty();,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicGetOkBody.java,,51-166,[    {,         _deliveryTag = buffer.readLong();,         _bitfield0 = buffer.readByte();,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,         _messageCount = EncodingUtils.readUnsignedInteger(buffer);,     }, ,     public BasicGetOkBody(,             long deliveryTag,,             boolean redelivered,,             AMQShortString exchange,,             AMQShortString routingKey,,             long messageCount,                          ),     {,         _deliveryTag = deliveryTag;,         byte bitfield0 = (byte)0;,         if( redelivered ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         _bitfield0 = bitfield0;,         _exchange = exchange;,         _routingKey = routingKey;,         _messageCount = messageCount;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getDeliveryTag(),     {,         return _deliveryTag;,     },     public final boolean getRedelivered(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     },     public final long getMessageCount(),     {,         return _messageCount;,     }, ,     protected int getBodySize(),     {,         int size = 13;,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeLong( buffer, _deliveryTag );,         writeBitfield( buffer, _bitfield0 );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,         writeUnsignedInteger( buffer, _messageCount );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicGetOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicGetOkBodyImpl: ");,         buf.append( "deliveryTag=" );,         buf.append(  getDeliveryTag() );,         buf.append( ", " );,         buf.append( "redelivered=" );,         buf.append(  getRedelivered() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append( ", " );,         buf.append( "messageCount=" );,         buf.append(  getMessageCount() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {,         long deliveryTag = buffer.readLong();,         boolean redelivered = (buffer.readByte() & 0x01) != 0;,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString routingKey = buffer.readAMQShortString();,         long messageCount = EncodingUtils.readUnsignedInteger(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicGetOk(deliveryTag, redelivered, exchange, routingKey, messageCount);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicNackBody.java,,48-142,[    {,         _deliveryTag = buffer.readLong();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicNackBody(,             long deliveryTag,,             boolean multiple,,             boolean requeue,                         ),     {,         _deliveryTag = deliveryTag;,         byte bitfield0 = (byte)0;,         if( multiple ),         {,             bitfield0 = (byte) (((int) bitfield0) | 1);, ,         },         if( requeue ),         {,             bitfield0 = (byte) (((int) bitfield0) | 2);,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getDeliveryTag(),     {,         return _deliveryTag;,     }, ,     public final boolean getMultiple(),     {,         return (((int)(_bitfield0)) &  1) != 0;,     }, ,     public final boolean getRequeue(),     {,         return (((int)(_bitfield0)) &  2 ) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 9;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeLong( buffer, _deliveryTag );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicNack(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicNackBodyImpl: ");,         buf.append( "deliveryTag=" );,         buf.append(  getDeliveryTag() );,         buf.append( ", " );,         buf.append( "multiple=" );,         buf.append(  getMultiple() );,         buf.append( ", " );,         buf.append( "requeue=" );,         buf.append(  getRequeue() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ChannelMethodProcessor dispatcher) throws IOException,     {, ,         long deliveryTag = buffer.readLong();,         byte bitfield = buffer.readByte();,         boolean multiple = (bitfield & 0x01) != 0;,         boolean requeue = (bitfield & 0x02) != 0;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicNack(deliveryTag, multiple, requeue);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicPublishBody.java,,50-169,[    {,         _ticket = buffer.readUnsignedShort();,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicPublishBody(,             int ticket,,             AMQShortString exchange,,             AMQShortString routingKey,,             boolean mandatory,,             boolean immediate,                            ),     {,         _ticket = ticket;,         _exchange = exchange;,         _routingKey = routingKey;,         byte bitfield0 = (byte)0;,         if( mandatory ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( immediate ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     },     public final boolean getMandatory(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getImmediate(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicPublish(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicPublishBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append( ", " );,         buf.append( "mandatory=" );,         buf.append(  getMandatory() );,         buf.append( ", " );,         buf.append( "immediate=" );,         buf.append(  getImmediate() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString routingKey = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();, ,         boolean mandatory = (bitfield & 0x01) != 0;,         boolean immediate = (bitfield & 0x02) != 0;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicPublish(exchange, routingKey, mandatory, immediate);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicQosBody.java,,49-138,[    {,         _prefetchSize = EncodingUtils.readUnsignedInteger(buffer);,         _prefetchCount = buffer.readUnsignedShort();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicQosBody(,             long prefetchSize,,             int prefetchCount,,             boolean global,                        ),     {,         _prefetchSize = prefetchSize;,         _prefetchCount = prefetchCount;,         byte bitfield0 = (byte)0;,         if( global ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getPrefetchSize(),     {,         return _prefetchSize;,     },     public final int getPrefetchCount(),     {,         return _prefetchCount;,     },     public final boolean getGlobal(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 7;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedInteger( buffer, _prefetchSize );,         writeUnsignedShort( buffer, _prefetchCount );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicQos(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicQosBodyImpl: ");,         buf.append( "prefetchSize=" );,         buf.append(  getPrefetchSize() );,         buf.append( ", " );,         buf.append( "prefetchCount=" );,         buf.append(  getPrefetchCount() );,         buf.append( ", " );,         buf.append( "global=" );,         buf.append(  getGlobal() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {, ,         long prefetchSize = EncodingUtils.readUnsignedInteger(buffer);,         int prefetchCount = buffer.readUnsignedShort();,         boolean global = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicQos(prefetchSize, prefetchCount, global);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicQosOkBody.java,,46-84,[    {,     }, ,     public BasicQosOkBody(,                          ),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         int size = 0;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicQosOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicQosOkBodyImpl: ");,         buf.append("]");,         return buf.toString();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicRecoverBody.java,,47-114,[    {,         _bitfield0 = buffer.readByte();,     }, ,     public BasicRecoverBody(,             boolean requeue,                            ),     {,         byte bitfield0 = (byte)0;,         if( requeue ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final boolean getRequeue(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 1;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicRecover(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicRecoverBodyImpl: ");,         buf.append( "requeue=" );,         buf.append(  getRequeue() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in,,                                final ProtocolVersion protocolVersion,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {,         boolean requeue = (in.readByte() & 0x01) == 0x01;,         boolean sync = (ProtocolVersion.v0_8.equals(protocolVersion));, ,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicRecover(requeue, sync);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicRecoverSyncBody.java,,47-114,[    {,         _methodId = ProtocolVersion.v0_9.equals(protocolVersion) ? 102 : 110;,         _bitfield0 = buffer.readByte();,     }, ,     public BasicRecoverSyncBody(ProtocolVersion protocolVersion,,                                 boolean requeue,                                ),     {,         _methodId = ProtocolVersion.v0_9.equals(protocolVersion) ? 102 : 110;, ,         byte bitfield0 = (byte)0;,         if( requeue ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return _methodId;,     }, ,     public final boolean getRequeue(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 1;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicRecoverSync(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicRecoverSyncBodyImpl: ");,         buf.append( "requeue=" );,         buf.append(  getRequeue() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {,         boolean requeue = (in.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicRecover(requeue, true);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicRecoverSyncOkBody.java,,45-84,[    {,         if(ProtocolVersion.v0_91.equals(protocolVersion)),         {,             _ownMethodId = 111;,         },         else,         {,             _ownMethodId = 101;,         },     }, , ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return _ownMethodId;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicRecoverSyncOk(this, channelId);, 	}, ,     public String toString(),     {,          return "[BasicRecoverSyncOkBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicRejectBody.java,,48-125,[    {,         _deliveryTag = buffer.readLong();,         _bitfield0 = buffer.readByte();,     }, ,     public BasicRejectBody(,             long deliveryTag,,             boolean requeue,                           ),     {,         _deliveryTag = deliveryTag;,         byte bitfield0 = (byte)0;,         if( requeue ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getDeliveryTag(),     {,         return _deliveryTag;,     },     public final boolean getRequeue(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 9;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeLong( buffer, _deliveryTag );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicReject(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicRejectBodyImpl: ");,         buf.append( "deliveryTag=" );,         buf.append(  getDeliveryTag() );,         buf.append( ", " );,         buf.append( "requeue=" );,         buf.append(  getRequeue() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {, ,         long deliveryTag = buffer.readLong();,         boolean requeue = (buffer.readByte() & 0x01) != 0;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicReject(deliveryTag, requeue);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/BasicReturnBody.java,,50-149,[    {,         _replyCode = buffer.readUnsignedShort();,         _replyText = buffer.readAMQShortString();,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,     }, ,     public BasicReturnBody(,             int replyCode,,             AMQShortString replyText,,             AMQShortString exchange,,             AMQShortString routingKey,                           ),     {,         _replyCode = replyCode;,         _replyText = replyText;,         _exchange = exchange;,         _routingKey = routingKey;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getReplyCode(),     {,         return _replyCode;,     },     public final AMQShortString getReplyText(),     {,         return _replyText;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     }, ,     protected int getBodySize(),     {,         int size = 2;,         size += getSizeOf( _replyText );,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _replyCode );,         writeAMQShortString( buffer, _replyText );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchBasicReturn(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[BasicReturnBodyImpl: ");,         buf.append( "replyCode=" );,         buf.append(  getReplyCode() );,         buf.append( ", " );,         buf.append( "replyText=" );,         buf.append(  getReplyText() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {, ,         int replyCode = buffer.readUnsignedShort();,         AMQShortString replyText = buffer.readAMQShortString();,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString routingKey = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveBasicReturn(replyCode, replyText, exchange, routingKey);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelAlertBody.java,,49-136,[    {,         _replyCode = buffer.readUnsignedShort();,         _replyText = buffer.readAMQShortString();,         _details = EncodingUtils.readFieldTable(buffer);,     }, ,     public ChannelAlertBody(,             int replyCode,,             AMQShortString replyText,,             FieldTable details,                            ),     {,         _replyCode = replyCode;,         _replyText = replyText;,         _details = details;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getReplyCode(),     {,         return _replyCode;,     },     public final AMQShortString getReplyText(),     {,         return _replyText;,     },     public final FieldTable getDetails(),     {,         return _details;,     }, ,     protected int getBodySize(),     {,         int size = 2;,         size += getSizeOf( _replyText );,         size += getSizeOf( _details );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _replyCode );,         writeAMQShortString( buffer, _replyText );,         writeFieldTable( buffer, _details );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,     return dispatcher.dispatchChannelAlert(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ChannelAlertBodyImpl: ");,         buf.append( "replyCode=" );,         buf.append(  getReplyCode() );,         buf.append( ", " );,         buf.append( "replyText=" );,         buf.append(  getReplyText() );,         buf.append( ", " );,         buf.append( "details=" );,         buf.append(  getDetails() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher),             throws IOException, AMQFrameDecodingException,     {, ,         int replyCode = buffer.readUnsignedShort();,         AMQShortString replyText = buffer.readAMQShortString();,         FieldTable details = EncodingUtils.readFieldTable(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveChannelAlert(replyCode, replyText, details);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelCloseBody.java,,50-147,[    {,         _replyCode = buffer.readUnsignedShort();,         _replyText = buffer.readAMQShortString();,         _classId = buffer.readUnsignedShort();,         _methodId = buffer.readUnsignedShort();,     }, ,     public ChannelCloseBody(,             int replyCode,,             AMQShortString replyText,,             int classId,,             int methodId,                            ),     {,         _replyCode = replyCode;,         _replyText = replyText;,         _classId = classId;,         _methodId = methodId;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getReplyCode(),     {,         return _replyCode;,     },     public final AMQShortString getReplyText(),     {,         return _replyText;,     },     public final int getClassId(),     {,         return _classId;,     },     public final int getMethodId(),     {,         return _methodId;,     }, ,     protected int getBodySize(),     {,         int size = 6;,         size += getSizeOf( _replyText );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _replyCode );,         writeAMQShortString( buffer, _replyText );,         writeUnsignedShort( buffer, _classId );,         writeUnsignedShort( buffer, _methodId );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchChannelClose(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ChannelCloseBodyImpl: ");,         buf.append( "replyCode=" );,         buf.append(  getReplyCode() );,         buf.append( ", " );,         buf.append( "replyText=" );,         buf.append(  getReplyText() );,         buf.append( ", " );,         buf.append( "classId=" );,         buf.append(  getClassId() );,         buf.append( ", " );,         buf.append( "methodId=" );,         buf.append(  getMethodId() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ChannelMethodProcessor dispatcher) throws IOException,     {, ,         int replyCode = buffer.readUnsignedShort();,         AMQShortString replyText = buffer.readAMQShortString();,         int classId = buffer.readUnsignedShort();,         int methodId = buffer.readUnsignedShort();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveChannelClose(replyCode, replyText, classId, methodId);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelCloseOkBody.java,,38-81,[    public static final ChannelCloseOkBody INSTANCE = new ChannelCloseOkBody();, ,     public static final int CLASS_ID =  20;,     public static final int METHOD_ID = 41;, ,     // Fields declared in specification, ,     // Constructor,     public ChannelCloseOkBody(MarkableDataInput buffer) throws AMQFrameDecodingException, IOException,     {,     }, ,     private ChannelCloseOkBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchChannelCloseOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[ChannelCloseOkBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelFlowBody.java,,47-103,[    {,         _active = (buffer.readByte() & 0x01) == 0x01;,     }, ,     public ChannelFlowBody(boolean active),     {,         _active = active;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final boolean getActive(),     {,         return _active;,     }, ,     protected int getBodySize(),     {,         return 1;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBitfield( buffer, _active ? (byte)1 : (byte)0);,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchChannelFlow(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ChannelFlowBodyImpl: ");,         buf.append( "active=" );,         buf.append(  getActive() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ChannelMethodProcessor dispatcher) throws IOException,     {,         boolean active = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveChannelFlow(active);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelFlowOkBody.java,,47-105,[    {,         _active = (buffer.readByte() & 0x01) == 0x01;,     }, ,     public ChannelFlowOkBody(boolean active),     {,         _active = active;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final boolean getActive(),     {,         return _active;,     }, ,     protected int getBodySize(),     {,         int size = 1;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBitfield( buffer, _active ? (byte)1 : (byte)0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchChannelFlowOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ChannelFlowOkBodyImpl: ");,         buf.append( "active=" );,         buf.append(  getActive() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ChannelMethodProcessor dispatcher),             throws IOException,     {,         boolean active = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveChannelFlowOk(active);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelOpenBody.java,,45-94,[    {,         // ignore unused OOB string,         buffer.readAMQShortString();,     }, ,     public ChannelOpenBody(),     {, ,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     protected int getBodySize(),     {,         return 1;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, null );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchChannelOpen(this, channelId);, 	}, ,     public String toString(),     {,         return "[ChannelOpenBody] ";,     }, ,     public static void process(final int channelId,,                                 final MarkableDataInput buffer,,                                 final ServerMethodProcessor dispatcher) throws IOException,     {,         buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveChannelOpen(channelId);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ChannelOpenOkBody.java,,42-112,[    public static final ChannelOpenOkBody INSTANCE_0_8 = new ChannelOpenOkBody(true);,     public static final ChannelOpenOkBody INSTANCE_0_9 = new ChannelOpenOkBody(false);, ,     public static ChannelOpenOkBody getInstance(ProtocolVersion protocolVersion, MarkableDataInput input),             throws IOException,     {,         final boolean isAMQP08 = ProtocolVersion.v0_8.equals(protocolVersion);,         ChannelOpenOkBody instance = isAMQP08 ? INSTANCE_0_8 : INSTANCE_0_9;,         if(!isAMQP08),         {,             EncodingUtils.readBytes(input);,         },         return instance;,     },     // Fields declared in specification,     private final boolean _isAMQP08;,     // Constructor, ,     private ChannelOpenOkBody(boolean isAMQP08),     {,         _isAMQP08 = isAMQP08;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return _isAMQP08 ? 0 : 4;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         if(!_isAMQP08),         {,             buffer.writeInt(0);,         },     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchChannelOpenOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[ChannelOpenOkBody]";,     }, ,     public static void process(final MarkableDataInput in,,                                final ProtocolVersion protocolVersion,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {,         if(!ProtocolVersion.v0_8.equals(protocolVersion)),         {,             EncodingUtils.readBytes(in);,         }, ,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveChannelOpenOk();,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/CompositeAMQDataBlock.java,,34-89,[    {,         _blocks = blocks;,     }, , ,     public AMQDataBlock[] getBlocks(),     {,         return _blocks;,     }, , ,     public long getSize(),     {,         long frameSize = 0;,         for (int i = 0; i < _blocks.length; i++),         {,             frameSize += _blocks[i].getSize();,         },         return frameSize;,     }, ,     public void writePayload(DataOutput buffer) throws IOException,     {,         for (int i = 0; i < _blocks.length; i++),         {,             _blocks[i].writePayload(buffer);,         },     }, ,     @Override,     public long writePayload(final ByteBufferSender sender) throws IOException,     {,         long size = 0l;,         for (int i = 0; i < _blocks.length; i++),         {,             size += _blocks[i].writePayload(sender);,         },         return size;,     }, ,     public String toString(),     {,         if (_blocks == null),         {,             return "No blocks contained in composite frame";,         },         else,         {,             StringBuilder buf = new StringBuilder(this.getClass().getName());,             buf.append("{");,             for (int i = 0 ; i < _blocks.length; i++),             {,                 buf.append(" ").append(i).append("=[").append(_blocks[i].toString()).append("]");,             },             buf.append("}");,             return buf.toString();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConfirmSelectBody.java,,47-104,[    {,         _nowait = (buffer.readByte() & 0x01) == 0x01;,     }, ,     public ConfirmSelectBody(boolean nowait),     {,         _nowait = nowait;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final boolean getNowait(),     {,         return _nowait;,     }, ,     protected int getBodySize(),     {,         return 1;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBitfield( buffer, _nowait ? (byte)1 : (byte)0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConfirmSelect(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConfirmSelectBody: ");,         buf.append( "active=" );,         buf.append(  getNowait() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher),             throws IOException,     {,         boolean nowait = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConfirmSelect(nowait);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConfirmSelectOkBody.java,,41-74,[    public static final ConfirmSelectOkBody INSTANCE = new ConfirmSelectOkBody();, ,     private ConfirmSelectOkBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConfirmSelectOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[ConfirmSelectOkBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionCloseBody.java,,50-144,[    {,         _ownMethodId = ProtocolVersion.v0_8.equals(protocolVersion) ? 60 : 50;,         _replyCode = buffer.readUnsignedShort();,         _replyText = buffer.readAMQShortString();,         _classId = buffer.readUnsignedShort();,         _methodId = buffer.readUnsignedShort();,     }, ,     public ConnectionCloseBody(ProtocolVersion protocolVersion,,                                int replyCode,,                                AMQShortString replyText,,                                int classId,,                                int methodId,                               ),     {,         _ownMethodId = ProtocolVersion.v0_8.equals(protocolVersion) ? 60 : 50;,         _replyCode = replyCode;,         _replyText = replyText;,         _classId = classId;,         _methodId = methodId;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return _ownMethodId;,     }, ,     public final int getReplyCode(),     {,         return _replyCode;,     },     public final AMQShortString getReplyText(),     {,         return _replyText;,     },     public final int getClassId(),     {,         return _classId;,     },     public final int getMethodId(),     {,         return _methodId;,     }, ,     protected int getBodySize(),     {,         int size = 6;,         size += getSizeOf( _replyText );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _replyCode );,         writeAMQShortString( buffer, _replyText );,         writeUnsignedShort( buffer, _classId );,         writeUnsignedShort( buffer, _methodId );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,     return dispatcher.dispatchConnectionClose(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionCloseBodyImpl: ");,         buf.append( "replyCode=" );,         buf.append(  getReplyCode() );,         buf.append( ", " );,         buf.append( "replyText=" );,         buf.append(  getReplyText() );,         buf.append( ", " );,         buf.append( "classId=" );,         buf.append(  getClassId() );,         buf.append( ", " );,         buf.append( "methodId=" );,         buf.append(  getMethodId() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer, final MethodProcessor dispatcher) throws IOException,     {,         int replyCode = buffer.readUnsignedShort();,         AMQShortString replyText = buffer.readAMQShortString();,         int classId = buffer.readUnsignedShort();,         int methodId = buffer.readUnsignedShort();,         dispatcher.receiveConnectionClose(replyCode, replyText, classId, methodId);,     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionCloseOkBody.java,,41-78,[    public static final ConnectionCloseOkBody CONNECTION_CLOSE_OK_0_8 = new ConnectionCloseOkBody(61);,     public static final ConnectionCloseOkBody CONNECTION_CLOSE_OK_0_9 = new ConnectionCloseOkBody(51);, ,     // Constructor,     private ConnectionCloseOkBody(int methodId),     {,         _ownMethodId = methodId;,     }, , ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return _ownMethodId;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionCloseOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[ConnectionCloseOkBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionOpenBody.java,,49-134,[    {,         _virtualHost = buffer.readAMQShortString();,         _capabilities = buffer.readAMQShortString();,         _insist = (buffer.readByte() & 0x01) == 0x01;,     }, ,     public ConnectionOpenBody(,             AMQShortString virtualHost,,             AMQShortString capabilities,,             boolean insist,                              ),     {,         _virtualHost = virtualHost;,         _capabilities = capabilities;,         _insist = insist;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getVirtualHost(),     {,         return _virtualHost;,     },     public final AMQShortString getCapabilities(),     {,         return _capabilities;,     },     public final boolean getInsist(),     {,         return _insist;,     }, ,     protected int getBodySize(),     {,         int size = 1;,         size += getSizeOf( _virtualHost );,         size += getSizeOf( _capabilities );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _virtualHost );,         writeAMQShortString( buffer, _capabilities );,         writeBitfield( buffer, _insist ? (byte)1 : (byte)0);,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionOpen(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionOpenBodyImpl: ");,         buf.append( "virtualHost=" );,         buf.append(  getVirtualHost() );,         buf.append( ", " );,         buf.append( "capabilities=" );,         buf.append(  getCapabilities() );,         buf.append( ", " );,         buf.append( "insist=" );,         buf.append(  getInsist() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer, final ServerMethodProcessor dispatcher) throws IOException,     {, ,         AMQShortString virtualHost = buffer.readAMQShortString();,         AMQShortString capabilities = buffer.readAMQShortString();,         boolean insist = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionOpen(virtualHost, capabilities, insist);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionOpenOkBody.java,,47-107,[    {,         _knownHosts = buffer.readAMQShortString();,     }, ,     public ConnectionOpenOkBody(,             AMQShortString knownHosts,                                ),     {,         _knownHosts = knownHosts;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getKnownHosts(),     {,         return _knownHosts;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _knownHosts );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _knownHosts );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionOpenOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionOpenOkBodyImpl: ");,         buf.append( "knownHosts=" );,         buf.append(  getKnownHosts() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer, final ClientMethodProcessor dispatcher) throws IOException,     {,         AMQShortString knownHosts = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionOpenOk(knownHosts);,         }, ,     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionRedirectBody.java,,48-119,[    {,         _ownMethodId = ProtocolVersion.v0_8.equals(protocolVersion) ? 50 : 42;,         _host = buffer.readAMQShortString();,         _knownHosts = buffer.readAMQShortString();,     }, ,     public ConnectionRedirectBody(ProtocolVersion protocolVersion, AMQShortString host, AMQShortString knownHosts),     {,         _ownMethodId = ProtocolVersion.v0_8.equals(protocolVersion) ? 50 : 42;,         _host = host;,         _knownHosts = knownHosts;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return _ownMethodId;,     }, ,     public final AMQShortString getHost(),     {,         return _host;,     },     public final AMQShortString getKnownHosts(),     {,         return _knownHosts;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _host );,         size += getSizeOf( _knownHosts );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _host );,         writeAMQShortString( buffer, _knownHosts );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionRedirect(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionRedirectBodyImpl: ");,         buf.append( "host=" );,         buf.append(  getHost() );,         buf.append( ", " );,         buf.append( "knownHosts=" );,         buf.append(  getKnownHosts() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer, final ClientMethodProcessor dispatcher) throws IOException,     {,         AMQShortString host = buffer.readAMQShortString();,         AMQShortString knownHosts = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionRedirect(host, knownHosts);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionSecureBody.java,,47-108,[    {,         _challenge = EncodingUtils.readBytes(buffer);,     }, ,     public ConnectionSecureBody(,             byte[] challenge,                                ),     {,         _challenge = challenge;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final byte[] getChallenge(),     {,         return _challenge;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _challenge );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBytes( buffer, _challenge );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionSecure(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionSecureBodyImpl: ");,         buf.append( "challenge=" );,         buf.append(  getChallenge() == null  ? "null" : java.util.Arrays.toString( getChallenge() ) );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in, final ClientMethodProcessor dispatcher),             throws IOException, AMQFrameDecodingException, ,     {,         byte[] challenge = EncodingUtils.readBytes(in);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionSecure(challenge);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionSecureOkBody.java,,47-106,[    {,         _response = EncodingUtils.readBytes(buffer);,     }, ,     public ConnectionSecureOkBody(,             byte[] response,                                  ),     {,         _response = response;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final byte[] getResponse(),     {,         return _response;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _response );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeBytes( buffer, _response );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionSecureOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionSecureOkBodyImpl: ");,         buf.append( "response=" );,         buf.append(  getResponse() == null  ? "null" : java.util.Arrays.toString( getResponse() ) );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in, final ServerMethodProcessor dispatcher) throws IOException,     {,         byte[] response = EncodingUtils.readBytes(in);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionSecureOk(response);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionStartBody.java,,56-152,[    {,         _versionMajor = versionMajor;,         _versionMinor = versionMinor;,         _serverProperties = serverProperties;,         _mechanisms = mechanisms;,         _locales = locales;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final short getVersionMajor(),     {,         return _versionMajor;,     },     public final short getVersionMinor(),     {,         return _versionMinor;,     },     public final FieldTable getServerProperties(),     {,         return _serverProperties;,     },     public final byte[] getMechanisms(),     {,         return _mechanisms;,     },     public final byte[] getLocales(),     {,         return _locales;,     }, ,     protected int getBodySize(),     {,         int size = 2;,         size += getSizeOf( _serverProperties );,         size += getSizeOf( _mechanisms );,         size += getSizeOf( _locales );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedByte( buffer, _versionMajor );,         writeUnsignedByte( buffer, _versionMinor );,         writeFieldTable( buffer, _serverProperties );,         writeBytes( buffer, _mechanisms );,         writeBytes( buffer, _locales );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionStart(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionStartBodyImpl: ");,         buf.append( "versionMajor=" );,         buf.append(  getVersionMajor() );,         buf.append( ", " );,         buf.append( "versionMinor=" );,         buf.append(  getVersionMinor() );,         buf.append( ", " );,         buf.append( "serverProperties=" );,         buf.append(  getServerProperties() );,         buf.append( ", " );,         buf.append( "mechanisms=" );,         buf.append(  getMechanisms() == null  ? "null" : java.util.Arrays.toString( getMechanisms() ) );,         buf.append( ", " );,         buf.append( "locales=" );,         buf.append(  getLocales() == null  ? "null" : java.util.Arrays.toString( getLocales() ) );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in, final ClientMethodProcessor dispatcher),             throws IOException, AMQFrameDecodingException,     {,         short versionMajor = (short) in.readUnsignedByte();,         short versionMinor = (short) in.readUnsignedByte();,         FieldTable serverProperties = EncodingUtils.readFieldTable(in);,         byte[] mechanisms = EncodingUtils.readBytes(in);,         byte[] locales = EncodingUtils.readBytes(in);, ,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionStart(versionMajor, versionMinor, serverProperties, mechanisms, locales);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionStartOkBody.java,,54-141,[    {,         _clientProperties = clientProperties;,         _mechanism = mechanism;,         _response = response;,         _locale = locale;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final FieldTable getClientProperties(),     {,         return _clientProperties;,     },     public final AMQShortString getMechanism(),     {,         return _mechanism;,     },     public final byte[] getResponse(),     {,         return _response;,     },     public final AMQShortString getLocale(),     {,         return _locale;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _clientProperties );,         size += getSizeOf( _mechanism );,         size += getSizeOf( _response );,         size += getSizeOf( _locale );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeFieldTable( buffer, _clientProperties );,         writeAMQShortString( buffer, _mechanism );,         writeBytes( buffer, _response );,         writeAMQShortString( buffer, _locale );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionStartOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionStartOkBodyImpl: ");,         buf.append( "clientProperties=" );,         buf.append(  getClientProperties() );,         buf.append( ", " );,         buf.append( "mechanism=" );,         buf.append(  getMechanism() );,         buf.append( ", " );,         buf.append( "response=" );,         buf.append(  getResponse() == null  ? "null" : java.util.Arrays.toString( getResponse() ) );,         buf.append( ", " );,         buf.append( "locale=" );,         buf.append(  getLocale() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput in, final ServerMethodProcessor dispatcher),             throws IOException, AMQFrameDecodingException,     {, ,         FieldTable clientProperties = EncodingUtils.readFieldTable(in);,         AMQShortString mechanism = in.readAMQShortString();,         byte[] response = EncodingUtils.readBytes(in);,         AMQShortString locale = in.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionStartOk(clientProperties, mechanism, response, locale);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionTuneBody.java,,49-132,[    {,         _channelMax = buffer.readUnsignedShort();,         _frameMax = EncodingUtils.readUnsignedInteger(buffer);,         _heartbeat = buffer.readUnsignedShort();,     }, ,     public ConnectionTuneBody(,             int channelMax,,             long frameMax,,             int heartbeat,                              ),     {,         _channelMax = channelMax;,         _frameMax = frameMax;,         _heartbeat = heartbeat;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getChannelMax(),     {,         return _channelMax;,     },     public final long getFrameMax(),     {,         return _frameMax;,     },     public final int getHeartbeat(),     {,         return _heartbeat;,     }, ,     protected int getBodySize(),     {,         int size = 8;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _channelMax );,         writeUnsignedInteger( buffer, _frameMax );,         writeUnsignedShort( buffer, _heartbeat );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionTune(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionTuneBodyImpl: ");,         buf.append( "channelMax=" );,         buf.append(  getChannelMax() );,         buf.append( ", " );,         buf.append( "frameMax=" );,         buf.append(  getFrameMax() );,         buf.append( ", " );,         buf.append( "heartbeat=" );,         buf.append(  getHeartbeat() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer, final ClientMethodProcessor dispatcher) throws IOException,     {, ,         int channelMax = buffer.readUnsignedShort();,         long frameMax = EncodingUtils.readUnsignedInteger(buffer);,         int heartbeat = buffer.readUnsignedShort();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionTune(channelMax, frameMax, heartbeat);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ConnectionTuneOkBody.java,,49-132,[    {,         _channelMax = buffer.readUnsignedShort();,         _frameMax = EncodingUtils.readUnsignedInteger(buffer);,         _heartbeat = buffer.readUnsignedShort();,     }, ,     public ConnectionTuneOkBody(,             int channelMax,,             long frameMax,,             int heartbeat,                                ),     {,         _channelMax = channelMax;,         _frameMax = frameMax;,         _heartbeat = heartbeat;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getChannelMax(),     {,         return _channelMax;,     },     public final long getFrameMax(),     {,         return _frameMax;,     },     public final int getHeartbeat(),     {,         return _heartbeat;,     }, ,     protected int getBodySize(),     {,         int size = 8;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _channelMax );,         writeUnsignedInteger( buffer, _frameMax );,         writeUnsignedShort( buffer, _heartbeat );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchConnectionTuneOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ConnectionTuneOkBodyImpl: ");,         buf.append( "channelMax=" );,         buf.append(  getChannelMax() );,         buf.append( ", " );,         buf.append( "frameMax=" );,         buf.append(  getFrameMax() );,         buf.append( ", " );,         buf.append( "heartbeat=" );,         buf.append(  getHeartbeat() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer, final ServerMethodProcessor dispatcher) throws IOException,     {, ,         int channelMax = buffer.readUnsignedShort();,         long frameMax = EncodingUtils.readUnsignedInteger(buffer);,         int heartbeat = buffer.readUnsignedShort();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveConnectionTuneOk(channelMax, frameMax, heartbeat);,         },     }],,
MALICIOUS_CODE,MS_EXPOSE_REP,org/apache/qpid/framing/EncodingUtils.java,readBooleans,560-560,[            return ALL_FALSE_ARRAY;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/framing/EncodingUtils.java,readBytes,857-857,[            return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/framing/EncodingUtils.java,readLongstr,648-648,[            return null;],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ExchangeBoundBody.java,,49-137,[    {,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,         _queue = buffer.readAMQShortString();,     }, ,     public ExchangeBoundBody(,             AMQShortString exchange,,             AMQShortString routingKey,,             AMQShortString queue,                             ),     {,         _exchange = exchange;,         _routingKey = routingKey;,         _queue = queue;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     }, ,     protected int getBodySize(),     {,         int size = 0;,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         size += getSizeOf( _queue );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,         writeAMQShortString( buffer, _queue );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchExchangeBound(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ExchangeBoundBodyImpl: ");,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher),             throws IOException,     {, ,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString routingKey = buffer.readAMQShortString();,         AMQShortString queue = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveExchangeBound(exchange, routingKey, queue);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ExchangeBoundOkBody.java,,55-129,[    {,         _replyCode = buffer.readUnsignedShort();,         _replyText = buffer.readAMQShortString();,     }, ,     public ExchangeBoundOkBody(,             int replyCode,,             AMQShortString replyText,                               ),     {,         _replyCode = replyCode;,         _replyText = replyText;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getReplyCode(),     {,         return _replyCode;,     },     public final AMQShortString getReplyText(),     {,         return _replyText;,     }, ,     protected int getBodySize(),     {,         int size = 2;,         size += getSizeOf( _replyText );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _replyCode );,         writeAMQShortString( buffer, _replyText );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchExchangeBoundOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ExchangeBoundOkBodyImpl: ");,         buf.append( "replyCode=" );,         buf.append(  getReplyCode() );,         buf.append( ", " );,         buf.append( "replyText=" );,         buf.append(  getReplyText() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher),             throws IOException,     {, ,         int replyCode = buffer.readUnsignedShort();,         AMQShortString replyText = buffer.readAMQShortString();,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveExchangeBoundOk(replyCode, replyText);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ExchangeDeclareBody.java,,51-232,[    {,         _ticket = buffer.readUnsignedShort();,         _exchange = buffer.readAMQShortString();,         _type = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,         _arguments = EncodingUtils.readFieldTable(buffer);,     }, ,     public ExchangeDeclareBody(,             int ticket,,             AMQShortString exchange,,             AMQShortString type,,             boolean passive,,             boolean durable,,             boolean autoDelete,,             boolean internal,,             boolean nowait,,             FieldTable arguments,                               ),     {,         _ticket = ticket;,         _exchange = exchange;,         _type = type;,         byte bitfield0 = (byte)0;,         if( passive ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( durable ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         }, ,         if( autoDelete ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 2));,         }, ,         if( internal ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 3));,         }, ,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 4));,         }, ,         _bitfield0 = bitfield0;,         _arguments = arguments;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getType(),     {,         return _type;,     },     public final boolean getPassive(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getDurable(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     },     public final boolean getAutoDelete(),     {,         return (((int)(_bitfield0)) & ( 1 << 2)) != 0;,     },     public final boolean getInternal(),     {,         return (((int)(_bitfield0)) & ( 1 << 3)) != 0;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 4)) != 0;,     },     public final FieldTable getArguments(),     {,         return _arguments;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _exchange );,         size += getSizeOf( _type );,         size += getSizeOf( _arguments );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _type );,         writeBitfield( buffer, _bitfield0 );,         writeFieldTable( buffer, _arguments );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchExchangeDeclare(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ExchangeDeclareBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "type=" );,         buf.append(  getType() );,         buf.append( ", " );,         buf.append( "passive=" );,         buf.append(  getPassive() );,         buf.append( ", " );,         buf.append( "durable=" );,         buf.append(  getDurable() );,         buf.append( ", " );,         buf.append( "autoDelete=" );,         buf.append(  getAutoDelete() );,         buf.append( ", " );,         buf.append( "internal=" );,         buf.append(  getInternal() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append( ", " );,         buf.append( "arguments=" );,         buf.append(  getArguments() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException, AMQFrameDecodingException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString type = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();,         boolean passive = (bitfield & 0x1) == 0x1;,         boolean durable = (bitfield & 0x2) == 0x2;,         boolean autoDelete = (bitfield & 0x4) == 0x4;,         boolean internal = (bitfield & 0x8) == 0x8;,         boolean nowait = (bitfield & 0x10) == 0x10;,         FieldTable arguments = EncodingUtils.readFieldTable(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveExchangeDeclare(exchange,,                                               type,,                                               passive,,                                               durable,,                                               autoDelete,,                                               internal,,                                               nowait,,                                               arguments);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ExchangeDeclareOkBody.java,,46-84,[    {,     }, ,     public ExchangeDeclareOkBody(,                                 ),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         int size = 0;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchExchangeDeclareOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ExchangeDeclareOkBodyImpl: ");,         buf.append("]");,         return buf.toString();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ExchangeDeleteBody.java,,49-155,[    {,         _ticket = buffer.readUnsignedShort();,         _exchange = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public ExchangeDeleteBody(,             int ticket,,             AMQShortString exchange,,             boolean ifUnused,,             boolean nowait,                              ),     {,         _ticket = ticket;,         _exchange = exchange;,         byte bitfield0 = (byte)0;,         if( ifUnused ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final boolean getIfUnused(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _exchange );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _exchange );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchExchangeDelete(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ExchangeDeleteBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "ifUnused=" );,         buf.append(  getIfUnused() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher),             throws IOException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString exchange = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();,         boolean ifUnused = (bitfield & 0x01) == 0x01;,         boolean nowait = (bitfield & 0x02) == 0x02;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveExchangeDelete(exchange, ifUnused, nowait);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ExchangeDeleteOkBody.java,,46-84,[    {,     }, ,     public ExchangeDeleteOkBody(,                                ),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         int size = 0;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchExchangeDeleteOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[ExchangeDeleteOkBodyImpl: ");,         buf.append("]");,         return buf.toString();],,
BAD_PRACTICE,NP_BOOLEAN_RETURN_NULL,org/apache/qpid/framing/FieldTable.java,getBoolean,222-222,[            return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/framing/FieldTable.java,getBytes,389-389,[            return null;],,
BAD_PRACTICE,SR_NOT_CHECKED,org/apache/qpid/framing/HeartbeatBody.java,<init>,47-47,[            buffer.skip(size);],,
BAD_PRACTICE,SR_NOT_CHECKED,org/apache/qpid/framing/HeartbeatBody.java,populateFromBuffer,82-82,[            buffer.skip(size);],,
BAD_PRACTICE,SR_NOT_CHECKED,org/apache/qpid/framing/HeartbeatBody.java,process,99-99,[            in.skip(bodySize);],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/ProtocolInitiation.java,,39-249,[    private static final byte[] AMQP_HEADER = new byte[]{(byte)'A',(byte)'M',(byte)'Q',(byte)'P'};, ,     private static final byte CURRENT_PROTOCOL_CLASS = 1;,     private static final byte TCP_PROTOCOL_INSTANCE = 1;, ,     private final byte[] _protocolHeader;,     private final byte _protocolClass;,     private final byte _protocolInstance;,     private final byte _protocolMajor;,     private final byte _protocolMinor;, ,     public ProtocolInitiation(byte[] protocolHeader, byte protocolClass, byte protocolInstance, byte protocolMajor, byte protocolMinor),     {,         _protocolHeader = protocolHeader;,         _protocolClass = protocolClass;,         _protocolInstance = protocolInstance;,         _protocolMajor = protocolMajor;,         _protocolMinor = protocolMinor;,     },     ,     public ProtocolInitiation(ProtocolVersion pv),     {,         this(AMQP_HEADER,,              pv.equals(ProtocolVersion.v0_91) ? 0 : CURRENT_PROTOCOL_CLASS,,              pv.equals(ProtocolVersion.v0_91) ? 0 : TCP_PROTOCOL_INSTANCE,,              pv.equals(ProtocolVersion.v0_91) ? 9 : pv.getMajorVersion(),,              pv.equals(ProtocolVersion.v0_91) ? 1 : pv.getMinorVersion());,     }, ,     public ProtocolInitiation(MarkableDataInput in) throws IOException,     {,         _protocolHeader = new byte[4];,         in.read(_protocolHeader);, ,         _protocolClass = in.readByte();,         _protocolInstance = in.readByte();,         _protocolMajor = in.readByte();,         _protocolMinor = in.readByte();,     }, ,     public long getSize(),     {,         return 4 + 1 + 1 + 1 + 1;,     }, ,     public void writePayload(DataOutput buffer) throws IOException,     {, ,         buffer.write(_protocolHeader);,         buffer.write(_protocolClass);,         buffer.write(_protocolInstance);,         buffer.write(_protocolMajor);,         buffer.write(_protocolMinor);,     }, ,     @Override,     public long writePayload(final ByteBufferSender sender) throws IOException,     {,         byte[] data = new byte[8];,         BytesDataOutput out = new BytesDataOutput(data);,         writePayload(out);,         sender.send(ByteBuffer.wrap(data));,         return 8l;,     }, ,     public boolean equals(Object o),     {,         if (!(o instanceof ProtocolInitiation)),         {,             return false;,         }, ,         ProtocolInitiation pi = (ProtocolInitiation) o;,         if (pi._protocolHeader == null),         {,             return false;,         }, ,         if (_protocolHeader.length != pi._protocolHeader.length),         {,             return false;,         }, ,         for (int i = 0; i < _protocolHeader.length; i++),         {,             if (_protocolHeader[i] != pi._protocolHeader[i]),             {,                 return false;,             },         }, ,         return (_protocolClass == pi._protocolClass &&,                 _protocolInstance == pi._protocolInstance &&,                 _protocolMajor == pi._protocolMajor &&,                 _protocolMinor == pi._protocolMinor);,     }, ,     @Override,     public int hashCode(),     {,         int result = _protocolHeader != null ? Arrays.hashCode(_protocolHeader) : 0;,         result = 31 * result + (int) _protocolClass;,         result = 31 * result + (int) _protocolInstance;,         result = 31 * result + (int) _protocolMajor;,         result = 31 * result + (int) _protocolMinor;,         return result;,     }, ,     public static class Decoder //implements MessageDecoder,     {,         /**,          *,          * @param in input buffer,          * @return true if we have enough data to decode the PI frame fully, false if more,          * data is required,          * @throws IOException if there is an issue reading the input,          */,         public boolean decodable(MarkableDataInput in) throws IOException,         {,             return (in.available() >= 8);,         }, ,     }, ,     public ProtocolVersion checkVersion() throws AMQException,     {, ,         if(_protocolHeader.length != 4),         {,             throw new AMQProtocolHeaderException("Protocol header should have exactly four octets", null);,         },         for(int i = 0; i < 4; i++),         {,             if(_protocolHeader[i] != AMQP_HEADER[i]),             {,                 try,                 {,                     throw new AMQProtocolHeaderException("Protocol header is not correct: Got " + new String(_protocolHeader,"ISO-8859-1") + " should be: " + new String(AMQP_HEADER, "ISO-8859-1"), null);,                 },                 catch (UnsupportedEncodingException e),                 {,                     ,                 },             },         }, ,         ProtocolVersion pv;, ,         // Hack for 0-9-1 which changed how the header was defined,         if(_protocolInstance == 0 && _protocolMajor == 9 && _protocolMinor == 1),         {,             pv = ProtocolVersion.v0_91;,             if (_protocolClass != 0),             {,                 throw new AMQProtocolClassException("Protocol class " + 0 + " was expected; received " +,                                                     _protocolClass, null);,             },         },         else if (_protocolClass != CURRENT_PROTOCOL_CLASS),         {,             throw new AMQProtocolClassException("Protocol class " + CURRENT_PROTOCOL_CLASS + " was expected; received " +,                                                 _protocolClass, null);,         },         else if (_protocolInstance != TCP_PROTOCOL_INSTANCE),         {,             throw new AMQProtocolInstanceException("Protocol instance " + TCP_PROTOCOL_INSTANCE + " was expected; received " +,                                                    _protocolInstance, null);,         },         else,         {,             pv = ProtocolVersion.get(_protocolMajor, _protocolMinor);,         },         , ,         if (!pv.isSupported()),         {,             // TODO: add list of available versions in list to msg...,             throw new AMQProtocolVersionException("Protocol version " +,                                                   _protocolMajor + "." + _protocolMinor + " not suppoerted by this version of the Qpid broker.", null);,         },         return pv;,     }, ,     public byte getProtocolClass(),     {,         return _protocolClass;,     }, ,     public byte getProtocolInstance(),     {,         return _protocolInstance;,     }, ,     public byte getProtocolMajor(),     {,         return _protocolMajor;,     }, ,     public byte getProtocolMinor(),     {,         return _protocolMinor;,     }, ,     public String toString(),     {,         StringBuffer buffer = new StringBuffer(new String(_protocolHeader, StandardCharsets.US_ASCII));,         buffer.append(Integer.toHexString(_protocolClass));,         buffer.append(Integer.toHexString(_protocolInstance));,         buffer.append(Integer.toHexString(_protocolMajor));,         buffer.append(Integer.toHexString(_protocolMinor));,         return buffer.toString();],,
BAD_PRACTICE,RR_NOT_CHECKED,org/apache/qpid/framing/ProtocolInitiation.java,<init>,71-71,[        in.read(_protocolHeader);],,
STYLE,EQ_UNUSUAL,org/apache/qpid/framing/ProtocolVersion.java,equals,123-123,[        return o != null && (o == this || (compareTo(o) == 0));],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueBindBody.java,,52-182,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,         _arguments = EncodingUtils.readFieldTable(buffer);,     }, ,     public QueueBindBody(,             int ticket,,             AMQShortString queue,,             AMQShortString exchange,,             AMQShortString routingKey,,             boolean nowait,,             FieldTable arguments,                         ),     {,         _ticket = ticket;,         _queue = queue;,         _exchange = exchange;,         _routingKey = routingKey;,         byte bitfield0 = (byte)0;,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         _bitfield0 = bitfield0;,         _arguments = arguments;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final FieldTable getArguments(),     {,         return _arguments;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _queue );,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         size += getSizeOf( _arguments );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,         writeBitfield( buffer, _bitfield0 );,         writeFieldTable( buffer, _arguments );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueBind(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueBindBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append( ", " );,         buf.append( "arguments=" );,         buf.append(  getArguments() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException, AMQFrameDecodingException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString bindingKey = buffer.readAMQShortString();,         boolean nowait = (buffer.readByte() & 0x01) == 0x01;,         FieldTable arguments = EncodingUtils.readFieldTable(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueueBind(queue, exchange, bindingKey, nowait, arguments);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueBindOkBody.java,,46-84,[    {,     }, ,     public QueueBindOkBody(,                           ),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         int size = 0;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueBindOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueBindOkBodyImpl: ");,         buf.append("]");,         return buf.toString();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueDeclareBody.java,,50-212,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,         _arguments = EncodingUtils.readFieldTable(buffer);,     }, ,     public QueueDeclareBody(,             int ticket,,             AMQShortString queue,,             boolean passive,,             boolean durable,,             boolean exclusive,,             boolean autoDelete,,             boolean nowait,,             FieldTable arguments,                            ),     {,         _ticket = ticket;,         _queue = queue;,         byte bitfield0 = (byte)0;,         if( passive ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( durable ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         }, ,         if( exclusive ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 2));,         }, ,         if( autoDelete ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 3));,         }, ,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 4));,         }, ,         _bitfield0 = bitfield0;,         _arguments = arguments;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final boolean getPassive(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getDurable(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     },     public final boolean getExclusive(),     {,         return (((int)(_bitfield0)) & ( 1 << 2)) != 0;,     },     public final boolean getAutoDelete(),     {,         return (((int)(_bitfield0)) & ( 1 << 3)) != 0;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 4)) != 0;,     },     public final FieldTable getArguments(),     {,         return _arguments;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _queue );,         size += getSizeOf( _arguments );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeBitfield( buffer, _bitfield0 );,         writeFieldTable( buffer, _arguments );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueDeclare(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueDeclareBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "passive=" );,         buf.append(  getPassive() );,         buf.append( ", " );,         buf.append( "durable=" );,         buf.append(  getDurable() );,         buf.append( ", " );,         buf.append( "exclusive=" );,         buf.append(  getExclusive() );,         buf.append( ", " );,         buf.append( "autoDelete=" );,         buf.append(  getAutoDelete() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append( ", " );,         buf.append( "arguments=" );,         buf.append(  getArguments() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException, AMQFrameDecodingException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();, ,         boolean passive = (bitfield & 0x01 ) == 0x01;,         boolean durable = (bitfield & 0x02 ) == 0x02;,         boolean exclusive = (bitfield & 0x04 ) == 0x04;,         boolean autoDelete = (bitfield & 0x08 ) == 0x08;,         boolean nowait = (bitfield & 0x010 ) == 0x010;,         FieldTable arguments = EncodingUtils.readFieldTable(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueueDeclare(queue, passive, durable, exclusive, autoDelete, nowait, arguments);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueDeclareOkBody.java,,49-133,[    {,         _queue = buffer.readAMQShortString();,         _messageCount = EncodingUtils.readUnsignedInteger(buffer);,         _consumerCount = EncodingUtils.readUnsignedInteger(buffer);,     }, ,     public QueueDeclareOkBody(,             AMQShortString queue,,             long messageCount,,             long consumerCount,                              ),     {,         _queue = queue;,         _messageCount = messageCount;,         _consumerCount = consumerCount;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final long getMessageCount(),     {,         return _messageCount;,     },     public final long getConsumerCount(),     {,         return _consumerCount;,     }, ,     protected int getBodySize(),     {,         int size = 8;,         size += getSizeOf( _queue );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeAMQShortString( buffer, _queue );,         writeUnsignedInteger( buffer, _messageCount );,         writeUnsignedInteger( buffer, _consumerCount );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueDeclareOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueDeclareOkBodyImpl: ");,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "messageCount=" );,         buf.append(  getMessageCount() );,         buf.append( ", " );,         buf.append( "consumerCount=" );,         buf.append(  getConsumerCount() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {,         AMQShortString queue = buffer.readAMQShortString();,         long messageCount = EncodingUtils.readUnsignedInteger(buffer);,         long consumerCount = EncodingUtils.readUnsignedInteger(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueueDeclareOk(queue, messageCount, consumerCount);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueDeleteBody.java,,49-169,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public QueueDeleteBody(,             int ticket,,             AMQShortString queue,,             boolean ifUnused,,             boolean ifEmpty,,             boolean nowait,                           ),     {,         _ticket = ticket;,         _queue = queue;,         byte bitfield0 = (byte)0;,         if( ifUnused ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         }, ,         if( ifEmpty ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 1));,         }, ,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 2));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final boolean getIfUnused(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     },     public final boolean getIfEmpty(),     {,         return (((int)(_bitfield0)) & ( 1 << 1)) != 0;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 2)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _queue );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueDelete(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueDeleteBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "ifUnused=" );,         buf.append(  getIfUnused() );,         buf.append( ", " );,         buf.append( "ifEmpty=" );,         buf.append(  getIfEmpty() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         byte bitfield = buffer.readByte();, ,         boolean ifUnused = (bitfield & 0x01) == 0x01;,         boolean ifEmpty = (bitfield & 0x02) == 0x02;,         boolean nowait = (bitfield & 0x04) == 0x04;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueueDelete(queue, ifUnused, ifEmpty, nowait);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueDeleteOkBody.java,,47-106,[    {,         _messageCount = EncodingUtils.readUnsignedInteger(buffer);,     }, ,     public QueueDeleteOkBody(,             long messageCount,                             ),     {,         _messageCount = messageCount;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getMessageCount(),     {,         return _messageCount;,     }, ,     protected int getBodySize(),     {,         int size = 4;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedInteger( buffer, _messageCount );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueDeleteOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueDeleteOkBodyImpl: ");,         buf.append( "messageCount=" );,         buf.append(  getMessageCount() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {,         long messageCount = EncodingUtils.readUnsignedInteger(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueueDeleteOk(messageCount);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueuePurgeBody.java,,49-139,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _bitfield0 = buffer.readByte();,     }, ,     public QueuePurgeBody(,             int ticket,,             AMQShortString queue,,             boolean nowait,                          ),     {,         _ticket = ticket;,         _queue = queue;,         byte bitfield0 = (byte)0;,         if( nowait ),         {,             bitfield0 = (byte) (((int) bitfield0) | (1 << 0));,         },         _bitfield0 = bitfield0;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final boolean getNowait(),     {,         return (((int)(_bitfield0)) & ( 1 << 0)) != 0;,     }, ,     protected int getBodySize(),     {,         int size = 3;,         size += getSizeOf( _queue );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeBitfield( buffer, _bitfield0 );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueuePurge(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueuePurgeBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "nowait=" );,         buf.append(  getNowait() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         boolean nowait = (buffer.readByte() & 0x01) == 0x01;,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueuePurge(queue, nowait);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueuePurgeOkBody.java,,47-106,[    {,         _messageCount = EncodingUtils.readUnsignedInteger(buffer);,     }, ,     public QueuePurgeOkBody(,             long messageCount,                            ),     {,         _messageCount = messageCount;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final long getMessageCount(),     {,         return _messageCount;,     }, ,     protected int getBodySize(),     {,         int size = 4;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedInteger( buffer, _messageCount );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueuePurgeOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueuePurgeOkBodyImpl: ");,         buf.append( "messageCount=" );,         buf.append(  getMessageCount() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ClientChannelMethodProcessor dispatcher) throws IOException,     {,         long messageCount = EncodingUtils.readUnsignedInteger(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueuePurgeOk(messageCount);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueUnbindBody.java,,51-163,[    {,         _ticket = buffer.readUnsignedShort();,         _queue = buffer.readAMQShortString();,         _exchange = buffer.readAMQShortString();,         _routingKey = buffer.readAMQShortString();,         _arguments = EncodingUtils.readFieldTable(buffer);,     }, ,     public QueueUnbindBody(,             int ticket,,             AMQShortString queue,,             AMQShortString exchange,,             AMQShortString routingKey,,             FieldTable arguments,                           ),     {,         _ticket = ticket;,         _queue = queue;,         _exchange = exchange;,         _routingKey = routingKey;,         _arguments = arguments;,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, ,     public final int getTicket(),     {,         return _ticket;,     },     public final AMQShortString getQueue(),     {,         return _queue;,     },     public final AMQShortString getExchange(),     {,         return _exchange;,     },     public final AMQShortString getRoutingKey(),     {,         return _routingKey;,     },     public final FieldTable getArguments(),     {,         return _arguments;,     }, ,     protected int getBodySize(),     {,         int size = 2;,         size += getSizeOf( _queue );,         size += getSizeOf( _exchange );,         size += getSizeOf( _routingKey );,         size += getSizeOf( _arguments );,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,         writeUnsignedShort( buffer, _ticket );,         writeAMQShortString( buffer, _queue );,         writeAMQShortString( buffer, _exchange );,         writeAMQShortString( buffer, _routingKey );,         writeFieldTable( buffer, _arguments );,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchQueueUnbind(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueUnbindBodyImpl: ");,         buf.append( "ticket=" );,         buf.append(  getTicket() );,         buf.append( ", " );,         buf.append( "queue=" );,         buf.append(  getQueue() );,         buf.append( ", " );,         buf.append( "exchange=" );,         buf.append(  getExchange() );,         buf.append( ", " );,         buf.append( "routingKey=" );,         buf.append(  getRoutingKey() );,         buf.append( ", " );,         buf.append( "arguments=" );,         buf.append(  getArguments() );,         buf.append("]");,         return buf.toString();,     }, ,     public static void process(final MarkableDataInput buffer,,                                final ServerChannelMethodProcessor dispatcher) throws IOException, AMQFrameDecodingException,     {, ,         int ticket = buffer.readUnsignedShort();,         AMQShortString queue = buffer.readAMQShortString();,         AMQShortString exchange = buffer.readAMQShortString();,         AMQShortString routingKey = buffer.readAMQShortString();,         FieldTable arguments = EncodingUtils.readFieldTable(buffer);,         if(!dispatcher.ignoreAllButCloseOk()),         {,             dispatcher.receiveQueueUnbind(queue, exchange, routingKey, arguments);,         },     }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/QueueUnbindOkBody.java,,46-84,[    {,     }, ,     public QueueUnbindOkBody(,                             ),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         int size = 0;,         return size;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,     return dispatcher.dispatchQueueUnbindOk(this, channelId);, 	}, ,     public String toString(),     {,         StringBuilder buf = new StringBuilder("[QueueUnbindOkBodyImpl: ");,         buf.append("]");,         return buf.toString();],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/TxCommitBody.java,,41-77,[    public static final TxCommitBody INSTANCE = new TxCommitBody();, ,     // Constructor, , ,     public TxCommitBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchTxCommit(this, channelId);, 	}, ,     public String toString(),     {,         return "[TxCommitBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/TxCommitOkBody.java,,41-75,[    public static final TxCommitOkBody INSTANCE = new TxCommitOkBody();, ,     // Constructor,     private TxCommitOkBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchTxCommitOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[TxCommitOkBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/TxRollbackBody.java,,41-75,[    public static final TxRollbackBody INSTANCE = new TxRollbackBody();, , ,     private TxRollbackBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchTxRollback(this, channelId);, 	}, ,     public String toString(),     {,         return "[TxRollbackBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/TxRollbackOkBody.java,,41-76,[    public static final TxRollbackOkBody INSTANCE = new TxRollbackOkBody();, ,     // Constructor, ,     private TxRollbackOkBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchTxRollbackOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[TxRollbackOkBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/TxSelectBody.java,,41-78,[    public static final TxSelectBody INSTANCE = new TxSelectBody();, ,     // Fields declared in specification, ,     // Constructor, ,     private TxSelectBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchTxSelect(this, channelId);, 	}, ,     public String toString(),     {,         return "[TxSelectBody]";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/framing/TxSelectOkBody.java,,41-74,[    public static final TxSelectOkBody INSTANCE = new TxSelectOkBody();, ,     private TxSelectOkBody(),     {,     }, ,     public int getClazz(),     {,         return CLASS_ID;,     }, ,     public int getMethod(),     {,         return METHOD_ID;,     }, , ,     protected int getBodySize(),     {,         return 0;,     }, ,     public void writeMethodPayload(DataOutput buffer) throws IOException,     {,     }, ,     public boolean execute(MethodDispatcher dispatcher, int channelId) throws AMQException, 	{,         return dispatcher.dispatchTxSelectOk(this, channelId);, 	}, ,     public String toString(),     {,         return "[TxSelectOkBody]";],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/framing/abstraction/MessagePublishInfoImplTest.java,setUp,35-35,[        _mpi = new MessagePublishInfo(_exchange, true, true, _routingKey);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/jms/FailoverPolicy.java,<init>,105-105,[                    catch (Exception cnfe)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/jms/FailoverPolicyTest.java,,183-282,[        {, ,             @Override,             public Session createSession(boolean transacted,,                     int acknowledgeMode, int prefetch) throws JMSException,             {,                 return null;,             }, ,             @Override,             public Session createSession(boolean transacted,,                     int acknowledgeMode, int prefetchHigh, int prefetchLow),                     throws JMSException,             {,                 return null;,             }, ,             @Override,             public ConnectionListener getConnectionListener(),             {,                 return null;,             }, ,             @Override,             public long getMaximumChannelCount() throws JMSException,             {,                 return 0;,             }, ,             @Override,             public void setConnectionListener(ConnectionListener listener),             {,             }, ,             @Override,             public void close() throws JMSException,             {,             }, ,             @Override,             public ConnectionConsumer createConnectionConsumer(,                     Destination arg0, String arg1, ServerSessionPool arg2,,                     int arg3) throws JMSException,             {,                 return null;,             }, ,             @Override,             public ConnectionConsumer createDurableConnectionConsumer(,                     Topic arg0, String arg1, String arg2,,                     ServerSessionPool arg3, int arg4) throws JMSException,             {,                 return null;,             }, ,             @Override,             public Session createSession(boolean arg0, int arg1),                     throws JMSException,             {,                 return null;,             }, ,             @Override,             public String getClientID() throws JMSException,             {,                 return null;,             }, ,             @Override,             public ExceptionListener getExceptionListener() throws JMSException,             {,                 return null;,             }, ,             @Override,             public ConnectionMetaData getMetaData() throws JMSException,             {,                 return null;,             }, ,             @Override,             public void setClientID(String arg0) throws JMSException,             {,             }, ,             @Override,             public void setExceptionListener(ExceptionListener arg0),                     throws JMSException,             {,             }, ,             @Override,             public void start() throws JMSException,             {,             }, ,             @Override,             public void stop() throws JMSException,             {,             }],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/jms/failover/FailoverRoundRobinServers.java,getNextBrokerDetails,175-175,[            if (delayStr == null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE,org/apache/qpid/jms/failover/FailoverRoundRobinServers.java,getNextBrokerDetails,175-175,[            if (delayStr == null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/jndi/PropertiesFileInitialContextFactory.java,createFactory,140-140,[                if (cf != null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/jndi/PropertiesFileInitialContextFactory.java,createDestination,158-158,[                if (dest != null)],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/jndi/PropertiesFileInitialContextFactoryTest.java,prepareContext,93-93,[        properties.load(this.getClass().getResourceAsStream("JNDITest.properties"));],,prepareContext,95-95,[        return new InitialContext(properties);],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/jndi/PropertiesFileInitialContextFactoryTest.java,prepareContext,93-93,[        properties.load(this.getClass().getResourceAsStream("JNDITest.properties"));],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/jndi/PropertiesFileInitialContextFactoryTest.java,testContextFromProviderURL,132-132,[            f.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/jndi/PropertiesFileInitialContextFactoryTest.java,testNonExistentFileHandling,141-141,[        f.delete();],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/jndi/PropertiesFileInitialContextFactoryTest.java,prepareContext,93-93,[        properties.load(this.getClass().getResourceAsStream("JNDITest.properties"));],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/management/common/JMXConnnectionFactory.java,run,268-268,[            catch (Exception ex)],,
PERFORMANCE,URF_UNREAD_FIELD,org/apache/qpid/messaging/util/AddressParser.java,,58-58,[    private static Token.Type SYM = lxi.define("SYM", "[.#*%@$^!+-]");],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/messaging/util/JAddr.java,main,45-45,[        InputStreamReader reader = new InputStreamReader(System.in);],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/messaging/util/JAddr.java,pprint_address,91-91,[        return String.format("NAME: %s\nSUBJECT: %s\nOPTIONS: %s",],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/messaging/util/PyPrint.java,pprint_items,110-110,[            return String.format("%s\n%s\n%s", start, result, end);],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/pool/SuppressingInheritedAccessControlContextThreadFactoryTest.java,testAccessControlContextIsNotInheritedByThread,86-86,[        latch.await(3, TimeUnit.SECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/pool/SuppressingInheritedAccessControlContextThreadFactoryTest.java,,48-58,[        {,             @Override,             public String getName(),             {,                 return principalName;,             }, ,             @Override,             public String toString(),             {,                 return "Principal{" + getName() + "}";],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/pool/SuppressingInheritedAccessControlContextThreadFactoryTest.java,,65-82,[        {,             @Override,             public Void run(),             {,                 callerAccessControlContextCapturer.set(AccessController.getContext());,                 SuppressingInheritedAccessControlContextThreadFactory factory = new SuppressingInheritedAccessControlContextThreadFactory(null,,                                                                                                                                           null);,                 factory.newThread(new Runnable(),                 {, ,                     public void run(),                     {,                         threadAccessControlContextCapturer.set(AccessController.getContext());,                         latch.countDown();,                     }, ,                 }).start();,                 return null;],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/ra/ConnectionFactoryProperties.java,getConnectionURL,79-83,[      if (_log.isTraceEnabled()),       {,          _log.trace("getConnectionURL()");,       },       return _connectionURL;],,getConnectionUrl,65-65,[        return _connectionUrl;],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRABytesMessage.java,readBytes,126-126,[         _log.trace("readBytes(" + value + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRABytesMessage.java,readBytes,110-110,[         _log.trace("readBytes(" + value + ", " + length + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRABytesMessage.java,writeBytes,337-337,[         _log.trace("writeBytes(" + value + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRABytesMessage.java,writeBytes,322-322,[         _log.trace("writeBytes(" + value + ", " + offset + ", " + length + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRAMapMessage.java,setBytes,324-324,[         _log.trace("setBytes(" + name + ", " + value + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRAMapMessage.java,setBytes,308-308,[         _log.trace("setBytes(" + name + ", " + value + ", " + offset + ", " + length + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRAMessage.java,setJMSCorrelationIDAsBytes,550-550,[         _log.trace("setJMSCorrelationIDAsBytes(" + correlationID + ")");],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/ra/QpidRASessionFactoryImpl.java,allocateConnection,793-793,[      catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/ra/QpidRASessionFactoryImpl.java,allocateConnection,891-891,[      catch (Exception e)],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRAStreamMessage.java,readBytes,94-94,[         _log.trace("readBytes(" + value + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRAStreamMessage.java,writeBytes,290-290,[         _log.trace("writeBytes(" + value + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidRAStreamMessage.java,writeBytes,275-275,[         _log.trace("writeBytes(" + value + ", " + offset + ", " + length + ")");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/ra/QpidResourceAdapter.java,getXAResources,151-151,[         _log.trace("getXAResources(" + specs + ")");],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/ra/QpidResourceAdapter.java,getTM,87-87,[      return _tm;],,getTm,37-61,[        InitialContext ctx = null;,         TransactionManager tm = null;, ,         try,         {,             ctx = new InitialContext();,             tm = (TransactionManager)ctx.lookup(TM_JNDI_NAME);,         },         catch(Exception e),         {,             _log.error("Error attempting to location TM " + e.getMessage());,         },         finally,         {,             try,             {,                 if(ctx != null),                 {,                     ctx.close();,                 },             },             catch(Exception ignore){},         }, ,         return tm;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/ra/QpidResourceAdapter.java,getXAResources,154-154,[      return null;],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/ra/Util.java,maskUrlForLog,169-169,[       catch(Exception ignore){}],,
BAD_PRACTICE,ES_COMPARING_PARAMETER_STRING_WITH_EQ,org/apache/qpid/ra/Util.java,compare,59-59,[      if (me == you)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/ra/Util.java,compare,65-65,[      if (me == null && you != null)],,
STYLE,EQ_DOESNT_OVERRIDE_EQUALS,org/apache/qpid/client/AMQQueue.java,equals,155-155,[        return super.equals(o) && o instanceof Queue;],,
STYLE,EQ_DOESNT_OVERRIDE_EQUALS,org/apache/qpid/client/AMQTopic.java,equals,207-215,[        if (getDestSyntax() == DestSyntax.ADDR),         {,             return super.equals(o);,         },         else,         {,             return (o instanceof AMQTopic),                && ((AMQTopic)o).getExchangeName().equals(getExchangeName()),                && ((AMQTopic)o).getRoutingKey().equals(getRoutingKey());],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/ra/tm/GlassfishTransactionManagerLocator.java,getTm,58-58,[            catch(Exception ignore){}],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/ra/tm/JBoss7TransactionManagerLocator.java,getTm,48-48,[            catch(Exception ignore)],,
PERFORMANCE,SS_SHOULD_BE_STATIC,org/apache/qpid/ra/tm/JBossTransactionManagerLocator.java,,32-32,[   private final String LOCATOR = "org.jboss.tm.TransactionManagerLocator" ;],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/ra/tm/WLSTransactionManagerLocator.java,getTm,58-58,[            catch(Exception ignore){}],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/BrokerOptions.java,getConfigurationStoreLocation,197-197,[            return new File(workDir, DEFAULT_CONFIG_NAME_PREFIX + "." + storeType.toLowerCase()).getAbsolutePath();],,
STYLE,DMI_HARDCODED_ABSOLUTE_FILENAME,org/apache/qpid/server/BrokerOptionsTest.java,testDefaultConfigurationStoreLocationWithQpidWork,54-54,[        String expectedPath = new File(qpidWork, BrokerOptions.DEFAULT_CONFIG_NAME_PREFIX + "." + BrokerOptions.DEFAULT_STORE_TYPE.toLowerCase()).getAbsolutePath();],,
STYLE,DMI_HARDCODED_ABSOLUTE_FILENAME,org/apache/qpid/server/BrokerOptionsTest.java,testDefaultConfigurationStoreLocationWithQpidWorkAndDifferentStoreType,75-75,[        String expectedPath = new File(qpidWork, BrokerOptions.DEFAULT_CONFIG_NAME_PREFIX + "." + storeType).getAbsolutePath();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/BrokerOptionsTest.java,testDefaultConfigurationStoreLocationWithQpidWork,54-54,[        String expectedPath = new File(qpidWork, BrokerOptions.DEFAULT_CONFIG_NAME_PREFIX + "." + BrokerOptions.DEFAULT_STORE_TYPE.toLowerCase()).getAbsolutePath();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/BrokerOptionsTest.java,testDefaultConfigurationStoreLocationWithoutQpidWork,63-63,[        String expectedPath = new File(userDir, "work/" + BrokerOptions.DEFAULT_CONFIG_NAME_PREFIX + "." + BrokerOptions.DEFAULT_STORE_TYPE.toLowerCase()).getAbsolutePath();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/BrokerStartupTest.java,setUp,42-42,[        _monitor = new LogMonitor(getOutputFile());],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/server/BrokerTest.java,testConsoleLogsOnUnsuccessfulStartup,116-116,[        initialConfig.put(org.apache.qpid.server.model.Broker.MODEL_VERSION, new Integer(Integer.MAX_VALUE).toString());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/BrokerTest.java,startBrokerAndCollectSystemOutput,137-137,[                System.setOut(new PrintStream(out));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/BrokerTest.java,testConsoleLogsOnSuccessfulStartup,109-109,[        assertFalse("Detected unexpected startup console appender prefix", new String(outputBytes).contains(startupConsoleAppenderLogPrefix));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/BrokerTest.java,testConsoleLogsOnUnsuccessfulStartup,124-124,[        assertTrue("Startup console appender prefix is not found", new String(outputBytes).contains(startupConsoleAppenderLogPrefix));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/BrokerTest.java,testConsoleLogsOnUnsuccessfulStartup,116-116,[        initialConfig.put(org.apache.qpid.server.model.Broker.MODEL_VERSION, new Integer(Integer.MAX_VALUE).toString());],,
MALICIOUS_CODE,MS_MUTABLE_ARRAY,org/apache/qpid/server/License.java,,25-25,[    String[] LICENSE = {],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/server/Main.java,shutdown,424-424,[        System.exit(status);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/Main.java,,370-399,[                {,                     public void uncaughtException(final Thread t, final Throwable e),                     {,                         boolean continueOnError = Boolean.getBoolean("qpid.broker.exceptionHandler.continue");,                         try,                         {,                             System.err.println("########################################################################");,                             System.err.println("#");,                             System.err.print("# Unhandled Exception ");,                             System.err.print(e.toString());,                             System.err.print(" in Thread ");,                             System.err.println(t.getName());,                             System.err.println("#");,                             System.err.println(continueOnError ? "# Forced to continue by JVM setting 'qpid.broker.exceptionHandler.continue'" : "# Exiting");,                             System.err.println("#");,                             System.err.println("########################################################################");,                             e.printStackTrace(System.err);, ,                             Logger logger = LoggerFactory.getLogger("org.apache.qpid.server.Main");,                             logger.error("Uncaught exception, " + (continueOnError ? "continuing." : "shutting down."), e);,                         },                         finally,                         {,                             if (!continueOnError),                             {,                                 Runtime.getRuntime().halt(1);,                             },                         }, ,                     }],,
STYLE,DMI_HARDCODED_ABSOLUTE_FILENAME,org/apache/qpid/server/MainTest.java,testNoOptionsSpecified,46-46,[        String expectedStorePath = new File(qpidWork, BrokerOptions.DEFAULT_CONFIG_NAME_PREFIX + ".json").getAbsolutePath();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/SupportedProtocolVersionsTest.java,setUp,51-51,[    }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/TransactionTimeoutHelperTest.java,,184-220,[        {,             _expectedLogHierarchy = expectedLogHierarchy;,             _expectedLogMessageMatches = expectedLogMessageMatches;,         }, ,         public boolean matches(Object arg),         {,             LogMessage logMessage = (LogMessage)arg;, ,             boolean hierarchyMatches = logMessage.getLogHierarchy().equals(_expectedLogHierarchy);,             boolean logMessageMatches = logMessage.toString().matches(_expectedLogMessageMatches);, ,             if (!hierarchyMatches),             {,                 _hierarchyMatchesFailure = "LogHierarchy does not match. Expected " + _expectedLogHierarchy + " actual " + logMessage.getLogHierarchy();,             }, ,             if (!logMessageMatches),             {,                 _logMessageMatchesFailure = "LogMessage does not match. Expected " + _expectedLogMessageMatches + " actual " + logMessage.toString();,             }, ,             return hierarchyMatches && logMessageMatches;,         }, ,         @Override,         public void describeTo(Description description),         {,             if (_hierarchyMatchesFailure != null),             {,                 description.appendText(_hierarchyMatchesFailure);,             },             if (_logMessageMatchesFailure != null),             {,                 description.appendText(_logMessageMatchesFailure);,             },         }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/binding/BindingImpl.java,activate,221-222,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/binding/BindingImpl.java,doDelete,204-215,[        if(_deleted.compareAndSet(false,true)),         {,             for(StateChangeListener<BindingImpl,State> listener : _stateChangeListeners),             {,                 listener.stateChanged(this, State.ACTIVE, State.DELETED);,             },             getEventLogger().message(_logSubject, BindingMessages.DELETED());,         }, ,         deleted();,         setState(State.DELETED);,         return Futures.immediateFuture(null);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/configuration/startup/PreferencesProviderCreationTest.java,testRecoverFileSystemPreferencesProvider,121-121,[            file.delete();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/configuration/store/ManagementModeStoreHandlerTest.java,,509-537,[    private class BrokerFinder implements ConfiguredObjectRecordHandler,     {,         private ConfiguredObjectRecord _brokerRecord;,         private int _version;, ,         @Override,         public void begin(),         {,         }, ,         @Override,         public boolean handle(final ConfiguredObjectRecord object),         {,             if(object.getType().equals(Broker.class.getSimpleName())),             {,                 _brokerRecord = object;,                 return false;,             },             return true;,         }, ,         @Override,         public void end(),         {,         }, ,         public ConfiguredObjectRecord getBrokerRecord(),         {,             return _brokerRecord;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/configuration/store/ManagementModeStoreHandlerTest.java,,578-618,[    private class ChildFinder implements ConfiguredObjectRecordHandler,     {,         private final Collection<UUID> _childIds = new HashSet<UUID>();,         private final ConfiguredObjectRecord _parent;, ,         private ChildFinder(final ConfiguredObjectRecord parent),         {,             _parent = parent;,         }, ,         @Override,         public void begin(),         {,         }, ,         @Override,         public boolean handle(final ConfiguredObjectRecord object),         {, ,             if(object.getParents() != null),             {,                 for(UUID parent : object.getParents().values()),                 {,                     if(parent.equals(_parent.getId())),                     {,                         _childIds.add(object.getId());,                     },                 }, ,             },             return true;,         }, ,         @Override,         public void end(),         {,         }, ,         public Collection<UUID> getChildIds(),         {,             return _childIds;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/configuration/store/ManagementModeStoreHandlerTest.java,,541-574,[    private class RecordFinder implements ConfiguredObjectRecordHandler,     {,         private final UUID _id;,         private ConfiguredObjectRecord _foundRecord;, ,         private RecordFinder(final UUID id),         {,             _id = id;,         }, ,         @Override,         public void begin(),         {,         }, ,         @Override,         public boolean handle(final ConfiguredObjectRecord object),         {,             if(object.getId().equals(_id)),             {,                 _foundRecord = object;,                 return false;,             },             return true;,         }, ,         @Override,         public void end(),         {,         }, ,         public ConfiguredObjectRecord getFoundRecord(),         {,             return _foundRecord;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/configuration/updater/CurrentThreadTaskExecutor.java,,110-138,[        {,             @Override,             public boolean cancel(boolean mayInterruptIfRunning),             {,                 return true;,             }, ,             @Override,             public boolean isCancelled(),             {,                 return false;,             }, ,             @Override,             public boolean isDone(),             {,                 return true;,             }, ,             @Override,             public T get() throws InterruptedException, ExecutionException,             {,                 return result;,             }, ,             @Override,             public T get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException,             {,                 return result;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/configuration/updater/TaskExecutorImpl.java,,163-168,[        {,             @Override,             public Void execute(),             {,                 task.execute();,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/configuration/updater/TaskExecutorImpl.java,,476-486,[        {,             @Override,             public TaskExecutor newInstance(),             {,                 return new TaskExecutorImpl();,             }, ,             @Override,             public TaskExecutor newInstance(final String name, PrincipalAccessor principalAccessor),             {,                 return new TaskExecutorImpl(name, principalAccessor);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/configuration/updater/TaskExecutorTest.java,,145-149,[        {,             @Override,             public String execute(),             {,                 return "DONE";],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/configuration/updater/TaskExecutorTest.java,,198-203,[            {, ,                 @Override,                 public Void execute(),                 {,                     throw exception;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/configuration/updater/TaskExecutorTest.java,,249-279,[    private class NeverEndingCallable implements Task<Void>,     {,         private CountDownLatch _waitLatch;, ,         public NeverEndingCallable(CountDownLatch waitLatch),         {,             super();,             _waitLatch = waitLatch;,         }, ,         @Override,         public Void execute(),         {,             if (_waitLatch != null),             {,                 _waitLatch.countDown();,             }, ,             // wait forever,             synchronized (this),             {,                 try,                 {,                     this.wait();,                 },                 catch (InterruptedException e),                 {,                     throw new ServerScopedRuntimeException(e);,                 },             },             return null;],,
MT_CORRECTNESS,UW_UNCOND_WAIT,org/apache/qpid/server/configuration/updater/TaskExecutorTest.java,execute,272-272,[                    this.wait();],,
MT_CORRECTNESS,WA_NOT_IN_LOOP,org/apache/qpid/server/configuration/updater/TaskExecutorTest.java,execute,272-272,[                    this.wait();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/configuration/updater/TaskExecutorTest.java,,240-245,[    private class SubjectRetriever implements Task<Subject>,     {,         @Override,         public Subject execute(),         {,             return Subject.getSubject(AccessController.getContext());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/connection/ConnectionVersionValidator.java,,132-148,[                                                              {,                                                                   @Override,                                                                   public Type[] getActualTypeArguments(),                                                                   {,                                                                       return new Type[]{String.class};,                                                                   }, ,                                                                   @Override,                                                                   public Type getRawType(),                                                                   {,                                                                       return List.class;,                                                                   }, ,                                                                   @Override,                                                                   public Type getOwnerType(),                                                                   {,                                                                       return null;],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/server/connection/ConnectionVersionValidator.java,,53-60,[    private static class BoundedCache extends LinkedHashMap<List<String>, Boolean>,     {,         private static final int CACHE_SIZE = 20;, ,         @Override,         protected boolean removeEldestEntry(final Map.Entry<List<String>, Boolean> eldest),         {,             return size() >= CACHE_SIZE;],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/consumer/MockConsumer.java,compareTo,326-326,[    private static class MockSessionModel implements AMQSessionModel<MockSessionModel>],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/exchange/AbstractExchange.java,route,493-493,[        if(queues == null || queues.isEmpty())],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/exchange/AbstractExchange.java,activate,807-808,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/exchange/AbstractExchange.java,doDelete,826-834,[            _virtualHost.removeExchange(this,true);,             preSetAlternateExchange();,             setState(State.DELETED);,         },         catch (ExchangeIsAlternateException e),         {, ,         },         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/exchange/AbstractExchange.java,doDeleteBeforeInitialize,815-817,[        preSetAlternateExchange();,         setState(State.DELETED);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/exchange/AbstractExchange.java,postSetAlternateExchange,357-361,[        if(_alternateExchange != null),         {,             ((ExchangeImpl)_alternateExchange).addReference(this);,         },     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/DefaultDestination.java,,87-105,[            {,                 MessageReference _reference = message.newReference();, ,                 public void postCommit(MessageEnqueueRecord... records),                 {,                     try,                     {,                         q.enqueue(message, postEnqueueAction, records[0]);,                     },                     finally,                     {,                         _reference.release();,                     },                 }, ,                 public void onRollback(),                 {,                     _reference.release();,                 }],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/exchange/FanoutExchangeTest.java,setUp,64-64,[        Map<String,Object> attributes = new HashMap<String, Object>();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/FanoutExchangeTest.java,,218-223,[        {,             @Override,             public Object answer(InvocationOnMock invocation) throws Throwable,             {,                 final Set names = (Set) invocation.getArguments()[0];,                 return names.size() == 1 && names.contains("select");],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/HeadersBinding.java,,92-108,[                    {,                     @Override,                         public String getName(),                         {,                             return "";,                         }, ,                     @Override,                     public boolean startAtTail(),                     {,                         return false;,                     }, ,                     @Override,                         public boolean matches(Filterable message),                         {,                             return false;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/exchange/HeadersBindingTest.java,setUp,150-150,[        _count++;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/exchange/HeadersBindingTest.java,,50-139,[    private class MockHeader implements AMQMessageHeader,     {, ,         private final Map<String, Object> _headers = new HashMap<String, Object>();, ,         public String getCorrelationId(),         {,             return null;,         }, ,         public long getExpiration(),         {,             return 0;,         }, ,         public String getUserId(),         {,             return null;,         }, ,         public String getAppId(),         {,             return null;,         }, ,         public String getMessageId(),         {,             return null;,         }, ,         public String getMimeType(),         {,             return null;,         }, ,         public String getEncoding(),         {,             return null;,         }, ,         public byte getPriority(),         {,             return 0;,         }, ,         public long getTimestamp(),         {,             return 0;,         }, ,         public String getType(),         {,             return null;,         }, ,         public String getReplyTo(),         {,             return null;,         }, ,         public Object getHeader(String name),         {,             return _headers.get(name);,         }, ,         public boolean containsHeaders(Set<String> names),         {,             return _headers.keySet().containsAll(names);,         }, ,         @Override,         public Collection<String> getHeaderNames(),         {,             return _headers.keySet();,         }, ,         public boolean containsHeader(String name),         {,             return _headers.containsKey(name);,         }, ,         public void setString(String key, String value),         {,             setObject(key,value);,         }, ,         public void setObject(String key, Object value),         {,             _headers.put(key,value);,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/HeadersExchangeTest.java,,260-264,[        {,             @Override,             public Boolean answer(InvocationOnMock invocation) throws Throwable,             {,                 return headerValues.containsKey((String) invocation.getArguments()[0]);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/HeadersExchangeTest.java,,268-272,[        {,             @Override,             public Object answer(InvocationOnMock invocation) throws Throwable,             {,                 return headerValues.get((String) invocation.getArguments()[0]);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/HeadersExchangeTest.java,,277-282,[        {,             @Override,             public Boolean answer(InvocationOnMock invocation) throws Throwable,             {,                 final Set names = (Set) invocation.getArguments()[0];,                 return headerValues.keySet().containsAll(names);],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/exchange/TopicExchange.java,doRoute,247-247,[        if(queues == null || queues.isEmpty())],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/exchange/topic/TopicMatcherDFAState.java,,274-277,[                                                        {,                                                             public int compare(final TopicMatcherDFAState o1, final TopicMatcherDFAState o2),                                                             {,                                                                 return o1.getId() - o2.getId();],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/server/failover/FailoverMethodTest.java,testFailoverRoundRobinDelay,78-78,[            _failoverComplete.await(30, TimeUnit.SECONDS);],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/server/failover/FailoverMethodTest.java,testFailoverSingleDelay,130-130,[            _failoverComplete.await(30, TimeUnit.SECONDS);],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/server/failover/FailoverMethodTest.java,testNoFailover,228-228,[            _failoverComplete.await(30, TimeUnit.SECONDS);],,
PERFORMANCE,DM_STRING_CTOR,org/apache/qpid/server/filter/JMSSelectorFilterTest.java,testEqualsAndHashCodeUsingSelectorString,29-29,[        JMSSelectorFilter filter1 = new JMSSelectorFilter(new String(selectorString));],,testEqualsAndHashCodeUsingSelectorString,30-30,[        JMSSelectorFilter filter2 = new JMSSelectorFilter(new String(selectorString));],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/jmx/DefaultManagedObject.java,getNotificationInfo,183-183,[        return null;],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/jmx/DefaultManagedObject.java,getHierarchicalName,133-133,[        if (hierarchyName != null)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/server/jmx/JMXManagementPluginImpl.java,unregisterObjectMBeans,235-235,[                    catch(Exception e)],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/jmx/JMXManagementPluginImpl.java,doStart,113-182,[        _allowPortActivation = true;,         Broker<?> broker = getBroker();,         JmxPort<?> connectorPort = null;,         RmiPort registryPort = null;,         Collection<Port<?>> ports = broker.getPorts();,         for (Port<?> port : ports),         {,             if (port.getDesiredState() != State.ACTIVE),             {,                 continue;,             }, ,             if(isRegistryPort(port)),             {,                 registryPort = (RmiPort) port;,                 registryPort.setPortManager(this);,                 if(port.getState() != State.ACTIVE),                 {,                     // TODO - RG,                     port.startAsync();,                 }, ,             },             else if(isConnectorPort(port)),             {,                 connectorPort = (JmxPort<?>) port;,                 connectorPort.setPortManager(this);,                 if(port.getState() != State.ACTIVE),                 {,                     port.startAsync();,                 }, ,             },         },         if(connectorPort == null),         {,             throw new IllegalStateException("No JMX connector port found supporting protocol " + Protocol.JMX_RMI);,         },         if(registryPort == null),         {,             throw new IllegalStateException("No JMX RMI port found supporting protocol " + Protocol.RMI);,         }, ,         _objectRegistry = new JMXManagedObjectRegistry(broker, connectorPort, registryPort, this);, ,         broker.addChangeListener(_changeListener);, ,         synchronized (_childrenLock),         {,             for(VirtualHostNode<?> virtualHostNode : broker.getVirtualHostNodes()),             {,                 createObjectMBeans(virtualHostNode);,             }, ,             Collection<AuthenticationProvider<?>> authenticationProviders = broker.getAuthenticationProviders();,             for (AuthenticationProvider<?> authenticationProvider : authenticationProviders),             {,                 createObjectMBeans(authenticationProvider);,             },         },         new Shutdown(_objectRegistry);,         new ServerInformationMBean(_objectRegistry, broker);,         if (LoggingManagementFacade.getCurrentInstance() != null),         {,             new LoggingManagementMBean(LoggingManagementFacade.getCurrentInstance(), _objectRegistry);,         },         _objectRegistry.start();,         setState(State.ACTIVE);,         _allowPortActivation = false;,         return Futures.immediateFuture(null);],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/jmx/MBeanIntrospector.java,getMBeanConstructorInfo,355-355,[            if (constructorInfo != null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/jmx/MBeanIntrospector.java,getParametersInfo,334-334,[            if (paramInfo != null)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/ManagementLogonLogoffReporterTest.java,,83-88,[        {,             @Override,             public boolean matches(final Object argument),             {,                 LogMessage actual = (LogMessage) argument;,                 return actual.getLogHierarchy().equals(hierarchy) &&  actual.toString().equals(message);],,
CORRECTNESS,EQ_OVERRIDING_EQUALS_NOT_SYMMETRIC,org/apache/qpid/server/jmx/QpidSslRMIServerSocketFactory.java,equals,104-111,[        if (!(object instanceof QpidSslRMIServerSocketFactory)),         {,             return false;,         }, ,         QpidSslRMIServerSocketFactory that = (QpidSslRMIServerSocketFactory) object;, ,         return _sslContext.equals(that._sslContext);],,equals,291-296,[],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/jmx/mbeans/AbstractStatisticsGatheringMBean.java,,58-58,[        _lastStatUpdateTime = System.currentTimeMillis();],,,64-64,[        final long period = time - _lastStatUpdateTime;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/jmx/mbeans/ConnectionMBeanTest.java,setUp,49-49,[        _mockConnection = mock(Connection.class);],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/jmx/mbeans/ExchangeMBean.java,createNewBinding,279-279,[                if (keyAndValue == null || keyAndValue.length == 0 || keyAndValue.length > 2 || keyAndValue[0].length() == 0)],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/jmx/mbeans/ExchangeMBeanTest.java,setUp,65-65,[        _mockExchange = mock(Exchange.class);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/ExchangeMBeanTest.java,,178-181,[        {{,             put("key1", "binding1");,             put("key2", "binding2");,         }};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/ExchangeMBeanTest.java,,192-195,[        {{,             put("key1", "binding1");,             put("key2", "");,         }};],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/jmx/mbeans/LoggingManagementMBean.java,createRow,311-311,[        Object[] itemData = {loggerName, level.toUpperCase()};],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/jmx/mbeans/LoggingManagementMBean.java,getConfigFileRootLoggerLevel,196-196,[            return _loggingManagementFacade.retrieveConfigFileRootLoggerLevel().toUpperCase();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/jmx/mbeans/LoggingManagementMBean.java,validateLevelNotAllowingInherited,289-289,[        if (level == null || !availableLoggerLevels.contains(level.toUpperCase()))],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/jmx/mbeans/LoggingManagementMBean.java,buildAllAvailableLoggerLevelsWithInheritedPsuedoLogLevel,327-331,[        List<String> levels = loggingManagementFacade.getAvailableLoggerLevels();,         List<String> mbeanLevels = new ArrayList<String>(levels);,         mbeanLevels.add(INHERITED_PSUEDO_LOG_LEVEL);, ,         return mbeanLevels.toArray(new String[mbeanLevels.size()]);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/jmx/mbeans/LoggingManagementMBeanTest.java,setUp,55-55,[        _mockLoggingFacade = mock(LoggingManagementFacade.class);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/LoggingManagementMBeanTest.java,,57-60,[        {{,             add(TEST_LEVEL1);,             add(TEST_LEVEL2);,         }};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/QueueMBean.java,,617-627,[        {,             private long position = 1;, ,             public boolean visit(QueueEntry entry),             {,                 if(position >= first && position <= last),                 {,                     messages.add(entry);,                 },                 position++;,                 return position > last;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/QueueMBeanTest.java,,406-411,[        {,             @Override,             public boolean matches(Object argument),             {,                 Notification actual = (Notification) argument;,                 return actual.getMessage().endsWith(expectedMessage);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/QueueMBeanTest.java,,442-457,[        {,             public Object answer(InvocationOnMock invocation),             {,                 Object[] args = invocation.getArguments();, ,                 //verify the arg types / expected values,                 assertEquals(2, args.length);,                 assertTrue(args[0] instanceof ByteBuffer);,                 assertTrue(args[1] instanceof Integer);, ,                 ByteBuffer dest = (ByteBuffer) args[0];,                 int offset = (Integer) args[1];,                 assertEquals(0, offset);, ,                 dest.put(content);,                 return messageContentSize;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/jmx/mbeans/QueueMBeanTest.java,,466-472,[        {,             public Object answer(InvocationOnMock invocation),             {,                 Object[] args = invocation.getArguments();,                 GetMessageVisitor visitor = (GetMessageVisitor) args[0];,                 visitor.visit(entry);,                 return null;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/jmx/mbeans/ServerInformationMBeanTest.java,setUp,40-40,[        _mockManagedObjectRegistry = mock(ManagedObjectRegistry.class);],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/server/jmx/mbeans/Shutdown.java,run,129-129,[            System.exit(0);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/jmx/mbeans/Shutdown.java,,125-130,[    class SystemExiter implements Runnable,     {,         public void run(),         {,             System.exit(0);,         }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/jmx/mbeans/VirtualHostManagerMBean.java,retrieveQueueAttributeValues,149-149,[                catch (Exception e)],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/jmx/mbeans/VirtualHostManagerMBeanTest.java,setUp,67-67,[        _mockVirtualHost = mock(VirtualHost.class);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/logging/AbstractLogger.java,doActivate,89-90,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/logging/AbstractLogger.java,doDelete,96-108,[        final SettableFuture<Void> returnVal = SettableFuture.create();,         closeAsync().addListener(new Runnable(),         {,             @Override,             public void run(),             {,                 deleted();,                 setState(State.DELETED);,                 stopLogging();,                 returnVal.set(null);,             },         }, getTaskExecutor().getExecutor());,         return returnVal;],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/logging/AbstractMessageLogger.java,getPrincipal,213-213,[            if(principals != null && !principals.isEmpty())],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/logging/AbstractNameAndLevelFilter.java,doActivate,85-86,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/logging/AbstractNameAndLevelFilter.java,doDelete,67-79,[        final SettableFuture<Void> returnVal = SettableFuture.create();,         closeAsync().addListener(new Runnable(),         {,             @Override,             public void run(),             {,                 deleted();,                 setState(State.DELETED);,                 returnVal.set(null);, ,             },         }, getTaskExecutor().getExecutor());,         return returnVal;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/logging/AbstractNameAndLevelFilter.java,logLevelAfterSet,53-57,[        if (_filter != null),         {,             _filter.setLevel(Level.toLevel(getLevel().name()));,         },     }],,
CORRECTNESS,IJU_NO_TESTS,org/apache/qpid/server/logging/AbstractTestLogging.java,,41-410,[public class AbstractTestLogging extends QpidBrokerTestCase, {,     public static final long DEFAULT_LOG_WAIT = 2000;,     public static final String TEST_LOG_PREFIX = "MESSAGE";,     protected LogMonitor _monitor;, ,     @Override,     public void setUp() throws Exception,     {,         setLogMessagePrefix();,         ,         super.setUp();,         _monitor = new LogMonitor(getOutputFile());,     }, ,     protected void setLogMessagePrefix(),     {,         //set the message prefix to facilitate scraping from the munged test output.,         setSystemProperty("qpid.logging.prefix", TEST_LOG_PREFIX);,     }, ,     @Override,     public void tearDown() throws Exception,     {,         _monitor.close();,         super.tearDown();,     }, ,     /**,      * assert that the requested log message has not occured,      *,      * @param log,      *,      * @throws IOException,      */,     public void assertLoggingNotYetOccured(String log) throws IOException,     {,         // Ensure the alert has not occured yet,         assertEquals("Message has already occured:" + log, 0,,                      findMatches(log).size());,     }, ,     protected void validateMessageID(String id, String log),     {,         assertEquals("Incorrect message", id, getMessageID(log));,     }, ,     protected String getMessageID(String log),     {,         String message = fromMessage(log);, ,         return message.substring(0, message.indexOf(" "));,     }, ,     /**,      * Return the first channel id from the log string,      * ' ch;X'  if there is no channel id return -1.,      *,      * @param log the log string to search.,      *,      * @return channel id or -1 if no channel id exists.,      */,     protected int getChannelID(String log),     {,         int start = log.indexOf("ch:") + 3;, ,         // If we do a check for ] as the boundary we will get cases where log,         // is presented with the bounding. If we don't match a ] then we can use,         // the end of the string as the boundary.,         int end = log.indexOf("]", start);,         if (end == -1),         {,             end = log.length();,         },         return parseInt(log, start, end);,     }, ,     protected String fromMessage(String log),     {;,         int startSubject = log.indexOf("]") + 1;,         int start = log.indexOf("]", startSubject) + 1;, ,         // If we don't have a subject then the second indexOf will return 0,         // in which case we can use the end of the actor as the index.,         if (start == 0),         {,             start = startSubject;,         }, ,         return log.substring(start).trim();,     }, ,     /**,      * Extract the Subject from the Log Message.,      *,      * The subject is the second block inclosed in brackets '[ ]'.,      *,      * If there is no Subject or the second block of brackets '[ ]' cannot be,      * identified then an empty String ("") is returned.,      *,      * The brackets '[ ]' are not included in the returned String.,      *,      * @param log The log message to process,      *,      * @return the Subject string or the empty string ("") if the subject can't be identified.,      */,     protected String fromSubject(String log),     {,         int start = log.indexOf("[") + 1;,         // Take the second index,         start = log.indexOf("[", start) + 1;, ,         // There may not be a subject so in that case return nothing.,         if (start == 0),         {,             return "";,         }, ,         int end = log.indexOf("]", start);,         try,         {,             return log.substring(start, end);,         },         catch (IndexOutOfBoundsException iobe),         {,             return "";,         },     }, ,     /**,      * Extract the actor segment from the log message.,      * The Actor segment is the first section enclosed in '[ ]'.,      *,      * No analysis is performed to ensure that the first '[ ]' section of the,      * given log is really an Actor segment.,      *,      * The brackets '[ ]' are not included in the returned String.,      *,      * @param log the Log Message,      *,      * @return the Actor segment or "" if unable to locate '[ ]' section,      */,     protected String fromActor(String log),     {,         int start = log.indexOf("[") + 1;,         int end = log.indexOf("]", start);,         try,         {,             return log.substring(start, end).trim();,         },         catch (IndexOutOfBoundsException iobe),         {,             return "";,         },     }, ,     /**,      * Return the message String from the given message section,      *,      * @param log the Message Section,      *,      * @return the Message String.,      */,     protected String getMessageString(String log),     {,         // Remove the Log ID from the returned String,         int start = log.indexOf(":") + 1;, ,         return log.substring(start).trim();,     }, ,     /**,      * Given our log message extract the connection ID:,      *,      * The log string will contain the connectionID identified by 'con:',      *,      * So extract the value shown here by X:,      *,      * 'con:X(',      *,      * Extract the value between the ':' and '(' and process it as an Integer,      *,      * If we are unable to find the right index or process the substring as an,      * Integer then return -1.,      *,      * @param log the log String to process,      *,      * @return the connection ID or -1.,      */,     protected int getConnectionID(String log),     {,         int conIDStart = log.indexOf("con:") + 4;,         int conIDEnd = log.indexOf("(", conIDStart);,         return parseInt(log, conIDStart, conIDEnd);,     }, ,     /**,      * Extract the log entry from the raw log line which will contain other,      * log4j formatting.,      *,      * This formatting may impead our testing process so extract the log message,      * as we know it to be formatted.,      *,      * This starts with the string MESSAGE,      *,      * @param rawLog the raw log,      *,      * @return the log we are expecting to be printed without the log4j prefixes,      */,     protected String getLog(String rawLog),     {,         int start = rawLog.indexOf(TEST_LOG_PREFIX);,         return rawLog.substring(start);,     },     ,     /**,      * Extract the log entry from the result set. Positions are 0-based.,      * ,      * @param results list of log message results to extract from,      * @param position position in the list of the message to extract,      * @return the message string,      */,     protected String getLogMessage(List<String> results, int position),     {,         return getLog(results.get(position));,     },     ,     /**,      * Extract the nth-from-last log entry from the result set.,      * ,      * @param results list of log message results to extract from,      * @param positionFromEnd position from end of the message list to extract (eg 0 for last),      * @return the message string,      */,     protected String getLogMessageFromEnd(List<String> results, int positionFromEnd),     {,         int resultSize = results.size();,         return getLogMessage(results, resultSize - 1 - positionFromEnd);,     },     ,     protected List<String> findMatches(String toFind) throws IOException,     {,         return _monitor.findMatches(toFind);,     },     ,     protected List<String> waitAndFindMatches(String toFind) throws IOException,     {,         return waitAndFindMatches(toFind, DEFAULT_LOG_WAIT);,     }, ,     protected List<String> waitAndFindMatches(String toFind, long wait) throws IOException,     {,         return _monitor.waitAndFindMatches(toFind, wait);,     }, ,     public boolean waitForMessage(String message) throws FileNotFoundException, IOException,     {,         return waitForMessage(message, DEFAULT_LOG_WAIT);,     }, ,     public boolean waitForMessage(String message, long wait) throws FileNotFoundException, IOException,     {,         return _monitor.waitForMessage(message, wait);,     }, ,     /**,      * Given a list of messages that have been pulled out of a log file,      * Process the results splitting the log statements in to lists based on the,      * actor's connection ID.,      *,      * So for each log entry extract the Connecition ID from the Actor of the log,      *,      * Then use that as a key to a HashMap storing the list of log messages for,      * that connection.,      *,      * @param logMessages The list of mixed connection log messages,      *,      * @return Map indexed by connection id to a list of log messages just for that connection.,      */,     protected HashMap<Integer, List<String>> splitResultsOnConnectionID(List<String> logMessages),     {,         HashMap<Integer, List<String>> connectionSplitList = new HashMap<Integer, List<String>>();, ,         for (String log : logMessages),         {,             // Get the connectionID from the Actor in the Message Log.,             int cID = getConnectionID(fromActor(getLog(log)));, ,             List<String> connectionData = connectionSplitList.get(cID);, ,             // Create the initial List if we don't have one already,             if (connectionData == null),             {,                 connectionData = new LinkedList<String>();,                 connectionSplitList.put(cID, connectionData);,             }, ,             // Store the log,             connectionData.add(log);,         }, ,         return connectionSplitList;,     }, ,     /**,      * Filter the give result set by the specficifed virtualhost.,      * This is done using the getSlice to identify the virtualhost (vh) in the,      * log message,      *,      * @param results         full list of logs,      * @param virtualHostName the virtualhostName to filter on,      *,      * @return the list of messages only for that virtualhost,      */,     protected List<String> filterResultsByVirtualHost(List<String> results, String virtualHostName),     {,         List<String> filteredResults = new LinkedList<String>();,         Iterator<String> iterator = results.iterator();, ,         while (iterator.hasNext()),         {,             String log = iterator.next();, ,             if (AbstractTestLogSubject.getSlice("vh", log).equals(virtualHostName)),             {,                 filteredResults.add(log);,             },         }, ,         return filteredResults;,     }, ,     /**,      * Dump the log results.,      */,     protected void dumpLogs(List<String> results) throws IOException  ,     {,         dumpLogs(results, null);,     },     ,     /**,      * Dump the log results or if there are none, the contents of the ,      * monitored log file if the monitor is non-null.,      */,     protected void dumpLogs(List<String> results, LogMonitor monitor) throws IOException   ,     {,         System.err.println("Log Dump:");,         for (String log : results),         {,             System.err.println(log);,         }, ,         if (results.isEmpty() && monitor != null),         {,             System.err.println("Monitored file contents:");,             System.err.println(monitor.readFile());,         },     }, ,     private int parseInt(final String logSubstring, final int start, final int end),     {,         try,         {,             final NumberFormat format = NumberFormat.getInstance(Locale.getDefault());,             final Number number = format.parse(logSubstring.substring(start, end));,             return number.intValue();,         },         catch (Exception e),         {,             return -1;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/logging/BrokerLoggingTest.java,setUp,61-61,[        setLogMessagePrefix();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/logging/RollingFileAppenderFactory.java,,83-115,[    class DailyTriggeringPolicy extends SizeAndTimeBasedFNATP<ILoggingEvent>,     {,         private final boolean _rollOnRestart;,         private boolean _isFirst = true;, ,         public DailyTriggeringPolicy(boolean isRollOnRestart, String maxFileSize),         {,             _rollOnRestart = isRollOnRestart;,             setMaxFileSize(maxFileSize);,         }, ,         @Override,         protected void computeNextCheck(),         {,             super.computeNextCheck();,             if (_rollOnRestart && _isFirst),             {,                 _isFirst = false;,                 nextCheck = 0l;,             },         }, ,         @Override,         public boolean isTriggeringEvent(final File activeFile, final ILoggingEvent event),         {,             if (_rollOnRestart && _isFirst),             {,                 _isFirst = false;,                 return activeFile.exists() && activeFile.length() != 0l;,             },             else,             {,                 return super.isTriggeringEvent(activeFile, event);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/logging/RollingFileAppenderFactory.java,,154-163,[        {,             _maxFiles = maxHistory;,             setMaxIndex(maxHistory);,             setMinIndex(1);,         }, ,         @Override,         protected int getMaxWindowSize(),         {,             return _maxFiles;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/logging/RollingFileAppenderFactory.java,,121-143,[    class SizeTriggeringPolicy extends SizeBasedTriggeringPolicy<ILoggingEvent>,     {,         private final boolean _rollOnRestart;,         private boolean _isFirst = true;, ,         public SizeTriggeringPolicy(boolean isRollOnRestart, String maxFileSize),         {,             _rollOnRestart = isRollOnRestart;,             setMaxFileSize(maxFileSize);, ,         }, ,         @Override,         public boolean isTriggeringEvent(final File activeFile, final ILoggingEvent event),         {,             if (_rollOnRestart && _isFirst),             {,                 _isFirst = false;,                 return activeFile.exists() && activeFile.length() != 0l;,             },             else,             {,                 return super.isTriggeringEvent(activeFile, event);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/logging/StartupAppenderTest.java,getLogLines,157-157,[        try (BufferedReader reader = new BufferedReader(new InputStreamReader(new ByteArrayInputStream(data))))],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/logging/StartupAppenderTest.java,logToConsoleAndCollectSystemOutputLines,130-130,[                System.setOut(new PrintStream(out));],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/logging/VirtualHostLoggerTest.java,tearDown,113-113,[                _logFile.delete();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/logging/actors/AMQPConnectionActorTest.java,setUp,47-47,[    }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/actors/BaseActorTestCase.java,,64-67,[                          {,                               public String toLogString(),                               {,                                   return message;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/actors/BaseActorTestCase.java,,71-79,[                          {,                               public String toString(),                               {,                                   return message;,                               }, ,                               public String getLogHierarchy(),                               {,                                   return "test.hierarchy";],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/actors/HttpManagementActorTest.java,,60-76,[                                    {,                                         @Override,                                         public String getType(),                                         {,                                             return "HTTP";,                                         }, ,                                         @Override,                                         public SocketAddress getRemoteAddress(),                                         {,                                             return new InetSocketAddress(IP, PORT);,                                         }, ,                                         @Override,                                         public String getName(),                                         {,                                             return getRemoteAddress().toString();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/server/logging/logback/PathTypedContent.java,<init>,44-44,[        _disposition = _path == null ? "attachment" : "attachment; filename=\"" + _path.getFileName().toString() + "\"";],,
MT_CORRECTNESS,JLM_JSR166_LOCK_MONITORENTER,org/apache/qpid/server/logging/logback/RollingPolicyDecorator.java,createScanTaskAndCancelInProgress,151-151,[        synchronized (_publishResultsLock)],,
MT_CORRECTNESS,JLM_JSR166_LOCK_MONITORENTER,org/apache/qpid/server/logging/logback/RollingPolicyDecorator.java,stop,121-121,[        synchronized (_publishResultsLock)],,
MT_CORRECTNESS,JLM_JSR166_LOCK_MONITORENTER,org/apache/qpid/server/logging/logback/RollingPolicyDecorator.java,publishScanResults,213-213,[                synchronized (_publishResultsLock)],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/logging/logback/RollingPolicyDecoratorTest.java,createTestFile,88-88,[        testFile.createNewFile();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/logback/RollingPolicyDecoratorTest.java,,95-99,[        doAnswer(new Answer() {,             public Object answer(InvocationOnMock invocation) {,                 Object[] args = invocation.getArguments();,                 ((Runnable)args[0]).run();,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/logback/RollingPolicyDecoratorTest.java,,101-105,[        doAnswer(new Answer() {,             public Object answer(InvocationOnMock invocation) {,                 Object[] args = invocation.getArguments();,                 ((Runnable)args[0]).run();,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/logback/RollingPolicyDecoratorTest.java,,165-175,[        {,             @Override,             public boolean matches(Object item),             {,                 return Arrays.equals(expected, (String[]) item);,             },             @Override,             public void describeTo(Description description),             {,                 description.appendValueList("[", ",", "]", expected);,             }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/logging/logback/RolloverWatcher.java,getContentType,72-72,[        String fileNameLower = fileName.toLowerCase();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/logging/logback/RolloverWatcherTest.java,readContent,144-144,[        return new String(os.toByteArray());],,
PERFORMANCE,DM_STRING_TOSTRING,org/apache/qpid/server/logging/logback/RolloverWatcherTest.java,testGetTypedContentForActiveFile,80-80,[        assertEquals("Unexpected content disposition", "attachment; filename=\"" + activeFile.getName().toString() + "\"", content.getContentDisposition());],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/logging/messages/ConnectionMessagesTest.java,testConnectionOpen_WithNOClientIDNoProtocolVersionNoClientVersionNullClientProduct,100-100,[        _logMessage = ConnectionMessages.OPEN(null, null, null , clientProduct , false, false, false, true);],,testConnectionOpen_WithNOClientIDNoProtocolVersionNoClientVersionNullClientProduct,103-103,[        String[] expected = {"Open", ": Client Product :", clientProduct};],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/logging/messages/ConnectionMessagesTest.java,testConnectionOpen_WithNOClientIDNoProtocolVersionNullClientVersionNoClientProduct,88-88,[        _logMessage = ConnectionMessages.OPEN(null, null, clientVersion , null , false, false, true, false);],,testConnectionOpen_WithNOClientIDNoProtocolVersionNullClientVersionNoClientProduct,91-91,[        String[] expected = {"Open", ": Client Version :", clientVersion};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/logging/subjects/AbstractTestLogSubject.java,,77-85,[        {,             public String toString(),             {,                 return "<Log Message>";,             }, ,             public String getLogHierarchy(),             {,                 return "test.hierarchy";],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/management/amqp/ManagementNode.java,performCreateOperation,432-432,[            response = createFailureResponse(message,],,
STYLE,UC_USELESS_OBJECT,org/apache/qpid/server/management/amqp/ManagementNode.java,performUpdateOperation,515-515,[        final MutableMessageHeader responseHeader = new MutableMessageHeader();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/HttpManagement.java,addRestServlet,468-468,[                String name = category.getSimpleName().toLowerCase();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/management/plugin/HttpManagement.java,doStart,146-162,[        getBroker().getEventLogger().message(ManagementConsoleMessages.STARTUP(OPERATIONAL_LOGGING_NAME));, ,         Collection<Port<?>> httpPorts = getHttpPorts(getBroker().getPorts());,         _server = createServer(httpPorts);,         try,         {,             _server.start();,             logOperationalListenMessages(httpPorts);,         },         catch (Exception e),         {,             throw new ServerScopedRuntimeException("Failed to start HTTP management on ports : " + httpPorts, e);,         }, ,         getBroker().getEventLogger().message(ManagementConsoleMessages.READY(OPERATIONAL_LOGGING_NAME));,         setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/HttpManagement.java,,232-238,[                                {,                                     @Override,                                     public void customize(final EndPoint endpoint, final Request request) throws IOException,                                     {,                                         super.customize(endpoint, request);,                                         request.setAttribute(PORT_SERVLET_ATTRIBUTE, thePort);,                                     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/HttpManagement.java,,276-287,[        {,             @Override,             protected void writeErrorPageBody(HttpServletRequest request, Writer writer, int code, String message, boolean showStacks),                     throws IOException,             {,                 String uri= request.getRequestURI();, ,                 writeErrorPageMessage(request,writer,code,message,uri);, ,                 for (int i= 0; i < 20; i++),                     writer.write("<br/>                                                \n");,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/HttpManagement.java,,442-448,[                    {,                         @Override,                         public void customize(final EndPoint endpoint, final Request request) throws IOException,                         {,                             super.customize(endpoint, request);,                             request.setAttribute(PORT_SERVLET_ATTRIBUTE, port);,                         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/HttpManagement.java,,451-457,[                    {,                         @Override,                         public void customize(final EndPoint endpoint, final Request request) throws IOException,                         {,                             super.customize(endpoint, request);,                             request.setAttribute(PORT_SERVLET_ATTRIBUTE, port);,                         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/management/plugin/connector/TcpAndSslSelectChannelConnector.java,,155-238,[        private Protocol _protocol = Protocol.UNKNOWN;,         private Buffer _preBuffer = new IndirectNIOBuffer(6);, ,         public ProtocolIdentifyingEndpoint(final SocketChannel channel,,                                            final SelectorManager.SelectSet selectSet,,                                            final SelectionKey key, final int maxIdleTime) throws IOException,         {,             super(channel, selectSet, key, maxIdleTime);,         }, ,         public Protocol getProtocol() throws IOException,         {,             if(_protocol == Protocol.UNKNOWN),             {,                 if(_preBuffer.space() != 0),                 {,                     super.fill(_preBuffer);,                     _protocol = identifyFromPreBuffer();,                 },             },             return _protocol;,         }, ,         public SocketChannel getSocketChannel(),         {,             return (SocketChannel) getChannel();,         }, ,         private Protocol identifyFromPreBuffer(),         {,             if(_preBuffer.space() == 0),             {,                 byte[] helloBytes = _preBuffer.array();,                 if (looksLikeSSLv2ClientHello(helloBytes) || looksLikeSSLv3ClientHello(helloBytes)),                 {,                     return Protocol.SSL;,                 },                 else,                 {,                     return Protocol.TCP;,                 },             },             return Protocol.UNKNOWN;,         }, ,         private boolean looksLikeSSLv3ClientHello(byte[] headerBytes),         {,             return headerBytes[0] == 22 && // SSL Handshake,                    (headerBytes[1] == 3 && // SSL 3.0 / TLS 1.x,                     (headerBytes[2] == 0 || // SSL 3.0,                      headerBytes[2] == 1 || // TLS 1.0,                      headerBytes[2] == 2 || // TLS 1.1,                      headerBytes[2] == 3)) && // TLS1.2,                    (headerBytes[5] == 1); // client_hello,         }, ,         private boolean looksLikeSSLv2ClientHello(byte[] headerBytes),         {,             return headerBytes[0] == -128 &&,                    headerBytes[3] == 3 && // SSL 3.0 / TLS 1.x,                    (headerBytes[4] == 0 || // SSL 3.0,                     headerBytes[4] == 1 || // TLS 1.0,                     headerBytes[4] == 2 || // TLS 1.1,                     headerBytes[4] == 3);,         }, ,         @Override,         public int fill(final Buffer buffer) throws IOException,         {,             int size = 0;, ,             if(getProtocol() != Protocol.UNKNOWN),             {,                 if (_preBuffer.hasContent()),                 {,                     size = buffer.put(_preBuffer);,                     _preBuffer.skip(size);,                 },                 if (buffer.space() != 0),                 {,                     size += super.fill(buffer);,                 },             },             return size;],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/management/plugin/filter/ForbiddingAuthorisationFilter.java,,42-42,[    public static String INIT_PARAM_ALLOWED = "allowed";],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/management/plugin/filter/RedirectingAuthorisationFilter.java,,41-41,[    public static String DEFAULT_LOGIN_URL = "login.html";],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/management/plugin/filter/RedirectingAuthorisationFilter.java,,42-42,[    public static String INIT_PARAM_LOGIN_URL = "login-url";],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/report/ReportRunner.java,setReportParameters,96-96,[                    setterName.append(key.substring(0,1).toUpperCase());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/report/ReportRunnerTest.java,,144-149,[        {,             @Override,             public Object answer(final InvocationOnMock invocation) throws Throwable,             {,                 String header = headerNameCaptor.getValue();,                 return props.get(header);],,
CORRECTNESS,NP_ALWAYS_NULL,org/apache/qpid/server/management/plugin/servlet/LogFileServlet.java,doGetWithSubjectAndActor,71-71,[            logFiles = helper.findLogFileDetails(requestedFiles);],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/management/plugin/servlet/LogFileServlet.java,doGetWithSubjectAndActor,71-71,[            logFiles = helper.findLogFileDetails(requestedFiles);],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/management/plugin/servlet/rest/AbstractServlet.java,getPathInfoElements,337-337,[        return null;],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/management/plugin/servlet/rest/AbstractServlet.java,getContentHeaderMethods,362-362,[        if (contentHeaderGetters != null)],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/servlet/rest/ApiDocsServlet.java,doGetWithSubjectAndActor,113-113,[                writer.println("<td class=\"type\" rowspan=\""+ paths.size()+"\"><a href=\"latest/"+ objClass.getSimpleName().toLowerCase()+"\">"+objClass.getSimpleName()+"</a></td>");],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/servlet/rest/ApiDocsServlet.java,renderType,321-321,[            return "<div class=\"restriction\" title=\"name or id of a" + (VOWELS.contains(type.getSimpleName().toLowerCase().charAt(0)) ? "n " : " ") + type.getSimpleName() + "\">string</div>";],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/servlet/rest/ApiDocsServlet.java,writeUsage,190-190,[            writer.print("[/&lt;" + category.getSimpleName().toLowerCase() + " name or id&gt;");],,writeUsage,202-202,[            writer.print("/&lt;" + category.getSimpleName().toLowerCase() + " name or id&gt;");],,writeUsage,210-210,[            writer.print("/&lt;" + _hierarchy[i].getSimpleName().toLowerCase() + " name or id&gt;");],,writeUsage,217-217,[            writer.print("/&lt;" + category.getSimpleName().toLowerCase() + " name or id&gt;");],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/management/plugin/servlet/rest/ApiDocsServlet.java,getBooleanParameterFromRequest,405-405,[        return Boolean.parseBoolean(request.getParameter(paramName));],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/management/plugin/servlet/rest/ApiDocsServlet.java,getIntParameterFromRequest,387-400,[        int intValue = defaultValue;,         final String stringValue = request.getParameter(paramName);,         if(stringValue!=null),         {,             try,             {,                 intValue = Integer.parseInt(stringValue);,             },             catch (NumberFormatException e),             {,                 LOGGER.warn("Could not parse " + stringValue + " as integer for parameter " + paramName);,             },         },         return intValue;],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/servlet/rest/ConfiguredObjectToMapConverter.java,incorporateAttributesIntoMap,108-108,[                    object.put(categoryName.substring(0,1).toLowerCase()+categoryName.substring(1), parent.getName());],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/servlet/rest/ConfiguredObjectToMapConverter.java,incorporateChildrenIntoMap,304-304,[                        String childTypeSingular = childClass.getSimpleName().toLowerCase();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/servlet/rest/ConfiguredObjectToMapConverter.java,,259-263,[        {,             @Override,             public int compare(final Class<? extends ConfiguredObject> o1, final Class<? extends ConfiguredObject> o2),             {,                 return o1.getSimpleName().compareTo(o2.getSimpleName());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/servlet/rest/ConfiguredObjectToMapConverter.java,,276-280,[                    {,                         @Override,                         public int compare(final ConfiguredObject o1, final ConfiguredObject o2),                         {,                             return o1.getName().compareTo(o2.getName());],,
BAD_PRACTICE,SE_COMPARATOR_SHOULD_BE_SERIALIZABLE,org/apache/qpid/server/management/plugin/servlet/rest/KeyComparator.java,,26-50,[class KeyComparator implements Comparator<Map>, {,     private String _key;, ,     public KeyComparator(final String key),     {,         _key = key;,     }, ,     public int compare(final Map o1, final Map o2),     {,         Comparable left = (Comparable) o1.get(_key);,         Comparable right = (Comparable) o2.get(_key);, ,         int result;,         if(left == null),         {,             result =  right == null ? 0 : -1;,         },         else,         {,             result = left.compareTo(right);,         }, ,         return result;],,
CORRECTNESS,NP_ALWAYS_NULL,org/apache/qpid/server/management/plugin/servlet/rest/LogFileListingServlet.java,doGetWithSubjectAndActor,47-47,[        List<LogFileDetails> logFiles = helper.getLogFileDetails(false);],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/management/plugin/servlet/rest/LogFileListingServlet.java,doGetWithSubjectAndActor,47-47,[        List<LogFileDetails> logFiles = helper.getLogFileDetails(false);],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/server/management/plugin/servlet/rest/LogRecordsServlet.java,doGetWithSubjectAndActor,57-57,[        catch(Exception e)],,
BAD_PRACTICE,SE_COMPARATOR_SHOULD_BE_SERIALIZABLE,org/apache/qpid/server/management/plugin/servlet/rest/MapComparator.java,,27-71,[class MapComparator implements Comparator<Map>, {,     private Comparator<Map>[] _sortKeys;, ,     public MapComparator(final String[] sortKeys),     {,         _sortKeys = parseKeys(sortKeys);,     }, ,     private static Comparator<Map>[] parseKeys(final String[] sortKeys),     {,         Comparator<Map>[] comparators = new Comparator[sortKeys.length];,         for(int i = 0; i < sortKeys.length; i++),         {,             String key = sortKeys[i];, ,             if(key.startsWith("+") || key.startsWith(" ")),             {,                 comparators[i] = new KeyComparator(key.substring(1));,             },             else if(key.startsWith("-")),             {,                 comparators[i] = Collections.reverseOrder(new KeyComparator(key.substring(1)));,             },             else,             {,                 comparators[i] = new KeyComparator(key);,             },         },         return comparators;,     }, , ,     public int compare(final Map o1, final Map o2),     {,         int result = 0;,         for(int i = 0; i < _sortKeys.length; i++),         {,             result = _sortKeys[i].compare(o1, o2);,             if(result != 0),             {,                 return result;,             },         },         return 0;],,
PERFORMANCE,BX_UNBOXING_IMMEDIATELY_REBOXED,org/apache/qpid/server/management/plugin/servlet/rest/MessageServlet.java,doPostWithSubjectAndActor,338-338,[            boolean isMoveTransaction = move != null && Boolean.valueOf(move);],,
MT_CORRECTNESS,MSF_MUTABLE_SERVLET_FIELD,org/apache/qpid/server/management/plugin/servlet/rest/RestServlet.java,,437-437,[        return _hierarchy.length == 0 ? Broker.class : _hierarchy[_hierarchy.length-1];],,,701-701,[        Collection<ConfiguredObject>[] objects = new Collection[_hierarchy.length];],,,702-702,[        for (int i = 0; i < _hierarchy.length - 1; i++)],,,707-707,[                for (ConfiguredObject object : getBroker().getChildren(_hierarchy[0]))],,,742-742,[        for (int i = _hierarchy.length - 2; i >= 0; i--)],,,720-720,[                    if (getBroker().getModel().getChildTypes(_hierarchy[j]).contains(_hierarchy[i]))],,,744-744,[            if (parentClasses.contains(_hierarchy[i]))],,,752-752,[                    throw new IllegalArgumentException("Cannot deduce parent of class "],,,724-724,[                            for (ConfiguredObject<?> object : parent.getChildren(_hierarchy[i]))],,,528-528,[        if (names.isEmpty() && _hierarchy.length == 0)],,,537-537,[            if (_hierarchy.length > 1)],,,451-451,[        boolean isFullObjectURL = names.size() == _hierarchy.length;],,,454-454,[        boolean isOperation = pathInfoElements != null && pathInfoElements.length == _hierarchy.length + 1 && isPostToFullURL;],,,460-460,[                if (names.isEmpty() && _hierarchy.length == 0)],,,471-471,[                if (_hierarchy.length > 1)],,,161-161,[            _hierarchy = (Class<? extends ConfiguredObject>[])new Class[0];],,,157-157,[            _hierarchy = classes.toArray(hierarchyClasses);],,,343-343,[        if (pathInfoElements != null && pathInfoElements.length == _hierarchy.length + 1)],,,171-171,[            if(pathInfoElements.length > _hierarchy.length)],,,188-188,[        for(int i = 0; i < _hierarchy.length; i++)],,,174-174,[                        + getServletName() + ". Expected hierarchy length: " + _hierarchy.length],,,190-190,[            if(i == 0 || getBroker().getModel().getChildTypes(_hierarchy[i - 1]).contains(_hierarchy[i]))],,,210-210,[                        children.addAll((Collection<? extends ConfiguredObject<?>>) parent.getChildren(_hierarchy[i]));],,,200-200,[                        for(ConfiguredObject<?> child : parent.getChildren(_hierarchy[i]))],,,222-222,[                    filters.put(_hierarchy[i], names.get(i));],,,409-409,[        if (_hierarchy.length > 0)],,,412-412,[            return pathInfoElements != null && pathInfoElements.length == _hierarchy.length;],,,767-767,[            if (!(pathInfoElements.length == _hierarchy.length ||],,,770-770,[                if(pathInfoElements.length == _hierarchy.length + 1)],,,782-782,[                            + names.size()],,
MALICIOUS_CODE,MS_MUTABLE_COLLECTION_PKGPROTECT,org/apache/qpid/server/management/plugin/servlet/rest/RestServlet.java,,85-85,[            new HashSet<>(Arrays.asList(DEPTH_PARAM,],,
BAD_PRACTICE,RR_NOT_CHECKED,org/apache/qpid/server/management/plugin/servlet/rest/RestServlet.java,getRequestProvidedObject,816-816,[                    part.getInputStream().read(data);],,
BAD_PRACTICE,J2EE_STORE_OF_NON_SERIALIZABLE_OBJECT_INTO_SESSION,org/apache/qpid/server/management/plugin/servlet/rest/SaslServlet.java,evaluateSaslResponse,264-264,[            session.setAttribute(ATTR_SASL_SERVER, saslServer);],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/management/plugin/servlet/rest/StructureServlet.java,pluralize,82-82,[        String name = childClass.getSimpleName().toLowerCase();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/management/plugin/session/LoginLogoutReporterTest.java,,73-78,[        {,             @Override,             public boolean matches(Object argument),             {,                 LogMessage actual = (LogMessage) argument;,                 return actual.toString().equals(expectedMessage);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/model/AbstractSystemConfig.java,convertToConfigurationRecords,262-262,[            reader = new FileReader(initialConfigurationLocation);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/model/AbstractSystemConfig.java,convertToConfigurationRecords,258-258,[            reader = new InputStreamReader(url.openStream());],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/model/AbstractSystemConfig.java,getBroker,142-142,[        if(children == null || children.isEmpty())],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/model/AncestorAttributeResolver.java,findAncestorCategoryBySimpleClassName,149-149,[        if (targetCategorySimpleClassName.equals(objectCategory.getSimpleName().toLowerCase()))],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/model/AttributeValueConverter.java,getNameFromMethod,630-630,[        String name = baseName.length() == 1 ? baseName.toLowerCase() : baseName.substring(0,1).toLowerCase() + baseName.substring(1);],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/model/AttributeValueConverter.java,convert,117-117,[                return null;],,
BAD_PRACTICE,NP_BOOLEAN_RETURN_NULL,org/apache/qpid/server/model/AttributeValueConverter.java,convert,305-305,[                return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/ConfiguredObjectJacksonModule.java,,67-82,[        {,             @Override,             public void serialize(final Certificate value,,                                   final JsonGenerator jgen,,                                   final SerializerProvider provider),                     throws IOException,             {,                 try,                 {,                     jgen.writeBinary(value.getEncoded());,                 },                 catch (CertificateEncodingException e),                 {,                     throw new IllegalArgumentException(e);,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/ConfiguredObjectJacksonModule.java,,90-125,[        {,             @Override,             public void serialize(final ManagedAttributeValue value,,                                   final JsonGenerator jgen,,                                   final SerializerProvider provider),                     throws IOException,             {,                 Map<String,Object> valueAsMap = new LinkedHashMap<>();,                 for(Method method : value.getClass().getMethods()),                 {,                     final String methodName = method.getName();,                     if(method.getParameterTypes().length == 0,                        && !OBJECT_METHOD_NAMES.contains(methodName),                        && (methodName.startsWith("is"),                             || methodName.startsWith("has"),                             || methodName.startsWith("get"))),                     {,                         String propertyName =,                                 methodName.startsWith("is") ? methodName.substring(2) : methodName.substring(3);,                         propertyName = Character.toLowerCase(propertyName.charAt(0)) + propertyName.substring(1);,                         try,                         {,                             final Object attrValue = method.invoke(value);,                             if(attrValue != null),                             {,                                 valueAsMap.put(propertyName, attrValue);,                             },                         },                         catch (IllegalAccessException | InvocationTargetException e),                         {,                             throw new ServerScopedRuntimeException(e);,                         },                     },                 },                 jgen.writeObject(valueAsMap);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/ConfiguredObjectJacksonModule.java,,133-141,[        {,             @Override,             public void serialize(final ConfiguredObject value,,                                   final JsonGenerator jgen,,                                   final SerializerProvider provider),                     throws IOException,             {,                 jgen.writeString(value.getId().toString());,             }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/model/ConfiguredObjectRegistrationGenerator.java,getCategory,171-171,[                    category = e.getSimpleName().toString().toLowerCase();],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/model/ConfiguredObjectRegistrationGenerator.java,process,127-127,[        catch (Exception e)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/model/ConfiguredObjectTypeRegistry.java,getValidChildTypesFunction,288-288,[                if(validChildTypesMethod != null)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/ConfiguredObjectTypeRegistry.java,,965-995,[        {,             @Override,             public Iterator<String> iterator(),             {,                 final Iterator<ConfiguredObjectAttribute<? super X, ?>> underlyingIterator = attrs.iterator();,                 return new Iterator<String>(),                 {,                     @Override,                     public boolean hasNext(),                     {,                         return underlyingIterator.hasNext();,                     }, ,                     @Override,                     public String next(),                     {,                         return underlyingIterator.next().getName();,                     }, ,                     @Override,                     public void remove(),                     {,                         throw new UnsupportedOperationException();,                     },                 };,             }, ,             @Override,             public int size(),             {,                 return attrs.size();],,
BAD_PRACTICE,NP_TOSTRING_COULD_RETURN_NULL,org/apache/qpid/server/model/RuntimeDefault.java,toString,30-30,[        return value == null ? null : value.toString();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/model/UUIDGenerator.java,createUUID,43-43,[        return UUID.nameUUIDFromBytes(sb.toString().getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/VirtualHostTest.java,,201-214,[        {,             final Iterator<ConfiguredObjectRecord> corIterator = asList(queueCor, exchangeCor, virtualHostCor).iterator();, ,             @Override,             public Object answer(final InvocationOnMock invocation) throws Throwable,             {,                 ConfiguredObjectRecordHandler handler = (ConfiguredObjectRecordHandler) invocation.getArguments()[0];,                 boolean handlerContinue = true;,                 while(corIterator.hasNext() && handlerContinue),                 {,                     handlerContinue = handler.handle(corIterator.next());,                 }, ,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/VirtualHostTest.java,,406-410,[        {,             @Override,             public Object answer(final InvocationOnMock invocation) throws Throwable,             {,                 return tasks.add(deleteTaskCaptor.getValue());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/VirtualHostTest.java,,416-424,[        {,             @Override,             public Object answer(final InvocationOnMock invocation) throws Throwable,             {,                 for(Action action : tasks),                 {,                     action.performAction(connection);,                 },                 return null;],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/server/model/adapter/BrokerAdapter.java,initialiseStatisticsReporting,351-351,[        long report = ((Number)getAttribute(Broker.STATISTICS_REPORTING_PERIOD)).intValue() * 1000; // convert to ms],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/model/adapter/BrokerAdapter.java,activateWithoutManagementMode,318-318,[            if (children != null) {],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/model/adapter/BrokerAdapter.java,getAccessControlProviders,241-241,[        if(accessControlProviders != null && accessControlProviders.size() > 1)],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/BrokerAdapter.java,activate,281-307,[        if(_parent.isManagementMode()),         {,             final SettableFuture<Void> returnVal = SettableFuture.create();, ,             _managementModeAuthenticationProvider.openAsync().addListener(,                     new Runnable(),                     {,                         @Override,                         public void run(),                         {,                             try,                             {,                                 activateWithoutManagementMode();,                             },                             finally,                             {,                                 returnVal.set(null);,                             },                         },                     }, getTaskExecutor().getExecutor(),                                                                          );,             return returnVal;,         },         else,         {,             activateWithoutManagementMode();,             return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/BrokerAdapter.java,postEncrypterProviderSet,858-860,[        updateEncrypter(_confidentialConfigurationEncryptionProvider);,         forceUpdateAllSecureAttributes();,     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/adapter/BrokerAdapter.java,,539-556,[                       {,                            @Override,                            public ListenableFuture<VirtualHostNode> call(final VirtualHostNode virtualHostNode),                                    throws Exception,                            {,                                // permission has already been granted to create the virtual host,                                // disable further access check on other operations, e.g. create exchange,                                Subject.doAs(SecurityManager.getSubjectWithAddedSystemRights(),,                                             new PrivilegedAction<Object>(),                                             {,                                                 @Override,                                                 public Object run(),                                                 {,                                                     virtualHostNode.start();,                                                     return null;,                                                 },                                             });,                                return Futures.immediateFuture(virtualHostNode);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/model/adapter/BrokerAdapter.java,reportStatistics,837-837,[            catch(Exception e)],,
PERFORMANCE,SS_SHOULD_BE_STATIC,org/apache/qpid/server/model/adapter/BrokerAdapter.java,,762-762,[        private final int DELIVERED = 0;],,
PERFORMANCE,SS_SHOULD_BE_STATIC,org/apache/qpid/server/model/adapter/BrokerAdapter.java,,763-763,[        private final int RECEIVED = 1;],,
STYLE,UC_USELESS_OBJECT,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,onOpen,142-142,[        Collection<Group> principals = new ArrayList<Group>(groups.size());],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,activate,271-286,[        if (_groupDatabase != null),         {,             setState(State.ACTIVE);,         },         else,         {,             if (_broker.isManagementMode()),             {,                         LOGGER.warn("Failed to activate group provider: " + getName());,             },             else,             {,                 throw new IllegalConfigurationException(String.format("Cannot load groups from '%s'", getPath()));,             },         },         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,doDelete,292-320,[        final SettableFuture<Void> returnVal = SettableFuture.create();,         closeAsync().addListener(,                 new Runnable(),                 {,                     @Override,                     public void run(),                     {,                         try,                         {,                             File file = new File(getPath());,                             if (file.exists()),                             {,                                 if (!file.delete()),                                 {,                                     throw new IllegalConfigurationException("Cannot delete group file");,                                 },                             }, ,                             deleted();,                             setState(State.DELETED);,                         },                         finally,                         {,                             returnVal.set(null);,                         },                     },                 }, getTaskExecutor().getExecutor(),                            );,         return returnVal;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,startQuiesced,326-327,[        setState(State.QUIESCED);,         return Futures.immediateFuture(null);],,
STYLE,UC_USELESS_OBJECT,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,onOpen,390-390,[            Collection<GroupMember> members = new ArrayList<GroupMember>();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,activate,381-382,[            setState(State.ACTIVE);,             return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,doDelete,463-466,[            _groupDatabase.removeGroup(getName());,             deleted();,             setState(State.DELETED);,             return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,activate,526-527,[                setState(State.ACTIVE);,                 return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImpl.java,doDelete,533-536,[                _groupDatabase.removeUserFromGroup(getName(), GroupAdapter.this.getName());,                 deleted();,                 setState(State.DELETED);,                 return Futures.immediateFuture(null);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileBasedGroupProviderImplTest.java,tearDown,67-67,[                _groupFile.delete();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,activate,138-146,[        if (_store != null),         {,             setState(State.ACTIVE);,         },         else,         {,             throw new IllegalStateException("Cannot open preferences provider " + getName() + " in state " + getState() );,         },         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,doDelete,193-220,[        final SettableFuture<Void> returnVal = SettableFuture.create();,         closeAsync().addListener(,                 new Runnable(),                 {,                     @Override,                     public void run(),                     {,                         try,                         {,                             if(_store != null),                             {,                                 _store.close();,                                 _store.delete();,                                 deleted();,                                 _authenticationProvider.setPreferencesProvider(null);, ,                             },                             setState(State.DELETED);,                         },                         finally,                         {,                             returnVal.set(null);,                         },                     },                 }, getTaskExecutor().getExecutor(),                            );, ,         return returnVal;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,doQuiesce,182-187,[        if(_store != null),         {,             _store.close();,         },         setState(State.QUIESCED);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,openNewStore,304-323,[        if(_open),         {,             if (_store != null),             {,                 _store.close();,             }, ,             if (_path == null),             {,                 _store = null;,             },             else,             {,                 FileSystemPreferencesStore store = new FileSystemPreferencesStore(new File(_path));,                 store.createIfNotExist(getContextValue(String.class, BrokerProperties.POSIX_FILE_PERMISSIONS));,                 store.open();,                 _store = store;,             },         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,restart,227-234,[        if (_store == null),         {,             throw new IllegalStateException("Cannot open preferences provider " + getName() + " in state " + getState() );,         }, ,         _store.open();,         setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,getFileLock,575-575,[                lockFile.createNewFile();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderImpl.java,,436-436,[                            {],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,tearDown,88-88,[            _preferencesFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,testChangeAttributes,230-230,[            newPrefsFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,testConstructionWithEmptyFile,179-179,[        emptyPrefsFile.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,testConstructionWithEmptyFile,193-193,[            emptyPrefsFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,testConstructionWithNonExistingFile,121-121,[            nonExistingFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,testValidationOnCreateForInvalidPath,128-128,[        file.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/model/adapter/FileSystemPreferencesProviderTest.java,testValidationOnCreateWithInvalidPreferences,172-172,[            tmp.delete();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/model/adapter/PortFactoryTest.java,setUp,78-78,[        _portNumber = findFreePort();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/adapter/SessionAdapter.java,doDelete,178-180,[        deleted();,         setState(State.DELETED);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/port/AbstractPort.java,doDelete,238-249,[        final SettableFuture<Void> returnVal = SettableFuture.create();,         closeAsync().addListener(new Runnable(),         {,             @Override,             public void run(),             {,                 setState(State.DELETED);,                 returnVal.set(null);, ,             },         }, getTaskExecutor().getExecutor());,         return returnVal;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/model/port/AbstractPort.java,startQuiesced,270-271,[        setState(State.QUIESCED);,         return Futures.immediateFuture(null);],,
BAD_PRACTICE,IC_SUPERCLASS_USES_SUBCLASS_DURING_INITIALIZATION,org/apache/qpid/server/model/port/AmqpPort.java,<clinit>,58-58,[    String INSTALLED_PROTOCOLS = AmqpPortImpl.getInstalledProtocolsAsString();],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/server/model/port/AmqpPortImpl.java,isTcpNoDelay,156-156,[        return _tcpNoDelay;],,isTcpNodelay,136-136,[        return tcpNodelay;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/model/testmodels/singleton/AbstractConfiguredObjectTest.java,,489-495,[                     {,                          @Override,                          public Object run(),                          {,                              assertEquals(secret, object.getAttribute(TestSingleton.SECURE_VALUE));,                              assertEquals(secret, object.getSecureValue());,                              return null;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/server/plugin/AMQPProtocolVersionWrapper.java,<init>,43-49,[            switch (i),             {,                 case 1: this._major = Integer.parseInt(parts[i]);,                     break;,                 case 2: this._minor = Integer.parseInt(parts[i]);,                     break;,                 case 3: this._patch = Integer.parseInt(parts[i]);],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/server/plugin/PluggableProcessor.java,generateServiceFiles,158-158,[                for (String implementation : factoryImplementations.get(serviceName))],,
BAD_PRACTICE,SE_COMPARATOR_SHOULD_BE_SERIALIZABLE,org/apache/qpid/server/plugin/ProtocolEngineCreatorComparator.java,,25-47,[public class ProtocolEngineCreatorComparator implements Comparator<ProtocolEngineCreator>, {,     @Override,     public int compare(ProtocolEngineCreator pec1, ProtocolEngineCreator pec2),     {,         final AMQPProtocolVersionWrapper v1 = new AMQPProtocolVersionWrapper(pec1.getVersion());,         final AMQPProtocolVersionWrapper v2 = new AMQPProtocolVersionWrapper(pec2.getVersion());, ,         if (v1.getMajor() != v2.getMajor()),         {,             return v1.getMajor() - v2.getMajor();,         },         else if (v1.getMinor() != v2.getMinor()),         {,             return v1.getMinor() - v2.getMinor();,         },         else if (v1.getPatch() != v2.getPatch()),         {,             return v1.getPatch() - v2.getPatch();,         },         else,         {,             return 0;],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/plugin/QpidServiceLoader.java,isDisabled,100-100,[        return Boolean.getBoolean("qpid.plugin.disabled:"+clazz.getSimpleName().toLowerCase()+"."+next.getType())],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/plugin/QpidServiceLoader.java,isDisabledConfiguredType,106-106,[        String simpleName = typeFactory.getCategoryClass().getSimpleName().toLowerCase();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/MultiVersionProtocolEngineFactoryTest.java,,169-180,[            {,                 public void send(ByteBuffer msg),                 {,                 }, ,                 public void flush(),                 {,                 }, ,                 public void close(),                 {,                 }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/converter/v0_10_v1_0/MessageConverter_1_0_to_v0_10.java,convertMetaData,149-149,[            messageProps.setCorrelationId(origHeader.getCorrelationId().getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/converter/v0_10_v1_0/MessageConverter_1_0_to_v0_10.java,,76-123,[        {,             @Override,             public MessageMetaData_0_10 getMetaData(),             {,                 return messageMetaData_0_10;,             }, ,             @Override,             public long getMessageNumber(),             {,                 return serverMsg.getMessageNumber();,             }, ,             @Override,             public int getContent(int offsetInMessage, ByteBuffer dst),             {,                 int size = messageContent.length - offsetInMessage;,                 if(dst.remaining() < size),                 {,                     size = dst.remaining();,                 },                 ByteBuffer buf = ByteBuffer.wrap(messageContent, offsetInMessage, size);,                 dst.put(buf);,                 return size;,             }, ,             @Override,             public ByteBuffer getContent(int offsetInMessage, int size),             {,                 return ByteBuffer.wrap(messageContent, offsetInMessage, size);,             }, ,             @Override,             public void remove(),             {,                 throw new UnsupportedOperationException();,             }, ,             @Override,             public boolean isInMemory(),             {,                 return true;,             }, ,             @Override,             public boolean flowToDisk(),             {,                 return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/converter/v0_8_v0_10/MessageConverter_0_10_to_0_8.java,,181-221,[        {,             @Override,             public MessageMetaData getMetaData(),             {,                 return metaData;,             }, ,             @Override,             public long getMessageNumber(),             {,                 return message.getMessageNumber();,             }, ,             @Override,             public int getContent(int offsetInMessage, ByteBuffer dst),             {,                 return message.getContent(dst, offsetInMessage);,             }, ,             @Override,             public ByteBuffer getContent(int offsetInMessage, int size),             {,                 return message.getContent(offsetInMessage, size);,             }, ,             @Override,             public void remove(),             {,                 throw new UnsupportedOperationException();,             }, ,             @Override,             public boolean isInMemory(),             {,                 return true;,             }, ,             @Override,             public boolean flowToDisk(),             {,                 return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/converter/v0_8_v0_10/MessageConverter_0_8_to_0_10.java,,70-110,[        {,             @Override,             public MessageMetaData_0_10 getMetaData(),             {,                 return messageMetaData_0_10;,             }, ,             @Override,             public long getMessageNumber(),             {,                 return message_0_8.getMessageNumber();,             }, ,             @Override,             public int getContent(int offsetInMessage, ByteBuffer dst),             {,                 return message_0_8.getContent(dst, offsetInMessage);,             }, ,             @Override,             public ByteBuffer getContent(int offsetInMessage, int size),             {,                 return message_0_8.getContent(offsetInMessage, size);,             }, ,             @Override,             public void remove(),             {,                 throw new UnsupportedOperationException();,             }, ,             @Override,             public boolean isInMemory(),             {,                 return true;,             }, ,             @Override,             public boolean flowToDisk(),             {,                 return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/converter/v0_8_v1_0/MessageConverter_1_0_to_v0_8.java,,78-125,[        {,             @Override,             public MessageMetaData getMetaData(),             {,                 return messageMetaData_0_8;,             }, ,             @Override,             public long getMessageNumber(),             {,                 return serverMsg.getMessageNumber();,             }, ,             @Override,             public int getContent(int offsetInMessage, ByteBuffer dst),             {,                 int size = messageContent.length - offsetInMessage;,                 if(dst.remaining() < size),                 {,                     size = dst.remaining();,                 },                 ByteBuffer buf = ByteBuffer.wrap(messageContent, offsetInMessage, size);,                 dst.put(buf);,                 return size;,             }, ,             @Override,             public ByteBuffer getContent(int offsetInMessage, int size),             {,                 return ByteBuffer.wrap(messageContent, offsetInMessage, size);,             }, ,             @Override,             public void remove(),             {,                 throw new UnsupportedOperationException();,             }, ,             @Override,             public boolean isInMemory(),             {,                 return true;,             }, ,             @Override,             public boolean flowToDisk(),             {,                 return false;],,
STYLE,UC_USELESS_CONDITION,org/apache/qpid/server/protocol/v0_10/CreditCreditManager.java,addCredit,61-61,[            notifyIncrease = notifyIncrease && bytesCredit>0;],,
MT_CORRECTNESS,VO_VOLATILE_INCREMENT,org/apache/qpid/server/protocol/v0_10/CreditCreditManager.java,useCreditForMessage,105-105,[                    _messageCredit--;],,
MT_CORRECTNESS,VO_VOLATILE_INCREMENT,org/apache/qpid/server/protocol/v0_10/CreditCreditManager.java,useCreditForMessage,111-111,[                    _messageCredit--;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/MessageConverter_Internal_to_v0_10.java,convertMetaData,134-134,[            messageProps.setCorrelationId(serverMsg.getMessageHeader().getCorrelationId().getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/MessageConverter_Internal_to_v0_10.java,,65-112,[                {,                     @Override,                     public MessageMetaData_0_10 getMetaData(),                     {,                         return messageMetaData_0_10;,                     }, ,                     @Override,                     public long getMessageNumber(),                     {,                         return serverMsg.getMessageNumber();,                     }, ,                     @Override,                     public int getContent(int offsetInMessage, ByteBuffer dst),                     {,                         int size = messageContent.length - offsetInMessage;,                         if(dst.remaining() < size),                         {,                             size = dst.remaining();,                         },                         ByteBuffer buf = ByteBuffer.wrap(messageContent, offsetInMessage, size);,                         dst.put(buf);,                         return size;,                     }, ,                     @Override,                     public ByteBuffer getContent(int offsetInMessage, int size),                     {,                         return ByteBuffer.wrap(messageContent, offsetInMessage, size);,                     }, ,                     @Override,                     public void remove(),                     {,                         throw new UnsupportedOperationException();,                     }, ,                     @Override,                     public boolean isInMemory(),                     {,                         return true;,                     }, ,                     @Override,                     public boolean flowToDisk(),                     {,                         return false;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/MessageConverter_v0_10.java,convertMetaData,138-138,[            messageProps.setCorrelationId(serverMsg.getMessageHeader().getCorrelationId().getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/MessageConverter_v0_10.java,,72-112,[                {,                     @Override,                     public MessageMetaData_0_10 getMetaData(),                     {,                         return messageMetaData_0_10;,                     }, ,                     @Override,                     public long getMessageNumber(),                     {,                         return serverMsg.getMessageNumber();,                     }, ,                     @Override,                     public int getContent(int offsetInMessage, ByteBuffer dst),                     {,                         return serverMsg.getContent(dst, offsetInMessage);,                     }, ,                     @Override,                     public ByteBuffer getContent(int offsetInMessage, int size),                     {,                         return serverMsg.getContent(offsetInMessage, size);,                     }, ,                     @Override,                     public void remove(),                     {,                         throw new UnsupportedOperationException();,                     }, ,                     @Override,                     public boolean isInMemory(),                     {,                         return true;,                     }, ,                     @Override,                     public boolean flowToDisk(),                     {,                         return false;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/MessageConverter_v0_10_to_Internal.java,convertMessageBody,185-185,[            String text = new String(data);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/MessageTransferHeader.java,getAppId,70-70,[        return appIdBytes == null ? null : new String(appIdBytes);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/MessageTransferHeader.java,getCorrelationId,48-48,[            return new String(_messageProps.getCorrelationId());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/MessageTransferHeader.java,getUserId,64-64,[        return userIdBytes == null ? null : new String(userIdBytes);],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/protocol/v0_10/ProtocolEngineCreator_0_10.java,getSuggestedAlternativeHeader,80-80,[        return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerConnection.java,,230-253,[        {, ,             @Override,             public void performAction(final ServerConnection conn),             {,                 if(!session.isClosing()),                 {,                     ExecutionException ex = new ExecutionException();,                     ExecutionErrorCode code = ExecutionErrorCode.INTERNAL_ERROR;,                     try,                     {,                         code = ExecutionErrorCode.get(cause.getCode());,                     },                     catch (IllegalArgumentException iae),                     {,                         // Ignore, already set to INTERNAL_ERROR,                     },                     ex.setErrorCode(code);,                     ex.setDescription(message);,                     session.invoke(ex);, ,                     session.close(cause, message);,                 },             }],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/protocol/v0_10/ServerConnectionDelegate.java,getFeatures,107-107,[        if (features != null && features.size() > 0)],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/protocol/v0_10/ServerSession.java,compareTo,115-115,[public class ServerSession extends Session],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/server/protocol/v0_10/ServerSession.java,acquire,404-404,[                        MessageDispositionChangeListener changeListener = _messageDispositionListenerMap.get(next);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerSession.java,,343-347,[        {,             public void performAction(MessageDispositionChangeListener listener),             {,                 listener.onAccept();,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerSession.java,,355-359,[                                      {,                                           public void performAction(MessageDispositionChangeListener listener),                                           {,                                               listener.onRelease(setRedelivered);,                                           }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerSession.java,,366-370,[                                      {,                                           public void performAction(MessageDispositionChangeListener listener),                                           {,                                               listener.onReject();,                                           }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerSession.java,,522-535,[                             {, ,                                  public void postCommit(),                                  {,                                      sub.deleteAcquired(entry);,                                  }, ,                                  public void onRollback(),                                  {,                                      // The client has acknowledge the message and therefore have seen it.,                                      // In the event of rollback, the message must be marked as redelivered.,                                      entry.setRedelivered();,                                      entry.release();,                                  }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerSessionDelegate.java,,436-454,[                {,                     @Override,                     public Object getProperty(final Property prop),                     {,                         switch (prop),                         {,                             case EXPIRATION:,                                 return message.getExpiration();,                             case IMMEDIATE:,                                 return message.isImmediate();,                             case MANDATORY:,                                 return (delvProps == null || !delvProps.getDiscardUnroutable()),                                        && xfr.getAcceptMode() == MessageAcceptMode.EXPLICIT;,                             case PERSISTENT:,                                 return message.isPersistent();,                             case REDELIVERED:,                                 return delvProps.getRedelivered();,                         },                         return null;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/ServerSessionTest.java,testCompareTo,90-90,[                new Binary(getName().getBytes()), 0);],,testCompareTo,97-97,[                new Binary(getName().getBytes()), 0);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_10/ServerSessionTest.java,testOverlargeMessageTest,119-119,[                                                   new Binary(getName().getBytes()), 0)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_10/ServerSessionTest.java,,120-125,[        {,             @Override,             public void invoke(final Method m),             {,                 invokedMethods.add(m);,             }],,
MT_CORRECTNESS,VO_VOLATILE_INCREMENT,org/apache/qpid/server/protocol/v0_10/WindowCreditManager.java,useCreditForMessage,129-129,[                    _messageUsed++;],,
MT_CORRECTNESS,VO_VOLATILE_INCREMENT,org/apache/qpid/server/protocol/v0_10/WindowCreditManager.java,useCreditForMessage,135-135,[                    _messageUsed++;],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/protocol/v0_8/AMQChannel.java,compareTo,120-120,[public class AMQChannel],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/protocol/v0_8/AMQChannel.java,receiveExchangeBound,2828-2828,[                if (exchange.isBound(routingKey == null ? "" : routingKey.toString()))],,receiveExchangeBound,2810-2810,[                    String bindingKey = routingKey == null ? null : routingKey.toString();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/AMQChannel.java,,481-498,[                                {,                                     @Override,                                     public Object getProperty(final Property prop),                                     {,                                         switch(prop),                                         {,                                             case EXPIRATION:,                                                 return amqMessage.getExpiration();,                                             case IMMEDIATE:,                                                 return immediate;,                                             case PERSISTENT:,                                                 return amqMessage.isPersistent();,                                             case MANDATORY:,                                                 return messagePublishInfo.isMandatory();,                                             case REDELIVERED:,                                                 return false;,                                         },                                         return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/AMQChannel.java,,759-776,[                {, ,                     @Override,                     public String getName(),                     {,                         return AMQPFilterTypes.NO_LOCAL.toString();,                     }, ,                     @Override,                     public boolean matches(final Filterable message),                     {,                         return message.getConnectionReference() != connectionReference;,                     }, ,                     @Override,                     public boolean startAtTail(),                     {,                         return false;],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/server/protocol/v0_8/AMQChannelTest.java,testOverlargeMessage,177-177,[        frames.toString();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/AMQChannelTest.java,,161-166,[        {,             @Override,             public synchronized void writeFrame(final AMQDataBlock frame),             {,                 frames.add(frame);,             }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_8/AMQPConnection_0_8.java,protocolInitiationReceived,476-476,[                                                                                       mechanisms.getBytes(),],,protocolInitiationReceived,477-477,[                                                                                       locales.getBytes());],,
CORRECTNESS,NP_NULL_PARAM_DEREF,org/apache/qpid/server/protocol/v0_8/AMQPConnection_0_8.java,receiveConnectionSecureOk,1381-1381,[        SubjectAuthenticationResult authResult = subjectCreator.authenticate(ss, response);],,receiveConnectionSecureOk,1376-1376,[        if (ss == null)],,receiveConnectionSecureOk,1378-1378,[            closeConnection(AMQConstant.INTERNAL_ERROR, "No SASL context set up in connection",0 );],,
STYLE,UC_USELESS_OBJECT,org/apache/qpid/server/protocol/v0_8/AckTest.java,publishMessages,104-104,[            ArrayList<AMQQueue> qs = new ArrayList<AMQQueue>();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/protocol/v0_8/ExtractResendAndRequeueTest.java,setUp,71-71,[        _queueDeleted = false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/ExtractResendAndRequeueTest.java,,92-97,[            {,                 @Override,                 public Object answer(final InvocationOnMock invocation) throws Throwable,                 {,                     when(entry.isDeleted()).thenReturn(true);,                     return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/protocol/v0_8/InternalTestProtocolSession.java,,207-219,[        {,             _deliveryTag = deliveryTag;,             _message = message;,         }, ,         public ServerMessage getMessage(),         {,             return _message;,         }, ,         public long getDeliveryTag(),         {,             return _deliveryTag;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/InternalTestProtocolSession.java,,288-299,[            {,                 public void send(ByteBuffer msg),                 {,                 }, ,                 public void flush(),                 {,                 }, ,                 public void close(),                 {,                 }],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/protocol/v0_8/LimitlessCreditManager.java,,27-45,[public class LimitlessCreditManager extends AbstractFlowCreditManager implements FlowCreditManager, {, ,     public void restoreCredit(long messageCredit, long bytesCredit),     {,     }, ,     public void removeAllCredit(),     {,     }, ,     public boolean hasCredit(),     {,         return true;,     }, ,     public boolean useCreditForMessage(long msgSize),     {,         return true;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/MessageConverter_Internal_to_v0_8.java,,77-124,[        {,             @Override,             public MessageMetaData getMetaData(),             {,                 return messageMetaData_0_8;,             }, ,             @Override,             public long getMessageNumber(),             {,                 return serverMsg.getMessageNumber();,             }, ,             @Override,             public int getContent(int offsetInMessage, ByteBuffer dst),             {,                 int size = messageContent.length - offsetInMessage;,                 if(dst.remaining() < size),                 {,                     size = dst.remaining();,                 },                 ByteBuffer buf = ByteBuffer.wrap(messageContent, offsetInMessage, size);,                 dst.put(buf);,                 return size;,             }, ,             @Override,             public ByteBuffer getContent(int offsetInMessage, int size),             {,                 return ByteBuffer.wrap(messageContent, offsetInMessage, size);,             }, ,             @Override,             public void remove(),             {,                 throw new UnsupportedOperationException();,             }, ,             @Override,             public boolean isInMemory(),             {,                 return true;,             }, ,             @Override,             public boolean flowToDisk(),             {,                 return false;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_8/MessageConverter_v0_8_to_Internal.java,convertMessageBody,276-276,[            String text = new String(data);],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/protocol/v0_8/MessageOnlyCreditManager.java,,33-68,[    {,         _messageCredit = new AtomicLong(initialCredit);,     }, ,     public void restoreCredit(long messageCredit, long bytesCredit),     {,         _messageCredit.addAndGet(messageCredit);,         setSuspended(false);, ,     }, ,     public boolean hasCredit(),     {,         return _messageCredit.get() > 0L;,     }, ,     public boolean useCreditForMessage(long msgSize),     {,         if(hasCredit()),         {,             if(_messageCredit.addAndGet(-1L) >= 0),             {,                 setSuspended(false);,                 return true;,             },             else,             {,                 _messageCredit.addAndGet(1L);,                 setSuspended(true);,                 return false;,             },         },         else,         {,             setSuspended(true);,             return false;],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/protocol/v0_8/Pre0_10CreditManager.java,,41-183,[    {,         _protocolEngine = protocolEngine;,         _bytesCreditLimit = bytesCreditLimit;,         _messageCreditLimit = messageCreditLimit;,         _bytesCredit = bytesCreditLimit;,         _messageCredit = messageCreditLimit;,     }, , , ,     public synchronized void setCreditLimits(final long bytesCreditLimit, final long messageCreditLimit),     {,         long bytesCreditChange = bytesCreditLimit - _bytesCreditLimit;,         long messageCreditChange = messageCreditLimit - _messageCreditLimit;, , , ,         if(bytesCreditChange != 0L),         {,             if(bytesCreditLimit == 0L),             {,                 _bytesCredit = 0;,             },             else,             {,                 _bytesCredit += bytesCreditChange;,             },         }, , ,         if(messageCreditChange != 0L),         {,             if(messageCreditLimit == 0L),             {,                 _messageCredit = 0;,             },             else,             {,                 _messageCredit += messageCreditChange;,             },         }, , ,         _bytesCreditLimit = bytesCreditLimit;,         _messageCreditLimit = messageCreditLimit;, ,         setSuspended(!hasCredit());, ,     }, , ,     public synchronized void restoreCredit(final long messageCredit, final long bytesCredit),     {,         final long messageCreditLimit = _messageCreditLimit;,         boolean notifyIncrease = true;,         if(messageCreditLimit != 0L),         {,             notifyIncrease = (_messageCredit != 0);,             long newCredit = _messageCredit + messageCredit;,             _messageCredit = newCredit > messageCreditLimit ? messageCreditLimit : newCredit;,         }, , ,         final long bytesCreditLimit = _bytesCreditLimit;,         if(bytesCreditLimit != 0L),         {,             long newCredit = _bytesCredit + bytesCredit;,             _bytesCredit = newCredit > bytesCreditLimit ? bytesCreditLimit : newCredit;,             if(notifyIncrease && bytesCredit>0),             {,                 notifyIncreaseBytesCredit();,             },         }, , , ,         setSuspended(!hasCredit());, ,     }, ,     public synchronized boolean hasCredit(),     {,         return (_bytesCreditLimit == 0L || _bytesCredit > 0),                 && (_messageCreditLimit == 0L || _messageCredit > 0),                 && !_protocolEngine.isTransportBlockedForWriting();,     }, ,     public synchronized boolean useCreditForMessage(final long msgSize),     {,         if (_protocolEngine.isTransportBlockedForWriting()),         {,             setSuspended(true);,             return false;,         },         else if(_messageCreditLimit != 0L),         {,             if(_messageCredit != 0L),             {,                 if(_bytesCreditLimit == 0L),                 {,                     _messageCredit--;, ,                     return true;,                 },                 else,                 {,                     if((_bytesCredit >= msgSize) || (_bytesCredit == _bytesCreditLimit)),                     {,                         _messageCredit--;,                         _bytesCredit -= msgSize;, ,                         return true;,                     },                     else,                     {,                         return false;,                     },                 },             },             else,             {,                 setSuspended(true);,                 return false;,             },         },         else,         {,             if(_bytesCreditLimit == 0L),             {, ,                 return true;,             },             else,             {,                 if((_bytesCredit >= msgSize) || (_bytesCredit == _bytesCreditLimit)),                 {,                     _bytesCredit -= msgSize;, ,                     return true;,                 },                 else,                 {,                     return false;],,
MT_CORRECTNESS,VO_VOLATILE_INCREMENT,org/apache/qpid/server/protocol/v0_8/Pre0_10CreditManager.java,useCreditForMessage,141-141,[                    _messageCredit--;],,
MT_CORRECTNESS,VO_VOLATILE_INCREMENT,org/apache/qpid/server/protocol/v0_8/Pre0_10CreditManager.java,useCreditForMessage,149-149,[                        _messageCredit--;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/protocol/v0_8/ProtocolEngineCreator_0_8.java,getSuggestedAlternativeHeader,77-77,[        return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/protocol/v0_8/ProtocolEngineCreator_0_9.java,getSuggestedAlternativeHeader,77-77,[        return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/protocol/v0_8/ProtocolEngineCreator_0_9_1.java,getSuggestedAlternativeHeader,78-78,[        return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/ProtocolOutputConverterImpl.java,,148-166,[        {,             @Override,             public int getContent(final ByteBuffer buf, final int offset),             {,                 int size = Math.min(buf.remaining(), content.length - offset);,                 buf.put(content, offset, size);,                 return size;,             }, ,             @Override,             public ByteBuffer getContent(final int offset, final int size),             {,                 return ByteBuffer.wrap(content, offset, size);,             }, ,             @Override,             public long getSize(),             {,                 return content.length;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/protocol/v0_8/ProtocolOutputConverterImpl.java,,224-276,[        {,             _message = message;,             _offset = offset;,             _length = length;,         }, ,         public byte getFrameType(),         {,             return TYPE;,         }, ,         public int getSize(),         {,             return _length;,         }, ,         public void writePayload(DataOutput buffer) throws IOException,         {,             ByteBuffer buf = _message.getContent(_offset, _length);, ,             if(buf.hasArray()),             {,                 buffer.write(buf.array(), buf.arrayOffset()+buf.position(), buf.remaining());,             },             else,             {, ,                 byte[] data = new byte[_length];, ,                 buf.get(data);, ,                 buffer.write(data);,             },         }, ,         @Override,         public long writePayload(final ByteBufferSender sender) throws IOException,         {,             ByteBuffer buf = _message.getContent(_offset, _length);,             long size = buf.remaining();,             sender.send(buf.duplicate());,             return size;,         }, ,         public void handle(int channelId, AMQVersionAwareProtocolSession amqProtocolSession) throws AMQException,         {,             throw new UnsupportedOperationException();,         }, ,         @Override,         public String toString(),         {,             return "[" + getClass().getSimpleName() + " offset: " + _offset + ", length: " + _length + "]";],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/protocol/v0_8/ReferenceCountingTest.java,setUp,49-49,[        _store = new TestMemoryMessageStore();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v0_8/ReferenceCountingTest.java,getId,130-130,[                return UUID.nameUUIDFromBytes(queueName.getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/ReferenceCountingTest.java,,120-136,[        {,             @Override,             public String getName(),             {,                 return queueName;,             }, ,             @Override,             public UUID getId(),             {,                 return UUID.nameUUIDFromBytes(queueName.getBytes());,             }, ,             @Override,             public MessageDurability getMessageDurability(),             {,                 return MessageDurability.DEFAULT;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v0_8/ReferenceCountingTest.java,,144-160,[        {,             @Override,             public long getMessageNumber(),             {,                 return storedMessage.getMessageNumber();,             }, ,             @Override,             public boolean isPersistent(),             {,                 return true;,             }, ,             @Override,             public StoredMessage getStoredMessage(),             {,                 return storedMessage;],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/protocol/v1_0/AMQPConnection_1_0.java,,83-83,[    public static Logger LOGGER = LoggerFactory.getLogger(AMQPConnection_1_0.class);],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/server/protocol/v1_0/AMQPConnection_1_0.java,received,363-370,[                        msg.get();,                     },                     else,                     {,                         break;,                     },                 case M:,                     if (msg.hasRemaining())],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/Connection_1_0.java,,188-215,[            {,                 @Override,                 public void remoteLinkCreation(final LinkEndpoint endpoint),                 {,                     Subject.doAs(session.getSubject(), new PrivilegedAction<Object>(),                     {,                         @Override,                         public Object run(),                         {,                             session.remoteLinkCreation(endpoint);,                             return null;,                         },                     });,                 }, ,                 @Override,                 public void remoteEnd(final End end),                 {,                     Subject.doAs(session.getSubject(), new PrivilegedAction<Object>(),                     {,                         @Override,                         public Object run(),                         {,                             session.remoteEnd(end);,                             return null;,                         },                     });,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/Connection_1_0.java,,292-297,[        {,             @Override,             public void performAction(final Connection_1_0 object),             {,                 session.close(cause, message);,             }],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/protocol/v1_0/ConsumerTarget_1_0.java,doSend,244-244,[                    if(txn != null)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/protocol/v1_0/ConsumerTarget_1_0.java,,489-506,[        {,         }, ,         public boolean process(final DeliveryState state, final Boolean settled),         {,             Binary transactionId = null;,             Outcome outcome = null;,             // If disposition is settled this overrides the txn?,             if(state instanceof TransactionalState),             {,                 transactionId = ((TransactionalState)state).getTxnId();,                 outcome = ((TransactionalState)state).getOutcome();,             },             else if (state instanceof Outcome),             {,                 outcome = (Outcome) state;,             },             return true;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/ExchangeDestination.java,,59-77,[            {, ,                 @Override,                 public Object getProperty(final Property prop),                 {,                     switch(prop),                     {,                         case MANDATORY:,                             return false;,                         case REDELIVERED:,                             return false;,                         case PERSISTENT:,                             return message.isPersistent();,                         case IMMEDIATE:,                             return false;,                         case EXPIRATION:,                             return message.getExpiration();,                     },                     return null;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/protocol/v1_0/MessageConverter_to_1_0.java,convertMessageBody,85-85,[            String text = new String(data);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/NodeReceivingDestination.java,,58-76,[            {, ,                 @Override,                 public Object getProperty(final Property prop),                 {,                     switch(prop),                     {,                         case MANDATORY:,                             return false;,                         case REDELIVERED:,                             return false;,                         case PERSISTENT:,                             return message.isPersistent();,                         case IMMEDIATE:,                             return false;,                         case EXPIRATION:,                             return message.getExpiration();,                     },                     return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/protocol/v1_0/ProtocolEngineCreator_1_0_0_SASL.java,getSuggestedAlternativeHeader,75-75,[        return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/ProtocolEngine_1_0_0Test.java,,123-129,[        {,             @Override,             public Subject answer(final InvocationOnMock invocation) throws Throwable,             {,                 Subject subject = new Subject();,                 subject.getPrincipals().add(userCaptor.getValue());,                 return subject;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/ProtocolEngine_1_0_0Test.java,,204-208,[        {,             @Override,             public String getName(),             {,                 return "test";],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/protocol/v1_0/QueueDestination.java,,30-84,[public class QueueDestination extends MessageSourceDestination implements SendingDestination, ReceivingDestination, {,     private static final Accepted ACCEPTED = new Accepted();,     private static final Outcome[] OUTCOMES = new Outcome[] { ACCEPTED };, , ,     public QueueDestination(AMQQueue queue),     {,         super(queue);,     }, ,     public Outcome[] getOutcomes(),     {,         return OUTCOMES;,     }, ,     public Outcome send(final Message_1_0 message, ServerTransaction txn),     {, ,         txn.enqueue(getQueue(),message, new ServerTransaction.EnqueueAction(),         {,             MessageReference _reference = message.newReference();, , ,             public void postCommit(MessageEnqueueRecord... records),             {,                 try,                 {,                     getQueue().enqueue(message, null, records[0]);,                 },                 finally,                 {,                     _reference.release();,                 },             }, ,             public void onRollback(),             {,                 _reference.release();,             },         });, , ,         return ACCEPTED;,     }, ,     public int getCredit(),     {,         // TODO - fix,         return 100;,     }, ,     public AMQQueue getQueue(),     {,         return (AMQQueue) super.getQueue();],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/protocol/v1_0/SendingLink_1_0.java,<init>,345-345,[        if(_target != null)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/SendingLink_1_0.java,,640-648,[                                        {,                                             public void postCommit(),                                             {,                                                 queueEntry.delete();,                                             }, ,                                             public void onRollback(),                                             {,                                             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/protocol/v1_0/SendingLink_1_0.java,,660-669,[                                {,                                     public void postCommit(),                                     {,                                         queueEntry.release();,                                     }, ,                                     public void onRollback(),                                     {,                                         //To change body of implemented methods use File | Settings | File Templates.,                                     }],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/protocol/v1_0/Session_1_0.java,compareTo,97-97,[public class Session_1_0 implements SessionEventListener, AMQSessionModel<Session_1_0>, LogSubject],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/queue/AbstractQueue.java,compareTo,116-116,[public abstract class AbstractQueue<X extends AbstractQueue<X>>],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/server/queue/AbstractQueue.java,switchToLinkExclusivity,2828-2831,[                _exclusiveSubscriber = getConsumerList().getHead().getConsumer();,                 // deliberate fall through,             case 0:,                 _exclusiveOwner = null;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/server/queue/AbstractQueue.java,switchToConnectionExclusivity,2869-2892,[        switch(_exclusive),         {,             case NONE:,             case CONTAINER:,             case PRINCIPAL:,                 AMQPConnection con = null;,                 for(ConsumerImpl c : getConsumers()),                 {,                     if(con == null),                     {,                         con = c.getSessionModel().getAMQPConnection();,                     },                     else if(!con.equals(c.getSessionModel().getAMQPConnection())),                     {,                         throw new ExistingConsumerPreventsExclusive();,                     },                 },                 _exclusiveOwner = con;,                 break;,             case SESSION:,                 _exclusiveOwner = _exclusiveOwner == null ? null : ((AMQSessionModel)_exclusiveOwner).getAMQPConnection();,                 break;,             case LINK:,                 _exclusiveOwner = _exclusiveSubscriber == null ? null : _exclusiveSubscriber.getSessionModel().getAMQPConnection();],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/server/queue/AbstractQueue.java,switchToContainerExclusivity,2898-2923,[        switch(_exclusive),         {,             case NONE:,             case PRINCIPAL:,                 String containerID = null;,                 for(ConsumerImpl c : getConsumers()),                 {,                     if(containerID == null),                     {,                         containerID = c.getSessionModel().getAMQPConnection().getRemoteContainerName();,                     },                     else if(!containerID.equals(c.getSessionModel().getAMQPConnection().getRemoteContainerName())),                     {,                         throw new ExistingConsumerPreventsExclusive();,                     },                 },                 _exclusiveOwner = containerID;,                 break;,             case CONNECTION:,                 _exclusiveOwner = _exclusiveOwner == null ? null : ((AMQPConnection)_exclusiveOwner).getRemoteContainerName();,                 break;,             case SESSION:,                 _exclusiveOwner = _exclusiveOwner == null ? null : ((AMQSessionModel)_exclusiveOwner).getAMQPConnection().getRemoteContainerName();,                 break;,             case LINK:,                 _exclusiveOwner = _exclusiveSubscriber == null ? null : _exclusiveSubscriber.getSessionModel().getAMQPConnection().getRemoteContainerName();],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/server/queue/AbstractQueue.java,switchToPrincipalExclusivity,2929-2954,[        switch(_exclusive),         {,             case NONE:,             case CONTAINER:,                 Principal principal = null;,                 for(ConsumerImpl c : getConsumers()),                 {,                     if(principal == null),                     {,                         principal = c.getSessionModel().getAMQPConnection().getAuthorizedPrincipal();,                     },                     else if(!principal.equals(c.getSessionModel().getAMQPConnection().getAuthorizedPrincipal())),                     {,                         throw new ExistingConsumerPreventsExclusive();,                     },                 },                 _exclusiveOwner = principal;,                 break;,             case CONNECTION:,                 _exclusiveOwner = _exclusiveOwner == null ? null : ((AMQPConnection)_exclusiveOwner).getAuthorizedPrincipal();,                 break;,             case SESSION:,                 _exclusiveOwner = _exclusiveOwner == null ? null : ((AMQSessionModel)_exclusiveOwner).getAMQPConnection().getAuthorizedPrincipal();,                 break;,             case LINK:,                 _exclusiveOwner = _exclusiveSubscriber == null ? null : _exclusiveSubscriber.getSessionModel().getAMQPConnection().getAuthorizedPrincipal();],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/server/queue/AbstractQueue.java,switchToSessionExclusivity,2842-2863,[        switch(_exclusive),         {,             case NONE:,             case PRINCIPAL:,             case CONTAINER:,             case CONNECTION:,                 AMQSessionModel session = null;,                 for(ConsumerImpl c : getConsumers()),                 {,                     if(session == null),                     {,                         session = c.getSessionModel();,                     },                     else if(!session.equals(c.getSessionModel())),                     {,                         throw new ExistingConsumerPreventsExclusive();,                     },                 },                 _exclusiveOwner = session;,                 break;,             case LINK:,                 _exclusiveOwner = _exclusiveSubscriber == null ? null : _exclusiveSubscriber.getSessionModel().getAMQPConnection();],,
STYLE,UCF_USELESS_CONTROL_FLOW,org/apache/qpid/server/queue/AbstractQueue.java,deleteAndReturnCount,1931-1931,[                if(requeues == 0)],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/queue/AbstractQueue.java,activate,2992-2993,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/queue/AbstractQueue.java,doDelete,3007-3010,[        _virtualHost.removeQueue(this);,         preSetAlternateExchange();,         setState(State.DELETED);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/queue/AbstractQueue.java,doDeleteBeforeInitialize,2999-3001,[        preSetAlternateExchange();,         setState(State.DELETED);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/queue/AbstractQueue.java,postSetAlternateExchange,595-599,[        if(_alternateExchange instanceof ExchangeImpl),         {,             ((ExchangeImpl)_alternateExchange).addReference(this);,         },     }],,
STYLE,IA_AMBIGUOUS_INVOCATION_OF_INHERITED_OR_OUTER_METHOD,org/apache/qpid/server/queue/AbstractQueue.java,isEmpty,3403-3403,[                String min = isEmpty() ? "0" : String.valueOf(_first);],,isEmpty,3404-3404,[                String max = isEmpty() ? "0" : String.valueOf(_first + size() - 1);],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/server/queue/AbstractQueue.java,,3393-3436,[    private class MessageCollector implements QueueEntryVisitor,     {, , , ,         private class MessageRangeList extends ArrayList<MessageInfo> implements CustomRestHeaders,         {,             @RestContentHeader("Content-Range"),             public String getContentRange(),             {,                 String min = isEmpty() ? "0" : String.valueOf(_first);,                 String max = isEmpty() ? "0" : String.valueOf(_first + size() - 1);,                 return "" + min + "-" + max + "/" + getQueueDepthMessages();,             },         }, ,         private final int _first;,         private final int _last;,         private int _position = -1;,         private final List<MessageInfo> _messages = new MessageRangeList();,         private final boolean _includeHeaders;, ,         private MessageCollector(int first, int last, boolean includeHeaders),         {,             _first = first;,             _last = last;,             _includeHeaders = includeHeaders;,         }, , ,         public boolean visit(QueueEntry entry),         {, ,             _position++;,             if((_first == -1 || _position >= _first) && (_last == -1 || _position <= _last)),             {,                 _messages.add(new MessageInfoFacade(entry, _includeHeaders));,             },             return _last != -1 && _position > _last;,         }, ,         public List<MessageInfo> getMessages(),         {,             return _messages;],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/server/queue/AbstractQueue.java,,3398-3405,[        private class MessageRangeList extends ArrayList<MessageInfo> implements CustomRestHeaders,         {,             @RestContentHeader("Content-Range"),             public String getContentRange(),             {,                 String min = isEmpty() ? "0" : String.valueOf(_first);,                 String max = isEmpty() ? "0" : String.valueOf(_first + size() - 1);,                 return "" + min + "-" + max + "/" + getQueueDepthMessages();],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testEnqueueMessageThenRegisterConsumer,211-211,[        ServerMessage messageA = createMessage(new Long(24));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testEnqueueTwoMessagesThenRegisterConsumer,227-227,[        ServerMessage messageA = createMessage(new Long(24));],,testEnqueueTwoMessagesThenRegisterConsumer,228-228,[        ServerMessage messageB = createMessage(new Long(25));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testExclusiveConsumer,479-479,[        ServerMessage messageA = createMessage(new Long(24));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testGetFirstFiveMessageIds,585-585,[            Long messageId = new Long(i);],,testGetFirstFiveMessageIds,596-596,[            Long messageId = new Long(i);],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testGetFirstMessageId,568-568,[        Long messageId = new Long(23);],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testGetLastFiveMessageIds,606-606,[            Long messageId = new Long(i);],,testGetLastFiveMessageIds,617-617,[            Long messageId = new Long(i+5);],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testGetMessagesOnTheQueueByQueueEntryFilterWithDequeuedEntry,759-759,[                assertFalse("Message with id " + dequeueMessageIndex],,testGetMessagesOnTheQueueByQueueEntryFilterWithDequeuedEntry,764-764,[            assertEquals("Expected message with id " + expectedId + " but got message with id " + id,],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testGetMessagesOnTheQueueWithDequeuedEntry,711-711,[                assertFalse("Message with id " + dequeueMessageIndex],,testGetMessagesOnTheQueueWithDequeuedEntry,716-716,[            assertEquals("Expected message with id " + expectedId + " but got message with id " + id,],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testGetMessagesRangeOnTheQueue,627-627,[            Long messageId = new Long(i);],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testNotificationFiredAsync,817-817,[        _queue.enqueue(createMessage(new Long(24)), null, null);],,testNotificationFiredAsync,818-818,[        _queue.enqueue(createMessage(new Long(25)), null, null);],,testNotificationFiredAsync,819-819,[        _queue.enqueue(createMessage(new Long(26)), null, null);],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testNotificationFiredOnEnqueue,805-805,[        _queue.enqueue(createMessage(new Long(24)), null, null);],,testNotificationFiredOnEnqueue,808-808,[        _queue.enqueue(createMessage(new Long(25)), null, null);],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testRegisterConsumerThenEnqueueMessage,173-173,[        ServerMessage messageA = createMessage(new Long(24));],,testRegisterConsumerThenEnqueueMessage,203-203,[        ServerMessage messageB = createMessage(new Long (25));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testReleaseForQueueWithMultipleConsumers,433-433,[        ServerMessage messageA = createMessage(new Long(24));],,testReleaseForQueueWithMultipleConsumers,434-434,[        ServerMessage messageB = createMessage(new Long(25));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testReleaseMessageThatBecomesExpiredIsNotRedelivered,297-297,[        ServerMessage messageA = createMessage(new Long(24));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testReleasedMessageIsResentToSubscriber,247-247,[        ServerMessage messageA = createMessage(new Long(24));],,testReleasedMessageIsResentToSubscriber,248-248,[        ServerMessage messageB = createMessage(new Long(25));],,testReleasedMessageIsResentToSubscriber,249-249,[        ServerMessage messageC = createMessage(new Long(26));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testReleasedOutOfComparableOrderAreRedelivered,383-383,[        ServerMessage messageA = createMessage(new Long(24));],,testReleasedOutOfComparableOrderAreRedelivered,384-384,[        ServerMessage messageB = createMessage(new Long(25));],,testReleasedOutOfComparableOrderAreRedelivered,385-385,[        ServerMessage messageC = createMessage(new Long(26));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/queue/AbstractQueueTestBase.java,testResend,543-543,[        Long id = new Long(26);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,300-310,[        {,             @Override,             public long send(ConsumerImpl consumer, MessageInstance entry, boolean batch),             {,                 try,                 {,                     return super.send(consumer, entry, batch);,                 },                 finally,                 {,                     sendIndicator.countDown();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,337-345,[        {,             @Override,             public void stateChanged(MessageInstance object, MessageInstance.State oldState, MessageInstance.State newState),             {,                 if (newState == MessageInstance.State.DEQUEUED),                 {,                     dequeueIndicator.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,739-747,[        {,             public boolean accept(QueueEntry entry),             {,                 return true;,             }, ,             public boolean filterComplete(),             {,                 return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,919-924,[        {,             @Override,             public boolean visit(final QueueEntry entry),             {,                 entries.add(entry);,                 return true;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,1061-1065,[        {,             @Override,             public Boolean answer(final InvocationOnMock invocationOnMock) throws Throwable,             {,                 return arguments.containsKey(nameCaptor.getValue());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,1071-1075,[        {,             @Override,             public Boolean answer(final InvocationOnMock invocationOnMock) throws Throwable,             {,                 return arguments.keySet().containsAll(namesCaptor.getValue());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/AbstractQueueTestBase.java,,1081-1085,[        {,             @Override,             public Object answer(final InvocationOnMock invocationOnMock) throws Throwable,             {,                 return arguments.get(nameCaptor2.getValue());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/ClearQueueTransaction.java,,40-49,[        {, ,             public boolean visit(final QueueEntry entry),             {,                 final ServerMessage message = entry.getMessage();,                 if(message != null),                 {,                     txn.dequeue(entry);,                 },                 return false;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/queue/ConsumerListTest.java,setUp,41-41,[        _subList = new QueueConsumerList();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/LastValueQueueList.java,,180-191,[                                {,                                     @Override,                                     public void postCommit(),                                     {,                                         entry.delete();,                                     }, ,                                     @Override,                                     public void onRollback(),                                     {, ,                                     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/queue/LastValueQueueListTest.java,createTestQueue,241-245,[        AMQQueue queue = mock(AMQQueue.class);,         VirtualHostImpl virtualHost = mock(VirtualHostImpl.class);,         when(queue.getVirtualHost()).thenReturn(virtualHost);, ,         return queue;],,
PERFORMANCE,SS_SHOULD_BE_STATIC,org/apache/qpid/server/queue/MessageGroupQueueTest.java,,47-47,[    protected final String QUEUE = "MessageGroupQueue";],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/queue/ModelTest.java,testCreationDurableViaJMX,199-199,[        createViaJMXandValidateViaJMX(name, owner, durable);],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/queue/ModelTest.java,testCreationTransientViaJMX,184-184,[        createViaJMXandValidateViaJMX(name, owner, durable);],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/queue/PriorityQueueList.java,compareTo,250-250,[    static class PriorityQueueEntry extends OrderedQueueEntry],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/queue/PriorityQueueListTest.java,setUp,59-59,[        BrokerTestHelper.setUp();],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/server/queue/ProducerFlowControlTest.java,awaitSenderException,491-491,[            _exceptionThrownLatch.await(timeout, TimeUnit.MILLISECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/QueueConsumerImpl.java,,97-101,[    {,         public void stateChanged(QueueConsumerImpl sub, State oldState, State newState),         {,             // no-op,         }],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/queue/QueueDepthWithSelectorTest.java,,56-56,[    protected static int MSG_COUNT = 50;],,
PERFORMANCE,SS_SHOULD_BE_STATIC,org/apache/qpid/server/queue/QueueDepthWithSelectorTest.java,,46-46,[    protected final String VHOST = "test";],,
STYLE,URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,org/apache/qpid/server/queue/QueueDepthWithSelectorTest.java,,47-47,[    protected final String QUEUE = this.getClass().getName();],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/queue/QueueEntryImpl.java,compareTo,47-47,[public abstract class QueueEntryImpl implements QueueEntry],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/queue/QueueEntryImplTestBase.java,setUp,66-66,[        _queueEntry = getQueueEntryImpl(1);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/queue/QueueEntryImplTestBase.java,getState,186-197,[        EntryState state = null;,         try,         {,             Field f = QueueEntryImpl.class.getDeclaredField("_state");,             f.setAccessible(true);,             state = (EntryState) f.get(_queueEntry);,         },         catch (Exception e),         {,             fail("Failure to get a state field: " + e.getMessage());,         },         return state;],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/server/queue/QueueEntryListTestBase.java,testAddGenericMessage,85-85,[            iter.getNode();],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/server/queue/QueueEntryListTestBase.java,testAddSpecificMessage,64-64,[            iter.getNode();],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/server/queue/QueueEntryListTestBase.java,testDequeuedMessagedNotPresentInIterator,168-168,[            it2.getNode();],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/server/queue/QueueEntryListTestBase.java,testIterator,134-134,[            iter.getNode();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/QueueMessageRecoveryTest.java,,164-174,[        {,             @Override,             public UUID getQueueId(),             {,                 return queue.getId();,             }, ,             @Override,             public long getMessageNumber(),             {,                 return messageNumber;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/queue/QueueMessageRecoveryTest.java,,200-218,[        {,             super(attributes, virtualHost);,             _messageList = messageList;,         }, ,         @Override,         QueueEntryList getEntries(),         {,             return null;,         }, ,         @Override,         protected void doEnqueue(final ServerMessage message, final Action<? super MessageInstance> action, MessageEnqueueRecord record),         {,             synchronized(_messageList),             {,                 _messageList.add(message);,             },         }],,
STYLE,UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR,org/apache/qpid/server/queue/SimpleQueueEntryImplTest.java,getQueueEntryImpl,79-79,[        return (QueueEntryImpl) queueEntryList.add(message, null);],,
BAD_PRACTICE,EQ_COMPARETO_USE_OBJECT_EQUALS,org/apache/qpid/server/queue/SortedQueueEntry.java,compareTo,28-28,[public class SortedQueueEntry extends QueueEntryImpl],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,,53-53,[    public final static String keys[] = { " 73", " 18", " 11", "127", "166", "163", " 69", " 60", "191", "144",],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,,74-74,[    public final static String textkeys[] = { "AAA", "BBB", "CCC", "DDD", "EEE", "FFF", "GGG", "HHH", "III", "JJJ",],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testAscendingSortKeys,262-262,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testDescendingSortKeys,285-285,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testInsertAfter,308-308,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testInsertAtHead,379-379,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testInsertBefore,328-328,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testInsertInbetween,348-348,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testNonUniqueSortKeys,220-220,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,testNullSortKeys,241-241,[        _sqel = new SelfValidatingSortedQueueEntryList(_testQueue);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,setUp,119-119,[        _sqel = (SelfValidatingSortedQueueEntryList) _testQueue.getEntries();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/SortedQueueEntryListTest.java,,103-115,[        {,             SelfValidatingSortedQueueEntryList _entries;,             @Override,             protected void onOpen(),             {,                 super.onOpen();,                 _entries = new SelfValidatingSortedQueueEntryList(this);,             }, ,             @Override,             SelfValidatingSortedQueueEntryList getEntries(),             {,                 return _entries;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/server/queue/SortedQueueEntryTest.java,,49-49,[    public final static String keys[] = { "CCC", "AAA", "BBB" };],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/SortedQueueEntryTest.java,,73-85,[        {,             SelfValidatingSortedQueueEntryList _entries;,             @Override,             protected void onOpen(),             {,                 super.onOpen();,                 _entries = new SelfValidatingSortedQueueEntryList(this);,             }, ,             @Override,             SelfValidatingSortedQueueEntryList getEntries(),             {,                 return _entries;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/queue/StandardQueueEntryListTest.java,setUp,58-58,[        oldScavengeValue = System.setProperty(SCAVENGE_PROP, "9");],,
CORRECTNESS,IJU_TEARDOWN_NO_SUPER,org/apache/qpid/server/queue/StandardQueueEntryListTest.java,tearDown,100-100,[    }],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/server/queue/StandardQueueTest.java,testProcessQueueWithDequeuedEntry,234-234,[            latch.await(1, TimeUnit.MINUTES);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/StandardQueueTest.java,,199-210,[        {,             /**,              * Send a message and decrement latch,              * @param consumer,              * @param entry,              * @param batch,              */,             public long send(final ConsumerImpl consumer, MessageInstance entry, boolean batch),             {,                 long size = super.send(consumer, entry, batch);,                 latch.countDown();,                 return size;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/queue/StandardQueueTest.java,,224-228,[        {,             public void run(),             {,                 // do nothing,             }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/security/FileKeyStoreImpl.java,validateKeyStoreAttributes,154-154,[        catch (Exception e)],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/FileKeyStoreImpl.java,postSetStoreUrl,297-305,[        if (_storeUrl != null && !_storeUrl.startsWith("data:")),         {,             _path = _storeUrl;,         },         else,         {,             _path = null;,         },     }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/FileKeyStoreTest.java,testCreateKeyStoreFromDataUrl_BadKeystoreBytes,195-195,[        String keyStoreAsDataUrl = DataUrlUtils.getDataUrlForBytes("notatruststore".getBytes());],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/FileTrustStoreImpl.java,getTrustManagers,302-302,[                return null;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/FileTrustStoreImpl.java,postSetStoreUrl,363-371,[        if (_storeUrl != null && !_storeUrl.startsWith("data:")),         {,             _path = _storeUrl;,         },         else,         {,             _path = null;,         },     }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/FileTrustStoreTest.java,testCreateTrustStoreFromDataUrl_BadTruststoreBytes,166-166,[        String trustStoreAsDataUrl = DataUrlUtils.getDataUrlForBytes("notatruststore".getBytes());],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/ManagedPeerCertificateTrustsStoreImpl.java,updateTrustManagers,174-222,[                    java.security.KeyStore.getInstance(java.security.KeyStore.getDefaultType());, ,             inMemoryKeyStore.load(null, null);,             int i = 1;,             for (Certificate cert : _storedCertificates),             {,                 inMemoryKeyStore.setCertificateEntry(String.valueOf(i++), cert);,             }, , ,             TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());,             tmf.init(inMemoryKeyStore);, ,             final Collection<TrustManager> trustManagersCol = new ArrayList<TrustManager>();,             final QpidMultipleTrustManager mulTrustManager = new QpidMultipleTrustManager();,             TrustManager[] delegateManagers = tmf.getTrustManagers();,             for (TrustManager tm : delegateManagers),             {,                 if (tm instanceof X509TrustManager),                 {,                     // truststore is supposed to trust only clients which peers certificates,                     // are directly in the store. CA signing will not be considered.,                     mulTrustManager.addTrustManager(new QpidPeersOnlyTrustManager(inMemoryKeyStore, (X509TrustManager) tm));, ,                 },                 else,                 {,                     trustManagersCol.add(tm);,                 },             },             if (! mulTrustManager.isEmpty()),             {,                 trustManagersCol.add(mulTrustManager);,             }, ,             if (trustManagersCol.isEmpty()),             {,                 _trustManagers = null;,             },             else,             {,                 _trustManagers = trustManagersCol.toArray(new TrustManager[trustManagersCol.size()]);,             },         },         catch (IOException | GeneralSecurityException e),         {,             throw new IllegalConfigurationException("Cannot load certificate(s) :" + e, e);,         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/NonJavaKeyStoreImpl.java,updateKeyManagers,237-269,[            if (_privateKeyUrl != null && _certificateUrl != null),             {,                 PrivateKey privateKey = SSLUtil.readPrivateKey(getUrlFromString(_privateKeyUrl));,                 X509Certificate[] certs = SSLUtil.readCertificates(getUrlFromString(_certificateUrl));,                 if(_intermediateCertificateUrl != null),                 {,                     List<X509Certificate> allCerts = new ArrayList<>(Arrays.asList(certs));,                     allCerts.addAll(Arrays.asList(SSLUtil.readCertificates(getUrlFromString(_intermediateCertificateUrl))));,                     certs = allCerts.toArray(new X509Certificate[allCerts.size()]);,                 }, ,                 java.security.KeyStore inMemoryKeyStore = java.security.KeyStore.getInstance(java.security.KeyStore.getDefaultType());, ,                 byte[] bytes = new byte[64];,                 char[] chars = new char[64];,                 RANDOM.nextBytes(bytes);,                 StandardCharsets.US_ASCII.decode(ByteBuffer.wrap(bytes)).get(chars);,                 inMemoryKeyStore.load(null, chars);,                 inMemoryKeyStore.setKeyEntry("1", privateKey, chars, certs);, , ,                 KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());,                 kmf.init(inMemoryKeyStore, chars);,                 _keyManagers = kmf.getKeyManagers();,                 _certificate = certs[0];,             }, ,         },         catch (IOException | GeneralSecurityException e),         {,             throw new IllegalConfigurationException("Cannot load private key or certificate(s): " + e, e);,         },     }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/NonJavaKeyStoreTest.java,extractResourcesFromTestKeyStore,111-111,[                kos.write("-----BEGIN PRIVATE KEY-----\n".getBytes());],,extractResourcesFromTestKeyStore,115-115,[                    kos.write(base64encoded.substring(0,76).getBytes());],,extractResourcesFromTestKeyStore,116-116,[                    kos.write("\n".getBytes());],,extractResourcesFromTestKeyStore,120-120,[                kos.write(base64encoded.getBytes());],,extractResourcesFromTestKeyStore,121-121,[                kos.write("\n-----END PRIVATE KEY-----".getBytes());],,extractResourcesFromTestKeyStore,137-137,[                cos.write("-----BEGIN CERTIFICATE-----\n".getBytes());],,extractResourcesFromTestKeyStore,141-141,[                    cos.write(base64encoded.substring(0,76).getBytes());],,extractResourcesFromTestKeyStore,142-142,[                    cos.write("\n".getBytes());],,extractResourcesFromTestKeyStore,145-145,[                cos.write(base64encoded.getBytes());],,extractResourcesFromTestKeyStore,147-147,[                cos.write("\n-----END CERTIFICATE-----".getBytes());],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/NonJavaKeyStoreTest.java,tearDown,86-86,[                    resource.delete();],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/server/security/NonJavaKeyStoreTest.java,extractResourcesFromTestKeyStore,99-99,[        try(InputStream is = getClass().getResourceAsStream("/java_broker_keystore.jks"))],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/NonJavaTrustStoreImpl.java,updateTrustManagers,275-300,[            if (_certificatesUrl != null),             {,                 X509Certificate[] certs = SSLUtil.readCertificates(getUrlFromString(_certificatesUrl));,                 java.security.KeyStore inMemoryKeyStore = java.security.KeyStore.getInstance(java.security.KeyStore.getDefaultType());, ,                 inMemoryKeyStore.load(null, null);,                 int i = 1;,                 for(Certificate cert : certs),                 {,                     inMemoryKeyStore.setCertificateEntry(String.valueOf(i++), cert);,                 }, , , ,                 TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());,                 tmf.init(inMemoryKeyStore);,                 _trustManagers = tmf.getTrustManagers();,                 _certificates = certs;,             }, ,         },         catch (IOException | GeneralSecurityException e),         {,             throw new IllegalConfigurationException("Cannot load certificate(s) :" + e, e);,         },     }],,
BAD_PRACTICE,UI_INHERITANCE_UNSAFE_GETRESOURCE,org/apache/qpid/server/security/NonJavaTrustStoreTest.java,testCreationOfTrustStoreFromValidCertificate,63-63,[        attributes.put("certificatesUrl", getClass().getResource("/java_broker.crt").toExternalForm());],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/SecurityManager.java,getACLObjectProperties,464-464,[                    configuredObjectOperation == null? null : configuredObjectOperation.name().toLowerCase(),],,getACLObjectProperties,465-465,[                    configuredObjectType == null ? null : configuredObjectType.getSimpleName().toLowerCase(),],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/security/SecurityManager.java,getCurrentUser,148-148,[            if(principals != null && !principals.isEmpty())],,
MT_CORRECTNESS,RV_RETURN_VALUE_OF_PUTIFABSENT_IGNORED,org/apache/qpid/server/security/SecurityManager.java,authorisePublish,597-597,[            _publishAccessCheckCache.putIfAbsent(key, check);],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/SecurityManagerTest.java,assertBrokerChildCreateAuthorization,929-929,[                Operation.CREATE.name().toLowerCase(),],,assertBrokerChildCreateAuthorization,930-930,[                object.getCategoryClass().getSimpleName().toLowerCase(),],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/SecurityManagerTest.java,assertBrokerChildDeleteAuthorization,961-961,[                Operation.DELETE.name().toLowerCase(),],,assertBrokerChildDeleteAuthorization,962-962,[                configuredObject.getCategoryClass().getSimpleName().toLowerCase(),],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/SecurityManagerTest.java,assertBrokerChildUpdateAuthorization,944-944,[                Operation.UPDATE.name().toLowerCase(),],,assertBrokerChildUpdateAuthorization,945-945,[                configuredObject.getCategoryClass().getSimpleName().toLowerCase(),],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/SubjectCreatorTest.java,<init>,58-58,[    private byte[] _saslResponseBytes = PASSWORD.getBytes();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/SubjectCreatorTest.java,setUp,63-63,[        when(_groupManager1.getGroupPrincipalsForUser(USERNAME)).thenReturn(Collections.singleton(_group1));],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/security/TrustStoreMessageSource.java,,53-194,[public class TrustStoreMessageSource extends AbstractSystemMessageSource implements MessageSource, {,     private static final Logger LOGGER = LoggerFactory.getLogger(TrustStoreMessageSource.class);, ,     private final TrustStore<?> _trustStore;,     private final AtomicReference<Set<Certificate>> _certCache = new AtomicReference<>();,     private final VirtualHost<?, ?, ?> _virtualHost;, , ,     public TrustStoreMessageSource(final TrustStore<?> trustStore, final VirtualHostImpl virtualHost),     {,         super(getSourceNameFromTrustStore(trustStore), virtualHost);,         _virtualHost = virtualHost;,         _trustStore = trustStore;,         _trustStore.addChangeListener(new ConfigurationChangeListener(),         {,             @Override,             public void stateChanged(final ConfiguredObject<?> object, final State oldState, final State newState),             {,                 if (newState == State.ACTIVE),                 {,                     updateCertCache();,                 },             }, ,             @Override,             public void childAdded(final ConfiguredObject<?> object, final ConfiguredObject<?> child),             {, ,             }, ,             @Override,             public void childRemoved(final ConfiguredObject<?> object, final ConfiguredObject<?> child),             {, ,             }, ,             @Override,             public void attributeSet(final ConfiguredObject<?> object,,                                      final String attributeName,,                                      final Object oldAttributeValue,,                                      final Object newAttributeValue),             {,                 updateCertCache();,             }, ,             @Override,             public void bulkChangeStart(final ConfiguredObject<?> object),             {, ,             }, ,             @Override,             public void bulkChangeEnd(final ConfiguredObject<?> object),             {, ,             },         });,         if(_trustStore.getState() == State.ACTIVE),         {,             updateCertCache();,         },     }, ,     @Override,     public Consumer addConsumer(final ConsumerTarget target,,                                 final FilterManager filters,,                                 final Class<? extends ServerMessage> messageClass,,                                 final String consumerName,,                                 final EnumSet<ConsumerImpl.Option> options),             throws ExistingExclusiveConsumer, ExistingConsumerPreventsExclusive,,                    ConsumerAccessRefused,     {,         final Consumer consumer = super.addConsumer(target, filters, messageClass, consumerName, options);,         consumer.send(createMessage());,         target.queueEmpty();,         return consumer;,     }, ,     private void updateCertCache(),     {,         _certCache.set(populateCertCache());,         if(!getConsumers().isEmpty()),         {,             sendMessageToConsumers();,         },     }, ,     private void sendMessageToConsumers(),     {,         InternalMessage message = createMessage();, ,         for(Consumer c : new ArrayList<>(getConsumers())),         {,             c.send(message);,         }, ,     }, ,     private InternalMessage createMessage(),     {,         List<Object> messageList = new ArrayList<>();,         for (Certificate cert : _certCache.get()),         {,             try,             {,                 messageList.add(cert.getEncoded());,             },             catch (CertificateEncodingException e),             {,                 LOGGER.error("Could not encode certificate of type " + cert.getType(), e);,             },         },         InternalMessageHeader header = new InternalMessageHeader(Collections.<String,Object>emptyMap(),,                                                                  null, 0l, null, null, UUID.randomUUID().toString(),,                                                                  null, null, (byte)4, System.currentTimeMillis(),,                                                                  null, null);,         return InternalMessage.createListMessage(_virtualHost.getMessageStore(), header, messageList);,     }, ,     private Set<Certificate> populateCertCache(),     {,         try,         {,             Set<Certificate> certCache = new HashSet<>();,             for(Certificate cert : _trustStore.getCertificates()),             {,                 certCache.add(cert);,             },             return certCache;,         },         catch (GeneralSecurityException e),         {,             LOGGER.error("Cannot read trust managers from truststore " + _trustStore.getName(), e);,             return Collections.emptySet();,         },     }, , ,     public static String getSourceNameFromTrustStore(final TrustStore<?> trustStore),     {,         return "$certificates/" + trustStore.getName();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/access/ObjectProperties.java,getAllPropertyNames,110-110,[            properties.add(property.name().replace("_","").toLowerCase());],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/access/ObjectProperties.java,getCanonicalName,99-99,[            return name.replace("_","").toLowerCase();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/access/ObjectType.java,toString,106-106,[        return name.charAt(0) + name.substring(1).toLowerCase();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/access/Operation.java,toString,54-54,[        return name.charAt(0) + name.substring(1).toLowerCase();],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/server/security/access/config/AclActionTest.java,testEqualsAndHashCode,34-56,[        AclRulePredicates predicates = createAclRulePredicates();,         ObjectType objectType = ObjectType.EXCHANGE;,         Operation operation = Operation.ACCESS;, ,         AclAction aclAction = new AclAction(operation, objectType, predicates);,         AclAction equalAclAction = new AclAction(operation, objectType, predicates);, ,         assertTrue(aclAction.equals(aclAction));,         assertTrue(aclAction.equals(equalAclAction));,         assertTrue(equalAclAction.equals(aclAction));, ,         assertTrue(aclAction.hashCode() == equalAclAction.hashCode());, ,         assertFalse("Different operation should cause aclActions to be unequal",,                 aclAction.equals(new AclAction(Operation.BIND, objectType, predicates)));, ,         assertFalse("Different operation type should cause aclActions to be unequal",,                 aclAction.equals(new AclAction(operation, ObjectType.GROUP, predicates)));, ,         assertFalse("Different predicates should cause aclActions to be unequal",,                 aclAction.equals(new AclAction(operation, objectType, createAclRulePredicates())));, ,     }],,testEqualsAndHashcode,107-115,[        AuthenticatedPrincipal user1principal1 = new AuthenticatedPrincipal(new UsernamePrincipal("user1"));,         AuthenticatedPrincipal user1principal2 = new AuthenticatedPrincipal(new UsernamePrincipal("user1"));, ,         assertTrue(user1principal1.equals(user1principal1));,         assertTrue(user1principal1.equals(user1principal2));,         assertTrue(user1principal2.equals(user1principal1));, ,         assertEquals(user1principal1.hashCode(), user1principal2.hashCode());,     }],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/access/config/AclRulePredicatesTest.java,setUp,38-38,[        _aclRulePredicates.setFirewallRuleFactory(_firewallRuleFactory);],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/access/config/PlainConfiguration.java,toPluginProperties,295-295,[            String key = i.next().toLowerCase();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/access/config/PlainConfigurationTest.java,writeACLConfig,54-54,[        configFile.load(new FileReader(acl));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/access/config/PlainConfigurationTest.java,writeACLConfig,45-45,[        PrintWriter aclWriter = new PrintWriter(new FileWriter(acl));],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/server/security/access/config/PlainConfigurationTest.java,writeACLConfig,54-54,[        configFile.load(new FileReader(acl));],,writeACLConfig,55-55,[        return configFile;],,
MALICIOUS_CODE,MS_MUTABLE_COLLECTION_PKGPROTECT,org/apache/qpid/server/security/access/config/RuleSet.java,,63-63,[    public static final List<String> CONFIG_PROPERTIES = Arrays.asList(DEFAULT_ALLOW, DEFAULT_DENY);],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/server/security/access/config/RuleSet.java,check,324-329,[                        getEventLogger().message(AccessControlMessages.ALLOWED(,                                 action.getOperation().toString(),,                                 action.getObjectType().toString(),,                                 action.getProperties().toString()));,                     case ALLOW:,                         return Result.ALLOWED;],,check,331-336,[                        getEventLogger().message(AccessControlMessages.DENIED(,                                 action.getOperation().toString(),,                                 action.getObjectType().toString(),,                                 action.getProperties().toString()));,                     case DENY:,                         return Result.DENIED;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/access/firewall/HostnameFirewallRule.java,,100-103,[        {,             public String call(),             {,                 return remote.getCanonicalHostName();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/access/firewall/HostnameFirewallRuleTest.java,setUp,39-39,[        _addressNotInRule = InetAddress.getByName("127.0.0.1");],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/security/access/firewall/InetNetwork.java,maskIP,106-106,[        catch (Exception _)],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/access/firewall/NetworkFirewallRuleTest.java,setUp,40-40,[        _addressNotInRule = InetAddress.getByName(LOCALHOST_IP);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/access/plugins/ACLFileAccessControlProviderImpl.java,activate,159-184,[        if(_broker.isManagementMode()),         {, ,             setState(_accessControl.validate() ? State.QUIESCED : State.ERRORED);,         },         else,         {,             try,             {,                 _accessControl.open();,                 setState(State.ACTIVE);,             },             catch (RuntimeException e),             {,                 setState(State.ERRORED);,                 if (_broker.isManagementMode()),                 {,                     LOGGER.warn("Failed to activate ACL provider: " + getName(), e);,                 },                 else,                 {,                     throw e;,                 },             },         },         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/access/plugins/ACLFileAccessControlProviderImpl.java,doDelete,207-227,[        final SettableFuture<Void> returnVal = SettableFuture.create();,         closeAsync().addListener(,                 new Runnable(),                 {,                     @Override,                     public void run(),                     {,                         try,                         {, ,                             setState(State.DELETED);,                             deleted();,                         },                         finally,                         {,                             returnVal.set(null);,                         },                     },                 }, getTaskExecutor().getExecutor(),                            );,         return returnVal;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/access/plugins/ACLFileAccessControlProviderImpl.java,reloadAclFile,127-140,[            DefaultAccessControl accessControl = new DefaultAccessControl(getPath(), _broker);,             accessControl.open();,             DefaultAccessControl oldAccessControl = _accessControl;,             _accessControl = accessControl;,             if(oldAccessControl != null),             {,                 oldAccessControl.close();,             },         },         catch(RuntimeException e),         {,             throw new IllegalConfigurationException(e.getMessage(), e);,         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/access/plugins/ACLFileAccessControlProviderImpl.java,startQuiesced,200-201,[        setState(State.QUIESCED);,         return Futures.immediateFuture(null);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/access/plugins/DefaultAccessControl.java,getReaderFromURLString,124-124,[            return new InputStreamReader(url.openStream());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/access/plugins/DefaultAccessControlTest.java,,248-260,[        {,             @Override,             public Object run() throws Exception,             {,                 RuleSet mockRuleSet = mock(RuleSet.class);, ,                 DefaultAccessControl accessControl = new DefaultAccessControl(mockRuleSet);, ,                 ObjectProperties properties = new ObjectProperties(testVirtualHost);,                 accessControl.authorise(Operation.ACCESS, ObjectType.VIRTUALHOST, properties);, ,                 verify(mockRuleSet).check(subject, Operation.ACCESS, ObjectType.VIRTUALHOST, properties, inetAddress);,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/access/plugins/DefaultAccessControlTest.java,,278-296,[        {,             @Override,             public Object run() throws Exception,             {, , ,                 RuleSet mockRuleSet = mock(RuleSet.class);,                 when(mockRuleSet.check(,                         subject,,                         Operation.ACCESS,,                         ObjectType.VIRTUALHOST,,                         ObjectProperties.EMPTY,,                         inetAddress)).thenThrow(new RuntimeException());, ,                 DefaultAccessControl accessControl = new DefaultAccessControl(mockRuleSet);,                 Result result = accessControl.authorise(Operation.ACCESS, ObjectType.VIRTUALHOST, ObjectProperties.EMPTY);, ,                 assertEquals(Result.DENIED, result);,                 return null;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/acl/AbstractACLTestCase.java,writeACLFileUtil,108-108,[        PrintWriter out = new PrintWriter(new FileWriter(aclFile));],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/server/security/auth/AuthenticatedPrincipal.java,,41-124,[        this(new UsernamePrincipal(userPrincipalName));,     }, ,     public AuthenticatedPrincipal(Principal wrappedPrincipal),     {,         if(wrappedPrincipal == null),         {,             throw new IllegalArgumentException("Wrapped principal is null");,         }, ,         _wrappedPrincipal = wrappedPrincipal;,     }, ,     @Override,     public String getName(),     {,         return _wrappedPrincipal.getName();,     }, ,     @Override,     public int hashCode(),     {,         return _wrappedPrincipal.hashCode();,     }, ,     @Override,     public boolean equals(Object obj),     {,         if (this == obj),         {,             return true;,         }, ,         if (!(obj instanceof AuthenticatedPrincipal)),         {,             return false;,         }, ,         AuthenticatedPrincipal other = (AuthenticatedPrincipal) obj;, ,         return _wrappedPrincipal.equals(other._wrappedPrincipal);,     }, ,     public static AuthenticatedPrincipal getOptionalAuthenticatedPrincipalFromSubject(final Subject authSubject),     {,         return getAuthenticatedPrincipalFromSubject(authSubject, true);,     }, ,     public static AuthenticatedPrincipal getAuthenticatedPrincipalFromSubject(final Subject authSubject),     {,         return getAuthenticatedPrincipalFromSubject(authSubject, false);,     }, ,     private static AuthenticatedPrincipal getAuthenticatedPrincipalFromSubject(final Subject authSubject, boolean isPrincipalOptional),     {,         if (authSubject == null),         {,             throw new IllegalArgumentException("No authenticated subject.");,         }, ,         final Set<AuthenticatedPrincipal> principals = authSubject.getPrincipals(AuthenticatedPrincipal.class);,         int numberOfAuthenticatedPrincipals = principals.size();, ,         if(numberOfAuthenticatedPrincipals == 0 && isPrincipalOptional),         {,             return null;,         },         else,         {,             if (numberOfAuthenticatedPrincipals != 1),             {,                 throw new IllegalArgumentException(,                         "Can't find single AuthenticatedPrincipal in authenticated subject. There were ",                                 + numberOfAuthenticatedPrincipals,                                 + " authenticated principals out of a total number of principals of: " + authSubject.getPrincipals());,             },             return principals.iterator().next();,         },     }, ,     @Override,     public String toString(),     {,         return getName();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/auth/AuthenticatedPrincipalTest.java,,92-95,[        {,             public String getName(),             {,                 return "otherprincipal";],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/server/security/auth/UsernamePrincipal.java,,32-73,[    {,         if (name == null),         {,             throw new IllegalArgumentException("name cannot be null");,         },         _name = name;,     }, ,     public String getName(),     {,         return _name;,     }, ,     public String toString(),     {,         return _name;,     }, ,     @Override,     public int hashCode(),     {,         final int prime = 31;,         return prime * _name.hashCode();,     }, ,     @Override,     public boolean equals(Object obj),     {,         if (this == obj),         {,             return true;,         },         else,         {,             if (obj instanceof UsernamePrincipal),             {,                 UsernamePrincipal other = (UsernamePrincipal) obj;,                 return _name.equals(other._name);,             },             else,             {,                 return false;],,
PERFORMANCE,DM_STRING_CTOR,org/apache/qpid/server/security/auth/UsernamePrincipalTest.java,testEqualityEqualName,47-47,[        final UsernamePrincipal principal1 = new UsernamePrincipal(new String("string"));],,testEqualityEqualName,48-48,[        final UsernamePrincipal principal2 = new UsernamePrincipal(new String("string"));],,
PERFORMANCE,DM_STRING_CTOR,org/apache/qpid/server/security/auth/UsernamePrincipalTest.java,testInequalityNonUserPrincipal,62-62,[        assertFalse(principal.equals(new String("string")));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/AbstractPasswordFilePrincipalDatabase.java,loadPasswordFile,192-192,[                reader = new BufferedReader(new FileReader(_passwordFile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/AbstractPasswordFilePrincipalDatabase.java,writeToFile,255-255,[                BufferedReader reader = new BufferedReader(new FileReader(_passwordFile)))],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/AbstractPasswordFilePrincipalDatabase.java,writeToFile,254-254,[            try(PrintStream writer = new PrintStream(tmp);],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/database/AbstractPasswordFilePrincipalDatabase.java,lookupPassword,117-117,[            return null;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,createPasswordFile,110-110,[            BufferedWriter writer = new BufferedWriter(new FileWriter(testFile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,testCreatePrincipalIsSavedToFile,223-223,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,testUpdatePasswordIsSavedToFile,354-354,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,setUp,72-72,[        _database = new Base64MD5PasswordFilePrincipalDatabase();],,
CORRECTNESS,IJU_TEARDOWN_NO_SUPER,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,tearDown,101-101,[    }],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,testCreatePrincipalIsSavedToFile,223-223,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,testUpdatePasswordIsSavedToFile,354-354,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,tearDown,85-85,[            oldPwdFile.delete();],,tearDown,88-88,[        _pwdFile.delete();],,tearDown,96-96,[                oldPwdFile.delete();],,tearDown,99-99,[            f.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,testSetPasswordFileWithReadOnlyFile,402-402,[        testFile.setReadOnly();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,,162-165,[        {,             public String getName(),             {,                 return USERNAME;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/auth/database/Base64MD5PasswordFilePrincipalDatabaseTest.java,,212-215,[        {,             public String getName(),             {,                 return CREATED_USERNAME;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,createPasswordFile,371-371,[            BufferedWriter writer = new BufferedWriter(new FileWriter(testFile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testCreatePrincipalIsSavedToFile,121-121,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testUpdatePasswordIsSavedToFile,255-255,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,setUp,53-53,[        _database = new PlainPasswordFilePrincipalDatabase();],,
CORRECTNESS,IJU_TEARDOWN_NO_SUPER,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,tearDown,70-70,[    }],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testCreatePrincipalIsSavedToFile,121-121,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testUpdatePasswordIsSavedToFile,255-255,[            BufferedReader reader = new BufferedReader(new FileReader(testFile));],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,tearDown,65-65,[                oldPwdFile.delete();],,tearDown,68-68,[            f.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testCreatePrincipal,99-99,[        testFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testCreatePrincipalIsSavedToFile,145-145,[        testFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testDeletePrincipal,190-190,[        testFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testGetUsers,229-229,[        testFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testSetPasswordFileWithReadOnlyFile,319-319,[        testFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testSetPasswordFileWithReadOnlyFile,304-304,[        testFile.setReadOnly();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,testUpdatePasswordIsSavedToFile,279-279,[        testFile.delete();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,,84-87,[        {,             public String getName(),             {,                 return CREATED_USERNAME;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/auth/database/PlainPasswordFilePrincipalDatabaseTest.java,,110-113,[        {,             public String getName(),             {,                 return TEST_USERNAME;],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/security/auth/manager/AbstractScramAuthenticationManager.java,,51-215,[    private final SecureRandom _random = new SecureRandom();, ,     private int _iterationCount = 4096;, , ,     protected AbstractScramAuthenticationManager(final Map<String, Object> attributes, final Broker broker),     {,         super(attributes, broker);,     }, ,     @Override,     public List<String> getMechanisms(),     {,         return Collections.unmodifiableList(Arrays.asList(getMechanismName(), PLAIN));,     }, ,     protected abstract String getMechanismName();, ,     @Override,     public SaslServer createSaslServer(final String mechanism,,                                        final String localFQDN,,                                        final Principal externalPrincipal),             throws SaslException,     {,         if(getMechanismName().equals(mechanism)),         {,             return new ScramSaslServer(this, getMechanismName(), getHmacName(), getDigestName());,         },         else if(PLAIN.equals(mechanism)),         {,             return new PlainAdapterSaslServer(this);,         },         else,         {,             throw new SaslException("Unknown mechanism: " + mechanism);,         },     }, ,     protected abstract String getDigestName();, ,     @Override,     public AuthenticationResult authenticate(final String username, final String password),     {,         ManagedUser user = getUser(username);,         if(user != null),         {,             final String[] usernamePassword = user.getPassword().split(",");,             byte[] salt = DatatypeConverter.parseBase64Binary(usernamePassword[0]);,             try,             {,                 if(Arrays.equals(DatatypeConverter.parseBase64Binary(usernamePassword[1]),,                                  createSaltedPassword(salt, password))),                 {,                     return new AuthenticationResult(new UsernamePrincipal(username));,                 },             },             catch (IllegalArgumentException e),             {,                 return new AuthenticationResult(AuthenticationResult.AuthenticationStatus.ERROR,e);,             }, ,         }, ,         return new AuthenticationResult(AuthenticationResult.AuthenticationStatus.ERROR);, , ,     }, , ,     public int getIterationCount(),     {,         return _iterationCount;,     }, ,     public byte[] getSalt(final String username),     {,         ManagedUser user = getUser(username);, ,         if(user == null),         {,             // don't disclose that the user doesn't exist, just generate random data so the failure is indistinguishable,             // from the "wrong password" case, ,             byte[] salt = new byte[32];,             _random.nextBytes(salt);,             return salt;,         },         else,         {,             return DatatypeConverter.parseBase64Binary(user.getPassword().split(",")[0]);,         },     }, ,     private static final byte[] INT_1 = new byte[]{0, 0, 0, 1};, ,     public byte[] getSaltedPassword(final String username) throws SaslException,     {,         ManagedUser user = getUser(username);,         if(user == null),         {,             throw new SaslException("Authentication Failed");,         },         else,         {,             return DatatypeConverter.parseBase64Binary(user.getPassword().split(",")[1]);,         },     }, ,     private byte[] createSaltedPassword(byte[] salt, String password),     {,         Mac mac = createShaHmac(password.getBytes(ASCII));, ,         mac.update(salt);,         mac.update(INT_1);,         byte[] result = mac.doFinal();, ,         byte[] previous = null;,         for(int i = 1; i < getIterationCount(); i++),         {,             mac.update(previous != null? previous: result);,             previous = mac.doFinal();,             for(int x = 0; x < result.length; x++),             {,                 result[x] ^= previous[x];,             },         }, ,         return result;, ,     }, ,     private Mac createShaHmac(final byte[] keyBytes),     {,         try,         {,             SecretKeySpec key = new SecretKeySpec(keyBytes, getHmacName());,             Mac mac = Mac.getInstance(getHmacName());,             mac.init(key);,             return mac;,         },         catch (NoSuchAlgorithmException | InvalidKeyException e),         {,             throw new IllegalArgumentException(e.getMessage(), e);,         },     }, ,     protected abstract String getHmacName();, ,     @Override,     protected String createStoredPassword(final String password),     {,         byte[] salt = new byte[32];,         _random.nextBytes(salt);,         byte[] passwordBytes = createSaltedPassword(salt, password);,         return DatatypeConverter.printBase64Binary(salt) + "," + DatatypeConverter.printBase64Binary(passwordBytes);,     }, ,     @Override,     void validateUser(final ManagedUser managedUser),     {,         if(!ASCII.newEncoder().canEncode(managedUser.getName())),         {,             throw new IllegalArgumentException("User names are restricted to characters in the ASCII charset");,         },     }],,
CORRECTNESS,IJU_TEARDOWN_NO_SUPER,org/apache/qpid/server/security/auth/manager/AnonymousAuthenticationManagerTest.java,tearDown,59-59,[    }],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/auth/manager/ExternalAuthenticationTest.java,setUp,61-61,[        setSystemProperty("javax.net.debug", "ssl");],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/auth/manager/ManagedUser.java,doDelete,90-92,[        _authenticationManager.getUserMap().remove(getName());,         deleted();,         return Futures.immediateFuture(null);],,
CORRECTNESS,NP_ALWAYS_NULL,org/apache/qpid/server/security/auth/manager/PlainPasswordFileAuthenticationManagerFactoryTest.java,tearDown,101-101,[            if (_emptyPasswordFile == null && _emptyPasswordFile.exists())],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/manager/PlainPasswordFileAuthenticationManagerFactoryTest.java,tearDown,103-103,[                _emptyPasswordFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/manager/PlainPasswordFileAuthenticationManagerFactoryTest.java,testPasswordFileNotFound,68-68,[        _emptyPasswordFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManager.java,doDelete,265-265,[            file.delete();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManager.java,activate,507-508,[            setState(State.ACTIVE);,             return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManager.java,doDelete,516-530,[                String userName = _user.getName();,                 deleteUserFromDatabase(userName);,                 PreferencesProvider preferencesProvider = getPreferencesProvider();,                 if (preferencesProvider != null),                 {,                     preferencesProvider.deletePreferences(userName);,                 },                 deleted();,                 setState(State.DELETED);,             },             catch (AccountNotFoundException e),             {,                 LOGGER.warn("Failed to delete user " + _user, e);,             },             return Futures.immediateFuture(null);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,testInitialiseWhenPasswordFileExists,152-152,[            fos.write("admin:admin".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,testSaslAuthenticationError,229-229,[        AuthenticationResult result = _manager.authenticate(testServer, "12345".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,testSaslAuthenticationNotCompleted,211-211,[        AuthenticationResult result = _manager.authenticate(testServer, "12345".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,testSaslAuthenticationSuccess,193-193,[        AuthenticationResult result = _manager.authenticate(testServer, "12345".getBytes());],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,deletePasswordFileIfExists,313-313,[            passwordFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,testInitialiseWhenPasswordFileExists,147-147,[        f.createNewFile();],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,evaluateResponse,352-352,[            return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,unwrap,367-367,[            return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/manager/PrincipalDatabaseAuthenticationManagerTest.java,wrap,372-372,[            return null;],,
STYLE,DLS_DEAD_LOCAL_STORE_OF_NULL,org/apache/qpid/server/security/auth/manager/SimpleLDAPAuthenticationManagerImpl.java,closeSafely,540-540,[                ctx = null;],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/auth/manager/SimpleLDAPAuthenticationManagerImpl.java,createInitialDirContext,334-334,[        boolean isLdaps = String.valueOf(env.get(Context.PROVIDER_URL)).trim().toLowerCase().startsWith("ldaps:");],,
MALICIOUS_CODE,DP_CREATE_CLASSLOADER_INSIDE_DO_PRIVILEGED,org/apache/qpid/server/security/auth/manager/ldap/LDAPSSLSocketFactoryGenerator.java,createSubClass,78-78,[            final ClassLoader classLoader = new LDAPSSLSocketFactoryAwareDelegatingClassloader(fqcn, classBytes, sslSocketFactory);],,
MALICIOUS_CODE,DP_DO_INSIDE_DO_PRIVILEGED,org/apache/qpid/server/security/auth/manager/ldap/LDAPSSLSocketFactoryGenerator.java,getStaticFieldByReflection,246-246,[                declaredField.setAccessible(true);],,getStaticFieldByReflection,251-251,[                declaredField.setAccessible(accessible);],,
STYLE,BC_VACUOUS_INSTANCEOF,org/apache/qpid/server/security/auth/manager/ldap/LDAPSSLSocketFactoryGeneratorTest.java,testGetDefaultCreatesInstance,76-76,[        assertTrue(socketFactory instanceof AbstractLDAPSSLSocketFactory);],,
CORRECTNESS,SIO_SUPERFLUOUS_INSTANCEOF,org/apache/qpid/server/security/auth/manager/ldap/LDAPSSLSocketFactoryGeneratorTest.java,testGetDefaultCreatesInstance,76-76,[        assertTrue(socketFactory instanceof AbstractLDAPSSLSocketFactory);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/auth/sasl/CRAMMD5HexInitialiserTest.java,tearDown,88-88,[            _file.delete();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/security/auth/sasl/CRAMMD5HexServerTest.java,generateClientResponse,164-164,[        char[] hexEncodedDigestedPassword = DatatypeConverter.printHexBinary(digestedPasswordBytes).toLowerCase().toCharArray();],,generateClientResponse,173-173,[        String responseAsString = userId + " " + DatatypeConverter.printHexBinary(messageAuthenticationCode).toLowerCase();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/sasl/CRAMMD5HexServerTest.java,generateClientResponse,163-163,[        byte[] digestedPasswordBytes = MessageDigest.getInstance("MD5").digest(clearTextPassword.getBytes());],,generateClientResponse,165-165,[        byte[] hexEncodedDigestedPasswordBytes = new String(hexEncodedDigestedPassword).getBytes();],,generateClientResponse,174-174,[        byte[] resp = responseAsString.getBytes();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/auth/sasl/CRAMMD5HexServerTest.java,,198-201,[        {,             public String getName(),             {,                 return name;],,
STYLE,UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR,org/apache/qpid/server/security/auth/sasl/SaslServerTestCase.java,testFailAuth,52-52,[            byte[] resp = this.server.evaluateResponse(wrongResponse);],,
STYLE,UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR,org/apache/qpid/server/security/auth/sasl/SaslServerTestCase.java,testSuccessfulAuth,43-43,[        byte[] resp = this.server.evaluateResponse(correctResponse);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/sasl/SaslUtil.java,generateCramMD5ClientResponse,68-68,[        return responseAsString.getBytes();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/security/auth/sasl/SaslUtil.java,generateCramMD5HexClientResponse,57-57,[        return responseAsString.getBytes();],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/sasl/anonymous/AnonymousSaslServer.java,evaluateResponse,47-47,[        return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/sasl/external/ExternalSaslServer.java,evaluateResponse,57-57,[        return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/sasl/plain/PlainAdapterSaslServer.java,evaluateResponse,107-107,[            return null;],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/server/security/auth/sasl/plain/PlainPasswordCallback.java,,39-77,[    private boolean _authenticated = false;, ,     /**,      * Constructs a new PlainPasswordCallback with the incoming plain text password.,      * ,      * @throws NullPointerException if the incoming plain text is null,      */,     public PlainPasswordCallback(String prompt, boolean echoOn, String plainPassword),     {,         super(prompt, echoOn);,         ,         if(plainPassword == null),         {,             throw new NullPointerException("Incoming plain text cannot be null");,         }, ,         _plainPassword = plainPassword.toCharArray();,     }, ,     public String getPlainPassword(),     {,         return new String(_plainPassword);,     }, ,     public void setAuthenticated(boolean authenticated),     {,         _authenticated = authenticated;,     }, ,     /**,      * Method to determine if the incoming plain password is authenticated,      * ,      * @return true if the stored password matches the incoming text, or setAuthenticated(true) has been called,      */,     public boolean isAuthenticated(),     {,         char[] storedPassword = getPassword();, ,         return Arrays.equals(_plainPassword, storedPassword) || _authenticated;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/security/auth/sasl/plain/PlainSaslServer.java,evaluateResponse,107-107,[            return null;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/server/security/auth/sasl/plain/PlainSaslServerTest.java,setUp,32-32,[        UsernamePasswordInitialiser handler = new PlainInitialiser();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactory.java,isAclFileSystem,230-230,[        return Files.getFileStore(file.toPath().getRoot()).supportsFileAttributeView(AclFileAttributeView.class);],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactory.java,isPosixFileSystem,225-225,[        return Files.getFileStore(file.toPath().getRoot()).supportsFileAttributeView(PosixFileAttributeView.class);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactory.java,makeKeyFileReadOnly,268-268,[            file.setReadOnly();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactory.java,,346-359,[            {,                 @Override,                 public String name(),                 {,                     return "acl:acl";,                 }, ,                 @Override,                 public List<AclEntry> value() {,                     AclEntry.Builder builder = AclEntry.newBuilder();,                     builder.setType(AclEntryType.ALLOW);,                     builder.setPermissions(EnumSet.allOf(AclEntryPermission.class));,                     builder.setPrincipal(owner);,                     return Collections.singletonList(builder.build());],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactoryTest.java,testPermissionsAreChecked,187-187,[            file.createNewFile();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactoryTest.java,,247-261,[                           {,                                @Override,                                public FileVisitResult visitFile(final Path file, final BasicFileAttributes attrs),                                        throws IOException,                                {,                                    Files.delete(file);,                                    return FileVisitResult.CONTINUE;,                                }, ,                                @Override,                                public FileVisitResult postVisitDirectory(final Path dir, final IOException exc),                                        throws IOException,                                {,                                    Files.delete(dir);,                                    return FileVisitResult.CONTINUE;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_NEEDS_THIS,org/apache/qpid/server/security/encryption/AESKeyFileEncrypterFactoryTest.java,,272-345,[    private class KeyFilePathChecker extends SimpleFileVisitor<Path>,     {, ,         private final String _fileName;,         private final String _subdirName;,         private Path _keyFile;,         private boolean _inKeysSubdir;, ,         public KeyFilePathChecker(),         {,             this(AESKeyFileEncrypterFactory.DEFAULT_KEYS_SUBDIR_NAME, "Broker_" + AESKeyFileEncrypterFactoryTest.this.getName() + ".key");,         }, ,         public KeyFilePathChecker(final String subdirName, final String fileName),         {,             _subdirName = subdirName;,             _fileName = fileName;,         }, ,         @Override,         public FileVisitResult preVisitDirectory(final Path dir, final BasicFileAttributes attrs) throws IOException,         {,             if(!_inKeysSubdir && dir.endsWith(_subdirName)),             {,                 _inKeysSubdir = true;,                 assertFalse(Files.getPosixFilePermissions(dir).contains(PosixFilePermission.OTHERS_READ));,                 assertFalse(Files.getPosixFilePermissions(dir).contains(PosixFilePermission.OTHERS_WRITE));,                 assertFalse(Files.getPosixFilePermissions(dir).contains(PosixFilePermission.OTHERS_EXECUTE));, ,                 assertFalse(Files.getPosixFilePermissions(dir).contains(PosixFilePermission.GROUP_READ));,                 assertFalse(Files.getPosixFilePermissions(dir).contains(PosixFilePermission.GROUP_WRITE));,                 assertFalse(Files.getPosixFilePermissions(dir).contains(PosixFilePermission.GROUP_EXECUTE));,                 return FileVisitResult.CONTINUE;,             },             else,             {,                 return _inKeysSubdir ? FileVisitResult.SKIP_SUBTREE : FileVisitResult.CONTINUE;,             }, ,         }, ,         @Override,         public FileVisitResult visitFile(final Path file, final BasicFileAttributes attrs) throws IOException,         {,             if(_inKeysSubdir),             {,                 if(file.endsWith(_fileName)),                 {,                     _keyFile = file;, ,                     assertFalse(Files.getPosixFilePermissions(file).contains(PosixFilePermission.OTHERS_READ));,                     assertFalse(Files.getPosixFilePermissions(file).contains(PosixFilePermission.OTHERS_WRITE));,                     assertFalse(Files.getPosixFilePermissions(file).contains(PosixFilePermission.OTHERS_EXECUTE));, ,                     assertFalse(Files.getPosixFilePermissions(file).contains(PosixFilePermission.GROUP_READ));,                     assertFalse(Files.getPosixFilePermissions(file).contains(PosixFilePermission.GROUP_WRITE));,                     assertFalse(Files.getPosixFilePermissions(file).contains(PosixFilePermission.GROUP_EXECUTE));, ,                     return FileVisitResult.TERMINATE;,                 },             },             return FileVisitResult.CONTINUE;,         }, ,         @Override,         public FileVisitResult postVisitDirectory(final Path dir, final IOException exc) throws IOException,         {,             _inKeysSubdir = false;,             return FileVisitResult.CONTINUE;,         }, ,         public Path getKeyFile(),         {,             return _keyFile;],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/server/security/group/FileGroupDatabase.java,readGroupFile,207-207,[            if(fileInputStream != null)],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/server/security/group/FileGroupDatabase.java,writeGroupFile,245-245,[            Set<String> users = _groupToUserMap.get(group);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/security/group/FileGroupDatabase.java,,253-262,[        {,             @Override,             public void performAction(File file) throws IOException,             {,                 String comment = "Written " + new Date();,                 try(FileOutputStream fileOutputStream = new FileOutputStream(file)),                 {,                     propertiesFile.store(fileOutputStream, comment);,                 },             }],,
STYLE,DMI_HARDCODED_ABSOLUTE_FILENAME,org/apache/qpid/server/security/group/FileGroupDatabaseTest.java,testMissingGroupFile,67-67,[            _groupDatabase.setGroupFile("/not/a/file");],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/security/group/FileGroupDatabaseTest.java,tearDown,454-454,[                groupFile.delete();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/group/GroupImpl.java,activate,85-86,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/group/GroupImpl.java,doDelete,93-94,[        deleted();,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/group/GroupMemberImpl.java,activate,69-70,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/group/GroupMemberImpl.java,doDelete,77-78,[        deleted();,         return Futures.immediateFuture(null);],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/server/security/group/GroupPrincipal.java,,40-96,[    {,         _groupName = groupName;,     }, ,     public String getName(),     {,         return _groupName;,     }, ,     public boolean addMember(Principal user),     {,         throw new UnsupportedOperationException("Not supported");,     }, ,     public boolean removeMember(Principal user),     {,         throw new UnsupportedOperationException("Not supported");,     }, ,     public boolean isMember(Principal member),     {,         throw new UnsupportedOperationException("Not supported");,     }, ,     public Enumeration<? extends Principal> members(),     {,         throw new UnsupportedOperationException("Not supported");,     }, ,     /**,      * @see java.lang.Object#hashCode(),      */,     public int hashCode(),     {,         final int prime = 37;,         return prime * _groupName.hashCode();,     }, ,     /**,      * @see java.lang.Object#equals(java.lang.Object),      */,     public boolean equals(Object obj),     {,         if (this == obj),         {,             return true;,         },         else,         {,             if (obj instanceof GroupPrincipal),             {,                 GroupPrincipal other = (GroupPrincipal) obj;,                 return _groupName.equals(other._groupName);,             },             else,             {,                 return false;],,
PERFORMANCE,DM_STRING_CTOR,org/apache/qpid/server/security/group/GroupPrincipalTest.java,testEqualityEqualName,61-61,[        final GroupPrincipal principal1 = new GroupPrincipal(new String("string"));],,testEqualityEqualName,62-62,[        final GroupPrincipal principal2 = new GroupPrincipal(new String("string"));],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/group/GroupProviderImpl.java,activate,96-97,[        setState(State.ACTIVE);,         return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/security/group/GroupProviderImpl.java,doDelete,104-105,[        deleted();,         return Futures.immediateFuture(null);],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/stats/StatisticsCounter.java,,116-116,[        _last = _start / _period;],,,81-81,[            if (thisSample > _last)],,,83-83,[                _last = thisSample;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/stats/StatisticsCounter.java,,112-112,[        _peak = 0L;],,,122-122,[        return (double) _peak / ((double) _period / 1000.0d);],,,86-86,[                if (_rate > _peak)],,,88-88,[                    _peak = _rate;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/stats/StatisticsCounter.java,,113-113,[        _rate = 0L;],,,128-128,[        return (double) _rate / ((double) _period / 1000.0d);],,,84-84,[                _rate = _temp;],,,86-86,[                if (_rate > _peak)],,,88-88,[                    _peak = _rate;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/stats/StatisticsCounter.java,,114-114,[        _total = 0L;],,,133-133,[        return _total;],,,92-92,[            _total += value;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/stats/StatisticsReportingTest.java,sendUsing,162-162,[        String content = new String(new byte[size]);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/AbstractDurableConfigurationStoreTestCase.java,,485-491,[                    {, ,                         @Override,                         public Object answer(final InvocationOnMock invocation) throws Throwable,                         {,                             String attrName = requestedAttribute.getValue();,                             return attributes.get(attrName);],,
MALICIOUS_CODE,MS_MUTABLE_COLLECTION_PKGPROTECT,org/apache/qpid/server/store/AbstractJDBCConfigurationStore.java,,62-62,[    public static final Set<String> CONFIGURATION_STORE_TABLE_NAMES = new HashSet<String>(Arrays.asList(CONFIGURED_OBJECTS_TABLE_NAME, CONFIGURED_OBJECT_HIERARCHY_TABLE_NAME));],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/server/store/AbstractJDBCConfigurationStore.java,createConfiguredObjectsTable,460-460,[                stmt.execute("CREATE TABLE "],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/AbstractJDBCConfigurationStore.java,,240-245,[        {{,             put("amq.direct", "direct");,             put("amq.topic", "topic");,             put("amq.fanout", "fanout");,             put("amq.match", "headers");,         }};],,
MALICIOUS_CODE,MS_MUTABLE_COLLECTION,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,,71-71,[    public static final Set<String> MESSAGE_STORE_TABLE_NAMES = new HashSet<String>(Arrays.asList(DB_VERSION_TABLE_NAME,],,
CORRECTNESS,RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,recordXid,787-787,[            for(Transaction.EnqueueRecord enqueue : enqueues)],,recordXid,805-805,[                if(enqueues != null)],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,upgradeIfNecessary,226-228,[                            upgradeFromV6();,                         case 7:,                             upgradeFromV7();],,upgradeIfNecessary,228-237,[                            upgradeFromV7();,                         case DB_VERSION:,                             return;,                         default:,                             throw new StoreException("Unknown database version: " + version);,                     },                 },                 finally,                 {,                     rs.close();],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,createMessageContentTable,420-420,[                stmt.execute("CREATE TABLE "],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,createMetaDataTable,397-397,[                stmt.execute("CREATE TABLE "],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,createXidActionTable,468-468,[                stmt.execute("CREATE TABLE " + XID_ACTIONS_TABLE_NAME + " ( format " + getSqlBigIntType() + " not null,"],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,createXidTable,443-443,[                stmt.execute("CREATE TABLE "],,
SECURITY,SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,createQueueEntryTable,379-379,[                stmt.execute("CREATE TABLE "+ QUEUE_ENTRY_TABLE_NAME +" ( queue_id varchar(36) not null, message_id "],,
SECURITY,SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,setMaxMessageId,158-158,[                conn.prepareStatement(query);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,getContent,1211-1256,[        Connection conn = null;,         PreparedStatement stmt = null;, ,         try,         {,             conn = newAutoCommitConnection();, ,             stmt = conn.prepareStatement(SELECT_FROM_MESSAGE_CONTENT);,             stmt.setLong(1,messageId);,             ResultSet rs = stmt.executeQuery();, ,             int written = 0;, ,             if (rs.next()),             {, ,                 byte[] dataAsBytes = getBlobAsBytes(rs, 1);,                 int size = dataAsBytes.length;, ,                 if (offset > size),                 {,                     throw new StoreException("Offset " + offset + " is greater than message size " + size,                                              + " for message id " + messageId + "!");, ,                 }, ,                 written = size - offset;,                 if(written > dst.remaining()),                 {,                     written = dst.remaining();,                 }, ,                 dst.put(dataAsBytes, offset, written);,             }, ,             return written;, ,         },         catch (SQLException e),         {,             throw new StoreException("Error retrieving content from offset " + offset + " for message " + messageId + ": " + e.getMessage(), e);,         },         finally,         {,             JdbcUtils.closePreparedStatement(stmt, getLogger());,             JdbcUtils.closeConnection(conn, getLogger());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,,289-296,[        {,             private final AtomicInteger _count = new AtomicInteger();,             @Override,             public Thread newThread(final Runnable r),             {,                 final Thread thread = Executors.defaultThreadFactory().newThread(r);,                 thread.setName(parent.getName() + "-store-"+_count.incrementAndGet());,                 return thread;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/AbstractJDBCMessageStore.java,,889-975,[        {,             @Override,             public boolean isComplete(),             {,                 boolean done = result.isDone();,                 try,                 {,                     result.get();,                 },                 catch (InterruptedException e),                 {,                     // this won't happen as we're actually already done;,                 },                 catch (ExecutionException e),                 {,                     if(e.getCause() instanceof RuntimeException),                     {,                         throw (RuntimeException)e.getCause();,                     },                     else if(e.getCause() instanceof Error),                     {,                         throw (Error)e.getCause();,                     },                     else,                     {,                         throw new StoreException(e);,                     },                 },                 return done;,             }, ,             @Override,             public void waitForCompletion(),             {,                 try,                 {,                     result.get();,                 },                 catch (InterruptedException e),                 {,                     throw new StoreException(e);,                 },                 catch (ExecutionException e),                 {,                     if(e.getCause() instanceof RuntimeException),                     {,                         throw (RuntimeException)e.getCause();,                     },                     else if(e.getCause() instanceof Error),                     {,                         throw (Error)e.getCause();,                     },                     else,                     {,                         throw new StoreException(e);,                     },                 },             }, ,             @Override,             public void waitForCompletion(final long timeout) throws TimeoutException,             {, ,                 try,                 {,                     result.get(timeout, TimeUnit.MILLISECONDS);,                 },                 catch (InterruptedException e),                 {,                     throw new StoreException(e);,                 },                 catch (ExecutionException e),                 {,                     if(e.getCause() instanceof RuntimeException),                     {,                         throw (RuntimeException)e.getCause();,                     },                     else if(e.getCause() instanceof Error),                     {,                         throw (Error)e.getCause();,                     },                     else,                     {,                         throw new StoreException(e);,                     },                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/BrokerStoreUpgraderAndRecoverer.java,,796-801,[        {,             @Override,             public void performAction(final ConfiguredObject<?> object),             {,                  object.addChangeListener(configChangeListener);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/BrokerStoreUpgraderAndRecoverer.java,,232-318,[        {,             super("modelVersion", "2.0", "3.0");,         }, ,         @Override,         public void configuredObject(ConfiguredObjectRecord record),         {,             if(record.getType().equals("Port") && isAmqpPort(record.getAttributes())),             {,                 createAliasRecord(record, "nameAlias", "nameAlias");,                 createAliasRecord(record, "defaultAlias", "defaultAlias");,                 createAliasRecord(record, "hostnameAlias", "hostnameAlias");, ,             },             else if(record.getType().equals("User") && "scram".equals(record.getAttributes().get("type")) ),             {,                 Map<String, Object> updatedAttributes = new HashMap<String, Object>(record.getAttributes());,                 updatedAttributes.put("type", "managed");,                 record = new ConfiguredObjectRecordImpl(record.getId(), record.getType(), updatedAttributes, record.getParents());,                 getUpdateMap().put(record.getId(), record);,             },             else if (record.getType().equals("Broker")),             {,                 record = upgradeRootRecord(record);,             },             else if("KeyStore".equals(record.getType())),             {,                 record = upgradeKeyStoreRecordIfTypeTheSame(record, "FileKeyStore");,             },             else if("TrustStore".equals(record.getType())),             {,                 record = upgradeKeyStoreRecordIfTypeTheSame(record, "FileTrustStore");,             }, ,             getNextUpgrader().configuredObject(record);,         }, ,         private ConfiguredObjectRecord upgradeKeyStoreRecordIfTypeTheSame(ConfiguredObjectRecord record, String expectedType),         {,             Map<String, Object> attributes = new HashMap<>(record.getAttributes());,             // Type may not be present, in which case the default type - which is the type affected - will be being used,             if(!attributes.containsKey("type")),             {,                 attributes.put("type", expectedType);,             },             if (expectedType.equals(attributes.get("type"))),             {,                 Object path = attributes.remove("path");,                 attributes.put("storeUrl", path);,                 record = new ConfiguredObjectRecordImpl(record.getId(), record.getType(), attributes, record.getParents());,                 getUpdateMap().put(record.getId(), record);,             },             return record;,         }, ,         private boolean isAmqpPort(final Map<String, Object> attributes),         {,             Object type = attributes.get(ConfiguredObject.TYPE);,             Object protocols = attributes.get(Port.PROTOCOLS);,             String protocolString = protocols == null ? null : protocols.toString();,             return "AMQP".equals(type),                    || ((type == null || "".equals(type.toString().trim())),                        && (protocolString == null,                            || !protocolString.matches(".*\\w.*"),                            || protocolString.contains("AMQP")));, ,         }, ,         private void createAliasRecord(ConfiguredObjectRecord parent, String name, String type),         {,             Map<String,Object> attributes = new HashMap<>();,             attributes.put(VirtualHostAlias.NAME, name);,             attributes.put(VirtualHostAlias.TYPE, type);, ,             final ConfiguredObjectRecord record = new ConfiguredObjectRecordImpl(UUID.randomUUID(),,                                                                                  "VirtualHostAlias",,                                                                                  attributes,,                                                                                  Collections.singletonMap("Port", parent.getId()));,             getUpdateMap().put(record.getId(), record);,             getNextUpgrader().configuredObject(record);,         }, ,         @Override,         public void complete(),         {,             getNextUpgrader().complete();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/BrokerStoreUpgraderAndRecoverer.java,,324-463,[        private final Set<ConfiguredObjectRecord> _knownBdbHaVirtualHostNode = new HashSet<>();,         private final Map<String, ConfiguredObjectRecord> _knownNonBdbHaVirtualHostNode = new HashMap<>();, ,         public Upgrader_3_0_to_3_1(),         {,             super("modelVersion", "3.0", "3.1");,         }, ,         @Override,         public void configuredObject(ConfiguredObjectRecord record),         {,             if (record.getType().equals("Broker")),             {,                 record = upgradeRootRecord(record);, ,                 Map<String, Object> brokerAttributes = new HashMap<>(record.getAttributes());,                 _defaultVirtualHost = (String)brokerAttributes.remove("defaultVirtualHost");, ,                 if (_defaultVirtualHost != null),                 {,                     record = new ConfiguredObjectRecordImpl(record.getId(),,                                                             record.getType(),,                                                             brokerAttributes,,                                                             record.getParents());,                     getUpdateMap().put(record.getId(), record);,                 }, ,                 addMemoryLogger(record);,                 addFileLogger(record);,                 getNextUpgrader().configuredObject(record);,             },             else if (record.getType().equals("VirtualHostNode")),             {,                 if ("BDB_HA".equals(record.getAttributes().get("type"))),                 {,                     _knownBdbHaVirtualHostNode.add(record);,                 },                 else,                 {,                     String nodeName = (String) record.getAttributes().get("name");,                     _knownNonBdbHaVirtualHostNode.put(nodeName, record);,                 },                 getNextUpgrader().configuredObject(record);, ,             },         }, ,         private void addMemoryLogger(final ConfiguredObjectRecord record),         {,             Map<String,Object> attributes = new HashMap<>();,             attributes.put("name", "memory");,             attributes.put("type", "Memory");,             final ConfiguredObjectRecord memoryLogger = new ConfiguredObjectRecordImpl(UUID.randomUUID(),,                                                                                  "BrokerLogger",,                                                                                  attributes,,                                                                                  Collections.singletonMap("Broker",,                                                                                                           record.getId()));,             addNameValueFilter(1, memoryLogger, LogLevel.INFO, "");,             getUpdateMap().put(memoryLogger.getId(), memoryLogger);,             getNextUpgrader().configuredObject(memoryLogger);,         }, ,         private void addFileLogger(final ConfiguredObjectRecord record),         {,             Map<String,Object> attributes = new HashMap<>();,             attributes.put("name", "file");,             attributes.put("type", "File");, ,             final ConfiguredObjectRecord fileLogger = new ConfiguredObjectRecordImpl(UUID.randomUUID(),,                                                                                        "BrokerLogger",,                                                                                        attributes,,                                                                                        Collections.singletonMap("Broker",,                                                                                                                 record.getId()));,             addNameValueFilter(1, fileLogger, LogLevel.INFO, "");,             getUpdateMap().put(fileLogger.getId(), fileLogger);,             getNextUpgrader().configuredObject(fileLogger);,         },         private void addNameValueFilter(int seqNo,,                                         final ConfiguredObjectRecord loggerRecord,,                                         final LogLevel level,,                                         final String loggerName),         {,             Map<String,Object> attributes = new HashMap<>();,             attributes.put("name", String.valueOf(seqNo));,             attributes.put("level", level.name());,             attributes.put("loggerName", loggerName);,             attributes.put("type", "NameAndLevel");, , ,             final ConfiguredObjectRecord filterRecord = new ConfiguredObjectRecordImpl(UUID.randomUUID(),,                                                                                        "BrokerLoggerFilter",,                                                                                        attributes,,                                                                                        Collections.singletonMap("BrokerLogger",,                                                                                                                 loggerRecord.getId()));,             getUpdateMap().put(filterRecord.getId(), filterRecord);,             getNextUpgrader().configuredObject(filterRecord);, ,         }, ,         @Override,         public void complete(),         {,             if (_defaultVirtualHost != null),             {,                 final ConfiguredObjectRecord defaultVirtualHostNode;,                 if (_knownNonBdbHaVirtualHostNode.containsKey(_defaultVirtualHost)),                 {,                     defaultVirtualHostNode = _knownNonBdbHaVirtualHostNode.get(_defaultVirtualHost);,                 },                 else if (_knownBdbHaVirtualHostNode.size() == 1),                 {,                     // We had a default VHN but it didn't match the non-BDBHAVHNs and we have only one BDBHAVHN.,                     // It has to be the target.,                     defaultVirtualHostNode = _knownBdbHaVirtualHostNode.iterator().next();, ,                 },                 else,                 {,                     LOGGER.warn("Unable to identify the target virtual host node for old default virtualhost name : '{}'",,                                 _defaultVirtualHost);,                     defaultVirtualHostNode = null;,                 }, ,                 if (defaultVirtualHostNode != null),                 {,                     final Map<String, Object> updatedAttributes = new HashMap<>(defaultVirtualHostNode.getAttributes());,                     updatedAttributes.put("defaultVirtualHostNode", "true");, ,                     ConfiguredObjectRecordImpl updateRecord =,                             new ConfiguredObjectRecordImpl(defaultVirtualHostNode.getId(),,                                                            defaultVirtualHostNode.getType(),,                                                            updatedAttributes,,                                                            defaultVirtualHostNode.getParents());,                     getUpdateMap().put(updateRecord.getId(), updateRecord);, ,                 }, ,             },             getNextUpgrader().complete();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/BrokerStoreUpgraderAndRecoverer.java,,471-535,[        {{,                 put("DERBY", new AttributesTransformer().,                         addAttributeTransformer("id", copyAttribute()).,                         addAttributeTransformer("name", copyAttribute()).,                         addAttributeTransformer("createdTime", copyAttribute()).,                         addAttributeTransformer("createdBy", copyAttribute()).,                         addAttributeTransformer("storePath", copyAttribute()).,                         addAttributeTransformer("storeUnderfullSize", copyAttribute()).,                         addAttributeTransformer("storeOverfullSize", copyAttribute()));,                 put("Memory",  new AttributesTransformer().,                         addAttributeTransformer("id", copyAttribute()).,                         addAttributeTransformer("name", copyAttribute()).,                         addAttributeTransformer("createdTime", copyAttribute()).,                         addAttributeTransformer("createdBy", copyAttribute()));,                 put("BDB", new AttributesTransformer().,                         addAttributeTransformer("id", copyAttribute()).,                         addAttributeTransformer("name", copyAttribute()).,                         addAttributeTransformer("createdTime", copyAttribute()).,                         addAttributeTransformer("createdBy", copyAttribute()).,                         addAttributeTransformer("storePath", copyAttribute()).,                         addAttributeTransformer("storeUnderfullSize", copyAttribute()).,                         addAttributeTransformer("storeOverfullSize", copyAttribute()).,                         addAttributeTransformer("bdbEnvironmentConfig", mutateAttributeName("context")));,                 put("JDBC", new AttributesTransformer().,                         addAttributeTransformer("id", copyAttribute()).,                         addAttributeTransformer("name", copyAttribute()).,                         addAttributeTransformer("createdTime", copyAttribute()).,                         addAttributeTransformer("createdBy", copyAttribute()).,                         addAttributeTransformer("storePath", mutateAttributeName("connectionURL")).,                         addAttributeTransformer("connectionURL", mutateAttributeName("connectionUrl")).,                         addAttributeTransformer("connectionPool", new AttributeTransformer(),                         {,                             @Override,                             public MutableEntry transform(MutableEntry entry),                             {,                                Object value = entry.getValue();,                                 if ("DEFAULT".equals(value)),                                 {,                                     value = "NONE";,                                 },                                 return new MutableEntry("connectionPoolType", value);,                             },                         }).,                         addAttributeTransformer("jdbcBigIntType", addContextVar("qpid.jdbcstore.bigIntType")).,                         addAttributeTransformer("jdbcBytesForBlob", addContextVar("qpid.jdbcstore.useBytesForBlob")).,                         addAttributeTransformer("jdbcBlobType", addContextVar("qpid.jdbcstore.blobType")).,                         addAttributeTransformer("jdbcVarbinaryType", addContextVar("qpid.jdbcstore.varBinaryType")).,                         addAttributeTransformer("partitionCount", addContextVar("qpid.jdbcstore.bonecp.partitionCount")).,                         addAttributeTransformer("maxConnectionsPerPartition", addContextVar("qpid.jdbcstore.bonecp.maxConnectionsPerPartition")).,                         addAttributeTransformer("minConnectionsPerPartition", addContextVar("qpid.jdbcstore.bonecp.minConnectionsPerPartition")));,                 put("BDB_HA", new AttributesTransformer().,                         addAttributeTransformer("id", copyAttribute()).,                         addAttributeTransformer("createdTime", copyAttribute()).,                         addAttributeTransformer("createdBy", copyAttribute()).,                         addAttributeTransformer("storePath", copyAttribute()).,                         addAttributeTransformer("storeUnderfullSize", copyAttribute()).,                         addAttributeTransformer("storeOverfullSize", copyAttribute()).,                         addAttributeTransformer("haNodeName", mutateAttributeName("name")).,                         addAttributeTransformer("haGroupName", mutateAttributeName("groupName")).,                         addAttributeTransformer("haHelperAddress", mutateAttributeName("helperAddress")).,                         addAttributeTransformer("haNodeAddress", mutateAttributeName("address")).,                         addAttributeTransformer("haDesignatedPrimary", mutateAttributeName("designatedPrimary")).,                         addAttributeTransformer("haReplicationConfig", mutateAttributeName("context")).,                         addAttributeTransformer("bdbEnvironmentConfig", mutateAttributeName("context")));,             }};],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/server/store/BrokerStoreUpgraderAndRecovererTest.java,remove,550-550,[            return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/BrokerStoreUpgraderAndRecovererTest.java,,524-577,[        {,             super();,             this.records = records;,         }, ,         @Override,         public void openConfigurationStore(ConfiguredObject<?> parent,,                                            final boolean overwrite,,                                            final ConfiguredObjectRecord... initialRecords) throws StoreException,         {,         }, ,         @Override,         public void upgradeStoreStructure() throws StoreException,         {, ,         }, ,         @Override,         public void create(ConfiguredObjectRecord object) throws StoreException,         {,         }, ,         @Override,         public UUID[] remove(ConfiguredObjectRecord... objects) throws StoreException,         {,             return null;,         }, ,         @Override,         public void update(boolean createIfNecessary, ConfiguredObjectRecord... records) throws StoreException,         {,         }, ,         @Override,         public void closeConfigurationStore() throws StoreException,         {,         }, ,         @Override,         public void onDelete(ConfiguredObject<?> parent),         {,         }, ,         @Override,         public void visitConfiguredObjectRecords(ConfiguredObjectRecordHandler handler) throws StoreException,         {,             handler.begin();,             for (ConfiguredObjectRecord record : records),             {,                 handler.handle(record);,             },             handler.end();,         }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/store/ConfiguredObjectRecordConverter.java,loadChild,101-101,[            String singularName = childType.toLowerCase();],,loadChild,127-127,[                    final String otherParentAttr = otherParent.getSimpleName().toLowerCase();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/store/JsonFileConfigStore.java,build,438-438,[                map.put(parentType.toLowerCase(), record.getParents().get(parentType));],,build,455-455,[                String singularName = childClass.getSimpleName().toLowerCase();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/store/JsonFileConfigStore.java,load,301-301,[                records = configuredObjectRecordConverter.readFromJson(_rootClass, _parent, new FileReader(configFile));],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/store/JsonFileConfigStore.java,,123-123,[        _classNameMapping = generateClassNameMap(_parent.getModel(), _rootClass);],,,339-339,[        else if(!_classNameMapping.containsKey(record.getType()))],,,550-550,[            else if(!_classNameMapping.containsKey(type))],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/server/store/JsonFileConfigStore.java,load,301-301,[                records = configuredObjectRecordConverter.readFromJson(_rootClass, _parent, new FileReader(configFile));],,load,304-304,[            if(records.isEmpty())],,load,310-310,[            for(ConfiguredObjectRecord record : records)],,load,321-321,[            if(updated)],,load,329-329,[        }],,load,330-330,[    }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/JsonFileConfigStore.java,getFileLock,242-242,[            lockFile.createNewFile();],,
MALICIOUS_CODE,MS_MUTABLE_ARRAY,org/apache/qpid/server/store/derby/DerbyMessageStoreQuotaEventsTest.java,,42-42,[    private static final long OVERFULL_SIZE = (long) (MESSAGE_DATA.length * 3 * NUMBER_OF_MESSAGES_TO_OVERFILL_STORE * 0.8);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/store/MessageStoreTestCase.java,<init>,139-139,[            private final UUID _id = UUID.nameUUIDFromBytes(queueName.getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/MessageStoreTestCase.java,,138-156,[        {,             private final UUID _id = UUID.nameUUIDFromBytes(queueName.getBytes());, ,             @Override,             public String getName(),             {,                 return queueName;,             }, ,             @Override,             public UUID getId(),             {,                 return _id;,             }, ,             @Override,             public MessageDurability getMessageDurability(),             {,                 return MessageDurability.DEFAULT;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/MessageStoreTestCase.java,,159-175,[        {,             @Override,             public long getMessageNumber(),             {,                 return message.getMessageNumber();,             }, ,             @Override,             public boolean isPersistent(),             {,                 return true;,             }, ,             @Override,             public StoredMessage getStoredMessage(),             {,                 return message;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/MessageStoreTestCase.java,,374-380,[        {, ,             @Override,             public boolean handle(StoredMessage<?> storedMessage),             {,                 retrievedMessageRef.set(storedMessage);,                 return true;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/MessageStoreTestCase.java,,392-398,[        {, ,             @Override,             public boolean handle(StoredMessage<?> storedMessage),             {,                 retrievedMessageRef.set(storedMessage);,                 return true;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/MessageStoreTestCase.java,,568-596,[        {,             _expect = expect;,         }, ,         @Override,         public boolean matches(final Object argument),         {,             if(argument.getClass().isArray() && Transaction.DequeueRecord.class.isAssignableFrom(argument.getClass().getComponentType())),             {,                 Transaction.DequeueRecord[] actual = (Transaction.DequeueRecord[]) argument;,                 if(actual.length == _expect.length),                 {,                     for(int i = 0; i < actual.length; i++),                     {,                         if(!actual[i].getEnqueueRecord().getQueueId().equals(_expect[i].getEnqueueRecord().getQueueId()),                            || actual[i].getEnqueueRecord().getMessageNumber() != _expect[i].getEnqueueRecord().getMessageNumber()),                         {,                             return false;,                         },                     },                     return true;,                 },                 else,                 {,                     return false;,                 }, ,             },             return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/MessageStoreTestCase.java,,506-519,[        {,             _queueId = queueId;,             _messageId = messageId;,         }, ,         @Override,         public boolean matches(final Object argument),         {,             if(argument instanceof MessageEnqueueRecord),             {,                 MessageEnqueueRecord record = (MessageEnqueueRecord)argument;,                 return record.getQueueId().equals(_queueId) && record.getMessageNumber() == _messageId;,             },             return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/MessageStoreTestCase.java,,450-465,[        {,             super();,             _messageNumber = messageNumber;,         }, ,         public boolean matches(Object obj),         {,             return obj instanceof StoredMessage && ((StoredMessage<?>)obj).getMessageNumber() == _messageNumber;,         }, ,         @Override,         public void describeTo(final Description description),         {,             description.appendText("Expected messageNumber:");,             description.appendValue(_messageNumber);,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/MessageStoreTestCase.java,,472-496,[        private final Set<Long> _enqueuedIds = new HashSet<Long>();, ,         public QueueFilteringMessageInstanceHandler(UUID queueId),         {,             _queueId = queueId;,         }, ,         @Override,         public boolean handle(final MessageEnqueueRecord record),         {,             long messageId = record.getMessageNumber();,             if (record.getQueueId().equals(_queueId)),             {,                 if (_enqueuedIds.contains(messageId)),                 {,                     fail("Queue with id " + _queueId + " contains duplicate message ids");,                 },                 _enqueuedIds.add(messageId);,             },             return true;,         }, ,         public Set<Long> getEnqueuedIds(),         {,             return _enqueuedIds;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/MessageStoreTestCase.java,,530-558,[        {,             _expect = expect;,         }, ,         @Override,         public boolean matches(final Object argument),         {,             if(argument.getClass().isArray() && Transaction.EnqueueRecord.class.isAssignableFrom(argument.getClass().getComponentType())),             {,                 Transaction.EnqueueRecord[] actual = (Transaction.EnqueueRecord[]) argument;,                 if(actual.length == _expect.length),                 {,                     for(int i = 0; i < actual.length; i++),                     {,                         if(!actual[i].getResource().getId().equals(_expect[i].getResource().getId()),                                 || actual[i].getMessage().getMessageNumber() != _expect[i].getMessage().getMessageNumber()),                         {,                             return false;,                         },                     },                     return true;,                 },                 else,                 {,                     return false;,                 }, ,             },             return false;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/TestMemoryMessageStore.java,,39-44,[                        {,                             @Override,                             public boolean handle(StoredMessage<?> storedMessage),                             {,                                 counter.incrementAndGet();,                                 return true;],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/store/TestRecord.java,hashCode,57-57,[        result = prime * result + ((_message == null) ? 0 : new Long(_message.getMessageNumber()).hashCode());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecoverer.java,,557-562,[            {,                 @Override,                 public void performAction(final ConfiguredObject<?> object),                 {,                     object.addChangeListener(configChangeListener);,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecoverer.java,,262-295,[        {,             super("modelVersion", "0.2", "0.3");,         }, ,         @SuppressWarnings("unchecked"),         @Override,         public void configuredObject(ConfiguredObjectRecord record),         {,             if("VirtualHost".equals(record.getType())),             {,                 record = upgradeRootRecord(record);,             },             else if("Queue".equals(record.getType())),             {,                 Map<String, Object> newAttributes = new LinkedHashMap<String, Object>();,                 if(record.getAttributes().get(ARGUMENTS) instanceof Map),                 {,                     newAttributes.putAll(QueueArgumentsConverter.convertWireArgsToModel((Map<String, Object>) record.getAttributes(),                             .get(ARGUMENTS)));,                 },                 newAttributes.putAll(record.getAttributes());, ,                 record = new ConfiguredObjectRecordImpl(record.getId(), record.getType(), newAttributes, record.getParents());,                 getUpdateMap().put(record.getId(), record);,             }, ,             getNextUpgrader().configuredObject(record);,         }, ,         @Override,         public void complete(),         {,             getNextUpgrader().complete();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecoverer.java,,309-353,[        {,             super("modelVersion", "0.3", "0.4");,         }, , ,         @Override,         public void configuredObject(ConfiguredObjectRecord record),         {,             if("VirtualHost".equals(record.getType())),             {,                 record = upgradeRootRecord(record);,             },             else if(Queue.class.getSimpleName().equals(record.getType())),             {,                 Map<String, Object> newAttributes = new LinkedHashMap<String, Object>(record.getAttributes());,                 if(record.getAttributes().get(EXCLUSIVE) instanceof Boolean),                 {,                     boolean isExclusive = (Boolean) record.getAttributes().get(EXCLUSIVE);,                     newAttributes.put(EXCLUSIVE, isExclusive ? "CONTAINER" : "NONE");,                     if(!isExclusive && record.getAttributes().containsKey("owner")),                     {,                         newAttributes.remove("owner");,                     },                 },                 else,                 {,                     newAttributes.remove("owner");,                 },                 if(!record.getAttributes().containsKey("durable")),                 {,                     newAttributes.put("durable", "true");,                 }, ,                 record = new ConfiguredObjectRecordImpl(record.getId(),record.getType(),newAttributes, record.getParents());,                 getUpdateMap().put(record.getId(), record);,             }, ,             getNextUpgrader().configuredObject(record);,         }, ,         @Override,         public void complete(),         {,             getNextUpgrader().complete();,         }],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecoverer.java,complete,408-408,[                    String dleExchangeName = _queuesMissingAlternateExchange.get(queueId);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecoverer.java,,497-516,[        {,             super("modelVersion", "2.0", "3.0");,         }, ,         @Override,         public void configuredObject(ConfiguredObjectRecord record),         {, ,             if("VirtualHost".equals(record.getType())),             {,                 record = upgradeRootRecord(record);,             },             getNextUpgrader().configuredObject(record);,         }, ,         @Override,         public void complete(),         {,             getNextUpgrader().complete();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecoverer.java,,522-541,[        {,             super("modelVersion", "3.0", "3.1");,         }, ,         @Override,         public void configuredObject(ConfiguredObjectRecord record),         {, ,             if("VirtualHost".equals(record.getType())),             {,                 record = upgradeRootRecord(record);,             },             getNextUpgrader().configuredObject(record);,         }, ,         @Override,         public void complete(),         {,             getNextUpgrader().complete();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecovererTest.java,,125-130,[                {,                     @Override,                     public Void run(),                     {,                         host.open();,                         return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecovererTest.java,,168-173,[                {,                     @Override,                     public Void run(),                     {,                         host.open();,                         return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/VirtualHostStoreUpgraderAndRecovererTest.java,,259-272,[        {,             @Override,             public Object answer(final InvocationOnMock invocation) throws Throwable,             {,                 Iterator<ConfiguredObjectRecord> iterator = asList(records).iterator();,                 ConfiguredObjectRecordHandler handler = (ConfiguredObjectRecordHandler) invocation.getArguments()[0];,                 handler.begin();,                 boolean handlerContinue = true;,                 while(iterator.hasNext() && handlerContinue),                 {,                     handlerContinue = handler.handle(iterator.next());,                 },                 handler.end();,                 return null;],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/server/store/berkeleydb/AbstractBDBMessageStore.java,storedSizeChange,844-844,[                long newSize = _totalStoreSize += 2*delta;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/store/berkeleydb/AbstractBDBMessageStore.java,,116-116,[        _totalStoreSize = getSizeOnDisk();],,,844-844,[                long newSize = _totalStoreSize += 2*delta;],,,858-858,[                    long oldSize = _totalStoreSize;],,,848-848,[                    _totalStoreSize = getSizeOnDisk();],,,850-850,[                    if(_totalStoreSize > getPersistentSizeHighThreshold())],,,859-859,[                    _totalStoreSize = getSizeOnDisk();],,,861-861,[                    if(oldSize <= _totalStoreSize)],,,870-870,[                    if(_totalStoreSize < getPersistentSizeLowThreshold())],,,866-866,[                        _totalStoreSize = getSizeOnDisk();],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/server/store/berkeleydb/BDBBackup.java,,90-90,[    public static final String[][] COMMAND_LINE_SPEC =],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/server/store/berkeleydb/BDBBackup.java,takeBackupNoLock,247-247,[            fileInputStreams = new FileInputStream[fileSet.length];],,takeBackupNoLock,238-238,[            fileSet = fromDirFile.listFiles(new FilenameFilter()],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/BDBBackup.java,takeBackupNoLock,216-216,[            toDirFile.mkdirs();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/store/berkeleydb/BDBBackup.java,createSourceDirEnvironment,349-349,[        return new Environment(new File(fromdir), new EnvironmentConfig());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBBackup.java,,239-242,[                    {,                         public boolean accept(File dir, String name),                         {,                             return name.endsWith(LOG_FILE_SUFFIX);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/BDBBackupTest.java,setUp,67-67,[        _backupToDir.mkdirs();],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,performTransactionAndAwaitForRemoteNodeToGetAware,648-648,[        assertEquals("Last transaction was not replicated", new Long(remote.getLastKnownReplicationTransactionId()), node1.getLastKnownReplicationTransactionId() );],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,testIntruderConnected,679-679,[        environmentPathFile.mkdirs();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,testValidateOnCreateForInvalidStorePath,772-772,[        file.createNewFile();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,,218-227,[        {,             @Override,             public void childAdded(ConfiguredObject<?> object, ConfiguredObject<?> child),             {,                 if (child instanceof RemoteReplicationNode),                 {,                     remoteNodeLatch.countDown();,                     lastSeenReplica.set((RemoteReplicationNode<?>)child);,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,,511-519,[        {,             @Override,             public void stateChanged(ConfiguredObject<?> object, State oldState, State newState),             {,                 if (newState == State.ERRORED),                 {,                     stopLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,,560-568,[        {,             @Override,             public void stateChanged(ConfiguredObject<?> object, State oldState, State newState),             {,                 if (newState == State.ERRORED),                 {,                     stopLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,,608-617,[        {,             @Override,             public void attributeSet(ConfiguredObject<?> object, String attributeName, Object oldAttributeValue, Object newAttributeValue),             {,                 if (attributeName.equals(BDBHAVirtualHostNode.PERMITTED_NODES)),                 {,                     permittedNodesChangeCounter.incrementAndGet();,                     _permittedNodesLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBHAVirtualHostNodeTest.java,,665-673,[        {,             @Override,             public void stateChanged(ConfiguredObject<?> object, State oldState, State newState),             {,                 if (newState == State.ERRORED),                 {,                     stopLatch.countDown();,                 },             }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/store/berkeleydb/BDBMessageStoreTest.java,createMessageProperties_0_10,229-229,[        msgProps_0_10.setCorrelationId("qwerty".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/store/berkeleydb/BDBMessageStoreTest.java,testBDBMessagePersistence,173-173,[        String returnedPayloadString_0_8 = new String(recoveredContent_0_8.array());],,testBDBMessagePersistence,205-205,[        String returnedPayloadString_0_10 = new String(recoveredContent.array());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/store/berkeleydb/BDBMessageStoreTest.java,testBDBMessagePersistence,93-93,[        ByteBuffer firstContentBytes_0_8 = ByteBuffer.wrap(bodyText.substring(0, 10).getBytes());],,testBDBMessagePersistence,94-94,[        ByteBuffer secondContentBytes_0_8 = ByteBuffer.wrap(bodyText.substring(10).getBytes());],,testBDBMessagePersistence,96-96,[        ByteBuffer completeContentBody_0_10 = ByteBuffer.wrap(bodyText.getBytes());],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/server/store/berkeleydb/BDBStoreUpgradeTestPreparer.java,<init>,96-96,[        _connFac = new AMQConnectionFactory(CONN_URL);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBStoreUpgradeTestPreparer.java,,138-142,[        {,             public void onException(JMSException e),             {,                 _logger.error("Error setting exception listener for connection", e);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBStoreUpgradeTestPreparer.java,,309-313,[        {,             public void onException(JMSException e),             {,                 _logger.error("Error setting exception listener for connection", e);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/BDBStoreUpgradeTestPreparer.java,,354-358,[        {,             public void onException(JMSException e),             {,                 _logger.error("Error setting exception listener for connection", e);,             }],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/store/berkeleydb/BDBUpgradeTest.java,testDurableSubscriptionWithoutSelector,186-186,[            assertEquals("DurableSubscription backing queue should have 1 message on it initially",],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/store/berkeleydb/BDBUpgradeTest.java,testSelectorDurability,129-129,[            assertEquals("DurableSubscription backing queue should have 1 message on it initially",],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/BDBUpgradeTest.java,setUp,97-97,[        directory.mkdirs();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/server/store/berkeleydb/CoalescingCommiter.java,explicitNotify,230-230,[                _lock.notify();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/server/store/berkeleydb/CommitThreadWrapper.java,explicitNotify,221-221,[                _lock.notify();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/StandardEnvironmentFacadeFactory.java,,49-65,[        {,             @Override,             public String getName(),             {,                 return parent.getName();,             }, ,             @Override,             public String getStorePath(),             {,                 return storeLocation;,             }, ,             @Override,             public Map<String, String> getParameters(),             {,                 return BDBUtils.getContextSettingsWithNameMatchingRegExpPattern(parent, NON_REP_JE_PARAM_PATTERN);],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/server/store/berkeleydb/StandardEnvironmentFacadeFactoryTest.java,testCreateEnvironmentFacade,90-90,[            when(_parent.getContextValue(String.class, key)).thenReturn(_jeProperties.get(key));],,testCreateEnvironmentFacade,101-101,[                when(_parent.getContextValue(String.class, key)).thenReturn(_jeProperties.get(key));],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/store/berkeleydb/logging/Slf4jLoggingHandler.java,isEnabledFor,153-154,[        final MappedLevel mappedLevel = LEVEL_MAP.get(level);,         return mappedLevel == null ? false : mappedLevel.isEnabled(BDB_LOGGER);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/logging/Slf4jLoggingHandler.java,,41-45,[        {,             @Override,             public String format(final LogRecord record),             {,                 return prefix + " " + formatMessage(record);],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/replication/BDBHAVirtualHostNodeRestTest.java,testIntruderProtection,296-296,[        environmentPathFile.mkdirs();],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/store/berkeleydb/replication/MultiNodeTest.java,testQuorumOverride,400-400,[        assertEquals("Broker has unexpected quorum override", new Integer(0), attributes.get(BDBHAVirtualHostNode.QUORUM_OVERRIDE));],,testQuorumOverride,404-404,[        assertEquals("Broker has unexpected quorum override", new Integer(1), attributes.get(BDBHAVirtualHostNode.QUORUM_OVERRIDE));],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/replication/MultiNodeTest.java,testClusterCannotStartWithIntruder,456-456,[        environmentPathFile.mkdirs();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/MultiNodeTest.java,,288-337,[        {,             @Override,             public void run(),             {,                 try,                 {,                     int count = 0;,                     MessageProducer producer = session.createProducer(destination);, ,                     while (keepRunning.get()),                     {,                         String messageText = "message" + count;,                         try,                         {,                             Message message = session.createTextMessage(messageText);,                             producer.send(message);,                             session.commit();,                             LOGGER.debug("Sent message " + count);, ,                             producedOneBefore.countDown();, ,                             if (masterTransferred.get()),                             {,                                 producedOneAfter.countDown();,                             },                             count++;,                         },                         catch (javax.jms.IllegalStateException ise),                         {,                             throw ise;,                         },                         catch (TransactionRolledBackException trbe),                         {,                             // Pass - failover in prgoress,                         },                         catch(JMSException je),                         {,                             // Pass - failover in progress,                         },                     },                 },                 catch (Exception e),                 {,                     workerException.set(e);,                 },                 finally,                 {,                     workerShutdown.countDown();,                 },             }],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/server/store/berkeleydb/replication/MultiNodeTest.java,assertNoFailoverCompletionWithin,527-527,[            _failoverCompletionLatch.await(delay, TimeUnit.MILLISECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/store/berkeleydb/replication/MultiNodeTest.java,,500-545,[    private final class FailoverAwaitingListener implements ConnectionListener,     {,         private final CountDownLatch _failoverCompletionLatch = new CountDownLatch(1);, ,         @Override,         public boolean preResubscribe(),         {,             return true;,         }, ,         @Override,         public boolean preFailover(boolean redirect),         {,             return true;,         }, ,         public void awaitFailoverCompletion(long delay) throws InterruptedException,         {,             if (!_failoverCompletionLatch.await(delay, TimeUnit.MILLISECONDS)),             {,                 LOGGER.warn("Test thread dump:\n\n" + TestUtils.dumpThreads() + "\n");,             },             assertEquals("Failover did not occur", 0, _failoverCompletionLatch.getCount());,         }, ,         public void assertNoFailoverCompletionWithin(long delay) throws InterruptedException,         {,             _failoverCompletionLatch.await(delay, TimeUnit.MILLISECONDS);,             assertEquals("Failover occurred unexpectedly", 1L, _failoverCompletionLatch.getCount());,         }, ,         @Override,         public void failoverComplete(),         {,             _failoverCompletionLatch.countDown();,         }, ,         @Override,         public void bytesSent(long count),         {,         }, ,         @Override,         public void bytesReceived(long count),         {,         }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacade.java,<init>,254-254,[        _groupChangeExecutor.submit(new RemoteNodeStateLearner());],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacade.java,restartEnvironment,987-987,[            _stateChangeExecutor.submit(new Runnable()],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacade.java,stateChange,605-605,[            _stateChangeExecutor.submit(new Runnable()],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,createIntruder,909-909,[        environmentPathFile.mkdirs();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,,645-658,[        {,             @Override,             public void stateChange(StateChangeEvent event) throws RuntimeException,             {,                 ReplicatedEnvironment.State state = event.getState();,                 if (state == ReplicatedEnvironment.State.REPLICA),                 {,                     replicaStateLatch.countDown();,                 },                 if (state == ReplicatedEnvironment.State.MASTER),                 {,                     masterStateLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,,848-853,[            Future<Transaction> future = service.submit(new Callable<Transaction>(){, ,                 @Override,                 public Transaction call() throws Exception,                 {,                     return  replica.getEnvironment().beginTransaction(null, null);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,,514-528,[        {,             @Override,             public void stateChange(StateChangeEvent stateChangeEvent) throws RuntimeException,             {,                 if (stateChangeEvent.getState() == State.MASTER),                 {,                     masterStateChangeCount.incrementAndGet();,                     masterLatch.countDown();,                 },                 else if (stateChangeEvent.getState() == State.UNKNOWN),                 {,                     unknownStateChangeCount.incrementAndGet();,                     unknownLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,,557-571,[        StateChangeListener stateChangeListener = new StateChangeListener(){, ,             @Override,             public void stateChange(StateChangeEvent event) throws RuntimeException,             {,                 ReplicatedEnvironment.State state = event.getState();,                 if (state == ReplicatedEnvironment.State.REPLICA),                 {,                     firstNodeReplicaStateLatch.countDown();,                 },                 if (state == ReplicatedEnvironment.State.MASTER),                 {,                     firstNodeMasterStateLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,,586-599,[        {,             @Override,             public void stateChange(StateChangeEvent event) throws RuntimeException,             {,                 ReplicatedEnvironment.State state = event.getState();,                 if (state == ReplicatedEnvironment.State.REPLICA),                 {,                     replicaStateLatch.countDown();,                 },                 if (state == ReplicatedEnvironment.State.MASTER),                 {,                     masterStateLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/replication/ReplicatedEnvironmentFacadeTest.java,,616-630,[        StateChangeListener stateChangeListener = new StateChangeListener(){, ,             @Override,             public void stateChange(StateChangeEvent event) throws RuntimeException,             {,                 ReplicatedEnvironment.State state = event.getState();,                 if (state == ReplicatedEnvironment.State.REPLICA),                 {,                     firstNodeReplicaStateLatch.countDown();,                 },                 if (state == ReplicatedEnvironment.State.MASTER),                 {,                     firstNodeMasterStateLatch.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractStoreUpgrade.java,,67-71,[        {,             @Override,             public Long call(Database sourceDatabase, Database targetDatabase, Transaction transaction),             {,                 return sourceDatabase.count();],,
MALICIOUS_CODE,MS_FINAL_PKGPROTECT,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractUpgradeTestCase.java,,67-67,[    public static int[] QUEUE_SIZES = { 1, 1, 10, 3, 0, 0, 0, 1};],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractUpgradeTestCase.java,,65-65,[    public static final String[] QUEUE_NAMES = { "clientid:myDurSubName", "clientid:mySelectorDurSubName", QUEUE_NAME, NON_DURABLE_QUEUE_NAME,],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractUpgradeTestCase.java,,68-68,[    public static int TOTAL_MESSAGE_NUMBER = 16;],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractUpgradeTestCase.java,copyStore,121-121,[        storeLocation.mkdirs();],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractUpgradeTestCase.java,call,166-166,[                return new Long(sourceDatabase.count());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/AbstractUpgradeTestCase.java,,161-166,[        {, ,             @Override,             public Long call(Database sourceDatabase, Database targetDatabase, Transaction transaction),             {,                 return new Long(sourceDatabase.count());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/DatabaseTemplate.java,,88-94,[        {, ,             @Override,             public Void call(Database sourceDatabase, Database targetDatabase, Transaction transaction),             {,                 databaseRunnable.run(sourceDatabase, targetDatabase, transaction);,                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4To5.java,,170-181,[            {,                 @Override,                 public void processEntry(final Database sourceDatabase, final Database targetDatabase,,                         final Transaction transaction, final DatabaseEntry key, final DatabaseEntry value),                 {,                     QueueRecord record = binding.entryToObject(value);,                     DatabaseEntry newValue = new DatabaseEntry();,                     binding.objectToEntry(record, newValue);,                     targetDatabase.put(transaction, key, newValue);,                     existingQueues.add(record.getNameShortString().toString());,                     sourceDatabase.delete(transaction, key);,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4To5.java,,198-208,[        {,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 PartialBindingRecord record = binding.entryToObject(key);,                 if (exchangeNames.contains(record.getExchangeName()) && record.getQueueName().contains(COLON)),                 {,                     queues.add(record.getQueueName());,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4To5.java,,278-290,[            {,                 @Override,                 public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                         DatabaseEntry key, DatabaseEntry value),                 {,                     QueueEntryKey entryKey = queueEntryKeyBinding.entryToObject(key);,                     Long messageId = entryKey.getMessageId();, ,                     if (messagesToDiscard.contains(messageId)),                     {,                         messagesToDiscard.remove(messageId);,                     },                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4To5.java,,341-352,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 ExchangeRecord record = binding.entryToObject(value);,                 if (AMQShortString.valueOf(ExchangeDefaults.TOPIC_EXCHANGE_CLASS).equals(record.getType())),                 {,                     topicExchanges.add(record.getName());,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4To5.java,,366-389,[            {, ,                 @Override,                 public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                         DatabaseEntry key, DatabaseEntry value),                 {,                     StorableMessageMetaData metaData = binding.entryToObject(value);, ,                     // get message id,                     Long messageId = LongBinding.entryToLong(key);, ,                     // ONLY copy data if message is delivered to existing queue,                     if (messagesToDiscard.contains(messageId)),                     {,                         return;,                     },                     DatabaseEntry newValue = new DatabaseEntry();,                     binding.objectToEntry(metaData, newValue);, ,                     targetDatabase.put(transaction, key, newValue);,                     targetDatabase.put(transaction, key, newValue);,                     deleteCurrent();, ,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4To5.java,,408-447,[            {,                 private long _prevMsgId = -1;,                 private int _bytesSeenSoFar;, ,                 @Override,                 public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                         DatabaseEntry key, DatabaseEntry value),                 {,                     // determine the msgId of the current entry,                     MessageContentKey contentKey = keyBinding.entryToObject(key);,                     long msgId = contentKey.getMessageId();, ,                     // ONLY copy data if message is delivered to existing queue,                     if (messagesToDiscard.contains(msgId)),                     {,                         return;,                     },                     // if this is a new message, restart the byte offset count.,                     if (_prevMsgId != msgId),                     {,                         _bytesSeenSoFar = 0;,                     }, ,                     // determine the content size,                     ByteBuffer content = contentBinding.entryToObject(value);,                     int contentSize = content.limit();, ,                     // create the new key: id + previously seen data count,                     MessageContentKey newKey = new MessageContentKey(msgId, _bytesSeenSoFar);,                     DatabaseEntry newKeyEntry = new DatabaseEntry();,                     keyBinding.objectToEntry(newKey, newKeyEntry);, ,                     DatabaseEntry newValueEntry = new DatabaseEntry();,                     contentBinding.objectToEntry(content, newValueEntry);, ,                     targetDatabase.put(null, newKeyEntry, newValueEntry);, ,                     _prevMsgId = msgId;,                     _bytesSeenSoFar += contentSize;,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,139-152,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 BindingRecord bindingRecord = bindingTuple.entryToObject(key);, ,                 AMQShortString queueName = bindingRecord.getQueueName();,                 AMQShortString exchangeName = bindingRecord.getExchangeName();,                 AMQShortString routingKey = bindingRecord.getRoutingKey();,                 FieldTable arguments = bindingRecord.getArguments();,                 queueBindings.add(new BindingRecord(exchangeName, queueName, routingKey, arguments));,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,197-209,[        {,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 QueueEntryKey entryKey = queueEntryKeyBinding.entryToObject(key);,                 String thisQueueName = entryKey.getQueueName().toString();,                 if (thisQueueName.equals(queueName)),                 {,                     deliveryCounter.incrementAndGet();,                     messagesForQueue.add(entryKey.getMessageId());,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,224-237,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 Long messageId = LongBinding.entryToLong(key);, ,                 boolean messageIsForTheRightQueue = messageIdsForQueue.contains(messageId);,                 if (messageIsForTheRightQueue),                 {,                     metadataCounter.incrementAndGet();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,250-266,[        {,             private long _prevMsgId = -1;, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 MessageContentKey contentKey = keyBinding.entryToObject(key);,                 long msgId = contentKey.getMessageId();, ,                 if (_prevMsgId != msgId && messageIdsForQueue.contains(msgId)),                 {,                     contentCounter.incrementAndGet();,                 }, ,                 _prevMsgId = msgId;,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,281-290,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 QueueRecord record = binding.entryToObject(value);,                 String queueName = record.getNameShortString().toString();,                 actualQueueNames.add(queueName);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,305-318,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 QueueRecord record = binding.entryToObject(value);,                 String queueName = record.getNameShortString().toString();,                 if (queueName.equals(queueName)),                 {,                     foundQueue.set(true);,                     actualOwner.set(AMQShortString.toString(record.getOwner()));,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom4to5Test.java,,330-340,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction, DatabaseEntry key,,                     DatabaseEntry value),             {,                 long id = LongBinding.entryToLong(key);,                 assertTrue("Unexpected id", id > 0);,                 ByteBuffer content = contentBinding.entryToObject(value);,                 assertNotNull("Unexpected content", content);,             }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,testPerformXidUpgrade,133-133,[        storeLocation.mkdirs();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,,161-167,[        {, ,             @Override,             public void run(Database xidDatabase, Database nullDatabase, Transaction transaction),             {,                 xidDatabase.get(null, key, value, LockMode.DEFAULT);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,,195-201,[        {, ,             @Override,             public void run(Database xidDatabase, Database nullDatabase, Transaction transaction),             {,                 xidDatabase.put(null, key, value);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,,221-229,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 NewQueueEntryKey newEntryRecord = newBinding.entryToObject(key);,                 assertTrue("Unexpected queue id", configuredObjects.containsKey(newEntryRecord.getQueueId()));,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,,241-262,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 CompoundKeyBinding binding = new CompoundKeyBinding();,                 CompoundKey originalCompoundKey = binding.entryToObject(key);,                 int corruptedOffset = originalCompoundKey.getOffset() + 2;,                 CompoundKey corruptedCompoundKey = new CompoundKey(originalCompoundKey.getMessageId(), corruptedOffset);,                 DatabaseEntry newKey = new DatabaseEntry();,                 binding.objectToEntry(corruptedCompoundKey, newKey);, ,                 _logger.info("Deliberately corrupted message id " + originalCompoundKey.getMessageId(),                         + ", changed offset from " + originalCompoundKey.getOffset() + " to ",                         + corruptedCompoundKey.getOffset());, ,                 deleteCurrent();,                 sourceDatabase.put(transaction, newKey, value);, ,                 abort();,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,,413-421,[        {,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 UUID id = uuidBinding.entryToObject(key);,                 UpgradeConfiguredObjectRecord object = binding.entryToObject(value);,                 configuredObjectsRecords.put(id, object);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom5To6Test.java,,431-441,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 long id = LongBinding.entryToLong(key);,                 assertTrue("Unexpected id", id > 0);,                 byte[] content = contentBinding.entryToObject(value);,                 assertNotNull("Unexpected content", content);,             }],,
CORRECTNESS,NP_NULL_ON_SOME_PATH_EXCEPTION,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom7To8.java,getConfigVersion,261-261,[            cursor.close();],,getConfigVersion,247-247,[        Cursor cursor = null;],,getConfigVersion,250-250,[            cursor = configVersionDb.openCursor(null, null);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom7To8.java,,64-69,[    {{,         put("amq.direct", "direct");,         put("amq.topic", "topic");,         put("amq.fanout", "fanout");,         put("amq.match", "headers");,     }};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom7To8Test.java,,221-229,[        {,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 UUID id = uuidBinding.entryToObject(key);,                 UpgradeConfiguredObjectRecord object = binding.entryToObject(value);,                 configuredObjectsRecords.put(id, object);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgradeFrom7To8Test.java,,242-250,[        {,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction,,                     DatabaseEntry key, DatabaseEntry value),             {,                 UpgradeHierarchyKey hierarchyKey = hierarchyKeyBinding.entryToObject(key);,                 UUID parentId = uuidParentBinding.entryToObject(value);,                 hierarchyRecords.put(hierarchyKey, parentId);,             }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/upgrade/UpgraderTest.java,testEmptyDatabaseUpgradeDoesNothing,124-124,[            nonExistentStoreLocation.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/store/berkeleydb/upgrade/UpgraderTest.java,testEmptyDatabaseUpgradeDoesNothing,107-107,[        nonExistentStoreLocation.mkdir();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/berkeleydb/upgrade/UpgraderTest.java,,132-142,[        {, ,             @Override,             public void processEntry(Database sourceDatabase, Database targetDatabase, Transaction transaction, DatabaseEntry key,,                     DatabaseEntry value),             {,                 long id = LongBinding.entryToLong(key);,                 assertTrue("Unexpected id", id > 0);,                 byte[] content = contentBinding.entryToObject(value);,                 assertNotNull("Unexpected content", content);,             }],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/server/store/derby/AbstractDerbyMessageStore.java,storedSizeChange,157-157,[                long newSize = _totalStoreSize += 3*delta;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/store/derby/AbstractDerbyMessageStore.java,,210-210,[            _totalStoreSize = getSizeOnDisk(conn);],,,157-157,[                long newSize = _totalStoreSize += 3*delta;],,,175-175,[                        long oldSize = _totalStoreSize;],,,166-166,[                        _totalStoreSize = getSizeOnDisk(conn);],,,167-167,[                        if(_totalStoreSize > getPersistentSizeHighThreshold())],,,177-177,[                        _totalStoreSize = getSizeOnDisk(conn);],,,178-178,[                        if(oldSize <= _totalStoreSize)],,,186-186,[                        if(_totalStoreSize < getPersistentSizeLowThreshold())],,,183-183,[                            _totalStoreSize = getSizeOnDisk(conn);],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/store/derby/AbstractDerbyMessageStore.java,storedSizeChange,197-197,[                    JdbcUtils.closeConnection(conn, getLogger());],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/store/derby/DerbyConfigurationStore.java,,48-200,[public class DerbyConfigurationStore extends AbstractJDBCConfigurationStore,         implements MessageStoreProvider, DurableConfigurationStore, {,     private static final Logger LOGGER = LoggerFactory.getLogger(DerbyConfigurationStore.class);, ,     private final AtomicBoolean _configurationStoreOpen = new AtomicBoolean();,     private final ProvidedMessageStore _providedMessageStore = new ProvidedMessageStore();, ,     private String _connectionURL;, ,     private ConfiguredObject<?> _parent;,     private final Class<? extends ConfiguredObject> _rootClass;, ,     public DerbyConfigurationStore(final Class<? extends ConfiguredObject> rootClass),     {,         _rootClass = rootClass;,     }, ,     @Override,     public void openConfigurationStore(ConfiguredObject<?> parent,,                                        final boolean overwrite,,                                        final ConfiguredObjectRecord... initialRecords),             throws StoreException,     {,         if (_configurationStoreOpen.compareAndSet(false,  true)),         {,             _parent = parent;,             DerbyUtils.loadDerbyDriver();, ,             _connectionURL = DerbyUtils.createConnectionUrl(parent.getName(), ((FileBasedSettings)_parent).getStorePath());, ,             createOrOpenConfigurationStoreDatabase(overwrite);, ,             if(hasNoConfigurationEntries()),             {,                 update(true, initialRecords);,             },         },     }, ,     @Override,     public void upgradeStoreStructure() throws StoreException,     {,         checkConfigurationStoreOpen();,         upgradeIfNecessary(_parent);,     }, ,     @Override,     protected Connection getConnection() throws SQLException,     {,         checkConfigurationStoreOpen();,         return DriverManager.getConnection(_connectionURL);,     }, ,     @Override,     public void closeConfigurationStore() throws StoreException,     {,         if (_providedMessageStore.isMessageStoreOpen()),         {,             throw new IllegalStateException("Cannot close the store as the provided message store is still open");,         }, ,         if (_configurationStoreOpen.compareAndSet(true,  false)),         {,             try,             {,                 DerbyUtils.shutdownDatabase(_connectionURL);,             },             catch (SQLException e),             {,                 throw new StoreException("Error closing configuration store", e);,             },         },     }, ,     @Override,     protected String getSqlBlobType(),     {,         return "blob";,     }, ,     @Override,     protected String getSqlVarBinaryType(int size),     {,         return "varchar("+size+") for bit data";,     }, ,     @Override,     protected String getSqlBigIntType(),     {,         return "bigint";,     }, ,     @Override,     protected String getBlobAsString(ResultSet rs, int col) throws SQLException,     {,         return DerbyUtils.getBlobAsString(rs, col);,     }, ,     @Override,     public void onDelete(ConfiguredObject<?> parent),     {,         if (_providedMessageStore.isMessageStoreOpen()),         {,             throw new IllegalStateException("Cannot delete the store as the provided message store is still open");,         }, ,         FileBasedSettings fileBasedSettings = (FileBasedSettings) parent;,         String storePath = fileBasedSettings.getStorePath();, ,         if (!DerbyUtils.MEMORY_STORE_LOCATION.equals(storePath)),         {,             if (storePath != null),             {,                 if (LOGGER.isDebugEnabled()),                 {,                     LOGGER.debug("Deleting store " + storePath);,                 }, ,                 File configFile = new File(storePath);,                 if (!FileUtils.delete(configFile, true)),                 {,                     LOGGER.info("Failed to delete the store at location " + storePath);,                 },             },         },     }, ,     @Override,     public MessageStore getMessageStore(),     {,         return _providedMessageStore;,     }, ,     @Override,     protected boolean tableExists(final String tableName, final Connection conn) throws SQLException,     {,         return DerbyUtils.tableExists(tableName, conn);,     }, ,     @Override,     protected void checkConfigurationStoreOpen(),     {,         if (!_configurationStoreOpen.get()),         {,             throw new IllegalStateException("Configuration store is not open");,         },     }, ,     @Override,     protected Logger getLogger(),     {,         return LOGGER;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/derby/DerbyUtils.java,,175-179,[        {,             @Override,             protected StringBuilder initialValue(),             {,                 return new StringBuilder();],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/server/store/jdbc/DefaultConnectionProviderFactory.java,,36-36,[    public static PluggableFactoryLoader<JDBCConnectionProviderFactory> FACTORY_LOADER =  new PluggableFactoryLoader(JDBCConnectionProviderFactory.class);],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/store/jdbc/GenericJDBCConfigurationStore.java,,53-255,[public class GenericJDBCConfigurationStore extends AbstractJDBCConfigurationStore implements MessageStoreProvider, {,     private static final Charset UTF8_CHARSET = Charset.forName("UTF-8");, ,     private static final Logger LOGGER = LoggerFactory.getLogger(GenericJDBCConfigurationStore.class);, ,     private final AtomicBoolean _configurationStoreOpen = new AtomicBoolean();,     private final MessageStore _providedMessageStore = new ProvidedMessageStore();, ,     private String _connectionURL;,     private ConnectionProvider _connectionProvider;, ,     private String _blobType;,     private String _varBinaryType;,     private String _bigIntType;,     private boolean _useBytesMethodsForBlob;, ,     private ConfiguredObject<?> _parent;,     private final Class<? extends ConfiguredObject> _rootClass;, ,     public GenericJDBCConfigurationStore(final Class<? extends ConfiguredObject> rootClass),     {,         _rootClass = rootClass;,     }, ,     @Override,     public void openConfigurationStore(ConfiguredObject<?> parent,,                                        final boolean overwrite,,                                        final ConfiguredObjectRecord... initialRecords),             throws StoreException,     {,         if (_configurationStoreOpen.compareAndSet(false,  true)),         {,             _parent = parent;, ,             JDBCSettings settings = (JDBCSettings)parent;,             _connectionURL = settings.getConnectionUrl();, ,             JDBCDetails details = JDBCDetails.getDetailsForJdbcUrl(_connectionURL, parent);, ,             if (!details.isKnownVendor() && getLogger().isInfoEnabled()),             {,                 getLogger().info("Do not recognize vendor from connection URL: " + _connectionURL,                                 + " Using fallback settings " + details);,             },             if (details.isOverridden() && getLogger().isInfoEnabled()),             {,                 getLogger().info("One or more JDBC details were overridden from context. ",                                +  " Using settings : " + details);,             }, ,             String connectionPoolType = settings.getConnectionPoolType() == null ? DefaultConnectionProviderFactory.TYPE : settings.getConnectionPoolType();, ,             JDBCConnectionProviderFactory connectionProviderFactory =,                     JDBCConnectionProviderFactory.FACTORIES.get(connectionPoolType);,             if(connectionProviderFactory == null),             {,                 LOGGER.warn("Unknown connection pool type: ",                              + connectionPoolType,                              + ".  no connection pooling will be used");,                 connectionProviderFactory = new DefaultConnectionProviderFactory();,             }, ,             try,             {,                 Map<String, String> providerAttributes = new HashMap<>();,                 Set<String> providerAttributeNames = new HashSet<String>(connectionProviderFactory.getProviderAttributeNames());,                 providerAttributeNames.retainAll(parent.getContextKeys(false));,                 for(String attr : providerAttributeNames),                 {,                     providerAttributes.put(attr, parent.getContextValue(String.class, attr));,                 }, ,                 _connectionProvider = connectionProviderFactory.getConnectionProvider(_connectionURL,,                                                                                       settings.getUsername(),,                                                                                       getPlainTextPassword(settings),,                                                                                       providerAttributes);,             },             catch (SQLException e),             {,                 throw new StoreException("Failed to create connection provider for connectionUrl: " + _connectionURL +,                                             " and username: " + settings.getUsername(), e);,             },             _blobType = details.getBlobType();,             _varBinaryType = details.getVarBinaryType();,             _useBytesMethodsForBlob = details.isUseBytesMethodsForBlob();,             _bigIntType = details.getBigintType();, ,             createOrOpenConfigurationStoreDatabase(overwrite);,             if(hasNoConfigurationEntries()),             {,                 update(true, initialRecords);,             },         },     }, ,     @Override,     public void upgradeStoreStructure() throws StoreException,     {,         checkConfigurationStoreOpen();,         upgradeIfNecessary(_parent);,     }, ,     @Override,     protected Connection getConnection() throws SQLException,     {,         return _connectionProvider.getConnection();,     }, ,     @Override,     public void closeConfigurationStore() throws StoreException,     {,         if (_configurationStoreOpen.compareAndSet(true, false)),         {,             try,             {,                 _connectionProvider.close();,             },             catch (SQLException e),             {,                 throw new StoreException("Unable to close connection provider ", e);,             },         },     }, ,     @Override,     protected String getSqlBlobType(),     {,         return _blobType;,     }, ,     @Override,     protected String getSqlVarBinaryType(int size),     {,         return String.format(_varBinaryType, size);,     }, ,     @Override,     public String getSqlBigIntType(),     {,         return _bigIntType;,     }, ,     @Override,     protected String getBlobAsString(ResultSet rs, int col) throws SQLException,     {,         byte[] bytes;,         if(_useBytesMethodsForBlob),         {,             bytes = rs.getBytes(col);,             return new String(bytes,UTF8_CHARSET);,         },         else,         {,             Blob blob = rs.getBlob(col);,             if(blob == null),             {,                 return null;,             },             bytes = blob.getBytes(1, (int)blob.length());,         },         return new String(bytes, UTF8_CHARSET);, ,     }, ,     protected byte[] getBlobAsBytes(ResultSet rs, int col) throws SQLException,     {,         if(_useBytesMethodsForBlob),         {,             return rs.getBytes(col);,         },         else,         {,             Blob dataAsBlob = rs.getBlob(col);,             return dataAsBlob.getBytes(1,(int) dataAsBlob.length());, ,         },     }, ,     @Override,     protected void checkConfigurationStoreOpen(),     {,         if (!_configurationStoreOpen.get()),         {,             throw new IllegalStateException("Configuration store is not open");,         },     }, ,     @Override,     protected Logger getLogger(),     {,         return LOGGER;,     }, ,     @Override,     public MessageStore getMessageStore(),     {,         return _providedMessageStore;,     }, ,     protected String getPlainTextPassword(final JDBCSettings settings),     {,         return Subject.doAs(SecurityManager.getSubjectWithAddedSystemRights(), new PrivilegedAction<String>()],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/jdbc/GenericJDBCConfigurationStore.java,,256-260,[        {,             @Override,             public String run(),             {,                 return settings.getPassword();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/store/jdbc/GenericJDBCMessageStore.java,,191-195,[        {,             @Override,             public String run(),             {,                 return settings.getPassword();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/transport/AbstractAMQPConnection.java,doDelete,397-423,[        if (_underlyingClosed.get()),         {,             deleted();,             return Futures.immediateFuture(null);,         },         else,         {,             final SettableFuture<Void> returnVal = SettableFuture.create();,             asyncCloseUnderlying().addListener(,                     new Runnable(),                     {,                         @Override,                         public void run(),                         {,                             try,                             {,                                 deleted();,                                 setState(State.DELETED);,                             },                             finally,                             {,                                 returnVal.set(null);,                             },                         },                     }, getTaskExecutor().getExecutor(),                                               );,             return returnVal;],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/server/transport/MultiVersionProtocolEngine.java,closed,555-555,[                catch(Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/transport/MultiVersionProtocolEngine.java,closed,545-545,[            catch(Exception e)],,
MT_CORRECTNESS,SC_START_IN_CTOR,org/apache/qpid/server/transport/NetworkConnectionScheduler.java,<init>,67-67,[            _selectorThread.start();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/transport/NetworkConnectionSchedulerTest.java,run,82-82,[                        verboseOutputStream.write("Hello World".getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/transport/NetworkConnectionSchedulerTest.java,run,102-102,[                    timidOutputStream.write("me too".getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/transport/NetworkConnectionSchedulerTest.java,,96-108,[        {,             @Override,             public void run(),             {,                 try,                 {,                     timidOutputStream.write("me too".getBytes());,                 },                 catch (IOException e),                 {,                     e.printStackTrace();,                 },             }],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/transport/NonBlockingConnectionTLSDelegate.java,,192-192,[        return _peerCertificate;],,,218-218,[                _peerCertificate = null;],,,212-212,[                    _peerCertificate = peerCertificates[0];],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/server/transport/NonBlockingConnectionTLSDelegate.java,,185-185,[        return _principal;],,,217-217,[                _principal = null;],,,207-207,[                _principal = _sslEngine.getSession().getPeerPrincipal();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/transport/NonBlockingNetworkTransport.java,,163-169,[                                                  {, ,                                                       @Override,                                                       public void run(),                                                       {,                                                           engine.encryptedTransport();,                                                       }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/transport/websocket/WebSocketProvider.java,,158-174,[        {,             @Override,             public void handle(final String target,,                                final Request baseRequest,,                                final HttpServletRequest request,,                                final HttpServletResponse response),                     throws IOException, ServletException,             {,                 if (response.isCommitted() || baseRequest.isHandled()),                 {,                     return;,                 },                 baseRequest.setHandled(true);,                 response.setStatus(HttpServletResponse.SC_FORBIDDEN);, , ,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/transport/websocket/WebSocketProvider.java,,256-350,[        {,             _connection = connection;,             _localAddress = localAddress;,             _remoteAddress = remoteAddress;,         }, ,         @Override,         public ByteBufferSender getSender(),         {,             return this;,         }, ,         @Override,         public void start(),         {, ,         }, ,         @Override,         public void send(final ByteBuffer msg),         {,             try,             {,                 _connection.sendMessage(msg.array(),msg.arrayOffset()+msg.position(),msg.remaining());,             },             catch (IOException e),             {,                 close();,             },         }, ,         @Override,         public void flush(),         {, ,         }, ,         @Override,         public void close(),         {,             _connection.close();,         }, ,         @Override,         public SocketAddress getRemoteAddress(),         {,             return _remoteAddress;,         }, ,         @Override,         public SocketAddress getLocalAddress(),         {,             return _localAddress;,         }, ,         @Override,         public void setMaxWriteIdle(final int sec),         {,             _maxWriteIdle = sec;,         }, ,         @Override,         public void setMaxReadIdle(final int sec),         {,             _maxReadIdle = sec;,         }, ,         @Override,         public Principal getPeerPrincipal(),         {,             return _certificate instanceof X509Certificate ? ((X509Certificate)_certificate).getSubjectDN() : null;,         }, ,         @Override,         public Certificate getPeerCertificate(),         {,             return _certificate;,         }, ,         @Override,         public int getMaxReadIdle(),         {,             return _maxReadIdle;,         }, ,         @Override,         public int getMaxWriteIdle(),         {,             return _maxWriteIdle;,         }, ,         void setPeerCertificate(final Certificate certificate),         {,             _certificate = certificate;,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AsyncAutoCommitTransaction.java,,229-240,[            {,                 @Override,                 public void postCommit(),                 {,                     underlying.postCommit(enqueueRecord);,                 }, ,                 @Override,                 public void onRollback(),                 {,                     underlying.postCommit(enqueueRecord);,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AsyncAutoCommitTransaction.java,,249-263,[            {,                 @Override,                 public void postCommit(),                 {, ,                 }, ,                 @Override,                 public void onRollback(),                 {,                     if(underlying != null),                     {,                         underlying.onRollback();,                     },                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AsyncAutoCommitTransaction.java,,308-322,[            {,                 @Override,                 public void postCommit(),                 {,                     if(underlying != null),                     {,                         underlying.postCommit(records);,                     },                 }, ,                 @Override,                 public void onRollback(),                 {,                      underlying.onRollback();,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AsyncAutoCommitTransaction.java,,333-347,[            {,                 @Override,                 public void postCommit(),                 {, ,                 }, ,                 @Override,                 public void onRollback(),                 {,                     if(underlying != null),                     {,                         underlying.onRollback();,                     },                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AsyncAutoCommitTransaction.java,,359-367,[            {,                 public void postCommit(),                 {,                     immediatePostTransactionAction.run();,                 }, ,                 public void onRollback(),                 {,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AutoCommitTransaction.java,,176-190,[            {,                 @Override,                 public void postCommit(),                 {, ,                 }, ,                 @Override,                 public void onRollback(),                 {,                     if(underlying != null),                     {,                         underlying.onRollback();,                     },                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AutoCommitTransaction.java,,240-254,[            {,                 @Override,                 public void postCommit(),                 {, ,                 }, ,                 @Override,                 public void onRollback(),                 {,                     if(underlying != null),                     {,                         underlying.onRollback();,                     },                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/AutoCommitTransactionTest.java,,376-399,[            {, ,                 @Override,                 public ServerMessage getMessage(),                 {,                     return message;,                 }, ,                 @Override,                 public TransactionLogResource getOwningResource(),                 {,                     return queue;,                 }, ,                 @Override,                 public MessageEnqueueRecord getEnqueueRecord(),                 {,                     if(hasRecord),                     {,                         return mock(MessageEnqueueRecord.class);,                     },                     else,                     {,                         return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/DistributedTransaction.java,,114-119,[                {,                     @Override,                     public void performAction(final MessageEnqueueRecord record),                     {,                         enqueueRecords[0] = record;,                     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/DistributedTransaction.java,,122-133,[            {,                 @Override,                 public void postCommit(),                 {,                     postTransactionAction.postCommit(enqueueRecords);,                 }, ,                 @Override,                 public void onRollback(),                 {,                     postTransactionAction.onRollback();,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/DistributedTransaction.java,,153-158,[                {,                     @Override,                     public void performAction(final MessageEnqueueRecord record),                     {,                         enqueueRecords[pos] = record;,                     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/DistributedTransaction.java,,163-174,[            {,                 @Override,                 public void postCommit(),                 {,                     postTransactionAction.postCommit(enqueueRecords);,                 }, ,                 @Override,                 public void onRollback(),                 {,                     postTransactionAction.onRollback();,                 }],,
STYLE,DLS_DEAD_LOCAL_STORE_OF_NULL,org/apache/qpid/server/txn/LocalTransaction.java,enqueue,307-307,[                postTransactionAction = null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/LocalTransaction.java,,203-214,[                    {,                         @Override,                         public void postCommit(),                         {,                             underlying.postCommit(record);,                         }, ,                         @Override,                         public void onRollback(),                         {,                             underlying.onRollback();,                         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/LocalTransaction.java,,225-236,[                    {,                         @Override,                         public void postCommit(),                         {, ,                         }, ,                         @Override,                         public void onRollback(),                         {,                             underlying.onRollback();,                         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/LocalTransaction.java,,248-259,[                {,                     @Override,                     public void postCommit(),                     {,                         underlying.postCommit((MessageEnqueueRecord)null);,                     }, ,                     @Override,                     public void onRollback(),                     {,                         underlying.onRollback();,                     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/LocalTransaction.java,,294-305,[                {,                     @Override,                     public void postCommit(),                     {,                         underlying.postCommit(records);,                     }, ,                     @Override,                     public void onRollback(),                     {,                         underlying.onRollback();,                     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/LocalTransaction.java,,317-328,[                {,                     @Override,                     public void postCommit(),                     {, ,                     }, ,                     @Override,                     public void onRollback(),                     {,                         underlying.onRollback();,                     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/txn/LocalTransactionTest.java,,617-634,[            {, ,                 @Override,                 public ServerMessage getMessage(),                 {,                     return message;,                 }, ,                 @Override,                 public TransactionLogResource getOwningResource(),                 {,                     return queue;,                 }, ,                 @Override,                 public MessageEnqueueRecord getEnqueueRecord(),                 {,                     return hasRecord ? mock(MessageEnqueueRecord.class) : null;],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/util/FileHelperTest.java,testIsWritableDirectoryForFilePath,131-131,[            file.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/util/FileHelperTest.java,testIsWritableDirectoryForNonWritablePath,149-149,[                file.mkdirs();],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/util/MapJsonSerializerTest.java,testSerializeDeserialize,43-43,[        testMap.put("integer", new Integer(10));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/server/util/MapJsonSerializerTest.java,testSerializeDeserialize,44-44,[        testMap.put("long", new Long(Long.MAX_VALUE));],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/util/StringUtil.java,<clinit>,36-36,[    private static final char[] CHARACTERS = (NUMBERS + LETTERS + LETTERS.toUpperCase() + OTHERS).toCharArray();],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/util/StringUtil.java,createUniqueJavaName,78-78,[            builder.append(DatatypeConverter.printHexBinary(digest).toLowerCase());],,
I18N,DM_CONVERT_CASE,org/apache/qpid/server/util/StringUtilTest.java,assertCharacters,49-49,[        String expectedCharacters = (numbers + letters + letters.toUpperCase() + others);],,
CORRECTNESS,RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE,org/apache/qpid/server/virtualhost/AbstractVirtualHost.java,shouldCreateDLQ,1599-1599,[        boolean autoDelete = MapValueConverter.getEnumAttribute(LifetimePolicy.class,],,shouldCreateDLQ,1605-1605,[        if (!(autoDelete || (arguments != null && arguments.containsKey(Queue.ALTERNATE_EXCHANGE))))],,shouldCreateDLQ,1607-1607,[            boolean dlqArgumentPresent = arguments != null],,
STYLE,RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT,org/apache/qpid/server/virtualhost/AbstractVirtualHost.java,getSecurityManager,397-397,[        return Subject.doAs(getSecurityManager().getSubjectWithAddedSystemRights(), new PrivilegedAction<ListenableFuture<Void>>()],,
STYLE,UC_USELESS_CONDITION,org/apache/qpid/server/virtualhost/AbstractVirtualHost.java,shouldCreateDLQ,1612-1612,[                if (dlqArgumentPresent)],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhost/AbstractVirtualHost.java,doDelete,1459-1499,[        if(_deleted.compareAndSet(false,true)),         {,             final SettableFuture<Void> returnVal = SettableFuture.create();,             String hostName = getName();, ,             closeAsync().addListener(,                     new Runnable(),                     {,                         @Override,                         public void run(),                         {,                             try,                             {,                                 MessageStore ms = getMessageStore();,                                 if (ms != null),                                 {,                                     try,                                     {,                                         ms.onDelete(AbstractVirtualHost.this);,                                     },                                     catch (Exception e),                                     {,                                         _logger.warn("Exception occurred on message store deletion", e);,                                     },                                 },                                 deleted();,                                 setState(State.DELETED);,                             },                             finally,                             {,                                 returnVal.set(null);,                             },                         },                     }, getTaskExecutor().getExecutor(),                                );, ,             return returnVal;,         },         else,         {,             return Futures.immediateFuture(null);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhost/AbstractVirtualHost.java,onRestart,1885-1958,[        resetStatistics();, ,         final List<ConfiguredObjectRecord> records = new ArrayList<>();, ,         // Transitioning to STOPPED will have closed all our children.  Now we are transition,         // back to ACTIVE, we need to recover and re-open them., ,         getDurableConfigurationStore().visitConfiguredObjectRecords(new ConfiguredObjectRecordHandler(),         {,             @Override,             public void begin(),             {,             }, ,             @Override,             public boolean handle(final ConfiguredObjectRecord record),             {,                 records.add(record);,                 return true;,             }, ,             @Override,             public void end(),             {,             },         });, ,         new GenericRecoverer(this).recover(records);, ,         final SettableFuture<Void> returnVal = SettableFuture.create();,         final ChildCounter counter = new ChildCounter(new Runnable(),         {,             @Override,             public void run(),             {,                 onActivate().addListener(,                         new Runnable(),                         {,                             @Override,                             public void run(),                             {,                                 returnVal.set(null);,                             },                         }, getTaskExecutor().getExecutor(),                                         );,             },         });,         counter.incrementCount();,         Subject.doAs(SecurityManager.getSubjectWithAddedSystemRights(), new PrivilegedAction<Object>(),         {,             @Override,             public Object run(),             {,                 applyToChildren(new Action<ConfiguredObject<?>>(),                 {,                     @Override,                     public void performAction(final ConfiguredObject<?> object),                     {,                         counter.incrementCount();,                         object.openAsync().addListener(new Runnable(),                         {,                             @Override,                             public void run(),                             {,                                 counter.decrementCount();,                             },                         }, getTaskExecutor().getExecutor());,                     },                 });,                 return null;,             },         });,         counter.decrementCount();,         return returnVal;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/AbstractVirtualHostTest.java,,134-138,[        {,             @Override,             protected MessageStore createMessageStore(),             {,                 return store;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/AbstractVirtualHostTest.java,,173-177,[        {,             @Override,             protected MessageStore createMessageStore(),             {,                 return  store;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/AbstractVirtualHostTest.java,,217-221,[        {,             @Override,             protected MessageStore createMessageStore(),             {,                 return  store;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/AbstractVirtualHostTest.java,,242-246,[        {,             @Override,             protected MessageStore createMessageStore(),             {,                 return  store;],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/virtualhost/AsynchronousMessageStoreRecoverer.java,recover,116-116,[                _queueRecoveryExecutor.submit(new QueueRecoveringTask(queue));],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecoverer.java,,278-283,[                        {,                             @Override,                             public void performAction(final MessageEnqueueRecord record),                             {,                                 records[0] = record;,                             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecoverer.java,,286-298,[                        {,                             @Override,                             public void postCommit(),                             {,                                 queue.enqueue(message, null, records[0]);,                                 ref.release();,                             }, ,                             @Override,                             public void onRollback(),                             {,                                 ref.release();,                             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecoverer.java,,337-347,[                        {, ,                             public void postCommit(),                             {,                                 entry.delete();,                             }, ,                             public void onRollback(),                             {,                                 entry.release();,                             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecovererTest.java,,195-206,[        {,             @Override,             public void visitMessages(MessageHandler handler) throws StoreException,             {,                 handler.handle(storedMessage);,             }, ,             @Override,             public void visitMessageInstances(MessageInstanceHandler handler) throws StoreException,             {,                 // No messages instances,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecovererTest.java,,238-279,[        {,             @Override,             public void visitMessages(MessageHandler handler) throws StoreException,             {,                 handler.handle(storedMessage);,             }, ,             @Override,             public void visitMessageInstances(MessageInstanceHandler handler) throws StoreException,             {,                 // No messages instances,             }, ,             @Override,             public void visitDistributedTransactions(DistributedTransactionHandler handler) throws StoreException,             {,                 handler.handle(new Transaction.StoredXidRecord(),                 {,                     @Override,                     public long getFormat(),                     {,                         return format;,                     }, ,                     @Override,                     public byte[] getGlobalId(),                     {,                         return globalId;,                     }, ,                     @Override,                     public byte[] getBranchId(),                     {,                         return branchId;,                     },                 }, enqueues, dequeues);,             }, ,             @Override,             public Transaction newTransaction(),             {,                 return transaction;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecovererTest.java,,459-475,[    private final class MessageEnqueueRecordMatcher extends ArgumentMatcher<MessageEnqueueRecord>,     {,         private final long _messageId;,         private final UUID _queueId;, ,         private MessageEnqueueRecordMatcher(UUID queueId, long messageId),         {,             _messageId = messageId;,             _queueId = queueId;,         }, ,         @Override,         public boolean matches(Object argument),         {,             return argument instanceof MessageEnqueueRecord,                     && ((MessageEnqueueRecord)argument).getMessageNumber() == _messageId,                     && ((MessageEnqueueRecord)argument).getQueueId().equals(_queueId);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecovererTest.java,,448-455,[        {,             _queueId = queueId;,         }, ,         @Override,         public boolean matches(Object argument),         {,             return argument instanceof TransactionLogResource && _queueId.equals( ((TransactionLogResource)argument).getId() );],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/virtualhost/SynchronousMessageStoreRecovererTest.java,,485-499,[        {,             _queueId = queueId;,             _messageId = messageId;,         }, ,         @Override,         public UUID getQueueId(),         {,             return _queueId;,         }, ,         @Override,         public long getMessageNumber(),         {,             return _messageId;],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/server/virtualhostnode/AbstractStandardVirtualHostNode.java,,53-210,[    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractStandardVirtualHostNode.class);, ,     public AbstractStandardVirtualHostNode(Map<String, Object> attributes,,                                            Broker<?> parent),     {,         super(parent, attributes);,     }, ,     @SuppressWarnings({ "rawtypes", "unchecked" }),     @Override,     protected <C extends ConfiguredObject> ListenableFuture<C> addChildAsync(Class<C> childClass, Map<String, Object> attributes,,             ConfiguredObject... otherParents),     {,         if(childClass == VirtualHost.class),         {,             return getObjectFactory().createAsync(childClass, attributes, this);,         },         return super.addChildAsync(childClass, attributes, otherParents);,     }, ,     @Override,     protected ListenableFuture<Void> activate(),     {,         if (LOGGER.isDebugEnabled()),         {,             LOGGER.debug("Activating virtualhost node " + this);,         }, ,         try,         {,             ConfiguredObjectRecord[] initialRecords = getInitialRecords();,             getConfigurationStore().openConfigurationStore(this, false, initialRecords);,             if(initialRecords != null && initialRecords.length > 0),             {,                 setAttribute(VIRTUALHOST_INITIAL_CONFIGURATION, getVirtualHostInitialConfiguration(), "{}");,             },         },         catch (IOException e),         {,             throw new IllegalConfigurationException("Could not process initial configuration", e);,         }, ,         getConfigurationStore().upgradeStoreStructure();, ,         getEventLogger().message(getConfigurationStoreLogSubject(), ConfigStoreMessages.CREATED());, ,         writeLocationEventLog();, ,         getEventLogger().message(getConfigurationStoreLogSubject(), ConfigStoreMessages.RECOVERY_START());, ,         VirtualHostStoreUpgraderAndRecoverer upgrader = new VirtualHostStoreUpgraderAndRecoverer(this);,         upgrader.perform(getConfigurationStore());, ,         getEventLogger().message(getConfigurationStoreLogSubject(), ConfigStoreMessages.RECOVERY_COMPLETE());, ,         VirtualHost<?,?,?>  host = getVirtualHost();, ,         if (host != null),         {,             final VirtualHost<?,?,?> recoveredHost = host;,             final ListenableFuture<Void> openFuture = Subject.doAs(SecurityManager.getSubjectWithAddedSystemRights(),,                                                                    new PrivilegedAction<ListenableFuture<Void>>(),                                                                    {,                                                                        @Override,                                                                        public ListenableFuture<Void> run(),                                                                        {,                                                                            return recoveredHost.openAsync();, ,                                                                        },                                                                    });,             return openFuture;,         },         else,         {,             return Futures.immediateFuture(null);,         },     }, , ,     @Override,     protected ConfiguredObjectRecord enrichInitialVirtualHostRootRecord(final ConfiguredObjectRecord vhostRecord),     {,         ConfiguredObjectRecord replacementRecord;,         if (vhostRecord.getAttributes().get(ConfiguredObject.NAME) == null),         {,             Map<String, Object> updatedAttributes = new LinkedHashMap<>(vhostRecord.getAttributes());,             updatedAttributes.put(ConfiguredObject.NAME, getName());,             if (!updatedAttributes.containsKey(VirtualHost.MODEL_VERSION)),             {,                 updatedAttributes.put(VirtualHost.MODEL_VERSION, getBroker().getModelVersion());,             },             replacementRecord = new ConfiguredObjectRecordImpl(vhostRecord.getId(),,                                                                vhostRecord.getType(),,                                                                updatedAttributes,,                                                                vhostRecord.getParents());,         },         else if (vhostRecord.getAttributes().get(VirtualHost.MODEL_VERSION) == null),         {,             Map<String, Object> updatedAttributes = new LinkedHashMap<>(vhostRecord.getAttributes());, ,             updatedAttributes.put(VirtualHost.MODEL_VERSION, getBroker().getModelVersion());, ,             replacementRecord = new ConfiguredObjectRecordImpl(vhostRecord.getId(),,                                                                vhostRecord.getType(),,                                                                updatedAttributes,,                                                                vhostRecord.getParents());,         },         else,         {,             replacementRecord = vhostRecord;,         }, ,         return replacementRecord;,     }, , ,     protected abstract void writeLocationEventLog();, ,     @Override,     public String toString(),     {,         return this.getClass().getSimpleName() +  "[id=" + getId() + ", name=" + getName() + ", state=" + getState() + "]";,     }, ,     @Override,     public Collection<RemoteReplicationNode<?>> getRemoteReplicationNodes(),     {,         return Collections.emptyList();,     }, ,     @Override,     protected void validateOnCreate(),     {,         super.validateOnCreate();,         DurableConfigurationStore store = createConfigurationStore();,         if (store != null),         {,             try,             {,                 store.openConfigurationStore(this, false);,             },             catch (Exception e),             {,                 throw new IllegalConfigurationException("Cannot open node configuration store:" + e.getMessage(), e);,             },             finally,             {,                 try,                 {,                     store.closeConfigurationStore();,                 },                 catch(Exception e),                 {,                     LOGGER.warn("Failed to close database", e);,                 },             },         },     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhostnode/AbstractStandardVirtualHostNodeTest.java,,157-157,[        DurableConfigurationStore configStore = new NullMessageStore() {};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhostnode/AbstractStandardVirtualHostNodeTest.java,,540-551,[        return new NullMessageStore(){, ,             @Override,             public void visitConfiguredObjectRecords(ConfiguredObjectRecordHandler handler) throws StoreException,             {,                 handler.begin();,                 if (record != null),                 {,                     handler.handle(record);,                 },                 handler.end();,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhostnode/AbstractStandardVirtualHostNodeTest.java,,564-575,[        return new AbstractStandardVirtualHostNode(attributes,  _broker){, ,             @Override,             protected void writeLocationEventLog(),             {, ,             }, ,             @Override,             protected DurableConfigurationStore createConfigurationStore(),             {,                 return store;],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/server/virtualhostnode/AbstractVirtualHostNode.java,getInitialConfigReader,536-536,[                initialConfigReader =new InputStreamReader(url.openStream());],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHARemoteReplicationNodeImpl.java,doDelete,127-146,[        String nodeName = getName();, ,         getEventLogger().message(_virtualHostNodeLogSubject, HighAvailabilityMessages.DELETED());, ,         try,         {,             _replicatedEnvironmentFacade.removeNodeFromGroup(nodeName);,             setState(State.DELETED);,             deleted();,         },         catch(MasterStateException e),         {,             throw new IllegalStateTransitionException("Node '" + nodeName + "' cannot be deleted when role is a master");,         },         catch (Exception e),         {,             throw new IllegalStateTransitionException("Unexpected exception on node '" + nodeName + "' deletion", e);,         }, ,         return Futures.immediateFuture(null);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,onMaster,668-668,[        catch (Exception e)],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,postSetDesignatedPrimary,798-820,[        ReplicatedEnvironmentFacade environmentFacade = getReplicatedEnvironmentFacade();,         if (environmentFacade != null),         {,             try,             {,                 environmentFacade.setDesignatedPrimary(_designatedPrimary).get(MUTATE_JE_TIMEOUT_MS, TimeUnit.MILLISECONDS);,                 getEventLogger().message(getVirtualHostNodeLogSubject(),,                         HighAvailabilityMessages.DESIGNATED_PRIMARY_CHANGED(String.valueOf(_designatedPrimary)));,             },             catch (TimeoutException e),             {,                 LOGGER.warn("Change designated primary did not complete within " + MUTATE_JE_TIMEOUT_MS + "ms. New value " + _designatedPrimary + " will become effective once the JE task thread is free.");,             },             catch (InterruptedException e),             {,                 Thread.currentThread().interrupt();,             },             catch (ExecutionException e),             {,                 throw new ServerScopedRuntimeException("Failed to set designated primary to value " + _designatedPrimary + " on " + this, e);,             },         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,postSetPriority,770-792,[        ReplicatedEnvironmentFacade environmentFacade = getReplicatedEnvironmentFacade();,         if (environmentFacade != null),         {,             try,             {,                 environmentFacade.setPriority(_priority).get(MUTATE_JE_TIMEOUT_MS, TimeUnit.MILLISECONDS);,                 getEventLogger().message(getVirtualHostNodeLogSubject(),,                         HighAvailabilityMessages.PRIORITY_CHANGED(String.valueOf(_priority)));,             },             catch (TimeoutException e),             {,                 LOGGER.warn("Change node priority did not complete within " + MUTATE_JE_TIMEOUT_MS + "ms. New value " + _priority + " will become effective once the JE task thread is free.");,             },             catch (InterruptedException e),             {,                 Thread.currentThread().interrupt();,             },             catch (ExecutionException e),             {,                 throw new ServerScopedRuntimeException("Failed to set priority node to value " + _priority + " on " + this, e);,             },         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,postSetQuorumOverride,826-848,[        ReplicatedEnvironmentFacade environmentFacade = getReplicatedEnvironmentFacade();,         if (environmentFacade != null),         {,             try,             {,                 environmentFacade.setElectableGroupSizeOverride(_quorumOverride).get(MUTATE_JE_TIMEOUT_MS, TimeUnit.MILLISECONDS);,                 getEventLogger().message(getVirtualHostNodeLogSubject(),,                         HighAvailabilityMessages.QUORUM_OVERRIDE_CHANGED(String.valueOf(_quorumOverride)));,             },             catch (TimeoutException e),             {,                 LOGGER.warn("Change quorum override did not complete within " + MUTATE_JE_TIMEOUT_MS + "ms. New value " + _quorumOverride + " will become effective once the JE task thread is free.");,             },             catch (InterruptedException e),             {,                 Thread.currentThread().interrupt();,             },             catch (ExecutionException e),             {,                 throw new ServerScopedRuntimeException("Failed to set quorum override to value " + _quorumOverride + " on " + this, e);,             },         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,postSetRole,854-879,[        ReplicatedEnvironmentFacade environmentFacade = getReplicatedEnvironmentFacade();,         if (environmentFacade != null),         {,             try,             {,                 getEventLogger().message(getGroupLogSubject(), HighAvailabilityMessages.TRANSFER_MASTER(getName(), getAddress()));,                 environmentFacade.transferMasterToSelfAsynchronously().get(MUTATE_JE_TIMEOUT_MS, TimeUnit.MILLISECONDS);,             },             catch (TimeoutException e),             {,                 LOGGER.warn("Transfer master did not complete within " + MUTATE_JE_TIMEOUT_MS + "ms. Node may still be elected master at a later time.");,             },             catch (InterruptedException e),             {,                 Thread.currentThread().interrupt();,             },             catch (ExecutionException e),             {,                 throw new ServerScopedRuntimeException("Failed to transfer master to " + this, e);,             },         },         else,         {,             // Ignored,         },     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,,627-632,[                        {,                             @Override,                             public Object run(),                             {,                                 recoveredHost.open();,                                 return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,,657-662,[                {,                     @Override,                     public Object run(),                     {,                         recoveredHost.open();,                         return null;],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeImpl.java,stateChange,742-743,[                        closeVirtualHostIfExist().get();,                         break;],,stateChange,745-746,[                        closeVirtualHostIfExist().get();,                         break;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeOperationalLoggingTest.java,,268-276,[        {,             @Override,             public void childAdded(ConfiguredObject<?> object, ConfiguredObject<?> child),             {,                 if (child instanceof BDBHARemoteReplicationNode),                 {,                     remoteNodeAdded.countDown();,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeOperationalLoggingTest.java,,369-409,[        private String _expectedMessageFailureDescription = null;,         private String _expectedHierarchy;,         private String _expectedHierarchyFailureDescription = null;, ,         public LogMessageMatcher(String expectedMessage, String expectedHierarchy),         {,             _expectedMessage = expectedMessage;,             _expectedHierarchy = expectedHierarchy;,         }, ,         @Override,         public boolean matches(Object argument),         {,             LogMessage logMessage = (LogMessage)argument;, ,             boolean expectedMessageMatches = _expectedMessage.equals(logMessage.toString());,             if (!expectedMessageMatches),             {,                 _expectedMessageFailureDescription = "Expected message does not match. Expected: " + _expectedMessage + ", actual: " + logMessage.toString();,             },             boolean expectedHierarchyMatches = _expectedHierarchy.equals(logMessage.getLogHierarchy());,             if (!expectedHierarchyMatches),             {,                 _expectedHierarchyFailureDescription = "Expected hierarchy does not match. Expected: " + _expectedHierarchy + ", actual: " + logMessage.getLogHierarchy();,             }, ,             return expectedMessageMatches && expectedHierarchyMatches;,         }, ,         @Override,         public void describeTo(Description description),         {,             if (_expectedMessageFailureDescription != null),             {,                 description.appendText(_expectedMessageFailureDescription);,             },             if (_expectedHierarchyFailureDescription != null),             {,                 description.appendText(_expectedHierarchyFailureDescription);,             },         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeOperationalLoggingTest.java,,415-441,[        private String _failureDescription = null;, ,         public LogSubjectMatcher(LogSubject logSubject),         {,             _logSubject = logSubject;,         }, ,         @Override,         public boolean matches(Object argument),         {,             final LogSubject logSubject = (LogSubject)argument;,             final boolean foundAMatch = _logSubject.toLogString().equals(logSubject.toLogString());,             if (!foundAMatch),             {,                 _failureDescription = "LogSubject does not match. Expected: " + _logSubject.toLogString() + ", actual : " + logSubject.toLogString();,             },             return foundAMatch;,         }, ,         @Override,         public void describeTo(Description description),         {,             if (_failureDescription != null),             {,                 description.appendText(_failureDescription);,             },         }],,
STYLE,NP_LOAD_OF_KNOWN_NULL_VALUE,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeTestHelper.java,tearDown,108-108,[            if (firstException != null)],,tearDown,102-102,[                    if (firstException != null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeTestHelper.java,tearDown,102-102,[                    if (firstException != null)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE,org/apache/qpid/server/virtualhostnode/berkeleydb/BDBHAVirtualHostNodeTestHelper.java,tearDown,108-108,[            if (firstException != null)],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/virtualhostnode/derby/DerbyVirtualHostNodeTest.java,testOnCreateValidationForFileStorePath,115-115,[        file.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/server/virtualhostnode/derby/DerbyVirtualHostNodeTest.java,testOnCreateValidationForNonWritableStorePath,140-140,[            file.mkdirs();],,
STYLE,DMI_HARDCODED_ABSOLUTE_FILENAME,org/apache/qpid/ssl/SSLContextFactoryTest.java,testTrustStoreDoesNotExist,51-51,[                    SSLContextFactory.getTrustManagers("/path/to/nothing",],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/MessageCompressionTest.java,setUp,56-56,[    }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/disttest/ConfigFileTestHelper.java,getConfigFileReader,38-38,[        Reader reader = new InputStreamReader(inputStream);],,
CORRECTNESS,IJU_NO_TESTS,org/apache/qpid/systest/disttest/DistributedTestSystemTestBase.java,,32-70,[public class DistributedTestSystemTestBase extends QpidBrokerTestCase, {,     protected Context _context;, ,     protected Connection _connection;, ,     @Override,     protected void setUp() throws Exception,     {,         super.setUp();, ,         final Properties properties = new Properties();,         properties.load(DistributedTestSystemTestBase.class.getResourceAsStream("perftests.systests.properties"));,         _context = new InitialContext(properties);, ,         _connection = getConnection();,         _connection.start();,     }, ,     @Override,     protected void tearDown() throws Exception,     {,         // no need to close connections - this is done by superclass, ,         super.tearDown();,     }, ,     public Context getContext(),     {,         return _context;,     }, ,     @Override,     public Connection getConnection() throws JMSException, NamingException,     {,         final ConnectionFactory connectionFactory = (ConnectionFactory) _context.lookup("connectionfactory");,         final Connection connection = connectionFactory.createConnection();,         _connections.add(connection);,         return connection;],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/systest/disttest/DistributedTestSystemTestBase.java,setUp,44-44,[        properties.load(DistributedTestSystemTestBase.class.getResourceAsStream("perftests.systests.properties"));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/systest/disttest/clientonly/MessageProviderTest.java,testCreateMessageProviderAndSendMessage,81-81,[        messageProperties.put("priority", new SimplePropertyValue(new Integer(9)));],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/systest/disttest/controllerandclient/ControllerAndClientTest.java,,244-257,[        {,             @Override,             public void run(),             {,                 try,                 {,                     client.start();,                     client.waitUntilStopped(CLIENT_BACKGROUND_THREAD_WAIT_TIME);,                 },                 finally,                 {,                     LOGGER.debug("Client thread {} finished", clientThreadName);,                 },             }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/disttest/endtoend/EndToEndTest.java,createTemporaryCsvDirectory,95-95,[        csvDir.mkdir();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/systest/management/jmx/ManagementActorLoggingTest.java,,101-106,[        {,             public void onException(JMSException e),             {,                 //Failover being attempted.,                 exceptionReceived.countDown();,             }],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/management/jmx/ManagementLoggingTest.java,setUp,56-56,[        setLogMessagePrefix();],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/systest/management/jmx/ManagementLoggingTest.java,testManagementUserOpenClose,242-242,[                if (jmxUtils != null)],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,testMoveMessagesBetweenQueuesWithActiveConsumerOnDestinationQueue,559-559,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_BOXED_PRIMITIVE_TOSTRING,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,testMoveMessagesBetweenQueuesWithActiveConsumerOnSourceQueue,514-514,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,testMoveMessagesBetweenQueuesWithActiveConsumerOnDestinationQueue,559-559,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,testMoveMessagesBetweenQueuesWithActiveConsumerOnSourceQueue,514-514,[        setTestClientSystemProperty(ClientProperties.MAX_PREFETCH_PROP_NAME, new Integer(1).toString());],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,testMoveMessagesBetweenQueuesWithActiveConsumerOnDestinationQueue,578-578,[        allMessagesConsumedLatch.await(5000, TimeUnit.MILLISECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,,740-747,[        {, ,             @Override,             public void onMessage(Message arg0),             {,                 totalConsumed.incrementAndGet();,                 requiredNumberOfMessagesRead.countDown();,             }],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,awaitExpectedNotifications,863-863,[            _notificationReceivedLatch.await(timeout, timeunit);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/systest/management/jmx/QueueManagementTest.java,,830-864,[    private final class RecordingNotificationListener implements NotificationListener,     {,         private final CountDownLatch _notificationReceivedLatch;,         private final AtomicInteger _numberOfNotifications;,         private final AtomicReference<Notification> _lastNotification;, ,         private RecordingNotificationListener(int expectedNumberOfNotifications),         {,             _notificationReceivedLatch = new CountDownLatch(expectedNumberOfNotifications);,             _numberOfNotifications = new AtomicInteger(0);,             _lastNotification = new AtomicReference<Notification>();,         }, ,         @Override,         public void handleNotification(Notification notification, Object handback),         {,             _lastNotification.set(notification);,             _numberOfNotifications.incrementAndGet();,             _notificationReceivedLatch.countDown();,         }, ,         public int getNumberOfNotificationsReceived(),         {,             return _numberOfNotifications.get();,         }, ,         public Notification getLastNotification(),         {,             return _lastNotification.get();,         }, ,         public void awaitExpectedNotifications(long timeout, TimeUnit timeunit) throws InterruptedException,         {,             _notificationReceivedLatch.await(timeout, timeunit);,         }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/management/jmx/UserManagementTest.java,passwordFileContainsUser,211-211,[        try(BufferedReader reader = new BufferedReader(new FileReader(_passwordFile)))],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/management/jmx/UserManagementTest.java,writePasswordFile,177-177,[        try(FileWriter writer = new FileWriter(passwordFile))],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/messageencryption/MessageEncryptionTest.java,setUp,52-52,[    }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/AccessControlProviderRestTest.java,testRemovalOfAccessControlProviderInErrorStateUsingManagementMode,171-171,[            file.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/AuthenticationProviderRestTest.java,testCreatePlainPrincipalDatabaseProviderAddUserAndAuthenticateWithNewUser,170-170,[            principalDatabase.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/AuthenticationProviderRestTest.java,testCreatePlainPrincipalDatabaseProviderFormEmptyFile,114-114,[            principalDatabase.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/AuthenticationProviderRestTest.java,testPutCreateSecondPlainPrincipalDatabaseProviderSucceeds,87-87,[            principalDatabase.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/AuthenticationProviderRestTest.java,testRemovalOfAuthenticationProviderInErrorStateUsingManagementMode,261-261,[            file.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/AuthenticationProviderRestTest.java,testUpdateOfAuthenticationProviderInErrorStateUsingManagementMode,298-298,[            file.delete();],,testUpdateOfAuthenticationProviderInErrorStateUsingManagementMode,346-346,[                principalDatabase.delete();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/rest/BasicAuthRestTest.java,setUp,44-44,[        setSystemProperty("javax.net.debug", "ssl");],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/rest/CompressedResponsesRestTest.java,setUp,46-46,[    }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,tearDown,71-71,[                _groupFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,testCreateNewFileGroupProviderForTheSameGroupFileFails,239-239,[            groupFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,testCreateNewFileGroupProviderFromExistingGroupFile,172-172,[            groupFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,testCreateNewFileGroupProviderFromNonExistingGroupFile,214-214,[            groupFile.delete();],,testCreateNewFileGroupProviderFromNonExistingGroupFile,215-215,[            groupFile.getParentFile().delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,testDeleteGroupProvider,264-264,[            groupFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,testRemovalOfGroupProviderInErrorStateUsingManagementMode,308-308,[            file.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupProviderRestTest.java,testUpdateGroupProviderAttributesFails,292-292,[                newGroupFile.delete();],,testUpdateGroupProviderAttributesFails,297-297,[            groupFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/GroupRestTest.java,tearDown,62-62,[                _groupFile.delete();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/rest/KeyStoreRestTest.java,setUp,46-46,[    }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/PreferencesProviderRestTest.java,tearDown,66-66,[                _authenticationProviderFile.delete();],,tearDown,70-70,[                file.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/PreferencesRestTest.java,tearDown,54-54,[                _preferencesProviderFile.delete();],,
CORRECTNESS,IJU_NO_TESTS,org/apache/qpid/systest/rest/QpidRestTestCase.java,,37-132,[public class QpidRestTestCase extends QpidBrokerTestCase, {,     public static final String EXTERNAL_AUTHENTICATION_PROVIDER = "testExternal";, ,     public static final String TEST1_VIRTUALHOST = "test";,     public static final String TEST2_VIRTUALHOST = "test2";,     public static final String TEST3_VIRTUALHOST = "test3";, ,     public static final String[] EXPECTED_VIRTUALHOSTS = { TEST1_VIRTUALHOST, TEST2_VIRTUALHOST, TEST3_VIRTUALHOST};,     public static final String[] EXPECTED_EXCHANGES = { "amq.fanout", "amq.match", "amq.direct","amq.topic" };, ,     private RestTestHelper _restTestHelper = new RestTestHelper(findFreePort());, ,     @Override,     public void setUp() throws Exception,     {,         // use webadmin account to perform tests,         getRestTestHelper().setUsernameAndPassword("webadmin", "webadmin");, ,         //remove the normal 'test' vhost, we will configure the vhosts below,         getBrokerConfiguration(0).removeObjectConfiguration(VirtualHostNode.class, TestBrokerConfiguration.ENTRY_NAME_VIRTUAL_HOST);, ,         // Set up virtualhost config with queues and bindings to the amq.direct,         for (String virtualhost : EXPECTED_VIRTUALHOSTS),         {,             createTestVirtualHostNode(0, virtualhost);,         }, ,         customizeConfiguration();,         super.setUp();,     }, ,     @Override,     protected void tearDown() throws Exception,     {,         try,         {,             super.tearDown();,         },         finally,         {,             getRestTestHelper().tearDown();,         },     }, ,     protected void customizeConfiguration() throws IOException,     {,         TestBrokerConfiguration config = getBrokerConfiguration();,         config.addHttpManagementConfiguration();,         config.setObjectAttribute(Port.class, TestBrokerConfiguration.ENTRY_NAME_HTTP_PORT, Port.PORT, _restTestHelper.getHttpPort());,         config.removeObjectConfiguration(Port.class, TestBrokerConfiguration.ENTRY_NAME_JMX_PORT);,         config.removeObjectConfiguration(Port.class, TestBrokerConfiguration.ENTRY_NAME_RMI_PORT);, ,         config.setObjectAttribute(AuthenticationProvider.class, TestBrokerConfiguration.ENTRY_NAME_AUTHENTICATION_PROVIDER,,                                   "secureOnlyMechanisms",,                                   "{}");, , ,         // set password authentication provider on http port for the tests,         config.setObjectAttribute(Port.class, TestBrokerConfiguration.ENTRY_NAME_HTTP_PORT, Port.AUTHENTICATION_PROVIDER,,                 TestBrokerConfiguration.ENTRY_NAME_AUTHENTICATION_PROVIDER);,         config.setObjectAttribute(Plugin.class, TestBrokerConfiguration.ENTRY_NAME_HTTP_MANAGEMENT, HttpManagement.HTTP_BASIC_AUTHENTICATION_ENABLED, true);,     }, ,     public RestTestHelper getRestTestHelper(),     {,         return _restTestHelper;,     }, ,     public Map<String, Object> waitForAttributeChanged(String url, String attributeName, Object newValue) throws Exception,     {,         List<Map<String, Object>> nodeAttributes = getAttributesIgnoringNotFound(url);,         int timeout = 5000;,         long limit = System.currentTimeMillis() + timeout;,         while(System.currentTimeMillis() < limit && (nodeAttributes.size() == 0 || !newValue.equals(nodeAttributes.get(0).get(attributeName)))),         {,             Thread.sleep(100l);,             nodeAttributes = getAttributesIgnoringNotFound(url);,         },         Map<String, Object> nodeData = nodeAttributes.get(0);,         assertEquals("Attribute " + attributeName + " did not reach expected value within permitted timeout "  + timeout + "ms.", newValue, nodeData.get(attributeName));,         return nodeData;,     }, ,     private List<Map<String, Object>> getAttributesIgnoringNotFound(String url) throws IOException,     {,         List<Map<String, Object>> nodeAttributes;,         try,         {,             nodeAttributes = getRestTestHelper().getJsonAsList(url);,         },         catch(FileNotFoundException e),         {,             nodeAttributes = Collections.emptyList();,         },         return nodeAttributes;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/systest/rest/QpidRestTestCase.java,,46-46,[    public static final String[] EXPECTED_EXCHANGES = { "amq.fanout", "amq.match", "amq.direct","amq.topic" };],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/systest/rest/QpidRestTestCase.java,,45-45,[    public static final String[] EXPECTED_VIRTUALHOSTS = { TEST1_VIRTUALHOST, TEST2_VIRTUALHOST, TEST3_VIRTUALHOST};],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/RestTestHelper.java,createTemporaryPasswdFile,520-520,[            writer = new BufferedWriter(new FileWriter(testFile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/RestTestHelper.java,openManagementConnection,205-205,[            String encoded = DatatypeConverter.printBase64Binary((_username + ":" + _password).getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/RestTestHelper.java,readConnectionInputStream,247-247,[            LOGGER.trace("RESPONSE:" + new String(baos.toByteArray()));],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/systest/rest/RestTestHelper.java,setUseSsl,476-477,[        _useSsl = useSsl;,     }],,setUseSSL,264-265,[        this.useSSL = useSSL;,     }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/RestTestHelper.java,tearDown,507-507,[                _passwdFile.delete();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/systest/rest/RestTestHelper.java,,229-229,[        {],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/SaslRestTest.java,authenticateUser,320-320,[        os.write(requestParameters.getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/SaslRestTest.java,configureBase64MD5FilePrincipalDatabase,376-376,[            writer = new FileWriter(passwordFile);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/SaslRestTest.java,requestSasServerChallenge,292-292,[        os.write(("mechanism=" + mechanism).getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/SaslRestTest.java,testPlainSaslAuthenticationForIncorrectPassword,133-133,[        os.write(parameters.getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/SaslRestTest.java,testPlainSaslAuthenticationForNonExistingUser,158-158,[        os.write(parameters.getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/systest/rest/SaslRestTest.java,testPlainSaslAuthenticationForValidCredentials,108-108,[        os.write(parameters.getBytes());],,testPlainSaslAuthenticationForValidCredentials,111-111,[        int code = getRestTestHelper().submitRequest("/service/sasl", "POST", parameters.getBytes());],,
CORRECTNESS,NP_NULL_ON_SOME_PATH_EXCEPTION,org/apache/qpid/systest/rest/SaslRestTest.java,configureBase64MD5FilePrincipalDatabase,381-381,[            writer.close();],,configureBase64MD5FilePrincipalDatabase,373-373,[        FileWriter writer = null;],,configureBase64MD5FilePrincipalDatabase,376-376,[            writer = new FileWriter(passwordFile);],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/rest/TrustStoreRestTest.java,setUp,46-46,[    }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/UserPreferencesRestTest.java,tearDown,59-59,[                _preferencesProviderFile.delete();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/rest/acl/GroupRestACLTest.java,setUp,54-54,[        _groupFile = createTemporaryGroupFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/acl/GroupRestACLTest.java,tearDown,76-76,[                _groupFile.delete();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/acl/UserPreferencesRestACLTest.java,tearDown,69-69,[                _preferencesProviderFile.delete();],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/systest/rest/acl/UserRestACLTest.java,setUp,53-53,[        _groupFile = createTemporaryGroupFile();],,
EXPERIMENTAL,OBL_UNSATISFIED_OBLIGATION,org/apache/qpid/systest/rest/acl/UserRestACLTest.java,createTemporaryGroupFile,92-92,[        props.store(new FileOutputStream(groupFile), "test group file");],,createTemporaryGroupFile,94-94,[        return groupFile;],,
BAD_PRACTICE,OS_OPEN_STREAM,org/apache/qpid/systest/rest/acl/UserRestACLTest.java,createTemporaryGroupFile,92-92,[        props.store(new FileOutputStream(groupFile), "test group file");],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/systest/rest/acl/UserRestACLTest.java,tearDown,77-77,[                _groupFile.delete();],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/test/client/DupsOkTest.java,testDupsOK,87-165,[        Connection clientConnection = getConnection();, ,         final Session clientSession = clientConnection.createSession(false, Session.DUPS_OK_ACKNOWLEDGE);, ,         MessageConsumer consumer = clientSession.createConsumer(_queue);, ,         assertEquals("The queue should have msgs at start", MSG_COUNT, ((AMQSession) clientSession).getQueueDepth((AMQDestination) _queue));, ,         clientConnection.start();, ,         consumer.setMessageListener(new MessageListener(),         {,             private int _msgCount = 0;, ,             public void onMessage(Message message),             {,                 _msgCount++;,                 if (message == null),                 {,                     fail("Should not get null messages");,                 }, ,                 if (message instanceof TextMessage),                 {,                     try,                     {,                         if (message.getIntProperty("count") == MSG_COUNT),                         {,                             try,                             {,                                 if(_msgCount != MSG_COUNT),                                 {,                                     assertEquals("Wrong number of messages seen.", MSG_COUNT, _msgCount);,                                 },                             },                             finally,                             {,                                 //This is the last message so release test.,                                 _awaitCompletion.countDown();,                             },                         },                     },                     catch (JMSException e),                     {,                         fail("Unable to get int property 'count'");,                     },                 },                 else,                 {,                     fail("Got wrong message type");,                 },             },         });, ,         try,         {,             if (!_awaitCompletion.await(120, TimeUnit.SECONDS)),             {,                 fail("Test did not complete in 120 seconds");,             },         },         catch (InterruptedException e),         {,             fail("Unable to wait for test completion");,             throw e;,         }, ,         //Close consumer to give broker time to process in bound Acks. As The main thread will be released while,         // before the dispatcher has sent the ack back to the broker.,         consumer.close();, ,         clientSession.close();, ,         final Session clientSession2 = clientConnection.createSession(false, Session.DUPS_OK_ACKNOWLEDGE);, ,         assertEquals("The queue should have 0 msgs left", 0, ((AMQSession) clientSession2).getQueueDepth((AMQDestination) _queue));, ,         clientConnection.close();,     }],,testDupsOk,168-169,[        testAcking(false, Session.DUPS_OK_ACKNOWLEDGE);,     }],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/client/QueueBrowserAutoAckTest.java,sendMessages,85-85,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/client/QueueBrowserAutoAckTest.java,validate,292-292,[        catch (Exception e)],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/client/RollbackOrderTest.java,testOrderingAfterRollbackOnMessage,173-173,[        count.await(10l, TimeUnit.SECONDS);],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/test/client/destination/AddressBasedDestinationTest.java,testSubscriptionForSameDestination,872-872,[        catch(Exception e)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/test/client/destination/AddressBasedDestinationTest.java,testXSubscribeOverrides,950-950,[        catch(Exception e)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/test/client/failover/FailoverTest.java,tearDown,97-97,[        catch (Exception e)],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/client/message/MessageToStringTest.java,getBytes,234-234,[            byteResults = ((TextMessage) receivedMessage).getText().getBytes();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/client/message/MessageToStringTest.java,testBytesMessage,90-90,[        byte[] testBytes = test.toString().getBytes();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/client/message/MessageToStringTest.java,testTextMessage,145-145,[        byte[] testBytes = stringValue.getBytes();],,
MALICIOUS_CODE,MS_SHOULD_BE_FINAL,org/apache/qpid/test/unit/ack/Acknowledge2ConsumersTest.java,,37-37,[    protected static int NUM_MESSAGES = 100;],,
MT_CORRECTNESS,UW_UNCOND_WAIT,org/apache/qpid/test/unit/ack/RecoverTest.java,testOrderingWithAsyncConsumer,431-431,[            lock.wait(8000);],,
MT_CORRECTNESS,WA_NOT_IN_LOOP,org/apache/qpid/test/unit/ack/RecoverTest.java,testOrderingWithAsyncConsumer,431-431,[            lock.wait(8000);],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/ack/RecoverTest.java,onMessage,269-269,[                    lock.notify();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/unit/basic/BytesMessageTest.java,send,122-122,[            byte[] data = ("Message " + i).getBytes();],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/test/unit/basic/BytesMessageTest.java,testModificationAfterSend,318-318,[            assertEquals("Message "+writtenMsgCount+" not of expected size", (long) ((writtenMsgCount + 1)*1024),],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/basic/BytesMessageTest.java,onMessage,250-250,[            received.notify();],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/unit/basic/FieldTableMessageTest.java,test,108-108,[        _waitForCompletion.await(20, TimeUnit.SECONDS);],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/basic/MapMessageTest.java,onMessage,1243-1243,[            received.notify();],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/test/unit/basic/MapMessageTest.java,assertEqual,1202-1227,[        List<String> errors = new ArrayList<String>();,         while (expected.hasNext() && actual.hasNext()),         {,             try,             {,                 assertEqual(expected.next(), actual.next());,             },             catch (Exception e),             {,                 errors.add(e.getMessage());,             },         },         while (expected.hasNext()),         {,             errors.add("Expected " + expected.next() + " but no more actual values.");,         },         while (actual.hasNext()),         {,             errors.add("Found " + actual.next() + " but no more expected values.");,         }, ,         if (!errors.isEmpty()),         {,             throw new RuntimeException(errors.toString());,         },     }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/test/unit/basic/MultipleConnectionTest.java,randomize,176-176,[        return in + System.currentTimeMillis();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/basic/MultipleConnectionTest.java,onMessage,124-124,[            notify();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_NEEDS_THIS,org/apache/qpid/test/unit/basic/MultipleConnectionTest.java,,90-108,[            this((AMQConnection) getConnection("guest", "guest"), dest);,         }, ,         Publisher(AMQConnection connection, AMQDestination dest) throws Exception,         {,             _connection = connection;,             _session = _connection.createSession(false, AMQSession.NO_ACKNOWLEDGE);,             _producer = _session.createProducer(dest);,         }, ,         void send(String msg) throws JMSException,         {,             _producer.send(_session.createTextMessage(msg));,         }, ,         void close() throws JMSException,         {,             _connection.close();,         }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_NEEDS_THIS,org/apache/qpid/test/unit/basic/MultipleConnectionTest.java,,53-78,[            this((AMQConnection) getConnection("guest", "guest"), dest, sessions);,         }, ,         Receiver(AMQConnection connection, AMQDestination dest, int sessions) throws Exception,         {,             _connection = connection;,             _sessions = new AMQSession[sessions];,             _counters = new MessageCounter[sessions];,             for (int i = 0; i < sessions; i++),             {,                 _sessions[i] = _connection.createSession(false, AMQSession.NO_ACKNOWLEDGE);,                 _counters[i] = new MessageCounter(_sessions[i].toString());,                 _sessions[i].createConsumer(dest).setMessageListener(_counters[i]);,             }, ,             _connection.start();,         }, ,         void close() throws JMSException,         {,             _connection.close();,         }, ,         public MessageCounter[] getCounters(),         {,             return _counters;],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/basic/ObjectMessageTest.java,onMessage,225-225,[            received.notify();],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/test/unit/basic/ObjectMessageTest.java,,239-255,[        {,             this.data = data;,         }, ,         public int hashCode(),         {,             return data.hashCode();,         }, ,         public boolean equals(Object o),         {,             return (o instanceof Payload) && ((Payload) o).data.equals(data);,         }, ,         public String toString(),         {,             return "Payload[" + data + "]";],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/basic/PropertyValueTest.java,onMessage,360-360,[            received.notify();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/basic/SessionStartTest.java,onMessage,99-99,[        notify();],,
MT_CORRECTNESS,WA_NOT_IN_LOOP,org/apache/qpid/test/unit/basic/SessionStartTest.java,test,79-79,[            wait(1000);],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/unit/basic/TextMessageTest.java,test,107-107,[        _waitForCompletion.await(20, TimeUnit.SECONDS);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/client/AMQSessionTest.java,testQueueDepthForQueueThatDoesNotExistLegacyBehaviour_08_091,122-122,[        _session = (AMQSession) _connection.createSession(true, AMQSession.SESSION_TRANSACTED);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/client/AMQSessionTest.java,setUp,49-49,[        _connection = (AMQConnection) getConnection();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/client/AMQSessionTest.java,setUp,51-51,[        _queue = new AMQQueue(_connection, "myqueue");],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/client/AMQSessionTest.java,setUp,52-52,[        _session = (AMQSession) _connection.createSession(true, AMQSession.SESSION_TRANSACTED);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/client/AMQSessionTest.java,setUp,50-50,[        _topic = new AMQTopic(_connection, "mytopic");],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/test/unit/client/MaxDeliveryCountTest.java,doSynchronousTest,595-606,[                    switch(deliveryMode),                     {,                         case Session.SESSION_TRANSACTED:,                             session.rollback();,                             break;,                         case Session.CLIENT_ACKNOWLEDGE:,                             session.recover();, ,                             //sleep then do a synchronous op to give the broker,                             //time to resend all the messages,                             Thread.sleep(500);,                             ((AMQSession<?,?>) session).sync();],,doSynchronousTest,629-635,[                    switch(deliveryMode),                     {,                         case Session.SESSION_TRANSACTED:,                             session.commit();,                             break;,                         case Session.CLIENT_ACKNOWLEDGE:,                             message.acknowledge();],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/test/unit/client/MaxDeliveryCountTest.java,onMessage,457-467,[                        switch(deliveryMode),                         {,                             case Session.SESSION_TRANSACTED:,                                 session.rollback();,                                 break;,                             case Session.CLIENT_ACKNOWLEDGE:,                                 //fall through,                             case Session.DUPS_OK_ACKNOWLEDGE:,                                 //fall through,                             case Session.AUTO_ACKNOWLEDGE:,                                 session.recover();],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/test/unit/client/channelclose/CloseWithBlockingReceiveTest.java,run,55-55,[                catch (Exception e)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/unit/client/channelclose/CloseWithBlockingReceiveTest.java,,46-58,[        {, ,             public void run(),             {,                 try,                 {,                     Thread.sleep(1000);,                     connection.close();,                 },                 catch (Exception e),                 {,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/test/unit/client/connection/BrokerClosesClientConnectionTest.java,,151-163,[    private class Listener implements MessageListener,     {,         int _messageCount;, ,         @Override,         public synchronized void onMessage(Message message),         {,             _messageCount++;,         }, ,         public synchronized int getCount(),         {,             return _messageCount;],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/unit/client/connection/BrokerClosesClientConnectionTest.java,awaitException,145-145,[            _exceptionReceivedLatch.await(timeoutInMillis, TimeUnit.MILLISECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/test/unit/client/connection/BrokerClosesClientConnectionTest.java,,132-146,[    private final class RecordingExceptionListener implements ExceptionListener,     {,         private final CountDownLatch _exceptionReceivedLatch = new CountDownLatch(1);,         private volatile JMSException _exception;, ,         @Override,         public void onException(JMSException exception),         {,             _exception = exception;,         }, ,         public JMSException awaitException(long timeoutInMillis) throws InterruptedException,         {,             _exceptionReceivedLatch.await(timeoutInMillis, TimeUnit.MILLISECONDS);,             return _exception;],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/test/unit/client/connection/ConnectionFactoryTest.java,testCreateConnectionWithUsernamePassword,53-53,[        catch(Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionFactoryTest.java,testCreateConnectionWithUsernamePassword,53-53,[        catch(Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionStartTest.java,setUp,74-74,[        catch (Exception e)],,
CORRECTNESS,NP_NULL_ON_SOME_PATH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testDefaultExchanges,127-127,[            conn.close();],,testDefaultExchanges,71-71,[        AMQConnection conn = null;],,testDefaultExchanges,74-74,[            BrokerDetails broker = getBroker();],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testClientIdCannotBeChanged,246-246,[            if (connection != null)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testClientIDVerificationForDifferentUsers,338-338,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testClientIDVerificationForSameUser,312-312,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testDefaultExchanges,121-121,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testExceptionWhenUserPassIsRequired,360-360,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/client/connection/ConnectionTest.java,testUnsupportedSASLMechanism,281-281,[        catch (Exception e)],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/unit/client/connection/ExceptionListenerTest.java,testExceptionListenerHearsBrokerShutdown,73-73,[        exceptionReceivedLatch.await(10, TimeUnit.SECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/unit/client/connection/ExceptionListenerTest.java,,195-220,[        {,             public void onException(JMSException exception),             {,                 exceptionReceivedLatch.countDown();,                 if (exceptionReceivedLatch.getCount() == 0),                 {,                     try,                     {,                         if (doneClosed.compareAndSet(false, true)),                         {,                             connection.stop();,                             connection.close();,                         },                     },                     catch (Exception e),                     {,                         // We expect no exception to be caught,                         connectionCloseException.set(e);,                     },                     finally,                     {,                         connectionClosedAttemptLatch.countDown();,                     }, ,                 },             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/unit/client/connection/ExceptionListenerTest.java,,228-243,[        {,             @Override,             public void onMessage(Message msg),             {,                 try,                 {,                     Session mlSession = connection.createSession(true, Session.SESSION_TRANSACTED);  // ** Deadlock,                     mlSession.createProducer(unknownQueue).send(msg);  // will cause async AMQNoRouteException;,                     mlSession.commit();,                 },                 catch (JMSException je),                 {,                     // Connection is closed by the listener, so exceptions here are expected.,                     LOGGER.debug("Expected exception - message listener got exception", je);,                 },             }],,
STYLE,BC_VACUOUS_INSTANCEOF,org/apache/qpid/test/unit/client/connectionurl/ConnectionURLTest.java,testSerialization,634-634,[        assertTrue(connectionurl instanceof Serializable);],,
PERFORMANCE,DM_BOOLEAN_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,133-133,[        bm.writeObject(new Boolean(true));],,testWriteObject,134-134,[        bm.writeObject(new Boolean(false));],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,143-143,[        bm.writeObject(new Double(8.7d));],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,142-142,[        bm.writeObject(new Float(1.7f));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,135-135,[        bm.writeObject(new Byte((byte)2));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,137-137,[        bm.writeObject(new Character('g'));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,139-139,[        bm.writeObject(new Integer(101));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,138-138,[        bm.writeObject(new Short((short) 29));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/BytesMessageTest.java,testWriteObject,140-140,[        bm.writeObject(new Long(50003222L));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,setUp,79-79,[        data = new Serializable[] { a1, a2, b, c, "Hello World!", new Integer(1001) };],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,onMessage,264-264,[            notify();],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,,285-302,[        {,             sValue = s;,             iValue = i;,         }, ,         public int hashCode(),         {,             return iValue;,         }, ,         public boolean equals(Object o),         {,             return (o instanceof A) && equals((A) o);,         }, ,         protected boolean equals(A a),         {,             return areEqual(a.sValue, sValue) && (a.iValue == iValue);],,
STYLE,EQ_DOESNT_OVERRIDE_EQUALS,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,equals,297-297,[            return (o instanceof A) && equals((A) o);],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,,312-318,[            super(i, s);,             time = System.currentTimeMillis();,         }, ,         protected boolean equals(A a),         {,             return super.equals(a) && (a instanceof B) && (time == ((B) a).time);],,
STYLE,RI_REDUNDANT_INTERFACES,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,,322-322,[    private static class C extends HashMap implements Serializable],,
BAD_PRACTICE,SE_NO_SERIALVERSIONID,org/apache/qpid/test/unit/client/message/ObjectMessageTest.java,,322-322,[    private static class C extends HashMap implements Serializable],,
PERFORMANCE,DM_BOOLEAN_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,136-136,[        bm.writeObject(new Boolean(true));],,testWriteObject,137-137,[        bm.writeObject(new Boolean(false));],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,146-146,[        bm.writeObject(new Double(8.7d));],,
PERFORMANCE,DM_FP_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,145-145,[        bm.writeObject(new Float(1.7f));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,138-138,[        bm.writeObject(new Byte((byte)2));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,140-140,[        bm.writeObject(new Character('g'));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,142-142,[        bm.writeObject(new Integer(101));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,141-141,[        bm.writeObject(new Short((short) 29));],,
PERFORMANCE,DM_NUMBER_CTOR,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,testWriteObject,143-143,[        bm.writeObject(new Long(50003222L));],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/test/unit/client/message/StreamMessageTest.java,checkConversionsFail,445-475,[                switch (conversion),                 {,                     case 0:,                         sm.readBoolean();,                         break;,                     case 1:,                         sm.readByte();,                         break;,                     case 2:,                         sm.readShort();,                         break;,                     case 3:,                         sm.readChar();,                         break;,                     case 4:,                         sm.readInt();,                         break;,                     case 5:,                         sm.readLong();,                         break;,                     case 6:,                         sm.readFloat();,                         break;,                     case 7:,                         sm.readDouble();,                         break;,                     case 8:,                         sm.readString();,                         break;,                     case 9:,                         sm.readBytes(new byte[3]);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/unit/client/protocol/AMQProtocolSessionTest.java,,115-130,[            {, ,                 public void send(ByteBuffer msg),                 {, ,                 }, ,                 public void flush(),                 {, ,                 }, ,                 public void close(),                 {, ,                 }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/unit/message/JMSPropertiesTest.java,testQpidExtensionProperties,183-183,[        m.setObjectProperty("foo-bar", "foobar".getBytes());],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/test/unit/message/NonQpidMessage.java,getIntProperty,243-243,[                return Integer.valueOf(null);],,
PERFORMANCE,DM_BOXED_PRIMITIVE_FOR_PARSING,org/apache/qpid/test/unit/message/NonQpidMessage.java,getLongProperty,263-263,[                return Long.valueOf(null);],,
CORRECTNESS,NP_NULL_PARAM_DEREF_NONVIRTUAL,org/apache/qpid/test/unit/message/NonQpidMessage.java,getByteProperty,203-203,[                return Byte.valueOf(null);],,
CORRECTNESS,NP_NULL_PARAM_DEREF_NONVIRTUAL,org/apache/qpid/test/unit/message/NonQpidMessage.java,getIntProperty,243-243,[                return Integer.valueOf(null);],,
CORRECTNESS,NP_NULL_PARAM_DEREF_NONVIRTUAL,org/apache/qpid/test/unit/message/NonQpidMessage.java,getShortProperty,223-223,[                return Short.valueOf(null);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/unit/message/StreamMessageTest.java,,126-145,[            {, ,                 public void onMessage(Message message),                 {,                     final StreamMessage sm = (StreamMessage) message;,                     try,                     {,                         sm.clearBody();,                         // it is legal to extend a stream message's content,                         sm.writeString("dfgjshfslfjshflsjfdlsjfhdsljkfhdsljkfhsd");,                     },                     catch (Throwable t),                     {,                         listenerCaughtException.set(t);,                     },                     finally,                     {,                         awaitMessages.countDown();,                     },                 }],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/unit/topic/DurableSubscriptionTest.java,awaitException,263-263,[            _latch.await(POSITIVE_RECEIVE_TIMEOUT, TimeUnit.MILLISECONDS);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/test/unit/topic/DurableSubscriptionTest.java,,248-269,[    private final class StoringExceptionListener implements ExceptionListener,     {,         private volatile JMSException _exception;,         private CountDownLatch _latch = new CountDownLatch(1);, ,         @Override,         public void onException(JMSException exception),         {,             _exception = exception;,             _logger.info("Exception listener received: " + exception);,             _latch.countDown();,         }, ,         public JMSException awaitException() throws InterruptedException,         {,             _latch.await(POSITIVE_RECEIVE_TIMEOUT, TimeUnit.MILLISECONDS);,             return _exception;,         }, ,         public JMSException getException(),         {,             return _exception;],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/unit/transacted/CommitRollbackTest.java,testCommitWithinOnMessage,410-410,[        cd.await(30, TimeUnit.SECONDS);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,getNewXid,90-90,[            branchQualifier = branchQualifierSt.getBytes();],,getNewXid,91-91,[            globalTransactionID = globalTransactionIDSt.getBytes();],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,,55-55,[    protected static MessageConsumer _consumer = null;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,,60-60,[    protected static TextMessage _message = null;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,,50-50,[    protected static MessageProducer _producer = null;],,
MALICIOUS_CODE,MS_PKGPROTECT,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,,45-45,[    protected static XAResource _xaResource = null;],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,init,101-101,[                _xaResource = session.getXAResource();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,init,121-121,[                _consumer = session.createConsumer(destination);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,init,130-130,[                _message = session.createTextMessage();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,init,110-110,[                _producer = session.createProducer(destination);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/AbstractXATestCase.java,getNewXid,92-92,[            _xidCounter++;],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/FaultTest.java,init,116-116,[            _queue = (Queue) getInitialContext().lookup(QUEUENAME);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/FaultTest.java,init,117-117,[            _queueFactory = getConnectionFactory();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/FaultTest.java,init,121-121,[            _nonXASession = _queueConnection.createQueueSession(true, Session.AUTO_ACKNOWLEDGE);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/FaultTest.java,init,120-120,[            _queueConnection = _queueFactory.createQueueConnection("guest","guest");],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/FaultTest.java,init,118-118,[            _xaqueueConnection = _queueFactory.createXAQueueConnection("guest", "guest");],,
CORRECTNESS,DMI_INVOKING_TOSTRING_ON_ARRAY,org/apache/qpid/test/unit/xa/QueueTest.java,tearDown,110-110,[                fail("Exception thrown when cleaning standard connection: " + e.getStackTrace());],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/QueueTest.java,init,126-126,[                _queue = (Queue) getInitialContext().lookup(QUEUENAME);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/QueueTest.java,init,165-165,[                _nonXASession = _queueConnection.createQueueSession(true, Session.AUTO_ACKNOWLEDGE);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/QueueTest.java,init,164-164,[                _queueConnection = _queueFactory.createQueueConnection("guest", "guest");],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/QueueTest.java,init,136-136,[                _queueFactory = getConnectionFactory();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/QueueTest.java,init,145-145,[                _xaqueueConnection= getNewQueueXAConnection();],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/test/unit/xa/TopicTest.java,testMigrateDurableSubscriber,1592-1592,[                    synchronized (lock)],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/test/unit/xa/TopicTest.java,testMigrateDurableSubscriber,1626-1626,[                    synchronized (lock)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/xa/TopicTest.java,testMigrateDurableSubscriber,1639-1639,[            catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/xa/TopicTest.java,testDurSub,479-479,[            catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/xa/TopicTest.java,testMultiMessagesDurSub,596-596,[                catch (Exception e)],,testMultiMessagesDurSub,704-704,[            catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/test/unit/xa/TopicTest.java,testMultiMessagesDurSubCrash,831-831,[                catch (Exception e)],,testMultiMessagesDurSubCrash,930-930,[                catch (Exception e)],,testMultiMessagesDurSubCrash,1025-1025,[                catch (Exception e)],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,init,126-126,[                _topic = (Topic) getInitialContext().lookup(TOPICNAME);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,init,162-162,[                _nonXASession = _topicConnection.createTopicSession(true, Session.AUTO_ACKNOWLEDGE);],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,init,153-153,[                _session = _topicConnection.createXATopicSession();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,init,144-144,[                _topicConnection = getNewTopicXAConnection();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,init,135-135,[                _topicFactory = getConnectionFactory();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,testMigrateDurableSubscriber,1615-1615,[                _xaResource = _session.getXAResource();],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/unit/xa/TopicTest.java,testMigrateDurableSubscriber,1614-1614,[                _session = _topicConnection.createXATopicSession();],,
MT_CORRECTNESS,UW_UNCOND_WAIT,org/apache/qpid/test/unit/xa/TopicTest.java,testMigrateDurableSubscriber,1594-1594,[                        lock.wait();],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/test/unit/xa/TopicTest.java,onMessage,1715-1715,[                synchronized (_lock)],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/test/unit/xa/TopicTest.java,onMessage,1725-1725,[                synchronized (_lock)],,
MT_CORRECTNESS,JLM_JSR166_UTILCONCURRENT_MONITORENTER,org/apache/qpid/test/unit/xa/TopicTest.java,onMessage,1734-1734,[                synchronized (_lock)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/test/unit/xa/TopicTest.java,,1697-1739,[        {,             _counter = init;,             _end = end;,             _lock = lock;,         }, ,         public void onMessage(Message message),         {,             long seq = 0;,             try,             {,                 seq = message.getLongProperty(TopicTest._sequenceNumberPropertyName);,             },             catch (JMSException e),             {,                 _logger.error("Error getting long property: " + TopicTest._sequenceNumberPropertyName , e);,                 TopicTest.failure();,                 _lock.set(false);,                 synchronized (_lock),                 {,                     _lock.notifyAll();,                 },             },             if (seq != _counter),             {,                 _logger.info("received message " + seq + " expected " + _counter);,                 TopicTest.failure();,                 _lock.set(false);,                 synchronized (_lock),                 {,                     _lock.notifyAll();,                 },             },             _counter++;,             if (_counter > _end),             {,                 _lock.set(false);,                 synchronized (_lock),                 {,                     _lock.notifyAll();,                 },             },         }],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/test/utils/BrokerCommandHelperTest.java,setUp,36-36,[        _brokerCommandHelper = new BrokerCommandHelper("\"" + PATH_TO_QPID_EXECUTABLE + "\" " + ARGUMENT_PORT + "     "],,
CORRECTNESS,IJU_NO_TESTS,org/apache/qpid/test/utils/FailoverBaseCase.java,,31-93,[public class FailoverBaseCase extends QpidBrokerTestCase, {,     protected static final Logger _logger = LoggerFactory.getLogger(FailoverBaseCase.class);, ,     public static final long DEFAULT_FAILOVER_TIME = 10000L;, ,     protected void setUp() throws java.lang.Exception,     {,         super.setUp();,         startBroker(getFailingPort());,     }, ,     /**,      * We are using failover factories,      *,      * @return a connection ,      * @throws Exception,      */,     @Override,     public AMQConnectionFactory getConnectionFactory() throws NamingException,     {,         _logger.info("get ConnectionFactory");,         if (_connectionFactory == null),         {,             if (Boolean.getBoolean("profile.use_ssl")),             {,                 _connectionFactory = getConnectionFactory("failover.ssl");,             },             else,             {,                 _connectionFactory = getConnectionFactory("failover");,             },         },         return _connectionFactory;,     }, ,     public void tearDown() throws Exception,     {,         try,         {,             super.tearDown();,         },         finally,         {,             // Ensure we shutdown any secondary brokers, even if we are unable,             // to cleanly tearDown the QTC.,             stopBroker(getFailingPort());,             FileUtils.deleteDirectory(System.getProperty("QPID_WORK") + "/" + getFailingPort());,         },     }, ,     public void failBroker(int port),     {,         try,         {,             //TODO: use killBroker instead,             stopBroker(port);,         },         catch (Exception e),         {,             throw new RuntimeException(e);,         },     }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/utils/InternalBrokerHolder.java,,55-63,[            {,                 @Override,                 public void uncaughtException(final Thread t, final Throwable e),                 {,                     System.err.print("Thread terminated due to uncaught exception");,                     e.printStackTrace();, ,                     LOGGER.error("Uncaught exception from thread " + t.getName(), e);,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/utils/InternalBrokerHolder.java,,77-90,[        {,             @Override,             public void shutdown(),             {,                 try,                 {,                     super.shutdown();,                 },                 catch(IllegalStateException e),                 {,                     System.out.println("IllegalStateException occurred on broker shutdown in test " + options.getConfigProperties().get("test.name"));,                     throw e;,                 },             }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/Piper.java,<init>,48-48,[        _in = new BufferedReader(new InputStreamReader(in));],,
CORRECTNESS,RV_RETURN_VALUE_IGNORED,org/apache/qpid/test/utils/Piper.java,await,72-72,[            _latch.await(timeout, unit);],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/test/utils/QpidBrokerTestCase.java,stopBrokerSafely,562-562,[                    catch(Exception killException)],,
I18N,DM_CONVERT_CASE,org/apache/qpid/test/utils/QpidBrokerTestCase.java,<init>,139-139,[                                                                                            .toUpperCase());],,
I18N,DM_CONVERT_CASE,org/apache/qpid/test/utils/QpidBrokerTestCase.java,getPathRelativeToWorkingDirectory,451-451,[                configPath = configPath.toLowerCase();],,getPathRelativeToWorkingDirectory,452-452,[                workingDirectoryPath = workingDirectoryPath.toLowerCase();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/QpidBrokerTestCase.java,createMessage,1145-1145,[        String payload = new String(new byte[messageSize]);],,
CORRECTNESS,IJU_NO_TESTS,org/apache/qpid/test/utils/QpidBrokerTestCase.java,,76-1284,[public class QpidBrokerTestCase extends QpidTestCase, {,     private TaskExecutor _taskExecutor;, ,     public static final String GUEST_USERNAME = "guest";,     public static final String GUEST_PASSWORD = "guest";, ,     private final File _configFile = new File(System.getProperty("broker.config"));,     protected final String _brokerStoreType = System.getProperty("broker.config-store-type", "JSON");,     protected static final Logger _logger = LoggerFactory.getLogger(QpidBrokerTestCase.class);,     protected static final int LOGMONITOR_TIMEOUT = 5000;, ,     protected long RECEIVE_TIMEOUT = Long.getLong("qpid.test_receive_timeout", 1000l);, ,     private Map<String, String> _propertiesSetForBroker = new HashMap<String, String>();, ,     private Map<Integer, TestBrokerConfiguration> _brokerConfigurations;, ,     protected static final String INDEX = "index";,     protected static final String CONTENT = "content";, ,     private static final String DEFAULT_INITIAL_CONTEXT = "org.apache.qpid.jndi.PropertiesFileInitialContextFactory";, ,     static,     {,         String initialContext = System.getProperty(Context.INITIAL_CONTEXT_FACTORY);, ,         if (initialContext == null || initialContext.length() == 0),         {,             System.setProperty(Context.INITIAL_CONTEXT_FACTORY, DEFAULT_INITIAL_CONTEXT);,         },     }, ,     // system properties,     private static final String BROKER_LANGUAGE = "broker.language";,     protected static final String BROKER_TYPE = "broker.type";,     private static final String BROKER_COMMAND = "broker.command";,     private static final String BROKER_COMMAND_PLATFORM = "broker.command." + SystemUtils.getOSConfigSuffix();,     private static final String BROKER_CLEAN_BETWEEN_TESTS = "broker.clean.between.tests";,     private static final String BROKER_VERSION = "broker.version";,     private static final String TEST_OUTPUT = "test.output";,     private static final String BROKER_PERSITENT = "broker.persistent";,     public static final String PROFILE_USE_SSL = "profile.use_ssl";, ,     public static final int DEFAULT_PORT_VALUE = 5672;,     public static final int DEFAULT_SSL_PORT_VALUE = 5671;,     public static final int DEFAULT_JMXPORT_REGISTRYSERVER = 8999;,     public static final int JMXPORT_CONNECTORSERVER_OFFSET = 100;,     public static final int DEFAULT_HTTP_MANAGEMENT_PORT_VALUE = 8080;, ,     public static final String TEST_AMQP_PORT_PROTOCOLS_PROPERTY="test.amqp_port_protocols";, ,     // values,     protected static final String JAVA = "java";, ,     public static final int DEFAULT_PORT = Integer.getInteger("test.port", DEFAULT_PORT_VALUE);,     public static final int FAILING_PORT = Integer.parseInt(System.getProperty("test.port.alt"));,     public static final int DEFAULT_MANAGEMENT_PORT = Integer.getInteger("test.mport", DEFAULT_JMXPORT_REGISTRYSERVER);,     public static final int DEFAULT_HTTP_MANAGEMENT_PORT = Integer.getInteger("test.hport", DEFAULT_HTTP_MANAGEMENT_PORT_VALUE);,     public static final int DEFAULT_SSL_PORT = Integer.getInteger("test.port.ssl", DEFAULT_SSL_PORT_VALUE);, ,     protected String _brokerLanguage = System.getProperty(BROKER_LANGUAGE, JAVA);,     protected BrokerHolder.BrokerType _brokerType = BrokerHolder.BrokerType.valueOf(System.getProperty(BROKER_TYPE, ""),                                                                                             .toUpperCase());, ,     private static final String BROKER_COMMAND_TEMPLATE = System.getProperty(BROKER_COMMAND_PLATFORM,,                                                                              System.getProperty(BROKER_COMMAND));, ,     private Boolean _brokerCleanBetweenTests = Boolean.getBoolean(BROKER_CLEAN_BETWEEN_TESTS);,     private final Protocol _brokerProtocol = Protocol.valueOf("AMQP_" + System.getProperty(BROKER_VERSION, " "),             .substring(1));,     protected String _output = System.getProperty(TEST_OUTPUT, System.getProperty("java.io.tmpdir"));,     protected Boolean _brokerPersistent = Boolean.getBoolean(BROKER_PERSITENT);, ,     protected Map<Integer, BrokerHolder> _brokers = new HashMap<Integer, BrokerHolder>();, ,     protected InitialContext _initialContext;,     protected AMQConnectionFactory _connectionFactory;, ,     // the connections created for a given test,     protected List<Connection> _connections = new ArrayList<Connection>();,     public static final String QUEUE = "queue";,     public static final String TOPIC = "topic";,     public static final String MANAGEMENT_MODE_PASSWORD = "mm_password";, ,     /** Map to hold test defined environment properties */,     private Map<String, String> _env;, ,     /** Ensure our messages have some sort of size */,     protected static final int DEFAULT_MESSAGE_SIZE = 1024;, ,     /** Size to create our message*/,     private int _messageSize = DEFAULT_MESSAGE_SIZE;,     private String _brokerCommandTemplate;, ,     public File getOutputFile(),     {, ,         // get log file from file appender,         final ch.qos.logback.classic.Logger logger = (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);,         for (Iterator<Appender<ILoggingEvent>> index = logger.iteratorForAppenders(); index.hasNext(); /* do nothing */ ),         {,             Appender<ILoggingEvent> appender = index.next();,             if (appender instanceof FileAppender),             {,                 return new File(((FileAppender)appender).getFile());,             },         }, ,         return null;,     }, ,     /** Type of message*/,     protected enum MessageType,     {,         BYTES,,         MAP,,         OBJECT,,         STREAM,,         TEXT,     },     private MessageType _messageType  = MessageType.TEXT;, ,     public QpidBrokerTestCase(),     {,         super();,         _brokerConfigurations = new HashMap<>();,         _brokerCommandTemplate = BROKER_COMMAND_TEMPLATE;, , ,         if (JAVA.equals(_brokerLanguage)),         {,             try,             {,                 Broker.populateSystemPropertiesFromDefaults(null);,             },             catch (IOException ioe),             {,                 throw new RuntimeException("Failed to load Java broker system properties", ioe);,             },         },     }, ,     public TestBrokerConfiguration getBrokerConfiguration(int port),     {,         int actualPort = getPort(port);, ,         synchronized (_brokerConfigurations),         {,             TestBrokerConfiguration configuration = _brokerConfigurations.get(actualPort);,             if (configuration == null),             {,                 configuration = createBrokerConfiguration(actualPort);,             },             return configuration;,         },     }, ,     public TestBrokerConfiguration getBrokerConfiguration(),     {,         return getBrokerConfiguration(DEFAULT_PORT);,     }, ,     public TestBrokerConfiguration createBrokerConfiguration(int port),     {,         int actualPort = getPort(port);,         if(_taskExecutor == null),         {,             _taskExecutor = new TaskExecutorImpl();,             _taskExecutor.start();,         },         TestBrokerConfiguration  configuration = new TestBrokerConfiguration(_brokerStoreType, _configFile.getAbsolutePath(), _taskExecutor);,         synchronized (_brokerConfigurations),         {,             _brokerConfigurations.put(actualPort, configuration);,         },         if (actualPort != DEFAULT_PORT),         {,             configuration.setObjectAttribute(Port.class, TestBrokerConfiguration.ENTRY_NAME_AMQP_PORT, Port.PORT, actualPort);,             configuration.setObjectAttribute(Port.class, TestBrokerConfiguration.ENTRY_NAME_RMI_PORT, Port.PORT, getManagementPort(actualPort));,             configuration.setObjectAttribute(Port.class, TestBrokerConfiguration.ENTRY_NAME_JMX_PORT, Port.PORT, getManagementPort(actualPort) + JMXPORT_CONNECTORSERVER_OFFSET);, ,             String workDir = System.getProperty("QPID_WORK") + File.separator + TestBrokerConfiguration.ENTRY_NAME_VIRTUAL_HOST + File.separator + actualPort;,             configuration.setObjectAttribute(VirtualHostNode.class, TestBrokerConfiguration.ENTRY_NAME_VIRTUAL_HOST, JsonVirtualHostNode.STORE_PATH, workDir);,         }, ,         return configuration;,     }, ,     public Logger getLogger(),     {,         return QpidBrokerTestCase._logger;,     }, ,     @Override,     public void runBare() throws Throwable,     {,         // Initialize this for each test run,         _env = new HashMap<String, String>();, ,         // Log4j properties expects this to be set,         System.setProperty("qpid.testMethod", "-" + getName());,         System.setProperty("qpid.testClass", getClass().getName());, , ,         try,         {,             super.runBare();,         },         catch (Exception e),         {,             _logger.error("exception", e);,             throw e;,         },         finally,         {,             stopAllBrokers();, ,             // reset properties used in the test,             revertSystemProperties();, ,             if (_brokerCleanBetweenTests),             {,                 final String qpidWork = System.getProperty("QPID_WORK");,                 cleanBrokerWork(qpidWork);,                 createBrokerWork(qpidWork);,             }, ,             _logger.info("==========  stop " + getTestName() + " ==========");, ,             final ch.qos.logback.classic.Logger logger = (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);, ,             final LoggerContext context = logger.getLoggerContext();,             context.reset();,             context.stop();,         },     }, ,     @Override,     protected void setUp() throws Exception,     {,         super.setUp();,         _taskExecutor = new TaskExecutorImpl();,         _taskExecutor.start();,         if (!_configFile.exists()),         {,             fail("Unable to test without config file:" + _configFile);,         }, ,         startBroker();,     }, ,     /**,      * Return the management port in use by the broker on this main port,      *,      * @param mainPort the broker's main port.,      *,      * @return the management port that corresponds to the broker on the given port,      */,     protected int getManagementPort(int mainPort),     {,         return mainPort + (DEFAULT_MANAGEMENT_PORT - DEFAULT_PORT);,     }, ,     /**,      * The returned set of port numbers is only a guess because it assumes no ports have been overridden,      * using system properties.,      */,     protected Set<Integer> guessAllPortsUsedByBroker(int mainPort),     {,         Set<Integer> ports = new HashSet<Integer>();,         int managementPort = getManagementPort(mainPort);,         int connectorServerPort = managementPort + JMXPORT_CONNECTORSERVER_OFFSET;, ,         ports.add(mainPort);,         ports.add(managementPort);,         ports.add(connectorServerPort);,         ports.add(DEFAULT_SSL_PORT);, ,         return ports;,     }, ,     /**,      * Get the Port that is use by the current broker,      *,      * @return the current port,      */,     protected int getPort(),     {,         return getPort(0);,     }, ,     protected int getPort(int port),     {,         if (!_brokerType.equals(BrokerHolder.BrokerType.EXTERNAL)),         {,             return port == 0 ? DEFAULT_PORT : port;,         },         else,         {,             return port;,         },     }, ,     public void startBroker() throws Exception,     {,         startBroker(0);,     }, ,     public void startBroker(int port) throws Exception,     {,         startBroker(port, false);,     }, ,     public void startBroker(int port, boolean managementMode) throws Exception,     {,         int actualPort = getPort(port);,         TestBrokerConfiguration configuration = getBrokerConfiguration(actualPort);,         startBroker(actualPort, configuration, managementMode);,     }, ,     public void startBroker(int port, TestBrokerConfiguration testConfiguration) throws Exception,     {,         startBroker(port, testConfiguration, false);,     }, ,     protected void startBroker(int port,,                                TestBrokerConfiguration testConfiguration,,                                boolean managementMode) throws Exception,     {,         port = getPort(port);, ,         if(_brokers.get(port) != null),         {,             throw new IllegalStateException("There is already an existing broker running on port " + port);,         }, ,         String testConfig = saveTestConfiguration(port, testConfiguration);,         BrokerOptions options = getBrokerOptions(managementMode, testConfig);,         BrokerHolder holder = new BrokerHolderFactory().create(_brokerType, port, this);,         _brokers.put(port, holder);,         holder.start(options);,     }, ,     private boolean existingInternalBroker(),     {,         for(BrokerHolder holder : _brokers.values()),         {,             if(holder instanceof InternalBrokerHolder),             {,                 return true;,             },         }, ,         return false;,     }, ,     public String getTestConfigFile(int port),     {,         return _output + File.separator + getTestQueueName() + "-" + port + "-config";,     }, ,     protected String getPathRelativeToWorkingDirectory(String file),     {,         File configLocation = new File(file);,         File workingDirectory = new File(System.getProperty("user.dir"));, ,         _logger.debug("Converting path to be relative to working directory: " + file);, ,         try,         {,             String configPath = configLocation.getAbsolutePath();,             String workingDirectoryPath = workingDirectory.getCanonicalPath();,             if (SystemUtils.isWindows()),             {,                 configPath = configPath.toLowerCase();,                 workingDirectoryPath = workingDirectoryPath.toLowerCase();,             },             if(!configPath.startsWith(workingDirectoryPath)),             {,                 throw new RuntimeException("Provided path is not a child of the working directory: " + workingDirectoryPath);,             }, ,             String substring = configPath.replace(workingDirectoryPath, "").substring(1);,             _logger.debug("Converted relative path: " + substring);, ,             return substring;,         },         catch (IOException e),         {,             throw new RuntimeException("Problem while converting to relative path", e);,         },     }, ,     protected String saveTestConfiguration(int port, TestBrokerConfiguration testConfiguration),     {,         String testConfig = getTestConfigFile(port);,         String relative = getPathRelativeToWorkingDirectory(testConfig);,         if (testConfiguration != null && !testConfiguration.isSaved()),         {,             _logger.info("Saving test broker configuration at: " + testConfig);,             testConfiguration.save(new File(testConfig));,             testConfiguration.setSaved(true);,         },         return relative;,     }, ,     protected void cleanBrokerWork(final String qpidWork),     {,         if (qpidWork != null),         {,             _logger.info("Cleaning broker work dir: " + qpidWork);, ,             File file = new File(qpidWork);,             if (file.exists()),             {,                 final boolean success = FileUtils.delete(file, true);,                 if(!success),                 {,                     throw new RuntimeException("Failed to recursively delete beneath : " + file);,                 },             },         },     }, ,     protected void createBrokerWork(final String qpidWork),     {,         if (qpidWork != null),         {,             final File dir = new File(qpidWork);,             dir.mkdirs();,             if (!dir.isDirectory()),             {,                 throw new RuntimeException("Failed to created Qpid work directory : " + qpidWork);,             },         },     }, ,     public void stopBroker(),     {,         stopBroker(0);,     }, ,     public void stopAllBrokers(),     {,         boolean exceptionOccured = false;,         Set<Integer> runningBrokerPorts = new HashSet<Integer>(getBrokerPortNumbers());,         for (int brokerPortNumber : runningBrokerPorts),         {,             if (!stopBrokerSafely(brokerPortNumber)),             {,                 exceptionOccured = true;,             },         },         if (exceptionOccured),         {,             throw new RuntimeException("Exception occurred on stopping of test broker. Please, examine logs for details");,         },     }, ,     protected boolean stopBrokerSafely(int brokerPortNumber),     {,         boolean success = true;,         BrokerHolder broker = _brokers.get(brokerPortNumber);,         try,         {,             stopBroker(brokerPortNumber);,         },         catch(Exception e),         {,             success = false;,             _logger.error("Failed to stop broker " + broker + " at port " + brokerPortNumber, e);,             if (broker != null),             {,                 // save the thread dump in case of dead locks,                 try,                 {,                     _logger.error("Broker " + broker + " thread dump:" + broker.dumpThreads());,                 },                 finally,                 {,                     // try to kill broker,                     try,                     {,                         broker.kill();,                     },                     catch(Exception killException),                     {,                         // ignore,                     },                 },             },         },         return success;,     }, ,     public void stopBroker(int port),     {,         if (isBrokerPresent(port)),         {,             port = getPort(port);, ,             _logger.info("stopping broker on port : " + port);,             BrokerHolder broker = _brokers.remove(port);,             broker.shutdown();,         },     }, ,     public void killBroker(),     {,         killBroker(0);,     }, ,     public void killBroker(int port),     {,         if (isBrokerPresent(port)),         {,             port = getPort(port);, ,             _logger.info("killing broker on port : " + port);,             BrokerHolder broker = _brokers.remove(port);,             broker.kill();,         },     }, ,     public boolean isBrokerPresent(int port),     {,         port = getPort(port);, ,         return _brokers.containsKey(port);,     }, ,     public BrokerHolder getBroker(int port) throws Exception,     {,         port = getPort(port);,         return _brokers.get(port);,     }, ,     public Set<Integer> getBrokerPortNumbers(),     {,         return new HashSet<Integer>(_brokers.keySet());,     }, ,     /**,      * Creates a new virtual host node in broker configuration for given broker port,      * @param brokerPort broker port,      * @param virtualHostNodeName virtual host node name,      */,     protected void createTestVirtualHostNode(int brokerPort, String virtualHostNodeName, boolean withBlueprint),     {,         String storeType = getTestProfileVirtualHostNodeType();,         String storeDir = null;, ,         if (System.getProperty("profile", "").startsWith("java-dby-mem")),         {,             storeDir = ":memory:";,         },         else if (!MemoryConfigurationStore.TYPE.equals(storeType)),         {,             storeDir = "${QPID_WORK}" + File.separator + virtualHostNodeName + File.separator + brokerPort;,         }, ,         // add new virtual host node with vhost blueprint configuration to the broker store,         Map<String, Object> attributes = new HashMap<String, Object>();,         attributes.put(VirtualHostNode.NAME, virtualHostNodeName);,         attributes.put(VirtualHostNode.TYPE, storeType);,         if (storeDir != null),         {,             attributes.put(JsonVirtualHostNode.STORE_PATH, storeDir);,         }, ,         if (withBlueprint),         {,             final String blueprint = getTestProfileVirtualHostNodeBlueprint();, ,             attributes.put(ConfiguredObject.CONTEXT,,                            Collections.singletonMap(AbstractVirtualHostNode.VIRTUALHOST_BLUEPRINT_CONTEXT_VAR,,                                                     blueprint));,         }, ,         int port = getPort(brokerPort);,         getBrokerConfiguration(port).addObjectConfiguration(VirtualHostNode.class, attributes);,     }, ,     protected void createTestVirtualHostNode(int brokerPort, String virtualHostNodeName),     {,         createTestVirtualHostNode(brokerPort, virtualHostNodeName, true);,     }, ,     /**,      * Set a System property that is to be applied only to the external test,      * broker.,      *,      * This is a convenience method to enable the setting of a -Dproperty=value,      * entry in QPID_OPTS,      *,      * This is only useful for the External Java Broker tests.,      *,      * @param property the property name,      * @param value the value to set the property to,      */,     protected void setBrokerOnlySystemProperty(String property, String value),     {,         synchronized (_propertiesSetForBroker),         {,             if (!_propertiesSetForBroker.containsKey(property)),             {,                 _propertiesSetForBroker.put(property, value);,             },         },     }, ,     /**,      * Set a System (-D) property for this test run.,      *,      * This convenience method copies the current VMs System Property,      * for the external VM Broker.,      *,      * @param property the System property to set,      */,     protected void setSystemProperty(String property),     {,         String value = System.getProperty(property);,         if (value != null),         {,             setSystemProperty(property, value);,         },     }, ,     /**,      * Set a System property for the duration of this test.,      *,      * When the test run is complete the value will be reverted.,      *,      * The values set using this method will also be propagated to the external,      * Java Broker via a -D value defined in QPID_OPTS.,      *,      * If the value should not be set on the broker then use,      * setTestClientSystemProperty().,      *,      * @param property the property to set,      * @param value    the new value to use,      */,     protected void setSystemProperty(String property, String value),     {,         synchronized(_propertiesSetForBroker),         {,             // Record the value for the external broker,             if (value == null),             {,                 _propertiesSetForBroker.remove(property);,             },             else,             {,                 _propertiesSetForBroker.put(property, value);,             },         },         //Set the value for the test client vm aswell.,         setTestClientSystemProperty(property, value);,     }, ,     /**,      * Set a System  property for the client (and broker if using the same vm) of this test.,      *,      * @param property The property to set,      * @param value the value to set it to.,      */,     protected void setTestClientSystemProperty(String property, String value),     {,         setTestSystemProperty(property, value);,     }, ,     /**,      * Restore the System property values that were set before this test run.,      */,     protected void revertSystemProperties(),     {,         revertTestSystemProperties();, ,         // We don't change the current VMs settings for Broker only properties,         // so we can just clear this map,         _propertiesSetForBroker.clear();,     }, ,     /**,      * Add an environment variable for the external broker environment,      *,      * @param property the property to set,      * @param value    the value to set it to,      */,     protected void setBrokerEnvironment(String property, String value),     {,         _env.put(property, value);,     }, ,     /**,      * Check whether the broker is an 0.8,      *,      * @return true if the broker is an 0_8 version, false otherwise.,      */,     public boolean isBroker08(),     {,         return _brokerProtocol.equals(Protocol.AMQP_0_8);,     }, ,     public boolean isBroker010(),     {,         return _brokerProtocol.equals(Protocol.AMQP_0_10);,     }, ,     public Protocol getBrokerProtocol(),     {,         return _brokerProtocol;,     }, ,     protected boolean isJavaBroker(),     {,         return _brokerLanguage.equals("java");,     }, ,     protected boolean isCppBroker(),     {,         return _brokerLanguage.equals("cpp");,     }, ,     protected boolean isExternalBroker(),     {,         return !isInternalBroker();,     }, ,     protected boolean isInternalBroker(),     {,         return _brokerType.equals(BrokerHolder.BrokerType.INTERNAL);,     }, ,     protected boolean isBrokerStorePersistent(),     {,         return _brokerPersistent;,     }, ,     public void restartBroker() throws Exception,     {,         restartBroker(0);,     }, ,     public void restartBroker(int port) throws Exception,     {,         stopBroker(port);,         startBroker(port);,     }, ,     /**,      * we assume that the environment is correctly set,      * i.e. -Djava.naming.provider.url="..//example010.properties",      *,      * @return an initial context,      *,      * @throws NamingException if there is an error getting the context,      */,     public InitialContext getInitialContext() throws NamingException,     {,         if (_initialContext == null),         {,             _initialContext = new InitialContext();,         },         return _initialContext;,     }, ,     /**,      * Get the default connection factory for the currently used broker,      * Default factory is "local",      *,      * @return A connection factory,      *,      * @throws Exception if there is an error getting the factory,      */,     public AMQConnectionFactory getConnectionFactory() throws NamingException,     {,         if (_connectionFactory == null),         {,             if (Boolean.getBoolean(PROFILE_USE_SSL)),             {,                 _connectionFactory = getConnectionFactory("default.ssl");,             },             else,             {,                 _connectionFactory = getConnectionFactory("default");,             },         },         return _connectionFactory;,     }, ,     /**,      * Get a connection factory for the currently used broker,      *,      * @param factoryName The factory name,      *,      * @return A connection factory,      *,      * @throws Exception if there is an error getting the factory,      */,     public AMQConnectionFactory getConnectionFactory(String factoryName) throws NamingException,     {,         return (AMQConnectionFactory) getInitialContext().lookup(factoryName);,     }, ,     public Connection getConnection() throws JMSException, NamingException,     {,         return getConnection(GUEST_USERNAME, GUEST_PASSWORD);,     }, ,     protected Connection getConnectionWithSyncPublishing() throws URLSyntaxException, NamingException, JMSException,     {,         Map<String, String> options = new HashMap<>();,         options.put(ConnectionURL.OPTIONS_SYNC_PUBLISH, "all");,         return getConnectionWithOptions(options);,     }, ,     public Connection getConnectionWithOptions(Map<String, String> options),                 throws URLSyntaxException, NamingException, JMSException,     {,         ConnectionURL curl = new AMQConnectionURL(getConnectionFactory().getConnectionURLString());,         for(Map.Entry<String,String> entry : options.entrySet()),         {,             curl.setOption(entry.getKey(), entry.getValue());,         },         curl = new AMQConnectionURL(curl.toString());, ,         curl.setUsername(GUEST_USERNAME);,         curl.setPassword(GUEST_PASSWORD);,         return getConnection(curl);,     }, , ,     public Connection getConnection(ConnectionURL url) throws JMSException,     {,         _logger.debug("get connection for " + url.getURL());,         Connection connection = new AMQConnectionFactory(url).createConnection(url.getUsername(), url.getPassword());, ,         _connections.add(connection);, ,         return connection;,     }, ,     /**,      * Get a connection (remote or in-VM),      *,      * @param username The user name,      * @param password The user password,      *,      * @return a newly created connection,      *,      * @throws Exception if there is an error getting the connection,      */,     public Connection getConnection(String username, String password) throws JMSException, NamingException,     {,         _logger.debug("get connection for username " + username);,         Connection con = getConnectionFactory().createConnection(username, password);,         //add the connection in the list of connections,         _connections.add(con);,         return con;,     }, ,     protected Connection getClientConnection(String username, String password, String id) throws JMSException, URLSyntaxException, AMQException, NamingException,     {,         _logger.debug("get connection for id " + id);,         Connection con = getConnectionFactory().createConnection(username, password, id);,         //add the connection in the list of connections,         _connections.add(con);,         return con;,     }, ,     /**,      * Useful, for example, to avoid the connection being automatically closed in {@link #tearDown()},      * if it has deliberately been put into an error state already.,      */,     protected void forgetConnection(Connection connection),     {,         _logger.debug("Forgetting about connection " + connection);,         boolean removed = _connections.remove(connection);,         assertTrue(,                 "The supplied connection " + connection + " should have been one that I already know about",,                 removed);,     }, ,     /**,      * Return a uniqueName for this test.,      * In this case it returns a queue Named by the TestCase and TestName,      *,      * @return String name for a queue,      */,     protected String getTestQueueName(),     {,         return getClass().getSimpleName() + "-" + getName();,     }, ,     /**,      * Return a Queue specific for this test.,      * Uses getTestQueueName() as the name of the queue,      * @return,      */,     public Queue getTestQueue(),     {,         return new AMQQueue(ExchangeDefaults.DIRECT_EXCHANGE_NAME, getTestQueueName());,     }, ,     /**,      * Return a Topic specific for this test.,      * Uses getTestQueueName() as the name of the topic,      * @return,      */,     public Topic getTestTopic(),     {,         return new AMQTopic(ExchangeDefaults.TOPIC_EXCHANGE_NAME, getTestQueueName());,     }, ,     @Override,     protected void tearDown() throws java.lang.Exception,     {,         super.tearDown();, ,         // close all the connections used by this test.,         for (Connection c : _connections),         {,             c.close();,         },         if(_taskExecutor != null),         {,             _taskExecutor.stop();,         },     }, ,     /**,      * Consume all the messages in the specified queue. Helper to ensure,      * persistent tests don't leave data behind.,      *,      * @param queue the queue to purge,      *,      * @return the count of messages drained,      *,      * @throws Exception if a problem occurs,      */,     protected int drainQueue(Queue queue) throws Exception,     {,         Connection connection = getConnection();, ,         Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);, ,         MessageConsumer consumer = session.createConsumer(queue);, ,         connection.start();, ,         int count = 0;,         while (consumer.receive(1000) != null),         {,             count++;,         }, ,         connection.close();, ,         return count;,     }, ,     /**,      * Send messages to the given destination.,      *,      * If session is transacted then messages will be committed before returning,      *,      * @param session the session to use for sending,      * @param destination where to send them to,      * @param count no. of messages to send,      *,      * @return the sent messages,      *,      * @throws Exception,      */,     public List<Message> sendMessage(Session session, Destination destination,,                                      int count) throws Exception,     {,         return sendMessage(session, destination, count, 0, 0);,     }, ,     /**,      * Send messages to the given destination.,      *,      * If session is transacted then messages will be committed before returning,      *,      * @param session the session to use for sending,      * @param destination where to send them to,      * @param count no. of messages to send,      *,      * @param batchSize the batchSize in which to commit, 0 means no batching,,      * but a single commit at the end,      * @return the sent message,      *,      * @throws Exception,      */,     public List<Message> sendMessage(Session session, Destination destination,,                                      int count, int batchSize) throws Exception,     {,         return sendMessage(session, destination, count, 0, batchSize);,     }, ,     /**,      * Send messages to the given destination.,      *,      * If session is transacted then messages will be committed before returning,      *,      * @param session the session to use for sending,      * @param destination where to send them to,      * @param count no. of messages to send,      *,      * @param offset offset allows the INDEX value of the message to be adjusted.,      * @param batchSize the batchSize in which to commit, 0 means no batching,,      * but a single commit at the end,      * @return the sent message,      *,      * @throws Exception,      */,     public List<Message> sendMessage(Session session, Destination destination,,                                      int count, int offset, int batchSize) throws Exception,     {,         List<Message> messages = new ArrayList<Message>(count);, ,         MessageProducer producer = session.createProducer(destination);, ,         int i = offset;,         for (; i < (count + offset); i++),         {,             Message next = createNextMessage(session, i);, ,             producer.send(next);, ,             if (session.getTransacted() && batchSize > 0),             {,                 if (i % batchSize == 0),                 {,                     session.commit();,                 }, ,             }, ,             messages.add(next);,         }, ,         // Ensure we commit the last messages,         // Commit the session if we are transacted and,         // we have no batchSize or,         // our count is not divible by batchSize.,         if (session.getTransacted() &&,             ( batchSize == 0 || (i-1) % batchSize != 0)),         {,             session.commit();,         }, ,         return messages;,     }, ,     public Message createNextMessage(Session session, int msgCount) throws JMSException,     {,         Message message = createMessage(session, _messageSize);,         message.setIntProperty(INDEX, msgCount);, ,         return message;, ,     }, ,     public Message createMessage(Session session, int messageSize) throws JMSException,     {,         String payload = new String(new byte[messageSize]);, ,         Message message;, ,         switch (_messageType),         {,             case BYTES:,                 message = session.createBytesMessage();,                 ((BytesMessage) message).writeUTF(payload);,                 break;,             case MAP:,                 message = session.createMapMessage();,                 ((MapMessage) message).setString(CONTENT, payload);,                 break;,             default: // To keep the compiler happy,             case TEXT:,                 message = session.createTextMessage();,                 ((TextMessage) message).setText(payload);,                 break;,             case OBJECT:,                 message = session.createObjectMessage();,                 ((ObjectMessage) message).setObject(payload);,                 break;,             case STREAM:,                 message = session.createStreamMessage();,                 ((StreamMessage) message).writeString(payload);,                 break;,         }, ,         return message;,     }, ,     public BrokerDetails getBroker(),     {,         try,         {,             if (getConnectionFactory().getConnectionURL().getBrokerCount() > 0),             {,                 return getConnectionFactory().getConnectionURL().getBrokerDetails(0);,             },             else,             {,                 fail("No broker details are available.");,             },         },         catch (NamingException e),         {,             fail(e.getMessage());,         }, ,         //keep compiler happy,         return null;,     }, ,     protected int getFailingPort(),     {,         return FAILING_PORT;,     }, ,     public int getHttpManagementPort(int mainPort),     {,         return mainPort + (DEFAULT_HTTP_MANAGEMENT_PORT - DEFAULT_PORT);,     }, ,     public void assertProducingConsuming(final Connection connection) throws Exception,     {,         Session session = connection.createSession(true, Session.SESSION_TRANSACTED);,         Destination destination = session.createQueue(getTestQueueName());,         MessageConsumer consumer = session.createConsumer(destination);,         sendMessage(session, destination, 1);,         session.commit();,         connection.start();,         Message m1 = consumer.receive(RECEIVE_TIMEOUT);,         assertNotNull("Message 1 is not received", m1);,         assertEquals("Unexpected first message received", 0, m1.getIntProperty(INDEX));,         session.commit();,         session.close();,     }, ,     protected BrokerOptions getBrokerOptions(boolean managementMode, String testConfig),     {,         BrokerOptions options = new BrokerOptions();, ,         options.setConfigurationStoreType(_brokerStoreType);,         options.setConfigurationStoreLocation(testConfig);,         options.setManagementMode(managementMode);,         if (managementMode),         {,             options.setManagementModePassword(MANAGEMENT_MODE_PASSWORD);,         },         options.setStartupLoggedToSystemOut(false);,         options.setConfigProperty("test.name", getClass().getSimpleName() + "-" + getName());,         return options;,     }, ,     private Map<String, String> getJvmProperties(),     {,         Map<String,String> jvmOptions = new HashMap();,         synchronized (_propertiesSetForBroker),         {,             jvmOptions.putAll(_propertiesSetForBroker);, ,             copySystemProperty("amqj.protocol.logging.level", jvmOptions);,             copySystemProperty("root.logging.level", jvmOptions);, ,             copySystemProperty("test.port", jvmOptions);,             copySystemProperty("test.mport", jvmOptions);,             copySystemProperty("test.cport", jvmOptions);,             copySystemProperty("test.hport", jvmOptions);,             copySystemProperty("test.hsport", jvmOptions);,             copySystemProperty("test.port.ssl", jvmOptions);,             copySystemProperty("test.port.alt", jvmOptions);,             copySystemProperty("test.port.alt.ssl", jvmOptions);,             copySystemProperty("test.amqp_port_protocols", jvmOptions);, ,             copySystemProperty("qpid.globalAddressDomains", jvmOptions);, ,             copySystemProperty("virtualhostnode.type", jvmOptions);,             copySystemProperty("virtualhostnode.context.blueprint", jvmOptions);,         },         return jvmOptions;,     }, ,     private void copySystemProperty(String name, Map<String, String> jvmOptions),     {,         String value = System.getProperty(name);,         if (value != null),         {,             jvmOptions.put(name, value);,         },     }, ,     private Map<String, String> getEnvironmentProperties(),     {,         return new HashMap<>(_env);,     }, ,     private String getBrokerCommandTemplate(),     {,         return _brokerCommandTemplate;],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/test/utils/QpidBrokerTestCase.java,createBrokerWork,506-506,[            dir.mkdirs();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/QpidTestCase.java,<clinit>,90-90,[                    try(FileReader fileReader = new FileReader(file))],,
CORRECTNESS,IJU_NO_TESTS,org/apache/qpid/test/utils/QpidTestCase.java,,41-267,[    public static final String QPID_HOME = System.getProperty("QPID_HOME");,     public static final String TEST_RESOURCES_DIR = QPID_HOME + "/../test-profiles/test_resources/";,     public static final String TEST_PROFILES_DIR = QPID_HOME + "/../test-profiles/";,     public static final String TMP_FOLDER = System.getProperty("java.io.tmpdir");, ,     private static final Logger _logger = LoggerFactory.getLogger(QpidTestCase.class);,     private static QpidTestCase _currentInstance;, ,     private final Map<String, String> _propertiesSetForTest = new HashMap<String, String>();, ,     private String _testName;, ,     private Set<Runnable> _tearDownRegistry = new HashSet<>();, ,     /**,      * Some tests are excluded when the property test.excludes is set to true.,      * An exclusion list is either a file (prop test.excludesfile) which contains one test name,      * to be excluded per line or a String (prop test.excludeslist) where tests to be excluded are,      * separated by " ". Excluded tests are specified following the format:,      * className#testName where className is the class of the test to be,      * excluded and testName is the name of the test to be excluded.,      * className#* excludes all the tests of the specified class.,      */,     static,     {,         if (Boolean.getBoolean("test.exclude")),         {,             _logger.info("Some tests should be excluded, building the exclude list");,             String exclusionListURIs = System.getProperty(TEST_EXCLUDEFILES, "");,             String exclusionListString = System.getProperty(TEST_EXCLUDELIST, "");,             String testExcludes = System.getProperty(TEST_EXCLUDES);, ,             //For the maven build, process the test.excludes property,             if(testExcludes != null && "".equals(exclusionListURIs)),             {,                 for (String exclude : testExcludes.split("\\s+")),                 {,                     exclusionListURIs += TEST_PROFILES_DIR + "/" + exclude + ";";,                 },             }, ,             List<String> exclusionList = new ArrayList<String>();, ,             for (String uri : exclusionListURIs.split(";\\s*")),             {,                 File file = new File(uri);,                 if (file.exists()),                 {,                     _logger.info("Using exclude file: " + uri);,                     try(FileReader fileReader = new FileReader(file)),                     {,                         try(BufferedReader in = new BufferedReader(fileReader)),                         {,                             String excludedTest = in.readLine();,                             do,                             {,                                 exclusionList.add(excludedTest);,                                 excludedTest = in.readLine();,                             },                             while (excludedTest != null);,                         },                     },                     catch (IOException e),                     {,                         _logger.warn("Exception when reading exclusion list", e);,                     },                 },                 else,                 {,                     _logger.info("Specified exclude file does not exist: " + uri);,                 },             }, ,             if (!exclusionListString.equals("")),             {,                 _logger.info("Using excludeslist: " + exclusionListString);,                 for (String test : exclusionListString.split("\\s+")),                 {,                     exclusionList.add(test);,                 },             }, ,             _exclusionList = exclusionList;,         },     }, ,     private static List<String> _exclusionList;, ,     public QpidTestCase(),     {,         super();,     }, ,     public void run(TestResult testResult),     {,         _currentInstance = this;,         if (_exclusionList != null && (_exclusionList.contains(getClass().getPackage().getName() + ".*") ||,                                        _exclusionList.contains(getClass().getName() + "#*") ||,                                        _exclusionList.contains(getClass().getName() + "#" + getName()))),         {,             _logger.info("Test: " + getName() + " is excluded");,             testResult.endTest(this);,         },         else,         {,             super.run(testResult);,         },     }, ,     public String getTestProfileVirtualHostNodeType(),     {,         final String storeType = System.getProperty(VIRTUAL_HOST_NODE_TYPE);, ,         if (_logger.isDebugEnabled()),         {,             _logger.debug(VIRTUAL_HOST_NODE_TYPE + "=" + storeType);,         }, ,         return storeType != null ? storeType : "TestMemory";,     }, ,     public String getTestProfileVirtualHostNodeBlueprint(),     {,         return System.getProperty(VIRTUAL_HOST_NODE_CONTEXT_BLUEPRINT);,     }, ,     public void registerTearDown(Runnable runnable),     {,         _tearDownRegistry.add(runnable);,     }, ,     public static QpidTestCase getCurrentInstance(),     {,         return _currentInstance;,     }, ,     /**,      * Gets the next available port starting at a port.,      *,      * @param fromPort the port to scan for availability,      * @throws NoSuchElementException if there are no ports available,      */,     public int getNextAvailable(int fromPort),     {,         return new PortHelper().getNextAvailable(fromPort);,     }, ,     public int findFreePort(),     {,         return new PortHelper().getNextAvailable();,     }, ,     /**,      * Set a System property for duration of this test only. The tearDown will,      * guarantee to reset the property to its previous value after the test,      * completes.,      *,      * @param property The property to set,      * @param value the value to set it to, if null, the property will be cleared,      */,     protected void setTestSystemProperty(final String property, final String value),     {,         if (!_propertiesSetForTest.containsKey(property)),         {,             // Record the current value so we can revert it later.,             _propertiesSetForTest.put(property, System.getProperty(property));,         }, ,         if (value == null),         {,             System.clearProperty(property);,         },         else,         {,             System.setProperty(property, value);,         }, ,         _logger.info("Set system property \"" + property + "\" to: \"" + value + "\"");,     }, ,     /**,      * Restore the System property values that were set by this test run.,      */,     protected void revertTestSystemProperties(),     {,         if(!_propertiesSetForTest.isEmpty()),         {,             _logger.debug("reverting " + _propertiesSetForTest.size() + " test properties");,             for (String key : _propertiesSetForTest.keySet()),             {,                 String value = _propertiesSetForTest.get(key);,                 if (value != null),                 {,                     System.setProperty(key, value);,                 },                 else,                 {,                     System.clearProperty(key);,                 },             }, ,             _propertiesSetForTest.clear();,         },     }, ,     protected void tearDown() throws java.lang.Exception,     {,         _logger.info("========== tearDown " + _testName + " ==========");,         revertTestSystemProperties();,         for (Runnable runnable : _tearDownRegistry),         {,             runnable.run();,         },         _tearDownRegistry.clear();,         _currentInstance = null;,     }, ,     protected void setUp() throws Exception,     {,         _currentInstance = this;,         _testName = getClass().getSimpleName() + "." + getName();,         _logger.info("========== start " + _testName + " ==========");,     }, ,     protected String getTestName(),     {,         return _testName;],,
PERFORMANCE,SBSC_USE_STRINGBUFFER_CONCATENATION,org/apache/qpid/test/utils/QpidTestCase.java,<clinit>,78-78,[                    exclusionListURIs += TEST_PROFILES_DIR + "/" + exclude + ";";],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/utils/QpidTestCase.java,run,136-136,[        _currentInstance = this;],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/utils/QpidTestCase.java,setUp,260-260,[        _currentInstance = this;],,
STYLE,ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD,org/apache/qpid/test/utils/QpidTestCase.java,tearDown,255-255,[        _currentInstance = null;],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/test/utils/QpidTestCase.java,revertTestSystemProperties,231-231,[                String value = _propertiesSetForTest.get(key);],,
MALICIOUS_CODE,DP_DO_INSIDE_DO_PRIVILEGED,org/apache/qpid/test/utils/ReflectionUtils.java,callMethodOverridingIllegalAccess,116-116,[            m.setAccessible(true);],,
MALICIOUS_CODE,DP_DO_INSIDE_DO_PRIVILEGED,org/apache/qpid/test/utils/ReflectionUtils.java,getDeclaredField,238-238,[                field.setAccessible(true);],,
I18N,DM_CONVERT_CASE,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,retrieveWindowsPidsIfPossible,316-316,[                            if (line.toLowerCase()],,retrieveWindowsPidsIfPossible,317-317,[                                    .contains(_brokerCommand.toLowerCase()))],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,consumeAllOutput,379-379,[        try(InputStreamReader inputStreamReader = new InputStreamReader(p.getInputStream()))],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,dumpThreads,507-507,[        return new String(baos.toByteArray());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,retrieveWindowsPidsIfPossible,285-285,[                try (BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream())))],,
STYLE,NP_DEREFERENCE_OF_READLINE_VALUE,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,retrieveWindowsPidsIfPossible,289-289,[                    int processIdOffset = headers.indexOf(" ProcessId") + 1;],,
STYLE,RV_DONT_JUST_NULL_CHECK_READLINE,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,consumeAllOutput,383-383,[                while (reader.readLine() != null)],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,createBrokerWork,227-227,[            dir.mkdirs();],,
PERFORMANCE,SBSC_USE_STRINGBUFFER_CONCATENATION,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,start,143-143,[                qpidOpts += " -D" + key + "=" +(isWindows ? doWindowsCommandEscaping(_jvmOptions.get(key)) : _jvmOptions.get(key));],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/test/utils/SpawnedBrokerHolder.java,start,143-143,[                qpidOpts += " -D" + key + "=" +(isWindows ? doWindowsCommandEscaping(_jvmOptions.get(key)) : _jvmOptions.get(key));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/TestBrokerConfiguration.java,<init>,109-109,[                reader = new FileReader(initialStoreLocation);],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/test/utils/TestBrokerConfiguration.java,<init>,104-104,[                    reader = new InputStreamReader(urlStream);],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/test/utils/TestBrokerConfiguration.java,removeObjectConfiguration,283-283,[        return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/utils/TestBrokerConfiguration.java,,115-115,[            _store = new AbstractMemoryStore(Broker.class){};],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/utils/TestBrokerConfiguration.java,,212-230,[        {,             @Override,             public void begin(),             {, ,             }, ,             @Override,             public boolean handle(final ConfiguredObjectRecord record),             {,                 initialRecords.add(record);,                 return true;,             }, ,             @Override,             public void end(),             {, ,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/test/utils/TestBrokerConfiguration.java,,253-275,[                {,                     @Override,                     public void begin(),                     {, ,                     }, ,                     @Override,                     public boolean handle(final ConfiguredObjectRecord record),                     {,                         if (record.getType().equals(VirtualHostAlias.class.getSimpleName()),                             && name.equals(record.getAttributes().get(ConfiguredObject.NAME))),                         {,                             aliasRecords.add(record);,                         },                         return true;,                     }, ,                     @Override,                     public void end(),                     {, ,                     }],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/test/utils/TestFileUtils.java,copy,218-218,[                dst.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/test/utils/TestFileUtils.java,createTestDirectory,60-60,[        testDir.mkdirs();],,
PERFORMANCE,URF_UNREAD_FIELD,org/apache/qpid/testkit/Client.java,,47-47,[    private NumberFormat nf = new DecimalFormat("##.00");],,
PERFORMANCE,URF_UNREAD_FIELD,org/apache/qpid/testkit/Receiver.java,,75-75,[	private boolean jmsDurableSub = Boolean.getBoolean("jms_durable_sub");],,
STYLE,URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,org/apache/qpid/testkit/Sender.java,,85-85,[    protected NumberFormat nf = new DecimalFormat("##.00");],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/testkit/TestLauncher.java,serializeStackTrace,319-319,[    	return bOut.toString();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/testkit/TestLauncher.java,serializeStackTrace,316-316,[    	PrintStream printStream = new PrintStream(bOut);],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/testkit/TestLauncher.java,,146-146,[            statusSender = controlSession.createProducer(controlDest);],,,305-305,[			statusSender.send(errorMsg);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/testkit/TestLauncher.java,setUpControlChannel,149-149,[        catch (Exception e)],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/testkit/TestLauncher.java,start,210-210,[        catch (Exception e)],,
STYLE,RV_CHECK_FOR_POSITIVE_INDEXOF,org/apache/qpid/testkit/TestLauncher.java,modifySubject,333-333,[        if (addr.indexOf("/") > 0)],,modifySubject,339-339,[        else if (addr.indexOf(";") > 0)],,
STYLE,URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,org/apache/qpid/testkit/TestLauncher.java,,80-80,[    protected boolean durable = false;],,
STYLE,URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,org/apache/qpid/testkit/TestLauncher.java,,88-88,[    protected NumberFormat nf = new DecimalFormat("##.00");],,
STYLE,URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,org/apache/qpid/testkit/TestLauncher.java,,93-93,[       testName = System.getProperty("test_name","UNKNOWN");],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/testkit/TestLauncher.java,,220-233,[        {,             public void run(),             {,                try ,                {,             	   Receiver rcv = new Receiver(con,addr);, 				   rcv.setErrorHandler(h);, 				   rcv.run();, 				}, 	            catch (Exception e) , 	            {, 					h.handleError("Error Starting Receiver", e);, 				},             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/testkit/TestLauncher.java,,253-266,[        {,             public void run(),             {,                try ,                {,             	   Sender sender = new Sender(con, addr);,             	   sender.setErrorHandler(h);,             	   sender.run();, 				}, 	            catch (Exception e) , 	            {, 					h.handleError("Error Starting Sender", e);, 				},             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/thread/ThreadFactoryTest.java,,96-100,[        Runnable r = new Runnable(){, ,             public void run(){, ,             }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/tools/JNDICheck.java,printEntries,154-154,[            String name = type.substring(0, 1).toUpperCase() + type.substring(1, type.length() - 1);],,
BAD_PRACTICE,NM_CONFUSING,org/apache/qpid/tools/JVMArgConfiguration.java,getTTL,436-436,[		return ttl;],,getTtl,308-308,[        return ttl;],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/tools/MercuryBase.java,<init>,93-93,[        catch (Exception e)],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/tools/MercuryBase.java,,114-114,[        sendToController = controllerSession.createProducer(controllerQueue);],,,150-150,[        sendToController.send(m);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/tools/MercuryProducerController.java,,156-160,[            {,                 public void run(),                 {,                     controller.run();,                 }],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/tools/MercuryTestController.java,setUp,133-133,[            writer = new FileWriter("stats-csv.log");],,
STYLE,ICAST_IDIV_CAST_TO_DOUBLE,org/apache/qpid/tools/MercuryTestController.java,calcStats,237-237,[        totalSystemThroughput = (totalMsgCount*Clock.convertToSecs()/totalTestTime);],,
STYLE,ICAST_INTEGER_MULTIPLY_CAST_TO_LONG,org/apache/qpid/tools/MercuryTestController.java,run,383-383,[                long timeLimit = duration * 60 * 1000;  // duration is in mins.],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,calcStats,235-235,[        report.log("Total test time     : " + totalTestTime + " in " + Clock.getPrecision());],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,onMessage,309-309,[            report.log("\n---------Controller Received Code : " + code);],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,printResults,242-242,[        report.log(new StringBuilder("Total Msgs Received : ").append(totalMsgCount).toString());],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,sendMessageToNodes,284-284,[        report.log("\nController: Sending code " + code);],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,setUp,136-136,[        report.log("\nController: " + producerCount + " producers are expected");],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,startTest,157-157,[        report.log("\nController Starting test......");],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,tearDown,413-413,[        report.log("Controller: Completed the test......\n");],,
CORRECTNESS,NP_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,warmup,146-146,[        report.log("Controller initiating warm up sequence......");],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/tools/MercuryTestController.java,calcStats,208-208,[        catch(Exception e)],,calcStats,225-225,[        catch(Exception e)],,
CORRECTNESS,UWF_UNWRITTEN_FIELD,org/apache/qpid/tools/MercuryTestController.java,,136-136,[        report.log("\nController: " + producerCount + " producers are expected");],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/tools/MessageFactory.java,createBytesMessage,35-35,[        msg.writeBytes(createMessagePayload(size).getBytes());],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/tools/QpidBench.java,main,433-469,[        switch (opts.mode),         {,         case CONSUME:,         case BOTH:,             Runnable r = new Runnable(),             {,                 public void run(),                 {,                     try,                     {,                         if (opts.jms_consume),                         {,                             jms_consumer(opts);,                         },                         else,                         {,                             native_consumer(opts);,                         },                     },                     catch (Exception e),                     {,                         throw new RuntimeException(e);,                     },                     System.out.println("Consumer Completed");,                 },             };,            ,             Thread t;,             try,             {,                 t = Threading.getThreadFactory().createThread(r);                      ,             },             catch(Exception e),             {,                 throw new Error("Error creating consumer thread",e);,             },             t.start();],,main,473-508,[        switch (opts.mode),         {,         case PUBLISH:,         case BOTH:,             Runnable r = new Runnable(),             {,                 public void run(),                 {,                     try,                     {,                         if (opts.jms_publish),                         {,                             jms_publisher(opts);,                         },                         else,                         {,                             native_publisher(opts);,                         },                     },                     catch (Exception e),                     {,                         throw new RuntimeException(e);,                     },                     System.out.println("Producer Completed");,                 },             };,             Thread t;,             try,             {,                 t = Threading.getThreadFactory().createThread(r);                      ,             },             catch(Exception e),             {,                 throw new Error("Error creating publisher thread",e);,             },             t.start();],,
MT_CORRECTNESS,UW_UNCOND_WAIT,org/apache/qpid/tools/QpidBench.java,jms_consumer,682-682,[            done.wait();],,
MT_CORRECTNESS,UW_UNCOND_WAIT,org/apache/qpid/tools/QpidBench.java,native_consumer,894-894,[            done.wait();],,
MT_CORRECTNESS,WA_NOT_IN_LOOP,org/apache/qpid/tools/QpidBench.java,jms_consumer,682-682,[            done.wait();],,
MT_CORRECTNESS,WA_NOT_IN_LOOP,org/apache/qpid/tools/QpidBench.java,native_consumer,894-894,[            done.wait();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/tools/QpidBench.java,onMessage,673-673,[                        done.notify();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/tools/QpidBench.java,message,726-726,[                    echos.notify();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/tools/QpidBench.java,message,872-872,[                        done.notify();],,
BAD_PRACTICE,VA_FORMAT_STRING_USES_NEWLINE,org/apache/qpid/tools/QpidBench.java,usage,86-86,[            usage.append(String.format("\n  %-15s%-14s %s", name, defval, description));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/tools/QpidSend.java,createPayload,159-159,[			return MessageFactory.createMessagePayload(size).getBytes();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/tools/RestStressTestClient.java,<init>,243-243,[                _authorizationHeader = "Basic " + DatatypeConverter.printBase64Binary((_username + ":" + _password).getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/tools/RestStressTestClient.java,createConnectionAndPostData,322-322,[                os.write(postParameters.getBytes());],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/tools/RestStressTestClient.java,generateResponseForChallengeAndCredentials,472-472,[                byte[] responseBytes = responseAsString.getBytes();],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/tools/RestStressTestClient.java,generateResponseForChallengeAndCredentials,475-475,[            catch (Exception e)],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/tools/RestStressTestClient.java,getPostDataString,351-351,[                    sb.append(key + "=" + postData.get(key));],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/tools/StressTestClient.java,runTest,316-316,[                        catch (Exception exp)],,runTest,382-382,[        catch (Exception exp)],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/tools/StressTestClient.java,onException,217-217,[                            System.exit(0);],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/tools/StressTestClient.java,,212-218,[                    {,                         public void onException(JMSException jmse),                         {,                             System.err.println(CLASS + ": The sample received an exception through the ExceptionListener");,                             jmse.printStackTrace();,                             System.exit(0);,                         }],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/tools/util/ArgumentsParser.java,usage,143-143,[        catch(Exception e)],,
I18N,DM_CONVERT_CASE,org/apache/qpid/tools/util/ArgumentsParser.java,usage,165-165,[                        + field.getType().getSimpleName().toLowerCase()],,
MALICIOUS_CODE,DP_DO_INSIDE_DO_PRIVILEGED,org/apache/qpid/tools/util/ArgumentsParser.java,usage,156-156,[                    field.setAccessible(true);],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/tools/util/ArgumentsParser.java,usage,143-143,[        catch(Exception e)],,usage,159-159,[                catch(Exception e)],,
BAD_PRACTICE,DE_MIGHT_IGNORE,org/apache/qpid/transport/Connection.java,closed,589-589,[            catch(Exception e)],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/transport/Connection.java,close,653-653,[                    while (w.hasTime() && sender != null && error == null)],,close,663-663,[                    if (sender != null)],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/transport/Connection.java,,832-838,[                                    {,                                         @Override,                                         public void setMaxFrameSize(final int frameSize),                                         {,                                             currentObserver.setMaxFrameSize(frameSize);,                                             frameSizeObserver.setMaxFrameSize(frameSize);,                                         }],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/transport/ConnectionClose.java,,38-192,[        return TYPE;,     }, ,     public final int getSizeWidth() {,         return 0;,     }, ,     public final int getPackWidth() {,         return 2;,     }, ,     public final boolean hasPayload() {,         return false;,     }, ,     public final byte getEncodedTrack() {,         return Frame.L1;,     }, ,     public final boolean isConnectionControl(),     {,         return true;,     }, ,     private short packing_flags = 0;,     private ConnectionCloseCode replyCode;,     private String replyText;, , ,     public ConnectionClose() {}, , ,     public ConnectionClose(ConnectionCloseCode replyCode, String replyText, Option ... _options) {,         if(replyCode != null) {,             setReplyCode(replyCode);,         },         if(replyText != null) {,             setReplyText(replyText);,         }, ,         for (int i=0; i < _options.length; i++) {,             switch (_options[i]) {,             case SYNC: this.setSync(true); break;,             case BATCH: this.setBatch(true); break;,             case UNRELIABLE: this.setUnreliable(true); break;,             case NONE: break;,             default: throw new IllegalArgumentException("invalid option: " + _options[i]);,             },         }, ,     }, ,     public <C> void dispatch(C context, MethodDelegate<C> delegate) {,         delegate.connectionClose(context, this);,     }, , ,     public final boolean hasReplyCode() {,         return (packing_flags & 256) != 0;,     }, ,     public final ConnectionClose clearReplyCode() {,         packing_flags &= ~256;,         this.replyCode = null;,         setDirty(true);,         return this;,     }, ,     public final ConnectionCloseCode getReplyCode() {,         return replyCode;,     }, ,     public final ConnectionClose setReplyCode(ConnectionCloseCode value) {,         this.replyCode = value;,         packing_flags |= 256;,         setDirty(true);,         return this;,     }, ,     public final ConnectionClose replyCode(ConnectionCloseCode value) {,         return setReplyCode(value);,     }, ,     public final boolean hasReplyText() {,         return (packing_flags & 512) != 0;,     }, ,     public final ConnectionClose clearReplyText() {,         packing_flags &= ~512;,         this.replyText = null;,         setDirty(true);,         return this;,     }, ,     public final String getReplyText() {,         return replyText;,     }, ,     public final ConnectionClose setReplyText(String value) {,         this.replyText = value;,         packing_flags |= 512;,         setDirty(true);,         return this;,     }, ,     public final ConnectionClose replyText(String value) {,         return setReplyText(value);,     }, , , , ,     public void write(Encoder enc),     {,         enc.writeUint16(packing_flags);,         if ((packing_flags & 256) != 0),         {,             enc.writeUint16(this.replyCode.getValue());,         },         if ((packing_flags & 512) != 0),         {,             enc.writeStr8(this.replyText);,         }, ,     }, ,     public void read(Decoder dec),     {,         packing_flags = (short) dec.readUint16();,         if ((packing_flags & 256) != 0),         {,             this.replyCode = ConnectionCloseCode.get(dec.readUint16());,         },         if ((packing_flags & 512) != 0),         {,             this.replyText = dec.readStr8();,         }, ,     }, ,     public Map<String,Object> getFields(),     {,         Map<String,Object> result = new LinkedHashMap<String,Object>();, ,         if ((packing_flags & 256) != 0),         {,             result.put("replyCode", getReplyCode());,         },         if ((packing_flags & 512) != 0),         {,             result.put("replyText", getReplyText());,         }, , ,         return result;],,
MT_CORRECTNESS,IS2_INCONSISTENT_SYNC,org/apache/qpid/transport/ConnectionSettings.java,,564-564,[        _encryptionRemoteTrustStoreName = encryptionRemoteTrustStoreName;],,,559-559,[        return _encryptionRemoteTrustStoreName;],,,713-713,[            else if(_encryptionRemoteTrustStoreName != null)],,,715-715,[                return storeFinder.getKeyStore(_encryptionRemoteTrustStoreName);],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/transport/ConnectionSettings.java,getKeyManagers,614-614,[            return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/transport/ConnectionSettings.java,getTrustManagers,634-634,[            return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/transport/ConnectionTest.java,,96-108,[            {,                 public void run(),                 {,                     try,                     {,                         sleep(3000);,                     },                     catch (InterruptedException e),                     {,                         throw new RuntimeException(e);,                     },                     ssn.getConnection().close();,                 }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/transport/ConnectionTest.java,,163-180,[        {,             public void opened(Connection conn) {},             public void exception(Connection conn, ConnectionException exc),             {,                 exc.printStackTrace();,             },             public void closed(Connection conn),             {,                 if (closed != null),                 {,                     closed.countDown();,                 },             }, ,             @Override,             public boolean redirect(final String host, final List<Object> knownHosts),             {,                 return false;],,
BAD_PRACTICE,NM_CLASS_NOT_EXCEPTION,org/apache/qpid/transport/ExecutionException.java,,38-394,[        return TYPE;,     }, ,     public final int getSizeWidth() {,         return 0;,     }, ,     public final int getPackWidth() {,         return 2;,     }, ,     public final boolean hasPayload() {,         return false;,     }, ,     public final byte getEncodedTrack() {,         return Frame.L4;,     }, ,     public final boolean isConnectionControl(),     {,         return false;,     }, ,     private short packing_flags = 0;,     private ExecutionErrorCode errorCode;,     private int commandId;,     private short classCode;,     private short commandCode;,     private short fieldIndex;,     private String description;,     private Map<String,Object> errorInfo;, , ,     public ExecutionException() {}, , ,     public ExecutionException(ExecutionErrorCode errorCode, int commandId, short classCode, short commandCode, short fieldIndex, String description, Map<String,Object> errorInfo, Option ... _options) {,         if(errorCode != null) {,             setErrorCode(errorCode);,         },         setCommandId(commandId);,         setClassCode(classCode);,         setCommandCode(commandCode);,         setFieldIndex(fieldIndex);,         if(description != null) {,             setDescription(description);,         },         if(errorInfo != null) {,             setErrorInfo(errorInfo);,         }, ,         for (int i=0; i < _options.length; i++) {,             switch (_options[i]) {,             case SYNC: this.setSync(true); break;,             case BATCH: this.setBatch(true); break;,             case UNRELIABLE: this.setUnreliable(true); break;,             case NONE: break;,             default: throw new IllegalArgumentException("invalid option: " + _options[i]);,             },         }, ,     }, ,     public <C> void dispatch(C context, MethodDelegate<C> delegate) {,         delegate.executionException(context, this);,     }, , ,     public final boolean hasErrorCode() {,         return (packing_flags & 256) != 0;,     }, ,     public final ExecutionException clearErrorCode() {,         packing_flags &= ~256;,         this.errorCode = null;,         setDirty(true);,         return this;,     }, ,     public final ExecutionErrorCode getErrorCode() {,         return errorCode;,     }, ,     public final ExecutionException setErrorCode(ExecutionErrorCode value) {,         this.errorCode = value;,         packing_flags |= 256;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException errorCode(ExecutionErrorCode value) {,         return setErrorCode(value);,     }, ,     public final boolean hasCommandId() {,         return (packing_flags & 512) != 0;,     }, ,     public final ExecutionException clearCommandId() {,         packing_flags &= ~512;,         this.commandId = 0;,         setDirty(true);,         return this;,     }, ,     public final int getCommandId() {,         return commandId;,     }, ,     public final ExecutionException setCommandId(int value) {,         this.commandId = value;,         packing_flags |= 512;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException commandId(int value) {,         return setCommandId(value);,     }, ,     public final boolean hasClassCode() {,         return (packing_flags & 1024) != 0;,     }, ,     public final ExecutionException clearClassCode() {,         packing_flags &= ~1024;,         this.classCode = 0;,         setDirty(true);,         return this;,     }, ,     public final short getClassCode() {,         return classCode;,     }, ,     public final ExecutionException setClassCode(short value) {,         this.classCode = value;,         packing_flags |= 1024;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException classCode(short value) {,         return setClassCode(value);,     }, ,     public final boolean hasCommandCode() {,         return (packing_flags & 2048) != 0;,     }, ,     public final ExecutionException clearCommandCode() {,         packing_flags &= ~2048;,         this.commandCode = 0;,         setDirty(true);,         return this;,     }, ,     public final short getCommandCode() {,         return commandCode;,     }, ,     public final ExecutionException setCommandCode(short value) {,         this.commandCode = value;,         packing_flags |= 2048;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException commandCode(short value) {,         return setCommandCode(value);,     }, ,     public final boolean hasFieldIndex() {,         return (packing_flags & 4096) != 0;,     }, ,     public final ExecutionException clearFieldIndex() {,         packing_flags &= ~4096;,         this.fieldIndex = 0;,         setDirty(true);,         return this;,     }, ,     public final short getFieldIndex() {,         return fieldIndex;,     }, ,     public final ExecutionException setFieldIndex(short value) {,         this.fieldIndex = value;,         packing_flags |= 4096;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException fieldIndex(short value) {,         return setFieldIndex(value);,     }, ,     public final boolean hasDescription() {,         return (packing_flags & 8192) != 0;,     }, ,     public final ExecutionException clearDescription() {,         packing_flags &= ~8192;,         this.description = null;,         setDirty(true);,         return this;,     }, ,     public final String getDescription() {,         return description;,     }, ,     public final ExecutionException setDescription(String value) {,         this.description = value;,         packing_flags |= 8192;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException description(String value) {,         return setDescription(value);,     }, ,     public final boolean hasErrorInfo() {,         return (packing_flags & 16384) != 0;,     }, ,     public final ExecutionException clearErrorInfo() {,         packing_flags &= ~16384;,         this.errorInfo = null;,         setDirty(true);,         return this;,     }, ,     public final Map<String,Object> getErrorInfo() {,         return errorInfo;,     }, ,     public final ExecutionException setErrorInfo(Map<String,Object> value) {,         this.errorInfo = value;,         packing_flags |= 16384;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException errorInfo(Map<String,Object> value) {,         return setErrorInfo(value);,     }, , , , ,     public void write(Encoder enc),     {,         enc.writeUint16(packing_flags);,         if ((packing_flags & 256) != 0),         {,             enc.writeUint16(this.errorCode.getValue());,         },         if ((packing_flags & 512) != 0),         {,             enc.writeSequenceNo(this.commandId);,         },         if ((packing_flags & 1024) != 0),         {,             enc.writeUint8(this.classCode);,         },         if ((packing_flags & 2048) != 0),         {,             enc.writeUint8(this.commandCode);,         },         if ((packing_flags & 4096) != 0),         {,             enc.writeUint8(this.fieldIndex);,         },         if ((packing_flags & 8192) != 0),         {,             enc.writeStr16(this.description);,         },         if ((packing_flags & 16384) != 0),         {,             enc.writeMap(this.errorInfo);,         }, ,     }, ,     public void read(Decoder dec),     {,         packing_flags = (short) dec.readUint16();,         if ((packing_flags & 256) != 0),         {,             this.errorCode = ExecutionErrorCode.get(dec.readUint16());,         },         if ((packing_flags & 512) != 0),         {,             this.commandId = dec.readSequenceNo();,         },         if ((packing_flags & 1024) != 0),         {,             this.classCode = dec.readUint8();,         },         if ((packing_flags & 2048) != 0),         {,             this.commandCode = dec.readUint8();,         },         if ((packing_flags & 4096) != 0),         {,             this.fieldIndex = dec.readUint8();,         },         if ((packing_flags & 8192) != 0),         {,             this.description = dec.readStr16();,         },         if ((packing_flags & 16384) != 0),         {,             this.errorInfo = dec.readMap();,         }, ,     }, ,     public Map<String,Object> getFields(),     {,         Map<String,Object> result = new LinkedHashMap<String,Object>();, ,         if ((packing_flags & 256) != 0),         {,             result.put("errorCode", getErrorCode());,         },         if ((packing_flags & 512) != 0),         {,             result.put("commandId", getCommandId());,         },         if ((packing_flags & 1024) != 0),         {,             result.put("classCode", getClassCode());,         },         if ((packing_flags & 2048) != 0),         {,             result.put("commandCode", getCommandCode());,         },         if ((packing_flags & 4096) != 0),         {,             result.put("fieldIndex", getFieldIndex());,         },         if ((packing_flags & 8192) != 0),         {,             result.put("description", getDescription());,         },         if ((packing_flags & 16384) != 0),         {,             result.put("errorInfo", getErrorInfo());,         }, , ,         return result;],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/transport/MaxFrameSizeTest.java,setUp,64-64,[    }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/transport/MaxFrameSizeTest.java,,314-335,[            {,                 @Override,                 public void handle(final Callback[] callbacks) throws IOException, UnsupportedCallbackException,                 {,                     for (int i = 0; i < callbacks.length; i++),                     {,                         Callback cb = callbacks[i];,                         if (cb instanceof NameCallback),                         {,                             ((NameCallback)cb).setName(GUEST_USERNAME);,                         },                         else if (cb instanceof PasswordCallback),                         {,                             ((PasswordCallback)cb).setPassword(GUEST_PASSWORD.toCharArray());,                         },                         else,                         {,                             throw new UnsupportedCallbackException(cb);,                         },                     }, ,                 }],,
BAD_PRACTICE,IT_NO_SUCH_ELEMENT,org/apache/qpid/transport/Range.java,next,295-297,[            Range range = atFirst ? Range.this : null;,             atFirst = false;,             return range;],,
MT_CORRECTNESS,NN_NAKED_NOTIFY,org/apache/qpid/transport/Session.java,closed,1102-1102,[                        result.notifyAll();],,
MT_CORRECTNESS,NN_NAKED_NOTIFY,org/apache/qpid/transport/Session.java,notifyFailoverRequired,1201-1201,[                    result.notifyAll();],,
BAD_PRACTICE,SE_BAD_FIELD,org/apache/qpid/transport/ExecutionException.java,,38-394,[        return TYPE;,     }, ,     public final int getSizeWidth() {,         return 0;,     }, ,     public final int getPackWidth() {,         return 2;,     }, ,     public final boolean hasPayload() {,         return false;,     }, ,     public final byte getEncodedTrack() {,         return Frame.L4;,     }, ,     public final boolean isConnectionControl(),     {,         return false;,     }, ,     private short packing_flags = 0;,     private ExecutionErrorCode errorCode;,     private int commandId;,     private short classCode;,     private short commandCode;,     private short fieldIndex;,     private String description;,     private Map<String,Object> errorInfo;, , ,     public ExecutionException() {}, , ,     public ExecutionException(ExecutionErrorCode errorCode, int commandId, short classCode, short commandCode, short fieldIndex, String description, Map<String,Object> errorInfo, Option ... _options) {,         if(errorCode != null) {,             setErrorCode(errorCode);,         },         setCommandId(commandId);,         setClassCode(classCode);,         setCommandCode(commandCode);,         setFieldIndex(fieldIndex);,         if(description != null) {,             setDescription(description);,         },         if(errorInfo != null) {,             setErrorInfo(errorInfo);,         }, ,         for (int i=0; i < _options.length; i++) {,             switch (_options[i]) {,             case SYNC: this.setSync(true); break;,             case BATCH: this.setBatch(true); break;,             case UNRELIABLE: this.setUnreliable(true); break;,             case NONE: break;,             default: throw new IllegalArgumentException("invalid option: " + _options[i]);,             },         }, ,     }, ,     public <C> void dispatch(C context, MethodDelegate<C> delegate) {,         delegate.executionException(context, this);,     }, , ,     public final boolean hasErrorCode() {,         return (packing_flags & 256) != 0;,     }, ,     public final ExecutionException clearErrorCode() {,         packing_flags &= ~256;,         this.errorCode = null;,         setDirty(true);,         return this;,     }, ,     public final ExecutionErrorCode getErrorCode() {,         return errorCode;,     }, ,     public final ExecutionException setErrorCode(ExecutionErrorCode value) {,         this.errorCode = value;,         packing_flags |= 256;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException errorCode(ExecutionErrorCode value) {,         return setErrorCode(value);,     }, ,     public final boolean hasCommandId() {,         return (packing_flags & 512) != 0;,     }, ,     public final ExecutionException clearCommandId() {,         packing_flags &= ~512;,         this.commandId = 0;,         setDirty(true);,         return this;,     }, ,     public final int getCommandId() {,         return commandId;,     }, ,     public final ExecutionException setCommandId(int value) {,         this.commandId = value;,         packing_flags |= 512;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException commandId(int value) {,         return setCommandId(value);,     }, ,     public final boolean hasClassCode() {,         return (packing_flags & 1024) != 0;,     }, ,     public final ExecutionException clearClassCode() {,         packing_flags &= ~1024;,         this.classCode = 0;,         setDirty(true);,         return this;,     }, ,     public final short getClassCode() {,         return classCode;,     }, ,     public final ExecutionException setClassCode(short value) {,         this.classCode = value;,         packing_flags |= 1024;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException classCode(short value) {,         return setClassCode(value);,     }, ,     public final boolean hasCommandCode() {,         return (packing_flags & 2048) != 0;,     }, ,     public final ExecutionException clearCommandCode() {,         packing_flags &= ~2048;,         this.commandCode = 0;,         setDirty(true);,         return this;,     }, ,     public final short getCommandCode() {,         return commandCode;,     }, ,     public final ExecutionException setCommandCode(short value) {,         this.commandCode = value;,         packing_flags |= 2048;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException commandCode(short value) {,         return setCommandCode(value);,     }, ,     public final boolean hasFieldIndex() {,         return (packing_flags & 4096) != 0;,     }, ,     public final ExecutionException clearFieldIndex() {,         packing_flags &= ~4096;,         this.fieldIndex = 0;,         setDirty(true);,         return this;,     }, ,     public final short getFieldIndex() {,         return fieldIndex;,     }, ,     public final ExecutionException setFieldIndex(short value) {,         this.fieldIndex = value;,         packing_flags |= 4096;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException fieldIndex(short value) {,         return setFieldIndex(value);,     }, ,     public final boolean hasDescription() {,         return (packing_flags & 8192) != 0;,     }, ,     public final ExecutionException clearDescription() {,         packing_flags &= ~8192;,         this.description = null;,         setDirty(true);,         return this;,     }, ,     public final String getDescription() {,         return description;,     }, ,     public final ExecutionException setDescription(String value) {,         this.description = value;,         packing_flags |= 8192;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException description(String value) {,         return setDescription(value);,     }, ,     public final boolean hasErrorInfo() {,         return (packing_flags & 16384) != 0;,     }, ,     public final ExecutionException clearErrorInfo() {,         packing_flags &= ~16384;,         this.errorInfo = null;,         setDirty(true);,         return this;,     }, ,     public final Map<String,Object> getErrorInfo() {,         return errorInfo;,     }, ,     public final ExecutionException setErrorInfo(Map<String,Object> value) {,         this.errorInfo = value;,         packing_flags |= 16384;,         setDirty(true);,         return this;,     }, ,     public final ExecutionException errorInfo(Map<String,Object> value) {,         return setErrorInfo(value);,     }, , , , ,     public void write(Encoder enc),     {,         enc.writeUint16(packing_flags);,         if ((packing_flags & 256) != 0),         {,             enc.writeUint16(this.errorCode.getValue());,         },         if ((packing_flags & 512) != 0),         {,             enc.writeSequenceNo(this.commandId);,         },         if ((packing_flags & 1024) != 0),         {,             enc.writeUint8(this.classCode);,         },         if ((packing_flags & 2048) != 0),         {,             enc.writeUint8(this.commandCode);,         },         if ((packing_flags & 4096) != 0),         {,             enc.writeUint8(this.fieldIndex);,         },         if ((packing_flags & 8192) != 0),         {,             enc.writeStr16(this.description);,         },         if ((packing_flags & 16384) != 0),         {,             enc.writeMap(this.errorInfo);,         }, ,     }, ,     public void read(Decoder dec),     {,         packing_flags = (short) dec.readUint16();,         if ((packing_flags & 256) != 0),         {,             this.errorCode = ExecutionErrorCode.get(dec.readUint16());,         },         if ((packing_flags & 512) != 0),         {,             this.commandId = dec.readSequenceNo();,         },         if ((packing_flags & 1024) != 0),         {,             this.classCode = dec.readUint8();,         },         if ((packing_flags & 2048) != 0),         {,             this.commandCode = dec.readUint8();,         },         if ((packing_flags & 4096) != 0),         {,             this.fieldIndex = dec.readUint8();,         },         if ((packing_flags & 8192) != 0),         {,             this.description = dec.readStr16();,         },         if ((packing_flags & 16384) != 0),         {,             this.errorInfo = dec.readMap();,         }, ,     }, ,     public Map<String,Object> getFields(),     {,         Map<String,Object> result = new LinkedHashMap<String,Object>();, ,         if ((packing_flags & 256) != 0),         {,             result.put("errorCode", getErrorCode());,         },         if ((packing_flags & 512) != 0),         {,             result.put("commandId", getCommandId());,         },         if ((packing_flags & 1024) != 0),         {,             result.put("classCode", getClassCode());,         },         if ((packing_flags & 2048) != 0),         {,             result.put("commandCode", getCommandCode());,         },         if ((packing_flags & 4096) != 0),         {,             result.put("fieldIndex", getFieldIndex());,         },         if ((packing_flags & 8192) != 0),         {,             result.put("description", getDescription());,         },         if ((packing_flags & 16384) != 0),         {,             result.put("errorInfo", getErrorInfo());,         }, , ,         return result;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC,org/apache/qpid/transport/SessionTimeoutTest.java,,76-78,[        {,             super(connection, name, expiry);,         }],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/transport/Struct.java,encoded,86-86,[        return !packed() || !isBit(f) && f.has(this);],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/transport/Struct.java,getPaddWidth,96-98,[        int pw = getPackWidth() - getFlagWidth();,         assert pw > 0;,         return pw;],,
PERFORMANCE,UPM_UNCALLED_PRIVATE_METHOD,org/apache/qpid/transport/Struct.java,getReservedFlagCount,108-108,[        return getFlagCount() - getFields().size();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/transport/codec/AbstractDecoder.java,read,452-452,[            return new String(readBytes(t));],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/transport/codec/AbstractDecoder.java,,49-52,[    {,         @Override protected boolean removeEldestEntry(Map.Entry<Binary,String> me),         {,             return size() > 4*1024;],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/transport/codec/AbstractEncoder.java,write,608-609,[            writeBytes(t, coerce(byte[].class, value));,             break;],,write,615-615,[            writeBytes(t, coerce(byte[].class, value));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/transport/codec/AbstractEncoder.java,write,587-587,[            writeBytes(t, coerce(String.class, value).getBytes());],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/transport/codec/AbstractEncoder.java,,69-72,[    {,         @Override protected boolean removeEldestEntry(Map.Entry<String,byte[]> me),         {,             return size() > 4*1024;],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/transport/network/InputHandler.java,<init>,75-81,[        switch (state),         {,         case PROTO_HDR:,             needed = 8;,             break;,         case FRAME_HDR:,             needed = Frame.HEADER_SIZE;],,
STYLE,REC_CATCH_EXCEPTION,org/apache/qpid/transport/network/io/IoReceiver.java,run,213-213,[        catch (Exception t)],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/transport/network/io/IoSender.java,close,219-219,[                notEmpty.notify();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/transport/network/io/IoSender.java,flush,198-198,[                notEmpty.notify();],,
MT_CORRECTNESS,NO_NOTIFY_NOT_NOTIFYALL,org/apache/qpid/transport/network/io/IoSender.java,run,322-322,[                    notFull.notify();],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/transport/network/security/ssl/SSLReceiver.java,received,166-169,[                        handshakeStatus = engine.getHandshakeStatus();, ,                     case FINISHED:,                         if (_hostname != null)],,received,171-176,[                            SSLUtil.verifyHostname(engine, _hostname);,                         },                             ,                     case NEED_WRAP:                        ,                     case NOT_HANDSHAKING:,                         synchronized(_sslStatus.getSslLock())],,
STYLE,SF_SWITCH_FALLTHROUGH,org/apache/qpid/transport/network/security/ssl/SSLSender.java,send,247-251,[                        SSLUtil.verifyHostname(engine, _hostname);,                     },                     ,                 case NOT_HANDSHAKING:,                     break; //do  nothing],,
I18N,DM_CONVERT_CASE,org/apache/qpid/transport/network/security/ssl/SSLUtil.java,verifyHostname,136-136,[            final String hostName = hostnameExpected.trim().toLowerCase();],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/transport/network/security/ssl/SSLUtilTest.java,getSSLEngineAfterHandshake,193-213,[            switch (clientStatus),             {,                 case NEED_TASK:,                     clientEngine.getDelegatedTask().run();,                     break;,                 case NEED_WRAP:,                     ByteBuffer dst = ByteBuffer.allocate(1024*1024);,                     clientEngine.wrap(ByteBuffer.allocate(0), dst);,                     dst.flip();,                     byte[] output = new byte[clientOutput.length+dst.remaining()];,                     System.arraycopy(clientOutput,0,output,0,clientOutput.length);,                     dst.get(output, clientOutput.length, dst.remaining());,                     clientOutput = output;,                     break;,                 case NEED_UNWRAP:,                     ByteBuffer unwrapDst = ByteBuffer.allocate(1024*1024);,                     ByteBuffer src = ByteBuffer.wrap(clientInput);,                     clientEngine.unwrap(src, unwrapDst);,                     byte[] input = new byte[src.remaining()];,                     src.get(input,0,src.remaining());,                     clientInput = input;],,getSSLEngineAfterHandshake,219-241,[            switch (serverStatus),             {,                 case NEED_TASK:,                     serverEngine.getDelegatedTask().run();,                     break;,                 case NEED_WRAP:,                     ByteBuffer dst = ByteBuffer.allocate(1024*1024);,                     serverEngine.wrap(ByteBuffer.allocate(0), dst);,                     dst.flip();,                     byte[] serverOutput = new byte[clientInput.length+dst.remaining()];,                     System.arraycopy(clientInput,0,serverOutput,0,clientInput.length);,                     dst.get(serverOutput, clientInput.length, dst.remaining());,                     clientInput = serverOutput;,                     break;, ,                 case NOT_HANDSHAKING:,                 case NEED_UNWRAP:,                     ByteBuffer unwrapDst = ByteBuffer.allocate(1024*1024);,                     ByteBuffer src = ByteBuffer.wrap(clientOutput);,                     serverEngine.unwrap(src, unwrapDst);,                     byte[] input = new byte[src.remaining()];,                     src.get(input,0,src.remaining());,                     clientOutput = input;],,
CORRECTNESS,INT_BAD_COMPARISON_WITH_SIGNED_BYTE,org/apache/qpid/transport/util/Functions.java,str,78-78,[            if (c > 31 && c < 127 && c != '\\')],,
MT_CORRECTNESS,WA_NOT_IN_LOOP,org/apache/qpid/transport/util/Waiter.java,await,54-54,[            lock.wait(timeout - elapsed);],,
STYLE,SF_SWITCH_NO_DEFAULT,org/apache/qpid/typedmessage/TypedBytesContentReader.java,readObject,547-601,[            switch (wireType),             {,                 case BOOLEAN_TYPE:,                     checkAvailable(1);,                     result = readBooleanImpl();,                     break;,                 case BYTE_TYPE:,                     checkAvailable(1);,                     result = readByteImpl();,                     break;,                 case BYTEARRAY_TYPE:,                     checkAvailable(4);,                     int size = _data.getInt();,                     if (size == -1),                     {,                         result = null;,                     },                     else,                     {,                         _byteArrayRemaining = size;,                         byte[] bytesResult = new byte[size];,                         readBytesImpl(bytesResult);,                         result = bytesResult;,                     },                     break;,                 case SHORT_TYPE:,                     checkAvailable(2);,                     result = readShortImpl();,                     break;,                 case CHAR_TYPE:,                     checkAvailable(2);,                     result = readCharImpl();,                     break;,                 case INT_TYPE:,                     checkAvailable(4);,                     result = readIntImpl();,                     break;,                 case LONG_TYPE:,                     checkAvailable(8);,                     result = readLongImpl();,                     break;,                 case FLOAT_TYPE:,                     checkAvailable(4);,                     result = readFloatImpl();,                     break;,                 case DOUBLE_TYPE:,                     checkAvailable(8);,                     result = readDoubleImpl();,                     break;,                 case NULL_STRING_TYPE:,                     result = null;,                     break;,                 case STRING_TYPE:,                     checkAvailable(1);,                     result = readStringImpl();],,
STYLE,DB_DUPLICATE_SWITCH_CLAUSES,org/apache/qpid/url/BindingURLParser.java,next,156-157,[                _index++; // skip '?',                 return BindingURLParserState.PROPERTY_NAME;],,next,172-173,[                _index++; // skip '&',                 return BindingURLParserState.PROPERTY_NAME;],,
PERFORMANCE,WMI_WRONG_MAP_ITERATOR,org/apache/qpid/url/BindingURLParser.java,processOptions,419-419,[            if (_options.get(key) instanceof String)],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/util/ByteBufferInputStreamTest.java,setUp,36-36,[        _inputStream = new ByteBufferInputStream(ByteBuffer.wrap(_data));],,
BAD_PRACTICE,RR_NOT_CHECKED,org/apache/qpid/util/ByteBufferInputStreamTest.java,testAvailable,86-86,[        _inputStream.read(readBytes);],,
BAD_PRACTICE,SR_NOT_CHECKED,org/apache/qpid/util/ByteBufferInputStreamTest.java,testSkip,70-70,[        _inputStream.skip(3);],,
BAD_PRACTICE,DM_EXIT,org/apache/qpid/util/CommandLineParser.java,processCommandLine,628-628,[            System.exit(1);],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/util/CommandLineParserTest.java,testGetErrorsReturnsStringOnErrors,124-124,[            !((parser.getErrors() == null) || "".equals(parser.getErrors())));],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/util/CommandLineParserTest.java,testGetOptionsInForceReturnsNonEmptyStringAfterParsing,165-165,[            !((parser.getOptionsInForce() == null) || "".equals(parser.getOptionsInForce())));],,
STYLE,RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,org/apache/qpid/util/CommandLineParserTest.java,testGetUsageReturnsString,184-184,[            !((parser.getUsage() == null) || "".equals(parser.getUsage())));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/FileUtils.java,readFileAsString,98-98,[            return new String(readStreamAsString(is));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/FileUtils.java,readFileAsString,83-83,[        return new String(readFileAsBytes(filename));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/FileUtils.java,searchFile,393-393,[        BufferedReader reader = new BufferedReader(new FileReader(file));],,
STYLE,NP_DEREFERENCE_OF_READLINE_VALUE,org/apache/qpid/util/FileUtils.java,searchFile,399-399,[                if (line.contains(search))],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtils.java,copyRecursive,364-364,[        for (File file : source.listFiles())],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtils.java,deleteDirectory,269-269,[            if (directory.listFiles().length == 0)],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtils.java,copy,226-226,[                dst.createNewFile();],,
STYLE,DMI_HARDCODED_ABSOLUTE_FILENAME,org/apache/qpid/util/FileUtilsTest.java,testOpenFileOrDefaultResourceOpensDefaultResource,362-362,[        final File fileThatDoesNotExist = new File("/does/not/exist.properties");],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/FileUtilsTest.java,createTestFile,227-227,[            writer = new BufferedWriter(new FileWriter(test));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/FileUtilsTest.java,prepareFileForSearchTest,688-688,[        BufferedWriter writer = new BufferedWriter(new FileWriter(logfile));],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testCopyFile,67-67,[            int afterCopy = test.getAbsoluteFile().getParentFile().listFiles().length;],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testCopyFile,69-69,[            int afterCopyFromCopy = new File(fileNameCopy).getAbsoluteFile().getParentFile().listFiles().length;],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testCopyFile,58-58,[            int beforeCopy = beforeCopyFileList.length;],,testCopyFile,57-57,[            beforeCopyFileList = test.getAbsoluteFile().getParentFile().listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testDeleteFile,283-283,[        int fileCountCreated = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles().length;],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testDeleteFile,293-293,[        int fileCountAfter = filesAfter.length;],,testDeleteFile,292-292,[        File[] filesAfter = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testDeleteFile,266-266,[        int fileCountBefore = filesBefore.length;],,testDeleteFile,265-265,[        File[] filesBefore = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testEmptyDirectoryDelete,492-492,[        int fileCountAfter = filesAfter.length;],,testEmptyDirectoryDelete,491-491,[        File[] filesAfter = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testEmptyDirectoryDelete,476-476,[        int fileCountBefore = filesBefore.length;],,testEmptyDirectoryDelete,475-475,[        File[] filesBefore = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testNonEmptyDirectoryDelete,544-544,[        int fileCountAfter = filesAfter.length;],,testNonEmptyDirectoryDelete,543-543,[        File[] filesAfter = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testNonEmptyDirectoryDelete,510-510,[        int fileCountBefore = filesBefore.length;],,testNonEmptyDirectoryDelete,509-509,[        File[] filesBefore = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testNonRecursiveNonEmptyDirectoryDeleteFails,461-461,[        int fileCountAfter = filesAfter.length;],,testNonRecursiveNonEmptyDirectoryDeleteFails,460-460,[        File[] filesAfter = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testNonRecursiveNonEmptyDirectoryDeleteFails,426-426,[        int fileCountBefore = filesBefore.length;],,testNonRecursiveNonEmptyDirectoryDeleteFails,425-425,[        File[] filesBefore = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testRecursiveDelete,583-583,[        int fileCountAfter = filesAfter.length;],,testRecursiveDelete,582-582,[        File[] filesAfter = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
STYLE,NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,org/apache/qpid/util/FileUtilsTest.java,testRecursiveDelete,562-562,[        int fileCountBefore = filesBefore.length;],,testRecursiveDelete,561-561,[        File[] filesBefore = new File(path.substring(0, path.lastIndexOf(File.separator))).listFiles();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,createSubDir,616-616,[                subFile.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,createSubDir,601-601,[            subDir.mkdir();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,createTestFile,215-215,[            test.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testDeleteFile,270-270,[            test.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testEmptyDirectoryDelete,480-480,[        test.mkdir();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testNonEmptyDirectoryDelete,519-519,[            subFile.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testNonEmptyDirectoryDelete,512-512,[        test.mkdir();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testNonRecursiveNonEmptyDirectoryDeleteFails,437-437,[            subFile.createNewFile();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testNonRecursiveNonEmptyDirectoryDeleteFails,430-430,[        test.mkdir();],,
BAD_PRACTICE,RV_RETURN_VALUE_IGNORED_BAD_PRACTICE,org/apache/qpid/util/FileUtilsTest.java,testRecursiveDelete,564-564,[        test.mkdir();],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/util/GZIPUtils.java,compressBufferToArray,78-78,[        return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/util/GZIPUtils.java,uncompressBufferToArray,92-92,[            return null;],,
STYLE,PZLA_PREFER_ZERO_LENGTH_ARRAYS,org/apache/qpid/util/GZIPUtils.java,uncompressStreamToArray,117-117,[        return null;],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/util/GZIPUtilsTest.java,,53-57,[        {,             @Override,             public int read() throws IOException,             {,                 throw new IOException();],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/LogMonitor.java,countLinesInFile,292-292,[            br = new BufferedReader(new FileReader(_logfile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/LogMonitor.java,findMatches,135-135,[        LineNumberReader reader = new LineNumberReader(new FileReader(_logfile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/LogMonitor.java,findMatches,163-163,[        LineNumberReader reader = new LineNumberReader(new FileReader(_logfile));],,
I18N,DM_DEFAULT_ENCODING,org/apache/qpid/util/LogMonitor.java,waitForMessage,208-208,[            reader = new LineNumberReader(new FileReader(_logfile));],,
STYLE,RV_DONT_JUST_NULL_CHECK_READLINE,org/apache/qpid/util/LogMonitor.java,countLinesInFile,293-293,[            while(br.readLine() != null)],,
CORRECTNESS,IJU_SETUP_NO_SUPER,org/apache/qpid/util/LogMonitorTest.java,setUp,39-39,[        _monitor = new LogMonitor();],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/util/LogMonitorTest.java,,257-271,[        {, ,             public void run(),             {,                 try,                 {,                     Thread.sleep(delay);,                 },                 catch (InterruptedException e),                 {,                     //ignore,                 }, ,                 LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME).warn(message);,             }],,
PERFORMANCE,SIC_INNER_SHOULD_BE_STATIC_ANON,org/apache/qpid/util/StringsTest.java,,37-41,[                                                                           {,                                                                                {,                                                                                    put("\\", "\\\\");,                                                                                    put("\"", "\\\"");,                                                                                }],,
I18N,DM_CONVERT_CASE,org/apache/qpid/util/SystemUtils.java,<clinit>,44-44,[    private static final boolean _isWindows = _osName.toLowerCase().contains("windows");],,
I18N,DM_CONVERT_CASE,org/apache/qpid/util/SystemUtils.java,getOSConfigSuffix,105-105,[            return _osName.substring(0, _osName.indexOf(' ')).toLowerCase();],,
